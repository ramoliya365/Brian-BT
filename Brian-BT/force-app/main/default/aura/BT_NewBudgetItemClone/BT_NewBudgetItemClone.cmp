<aura:component implements="flexipage:availableForRecordHome,forceCommunity:availableForAllPageTypes,force:hasRecordId,force:lightningQuickAction,lightning:isUrlAddressable" access="global" controller="BudgetDAO">
    <aura:attribute name="isBudgetlinedelete" type="Boolean" default="false" />
    <aura:attribute name="pendingLabel" type="String" default="Pending Po's" access="global" />
    <aura:attribute name="BudgetlinePopupHeader" type="String" default="" />
    <aura:attribute name="budgetItemId" type="String" default="" />
    <aura:attribute name="BudgetlinePopupDescription" type="String" default="" />
    <aura:attribute name="isLoaded" type="Boolean" default="true" />
    <aura:attribute name="isFirstSearch" type="Boolean" default="true" />
    <aura:attribute name="TotalRecordsCopy" type="object" access="global" />
    <aura:attribute name="issearching" type="Boolean" default="false" />
    <aura:attribute name="UOMvalues" type="string" />
    <aura:attribute name="Notevalues" type="string" />
    <aura:attribute name="searchFilter" type="String" />
    <aura:attribute name="IconName" type="String" default="custom:custom5" />
    <aura:handler name="change" value="{!v.searchFilter}" action="{!c.doSearchBudget}" />
    <!-- <aura:handler name="searchBudget" event="c:BT_SearchBudgetLineEvent" action="{!c.doSearchBudget}"/> -->
    <!-- <aura:handler event="c:BT_SearchBudgetLineAppEvent" action="{!c.doSearchBudget}"/> -->
    <aura:attribute name="showSelectSchedule" type="Boolean" default="false" />
    <aura:attribute name="scheduleRecords" type="Schedule__c[]" access="public" />
    <aura:attribute name="selectedScheduleRecords" type="List" default="[]" access="public" />
    <aura:attribute name="isCreateNewSchedule" type="Boolean" default="false" />

    <!--<aura:handler event="force:refreshView" action="{!c.isRefreshed}" />-->
    <aura:attribute name="createNewSchedule" type="Boolean" default="false" />
    <aura:attribute name="newScheduleId" type="String" default="" />

    <aura:handler name="budgetItemEvent" event="c:BT_Budget_Item_Component_Event" action="{!c.eventAction}" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:handler event="force:showToast" action="{!c.handleSaveSuccess}" />
    <aura:handler name="onSaveSuccess" event="force:recordSaveSuccess" action="{!c.handleSaveSuccess}" />
    <aura:attribute name="recordId" type="string" />
    <aura:attribute name="groupFilter" type="string" />
    <aura:attribute name="budgetlineId" type="string" access="public" />
    <aura:attribute name="NoteId" type="string" access="public" />
    <aura:attribute name="listOfRecords" type="list" access="public" />

    <aura:handler name="onSelectEvt" event="c:BT_LookupEvent" action="{!c.handleLookUpEvent}" />

    <aura:attribute name="refreshGridAction" type="Aura.Action" default="{!c.refreshList}" />

    <aura:attribute name="newBi" type="Budget_Item__c" default="{ 'sobjectType': 'Budget_Item__c' }" access="public" />
    <aura:attribute name="newbudgetgrouprec" type="Budget_Line_Group__c" default="{ 'sobjectType': 'Budget_Line_Group__c'}" access="global" />

    <aura:attribute name="newBudgetLine" type="Budget_Item__c" default="{ 'sobjectType':'Budget_Item__c',
                                                                        'Name':'',
                                                                        'buildertek__Quantity__c':1}" access="global" />
    <aura:attribute name="selectedLookUpRecord" type="sObject" default="{}" />

    <aura:attribute name="newScheduleItemObj" type="Project_Task__c" default="{'sobjectType': 'Project_Task__c'}" access="public" />
    <aura:attribute name="newScheduledItems" type="Project_Task__c[]" access="public" />

    <aura:attribute name="newRFQ" type="RFQ__c" default="{ 'sobjectType': 'RFQ__c' }" access="public" />
    <aura:attribute name="newRFQItems" type="RFQ_Item__c[]" access="public" />

    <aura:attribute name="newPO" type="Purchase_Order__c" default="{ 'sobjectType': 'Purchase_Order__c' }" access="public" />
    <aura:attribute name="newPOItems" type="Purchase_Order_Item__c[]" access="public" />

    <!-- check existing po -->
    <aura:attribute name="isExistingPo" type="Boolean" default="false" access="public" />
    <aura:attribute name="selectedExistingPO" type="List" default="" access="public" />
    <!-- <aura:attribute name="selectedRecords" type="List" default="" access="public" /> -->

    
    <!-- end-->

    <!-- check existing tc -->
    <aura:attribute name="isExistingTc" type="Boolean" default="false" access="public" />
    <aura:attribute name="selectedExistingTC" type="List" default="" access="public" />
    <!-- end-->

    <!-- check existing tc -->
    <aura:attribute name="isExistingInvo" type="Boolean" default="false" access="public" />
    <aura:attribute name="selectedExistingINVO" type="List" default="" access="public" />
    <!-- end-->

    <aura:attribute name="newCO" type="Change_Order__c" default="{ 'sobjectType': 'Change_Order__c' }" access="public" />
    <aura:attribute name="newInvoice1" type="Account_Payable_Clone__c" default="{ 'sobjectType': 'Account_Payable_Clone__c' }" access="public" />
    <aura:attribute name="newInvoiceAR" type="Billings__c" default="{ 'sobjectType': 'Billings__c' }" access="public" />
    <aura:attribute name="newCOItems" type="Change_Order_Item__c[]" access="public" />
    <aura:attribute name="budgetLineItems" type="Object[]" access="public" />
    <aura:attribute name="budgetLineItemName" type="string" access="public" />

    <aura:attribute name="newInvoice" type="Billings__c" default="{ 'sobjectType': 'Billings__c' }" access="public" />
    <aura:attribute name="newInvoiceItems" type="Billable_Lines__c[]" access="public" />

    <aura:attribute name="newBill" type="Account_Payable__c" default="{ 'sobjectType': 'Account_Payable__c' }" access="public" />
    <aura:attribute name="newBilllineitems" type="Account_Payable_Item__c[]" access="public" />

    <aura:attribute name="newExpense" type="Expense__c" default="{ 'sobjectType': 'Expense__c' }" access="public" />


    <aura:attribute name="newSubContract" type="Contract__c" default="{ 'sobjectType': 'Contract__c' }" access="public" />
    <aura:attribute name="newSubContractItems" type="Contract__c[]" access="public" />

    <aura:attribute name="newRecord" type="Object" access="private" />
    <aura:attribute name="sampleNewRecord" type="Object" access="public" />
    <!-- access="private" -->
    <aura:attribute name="COCustomerRecordType" type="string" />
    <aura:attribute name="InvoiceCustomerRecordType" type="string" />
    <aura:attribute name="newRecordError" type="String" access="private" />
    <aura:attribute name="options" type="List" />
    <aura:attribute name="priorityOptions" type="List" />
    <aura:attribute name="pricebookoptions" type="List" />
    <aura:attribute name="pricebookName" type="string" />
    <aura:attribute name="productfamily" type="string" />
    <aura:attribute name="productfamilyoptions" type="List" />
    <aura:attribute name="listofproductfamily" type="List" />
    <aura:attribute name="Message" type="String" default="" />
    <aura:attribute name="costttypeoptions" type="List" />
    <aura:attribute name="budgetLineSubGroupName" type="String" />
    <aura:attribute name="budgetLineSubGroupDescription" type="String" />

    <!-- <aura:handler name="oSelectedRecordEvent" event="c:BT_LightningLookupEvent" action="{!c.handleComponentEvent}"/> -->
    <aura:attribute name="productId" type="string" />
    <aura:attribute name="productName" type="string" />

    <aura:attribute name="selectedRows" type="List" />
    <aura:attribute name="groupListSize" type="Integer" default="0" description="Section list size" />
    <aura:attribute name="deleteRecords" type="list" />
    <aura:attribute name="selectedCol" type="list" />
    <aura:attribute name="selectedList" type="list" />
    <aura:attribute name="selectedListCol" type="list" />

    <aura:attribute name="groups" type="List" description="section detail list" />
    <aura:attribute name="isContingency" type="Boolean" default="false" />
    <aura:attribute name="groupLoaded" type="Boolean" default="false" description="This boolean will be true once all section list loaded through aura itration." />
    <aura:attribute name="save" type="Aura.Action" description="Save action Reference action" />
    <aura:attribute name="columns" type="List" />
    <aura:attribute name="dummyData" type="List" />
    <aura:registerEvent name="ClearSelectedRecordEvent" type="c:BT_CLearLightningLookupEvent" />


    <aura:attribute name="budgetllinegroupName" type="string" />
    <aura:attribute name="budgetllinegroupdescription" type="string" />
    <aura:attribute name="costCodeFilter" type="string" />
    <aura:attribute name="selectedGroupRecord" type="sObject" default="{}" />
    <aura:attribute name="selectedTradeType" type="sObject" default="{}" />
    <aura:attribute name="selectedContractor" type="sObject" default="{}" />
    <aura:attribute name="listOfSearchRecords" type="List" description="Use,for store the list of search records which returns from apex class" />
    <aura:attribute name="selectedCostcode" type="sObject" default="{}" />

    <aura:attribute name="SearchKeyWord" type="string" />
    <!-- <aura:handler name="SelectedRecordEvent" event="c:BT_LightningLookupEvent" action="{!c.doInit}"/> -->
    <aura:handler name="oSelectedCheckboxValue" event="c:SelectedCheckboxValue" action="{!c.handleCheckboxEvent}" />
    <aura:handler name="oSelectedRecordEvent" event="c:BT_LightningLookupEvent" action="{!c.handleComponentEvent}" />
    <aura:attribute name="activeFilter" type="string" default="all" />
    <aura:attribute name="rawData" type="Object" />
    <aura:attribute name="checkboxValue" type="Boolean" default="false" />
    <aura:attribute name="Spinner" type="Boolean" default="false" />
    <aura:attribute name="ShowSpinner" type="Boolean" default="false" />
    <!--<aura:registerEvent name="checkboxSelect" type="c:SelectAllCheckBoxes"/>-->
    <aura:attribute name="parentAttribute" type="Boolean" default="false" />
    <aura:attribute name="clearLookupValue" type="Aura.Action" />
    <!-- Handler -->
    <aura:attribute name="FinalSelectedList" type="List" />
    <aura:attribute name="selectedColumns" type="List" />
    <aura:method name="refreshData" action="{!c.doInit}" access="global" />
    <aura:attribute name="InnerList" type="Object" />
    <aura:attribute name="isSelectAll" type="boolean" default="false" />
    <aura:attribute name="Table_header_Records" type="object" access="global" />
    <aura:attribute name="TotalRecords" type="object" access="global" />
    <aura:attribute name="isOpen" type="boolean" default="false" />
    <aura:attribute name="isremovegroup" type="boolean" default="false" />
    <aura:attribute name="isnewbudgetgroup" type="boolean" default="false" />
    <aura:attribute name="isNewBudgetSubGroup" type="boolean" default="false" />
    <aura:attribute name="massUpdateEnable" type="Boolean" default="false" />


    <aura:attribute name="quoteItemId" type="String" />
    <aura:attribute name="groupingid" type="String" />
    <aura:attribute name="budgetrecid" type="String" />
    <aura:attribute name="isEditMode" type="boolean" default="false" />
    <aura:attribute name="fieldName" type="String" />
    <aura:attribute name="datalist" type="list" />
    <aura:attribute name="fieldslist" type="list" />
    <aura:attribute name="editedGroupId" type="String" />
    <aura:attribute name="QuoteString" type="String" />
    <aura:attribute name="showButtons" type="boolean" default="false" />
    <aura:attribute name="budgetList" type="Budget_Item__c[]" />
    <aura:attribute name="fieldType" type="String" />
    <aura:attribute name="previousId" type="string" />
    <aura:attribute name="allFields" type="list" />
    <aura:attribute name="fieldsType" type="string" />
    <aura:attribute name="customModalCss" type="string" />
    <aura:attribute name="groupIds" type="list" />
    <aura:attribute name="allFieldsList" type="list" />
    <aura:attribute name="newItemList" type="list" />
    <aura:attribute name="finalList" type="list" />
    <aura:attribute name="recordIdList" type="list" />
    <aura:attribute name="finalString" type="object" />

    <!-- Mass Functionality Start -->
    <aura:attribute name="currentId" type="String" />
    <aura:attribute name="isDuplicate" type="Boolean" default="false" />
    <aura:attribute name="isMassDuplicate" type="Boolean" default="false" />
    <aura:attribute name="duplicateRecs" type="List" default="[]" />
    <aura:attribute name="selectedRecs" type="List" default="[]" />
    <aura:attribute name="enableMassUpdate" type="boolean" default="false" />
    <aura:attribute name="isChangeData" type="Boolean" default="false" />
    <aura:attribute name="isExpenseUpdate" type="Boolean" default="false" />

    <!-- Mass Functionality End -->
    <aura:attribute name="isNewExpense" type="Boolean" default="false" />
    <aura:attribute name="expenseDescription" type="String" />
    <aura:attribute name="expensebudget" type="string" />
    <aura:attribute name="expenseType" type="String" default="Material" />
    <aura:attribute name="expenseCostCode" type="String" />
    <aura:attribute name="expensePaymentMethod" type="String" />
    <aura:attribute name="expenseRefNo" type="String" />
    <aura:attribute name="expenseAmount" type="String" />
    <aura:attribute name="expenseNote" type="String" />
    <aura:attribute name="duplicateExp" type="Boolean" default="false" />

    <aura:attribute name="addposection" type="Boolean" default="false" />
    <aura:attribute name="addtcsection" type="Boolean" default="false" />
    <aura:attribute name="addinvsection" type="Boolean" default="false" />
    <aura:attribute name="recordList" type="Purchase_Order__c[]" />
    <aura:attribute name="PageNumber" type="integer" default="1" />
    <aura:attribute name="pageSize" type="integer" default="15" />
    <aura:attribute name="TotalPages" type="integer" default="0" />
    <aura:attribute name="TotalRecord" type="integer" default="0" />
    <aura:attribute name="RecordStart" type="integer" default="0" />
    <aura:attribute name="RecordEnd" type="integer" default="0" />
    <aura:attribute name="currencycode" type="String" />
    <aura:attribute name="multicurrency" type="Boolean" />
    <!-- Pagination Start -->

    <aura:attribute name="page" type="integer" description="using for store page Number" />
    <aura:attribute name="pages" type="integer" description="using for store All Pages page Number" />
    <aura:attribute name="total" type="integer" description="total records count store " />
    <aura:attribute name="budgetName" type="String" default="" />
    <aura:attribute name="budgetId" type="String" />
    <aura:attribute name="isbudget" type="Boolean" default="false" />
    <aura:attribute name="currentTab" type="String" default="" />
    <aura:attribute name="isDescription" type="boolean" default="false" />
    <lightning:workspaceAPI aura:id="workspace" />
    <aura:attribute name="groupByVendortoggle" type="Boolean" default="false" />
    <aura:attribute name="groupBytoggle" type="Boolean" default="false" />
    <aura:attribute name="groupBytoggle1" type="Boolean" default="false" />
    <aura:attribute name="groupByVendortoggle1" type="Boolean" default="false" />
    <aura:attribute name="groupBytoggle2" type="Boolean" default="true" />
    <aura:attribute name="groupByVendortoggle2" type="Boolean" default="true" />
    <aura:attribute name="Isbtvalue" type="Boolean" default="false" />
    <aura:attribute name="groupByCostCode" type="Boolean" default="false" />

    <aura:attribute name="vendorIsThere" type="Boolean"  default="false" />



    <!-- Pagination End -->


    <!-- Add CO Data Start -->
    <aura:attribute name="addcosection" type="Boolean" default="false" />
    <aura:attribute name="addExpenseSection" type="Boolean" default="false" />
    <aura:attribute name="coRecordList" type="Change_Order__c[]" />
    <aura:attribute name="ExpenseRecordList" type="Expense__c[]" />
    <aura:attribute name="selectedExistingCO" type="String" default="" access="public" />
    <aura:attribute name="disableAddCO" type="Boolean" default="false" />
    <!--  End -->

    <aura:attribute name="isExpandGrp" type="Boolean" default="false" />
    <aura:attribute name="isSelected" type="Boolean" />


    <force:recordData aura:id="newforcerecord" layoutType="FULL" recordId="{!v.recordId}" targetRecord="{!v.newRecord}" targetFields="{!v.sampleNewRecord}" targetError="{!v.newRecordError}" />


    <c:BT_Spinner />
    <div style="background: white;border-radius: 5px;height: 100%;" class="slds-scrollable">
        <aura:if isTrue="{!v.isbudget}">
            <div class="slds-modal__header" style="font-size:17px;">
                <a href="{!'/'+v.budgetId}" onclick="{!c.closetab}">{!v.budgetName} </a>
            </div>
        </aura:if>
        <div id="mainContainer">

            <div>

                <div>

                    <!-- <div style="float: right;" class="slds-p-right_small">
                             <lightning:input
                                             autocomplete="off"
                                             aura:id="searchItem"
                                             name="enter-search"
                                             type="search"
                                             placeholder="Search"
                                             value="{!v.searchFilter}"
                                             onkeyup="{!c.doSearch}" 
                                             />
                        </div> -->
                    <div style="display:flex;justify-content:end;" class="slds-m-top_medium slds-m-bottom_medium slds-m-right_small">
                        <!-- <div style="display:flex;">
                            <div style="width: fit-content;">
                                <lightning:input aura:id="vendor" name="Group By Vendor" label="Group By Vendor" type="toggle" checked="{!v.groupByVendortoggle}" onclick="{!c.checkToogle}" />
                            </div>
                            <aura:if isTrue='{!v.Isbtvalue}'>
                                <div style="width: fit-content;">
                                    <lightning:input aura:id="Cost Code" name="Group By Cost Code" label="Group By Category" type="toggle" checked="{!v.groupByVendortoggle2}" onclick="{!c.checkToogle2}" />
                                </div>
                                <aura:set attribute="else">
                                    <div style="width: fit-content;">
                                        <lightning:input aura:id="Cost Code1" name="Group By Cost Code1" label="Group By Category" type="toggle" checked="{!v.groupByVendortoggle1}" onclick="{!c.checkToogle1}" />
                                    </div>
                                </aura:set>
                            </aura:if>

                            <div style="width: fit-content;">
                                <lightning:input label="Group By Cost Code" type="toggle" checked="{!v.groupByCostCode}" onchange="{!c.toggleByCost}"/>
                            </div>
                            
                        </div> -->

                        <div>

                            <lightning:buttonGroup>

                                &nbsp;
                                <aura:if isTrue="{!v.enableMassUpdate}">

                                    <lightning:button iconName="utility:save" iconPosition="left" onclick="{!c.onClickMassUpdate}" label="Save" class="sldsButtonGroup" />

                                    <lightning:button iconName="utility:close" iconPosition="left" onclick="{!c.onClickMassUpdateCancel}" label="Cancel" class="sldsButtonGroup" />
                                    <aura:set attribute="else">
                                        <lightning:button iconName="utility:edit" iconPosition="left" onclick="{!c.onClickMassUpdate}" label="Mass Update" class="sldsButtonGroup" />
                                        <!--  <lightning:button iconName="utility:copy" iconPosition="left"
                                                          onclick="{!c.onClickMassDuplicate}" label="Duplicate Lines" class="sldsButtonGroup" />-->
                                        <!--  <lightning:button onclick="{!c.newbudgetGroup}" label="Add Group" class="sldsButtonGroup" /> -->
                                        <!-- <lightning:button onclick="{!c.newBudgetSubGroup}" label="Add Sub Group"
                            class="sldsButtonGroup" /> -->
                                        <!-- commented on 26thmay DFL <lightning:button iconName="utility:add" iconPosition="left" onclick="{!c.newGroup}" label="Add Group" class="sldsButtonGroup"/>-->
                                        <!--<aura:if isTrue="{!v.groupListSize > 0}">-->
                                        <lightning:button label="Add Expense" onclick="{!c.addExpense}" class="sldsButtonGroup" />
                                        <lightning:button label="Add CO" onclick="{!c.addCO}" class="sldsButtonGroup" />
                                        <lightning:button label="Add PO" onclick="{!c.addPO}" class="sldsButtonGroup" />
                                        <lightning:button label="Add Invoice" onclick="{!c.addInvoice}" class="sldsButtonGroup" />
                                        <lightning:button label="Add Labor" onclick="{!c.addTimeCard}" class="sldsButtonGroup" />
                                        <lightning:button iconPosition="left" onclick="{!c.onClickAddlines}" label="New Budget Lines" class="sldsButtonGroup" />
                                        <!-- <lightning:button label="Add Product" onclick="{!c.addProduct}" class="sldsButtonGroup" />-->
                                        <!--  <lightning:button label="Create Scheduled Items" onclick="{!c.checkSchedules}" class="sldsButtonGroup"/>-->
                                        <!--createScheduleItem-->
                                        <lightning:button label="New Invoice (AP)" onclick="{!c.newInvoice}" class="sldsButtonGroup" />
                                        <lightning:button label="New Invoice (AR)" onclick="{!c.newInvoiceAR}" class="sldsButtonGroup" />
                                        <!-- <lightning:button label="New RFQ" onclick="{!c.newRFQ}" class="sldsButtonGroup" /> -->
                                        <lightning:button label="New CO" onclick="{!c.newCO}" class="sldsButtonGroup" disabled="{!v.disableAddCO}"/>
                                        <lightning:button label="New PO" onclick="{!c.newPO}" class="sldsButtonGroup" />
                                        <!-- <lightning:button label="New Expense" onclick="{!c.newExpense}" class="sldsButtonGroup" /> -->
                                        <!-- <lightning:button label="Contingency" onclick="{!c.onContingency}" class="sldsButtonGroup" /> -->
                                        <!-- commented on 26thmay DFL <lightning:button label="New Sub-Contract" onclick="{!c.newSubContract}" class="sldsButtonGroup"/>-->
                                        <!-- <lightning:button label="Import CSV" onclick="{!c.importCSV}"/> -->
                                        <!--  <lightning:button label="Save" onclick="{!c.saveQuoteItems}"/> -->
                                        <lightning:button label="Delete Lines" onclick="{!c.deleteSelectedBudgetItem}" class="sldsButtonGroup" />
                                        <!--</aura:if>-->
                                        <!--<div class="slds-align_absolute-center">-->
                                        <aura:if isTrue="{!v.showButtons}">
                                            <center>
                                                <!-- <lightning:buttonGroup class="slds-m-around_medium">-->
                                                <lightning:button label="Cancel" onclick="{!c.closeInlineEditForm}" class="sldsButtonGroup" />
                                                <lightning:button label="Save" onclick="{!c.SaveEditedValues}" variant="brand" class="sldsButtonGroup" />
                                                <!--</lightning:buttonGroup>  -->
                                            </center>
                                        </aura:if>
                                        <!-- </div>-->
                                    </aura:set>
                                </aura:if>

                            </lightning:buttonGroup>
                        </div>
                    </div>
                </div>
                <div aura:id="budgetItem" />
                <div class="av slds-box" id="{!v.recordId + 'groups'}" style="min-height:45vh;padding:0px !important;">
                    <div>
                        <aura:if isTrue="{!v.recordId != null}">
                            <div style="padding:10px;">
                                <div aura:id="inlineEditQuote" class="slds-m-top_medium slds-m-bottom_medium">
                                    <table class="slds-table slds-table_bordered slds-table_cell-buffer" style="border:1px solid grey;border-radius: 5px;">
                                        <thead style="border:1px solid rgb(216, 237, 255);">
                                            <tr class="slds-text-title_caps">
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white; border-top-left-radius:5px;">
                                                    <div class="slds-truncate" title="Pricebook">Pricebook</div>
                                                </th>
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white; ">
                                                    <div class="slds-truncate" title="Product Family">Product Family
                                                    </div>
                                                </th>
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white; ">
                                                    <div class="slds-truncate" title="Product">Product</div>
                                                </th>
                                                <th style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Quote Line Description">
                                                        Description
                                                    </div>
                                                </th>
                                                <!-- comment by laxman 08/07/2020
           <th style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                            <div class="slds-truncate" title="Quote Line">Cost Code Name</div>
                                        </th> -->
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Grouping">Phase</div>
                                                </th>
                                                <!--  <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Sub Grouping">Sub Group</div>
                                                </th> -->
                                                <!-- <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="UOM">UOM</div>
                                                </th> -->
                                                <!--  comment by laxman 08/07/2020
          <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                            <div class="slds-truncate" title="TradeType">Trade Type</div>
                                        </th> -->
                                                <!-- <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Contractor">Vendor</div>
                                                </th> -->
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Contractor">Cost Code</div>
                                                </th>
                                                <!-- <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Contractor">Notes</div>
                                                </th> -->
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Quantity">Quantity</div>
                                                </th>
                                                <th style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Unit Cost">Unit Cost</div>
                                                </th>
                                                <th style="background-color:rgba(27, 82, 151, 1.0); color:white;">
                                                    <div class="slds-truncate" title="Unit Cost">Unit Sales Price</div>
                                                </th>
                                                <th scope="col" style="background-color:rgba(27, 82, 151, 1.0); color:white; border-top-right-radius:5px;">
                                                    <div class="slds-truncate" title="Save">Save</div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="tableRow">
                                                <td>
                                                    <ui:inputSelect value="{!v.pricebookName }" change="{!c.changeEvent}" class="pricebook-class pointer1">
                                                        <aura:iteration var="option" items="{! v.pricebookoptions }">
                                                            <option value="{! option.value }" selected="{!option.value == v.pricebookName}">{! option.key }
                                                            </option>
                                                        </aura:iteration>
                                                    </ui:inputSelect>
                                                </td>

                                                <td>
                                                    <ui:inputSelect value="{!v.productfamily}" change="{!c.changefamily}" class="pricebook-class pointer1">
                                                        <option value="">--None--</option>
                                                        <aura:iteration var="option" items="{!v.listofproductfamily}">
                                                            <option value="{!option.productfamilyvalues}" >
                                                                {!option.productfamilyvalues}</option>
                                                        </aura:iteration>
                                                    </ui:inputSelect>

                                                </td>
                                                <td>
                                                    <c:BT_LightningLookup aura:id="productId" objectAPIName="Product2" IconName="standard:product" selectedRecord="{!v.selectedLookUpRecord}" parentId="{!v.pricebookName }" prodctfamly="{!v.productfamily}" />
                                                </td>
                                                <td>
                                                    <!--	<force:inputField value="{!v.newBudgetLine.Name}"/>-->
                                                    <ui:inputText value="{!v.newBudgetLine.Name}" aura:id="budgetLineID" />
                                                </td>
                                                <!--  <td>
                                            <c:BT_LookUp aura:id="costCodeId" _field="buildertek__Cost_Code__c" 
                                                         _sobject="buildertek__Budget_Item__c" 
                                                         _target_sobject="buildertek__Cost_Codes__c"
                                                         _value="{!v.newBudgetLine.buildertek__Cost_Code__c}"
                                                         _label=""
                                                         _filter="{!v.costCodeFilter}"
                                                         />
                                        </td> -->
                                                <td>
                                                    <c:BT_LookUp aura:id="groupId" _field="buildertek__Group__c" _sobject="buildertek__Budget_Item__c" _value="{!v.newBudgetLine.buildertek__Group__c}" _label="" _filter="" />
                                                </td>
                                                <!--  <td>
                                                    <c:BT_LookUp aura:id="subGroupId" _field="buildertek__Sub_Grouping__c"
                                                                 _sobject="buildertek__Budget_Item__c"
                                                                 _value="{!v.newBudgetLine.buildertek__Sub_Grouping__c}" _label=""
                                                                 _filter="" />
                                                </td> -->
                                                <!-- <td>
                                                    <ui:inputSelect value="{! v.newBudgetLine.buildertek__UOM__c }"
                                                                    class="select-class">
                                                        <aura:iteration var="option" items="{! v.options }">
                                                            <option value="{! option.value }">{! option.key }</option>
                                                        </aura:iteration>
                                                    </ui:inputSelect>
                                                    
                                                </td> -->
                                                <!-- <td>
                                                    <ui:inputSelect value="{! v.UOMvalues }" class="select-class pointer1">
                                                        <aura:iteration var="option" items="{! v.options }">
                                                            <option value="{! option.value }" selected="{!option.value == v.UOMvalues}">{! option.key }
                                                            </option>
                                                        </aura:iteration>
                                                    </ui:inputSelect>

                                                </td> -->
                                                <!--  <td>
                                            <c:customLookup aura:id="tradeTypeId" objectAPIName="buildertek__Trade_Type__c" IconName="custom:custom67" selectedRecord="{!v.selectedTradeType}"/>
                                        </td> -->
                                                <!-- <td>
                                                    <c:customLookup aura:id="accountId" objectAPIName="Account" IconName="standard:account" selectedRecord="{!v.selectedContractor}" />
                                                    <force:inputField aura:id="accountId" value="{!v.newBudgetLine.buildertek__Contractor__c}" />
                                                </td> -->
                                                
                                                <td>
                                                    <c:BT_LookUp aura:id="costCodeId" _field="buildertek__Cost_Code__c" _sobject="buildertek__Budget_Item__c" _value="{!v.newBudgetLine.buildertek__Cost_Code__c}" _label="" _filter="" />
                                                    <!--  <c:customLookup aura:id="costcodeId" objectAPIName="buildertek__Cost_Codes__c"
                                                                    IconName="standard:account" selectedRecord="{!v.selectedCostcode}" />-->
                                                    <!--<force:inputField aura:id="accountId" value="{!v.newBudgetLine.buildertek__Contractor__c}" />-->
                                                </td>
                                                <!-- <td>
                                                    <ui:inputTextArea value="{!v.newBudgetLine.buildertek__Notes__c}"/>
                                                </td> -->
                                                <td>
                                                    <!--<force:inputField value="{!v.newBudgetLine.buildertek__Quantity__c}"/>-->
                                                    <ui:inputNumber class="costInputField" value="{!v.newBudgetLine.buildertek__Quantity__c}" />
                                                </td>
                                                <td>
                                                    <!--<force:inputField value="{!v.newBudgetLine.buildertek__Unit_Price__c}" />-->
                                                    <ui:inputCurrency class="costInputField" value="{!v.newBudgetLine.buildertek__Unit_Price__c}" aura:id="unitPriceId" />
                                                </td>
                                                <td>
                                                    <ui:inputCurrency class="costInputField" value="{!v.newBudgetLine.buildertek__Sales_Price__c}" />
                                                </td>
                                                <td>
                                                    <lightning:buttonIcon iconName="utility:save" alternativeText="save" onclick="{!c.saveBudgetItemRecord}" />
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- expand/collapse buttons -->
                                <div class="slds-float_none" style="margin-bottom:15px;">
                                    <span style="display:none;" class="{!v.currentTab+' expandAllBtn_'+v.budgetId}" data-iconattr="{!'expandAllBtn_'+v.budgetId}" data-iconname="Expand All" onclick="{!c.expandCollapeAll}">
                                        <lightning:buttonIcon aura:id="expandCollapeseAllBtn" iconName="utility:add"
                                            variant="border-filled" iconClass="dark" alternativeText="Expand All"
                                            title="Expand All" class="pointer1" />
                                    </span>
                                    <span style="display:inline-block;" class="{!v.currentTab+' CollapeseAllBtn_'+v.budgetId}" data-iconattr="{!'CollapeseAllBtn_'+v.budgetId}" data-iconname="Collapse All" onclick="{!c.expandCollapeAll}">
                                        <lightning:buttonIcon aura:id="expandCollapeseAllBtn2" iconName="utility:dash"
                                            variant="border-filled" iconClass="dark" alternativeText="Collapse All"
                                            title="Collapse All" class="pointer1" />
                                    </span>
                                    <!-- <lightning:button aura:id="expandCollapeseAllBtn" variant="neutral" label="" title="Expand All"  iconName="utility:add" iconPosition="left" onclick="{!c.expandCollapeAll}"/> -->
                                </div>

                                <aura:if isTrue="{!v.total > 60}">
                                    <div class="slds-align_absolute-center">
                                        <lightning:button disabled="{!v.page == 1}" variant="brand" label="Previous" onclick="{! c.navigate }" />
                                        <lightning:button disabled="{!v.page == v.pages}" aura:id="previousPage" variant="brand" label="Next" onclick="{! c.navigate }" />
                                    </div>
                                </aura:if>
                            </div>
                            <!--<aura:if isTrue="{!and(v.groupListSize == 0, v.groupLoaded)}">-->
                            <!--<div class="av-list">
                            <div style="margin-top:5rem;">
                                <c:BT_Illustration name="Setup" title="Add Group to Start Budget"/>
                                
                            </div>
                        </div>-->

                            <!--<aura:set attribute="else">-->
                            <aura:if isTrue="{!v.isOpen}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.closeModel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Delete Budget Line</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                <center>
                                                    <h2>Are you sure you want to delete this Budget Line?</h2>
                                                </center>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{!c.closeModel}" />
                                                <lightning:button variant="brand" label="Delete" title="Delete" onclick="{!c.deleteBudgetItems}" />
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>

                            <aura:if isTrue="{!v.isremovegroup}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-0111" aria-modal="true" aria-describedby="modal-content-id-11" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.removegroupingcloseModel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                <h2 id="modal-heading-0111" class="slds-text-heading_medium slds-hyphenate">
                                                    Remove Grouping</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-11">
                                                <center>
                                                    <h2>Are you sure you want to remove the Grouping for these Budget Line?
                                                    </h2>
                                                </center>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning:button variant="neutral" label="No" title="No" onclick="{!c.removegroupingcloseModel}" />
                                                <lightning:button variant="brand" label="Yes" title="Yes" onclick="{!c.removegroupingBudgetItems}" />
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>


                            <aura:if isTrue="{!v.isnewbudgetgroup}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-0222" aria-modal="true" aria-describedby="modal-content-id-222" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container newbudgetgroupingclass">
                                            <header class="slds-modal__header">
                                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.newgroupcloseModel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                <h2 id="modal-heading-0222" class="slds-text-heading_medium slds-hyphenate">
                                                    Budget Line Group</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_large" id="modal-content-id-222">
                                                <lightning:layout multipleRows="true">

                                                    <lightning:layoutItem size="12" mediumDeviceSize="6" padding="around-small">
                                                        <lightning:input type="textarea" aura:id="gpnameid" value="{!v.budgetllinegroupName}" label="Name" />
                                                    </lightning:layoutItem>

                                                    <lightning:layoutItem size="12" mediumDeviceSize="6" padding="around-small">
                                                        <lightning:textarea aura:id="gpdescid" value="{!v.budgetllinegroupdescription}" label="Description" />
                                                    </lightning:layoutItem>

                                                </lightning:layout>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{!c.newgroupcloseModel}" />
                                                <lightning:button variant="brand" label="Save" title="Save" onclick="{!c.createnewbudgetlinegroup}" />
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>

                            <aura:if isTrue="{!v.isNewBudgetSubGroup}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-0222" aria-modal="true" aria-describedby="modal-content-id-222" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container newbudgetgroupingclass">
                                            <header class="slds-modal__header">
                                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.newGroupBudgetSubGroupClose}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                <h2 id="modal-heading-0222" class="slds-text-heading_medium slds-hyphenate">
                                                    Budget Line Sub Group</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_large" id="modal-content-id-222">
                                                <lightning:layout multipleRows="true">

                                                    <lightning:layoutItem size="12" mediumDeviceSize="6" padding="around-small">
                                                        <lightning:input type="textarea" aura:id="budgetLineSubGroupName" value="{!v.budgetLineSubGroupName}" label="Name" />
                                                    </lightning:layoutItem>

                                                    <lightning:layoutItem size="12" mediumDeviceSize="6" padding="around-small">
                                                        <lightning:textarea aura:id="budgetLineSubGroupDescription" value="{!v.budgetLineSubGroupDescription}" label="Description" />
                                                    </lightning:layoutItem>

                                                </lightning:layout>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{!c.newGroupBudgetSubGroupClose}" />
                                                <lightning:button variant="brand" label="Save" title="Save" onclick="{!c.createNewBudgetSubGroup}" />
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>

                            <aura:if isTrue="{!or(v.isDuplicate,v.isMassDuplicate)}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.closeDuplicateModel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">
                                                    <aura:if isTrue="{!v.isDuplicate}">
                                                        Duplicate Budget Line
                                                        <aura:set attribute="else">
                                                            Duplicate Budget Lines
                                                        </aura:set>
                                                    </aura:if>
                                                </h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                <center>
                                                    <h2>
                                                        <aura:if isTrue="{!v.isDuplicate}">
                                                            Are you sure you want to duplicate this Budget Line?
                                                            <aura:set attribute="else">
                                                                Are you sure you want to duplicate this Budget Lines?
                                                            </aura:set>
                                                        </aura:if>
                                                    </h2>
                                                </center>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{!c.closeDuplicateModel}" />
                                                <aura:if isTrue="{!v.isDuplicate}">
                                                    <lightning:button variant="brand" label="Duplicate" title="Duplicate" onclick="{!c.duplicateBudget}" />
                                                    <aura:set attribute="else">
                                                        <lightning:button variant="brand" label="Duplicate" title="Duplicate" onclick="{!c.onMassDuplicate}" />
                                                    </aura:set>
                                                </aura:if>
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>

                            <aura:if isTrue="{!v.isBudgetlinedelete}">
                                <div class="slds-m-around_xx-large">
                                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                                        <div class="slds-modal__container">
                                            <header class="slds-modal__header">
                                                <aura:if isTrue="{!v.isBudgetlinedelete}">
                                                    <lightning:buttonIcon iconName="utility:close" onclick="{!c.closeBudgetlineModel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                                </aura:if>

                                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">
                                                    {!v.BudgetlinePopupHeader}</h2>
                                            </header>
                                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                                <center>
                                                    <h2>{!v.BudgetlinePopupDescription}</h2>
                                                </center>
                                            </div>
                                            <footer class="slds-modal__footer">
                                                <aura:if isTrue="{!v.isBudgetlinedelete}">
                                                    <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{!c.closeBudgetlineModel}" />
                                                    <lightning:button variant="brand" label="Delete" title="Delete" onclick="{!c.deleteSelectedBudgetItemlines}" />
                                                </aura:if>
                                            </footer>
                                        </div>
                                    </section>
                                    <div class="slds-backdrop slds-backdrop_open"></div>
                                </div>
                            </aura:if>
                            <!-- <aura:if isTrue="{!v.isLoaded}"> -->



                            <div class="slds-scrollable" style="height:100%; padding:0px !important;">
                                <div>
                                    <!--height:30rem class="slds-scrollable"-->
                                    <table class="slds-table slds-table--bordered slds-max-medium-table--stacked-horizontal slds-m-right_small" aura:id="budgetLineItemTable">
                                        <thead></thead>
                                        <tbody>
                                            <aura:iteration items="{!v.TotalRecords.groupHierarchy}" var="group" indexVar="parentGroupIndex">
                                                <tr class="groupHeader">
                                                    <td></td>
                                                    <td colspan="{!v.TotalRecords.columns.length + 2}">
                                                        <div class="slds-grid">
                                                            <span style="display:none;" class="{!v.currentTab+' '+v.budgetId+' expandGrpIcon_'+parentGroupIndex}" data-grpindex="{!parentGroupIndex}" onclick="{!c.expandCollapseGroups}">
                                                                <lightning:icon iconName="utility:add" size="xx-small"
                                                                    alternativeText="add"
                                                                    style="border: 1px solid #b9b9b9; padding: 0.1rem 0.3rem 0.3rem 0.3rem"
                                                                    class="pointer1" />
                                                            </span>
                                                            <!-- <span style="display:none;" class="{!'hideCollapseIcon collapseGrpIcon_'+parentGroupIndex}" data-grpindex="{!parentGroupIndex}" onclick="{!c.expandCollapseGroups}"> -->
                                                            <span style="display:inline-block;" class="{!v.currentTab+' '+v.budgetId+' hideCollapseIcon collapseGrpIcon_'+parentGroupIndex}" data-grpindex="{!parentGroupIndex}" onclick="{!c.expandCollapseGroups}">
                                                                <lightning:icon iconName="utility:dash" size="xx-small"
                                                                    alternativeText="dash"
                                                                    style="border: 1px solid #b9b9b9; padding: 0.1rem 0.3rem 0.3rem 0.3rem"
                                                                    class="pointer1" />
                                                            </span>
                                                            <div class="slds-col slds-size_6-of-12" data-index='{!parentGroupIndex}' style="font-weight: 400;font-size:18px;margin-left:1rem">

                                                                {!group.groupName}

                                                            </div>
                                                            <!-- <div class="slds-col slds-size_6-of-12 slds-float_right">
                                                            </div> -->
                                                        </div>
                                                        <div class="slds-grid slds-gutters">
                                                            <div class="slds-col slds-size_1-of-12">
                                                            </div>
                                                        </div>

                                                    </td>
                                                </tr>
                                                <tr class="slds-text-heading--label" style="line-height: 2">
                                                    <th></th>
                                                    <th colspan="2" class="slds-is-sortable" scope="col" width="5px">
                                                        <div class="slds-form-element">
                                                            <div class="slds-form-element__control">
                                                                <div class="slds-checkbox">
                                                                    <input type="checkbox" checked="{!group.isSelected}" name="{!parentGroupIndex+'-'+subGroupIndex}" id="{!group.groupId}" onchange="{!c.handleSelectAll}" />
                                                                    <label class="slds-checkbox__label" for="{!group.groupId}">
                                                                        <span class="slds-checkbox_faux"></span>
                                                                        <span
                                                                            class="slds-form-element__label"></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </th>
                                                    <aura:iteration items="{!v.columns}" var="col">
                                                        <th class="{!and(and(and(col.fieldName!='Name',and(col.fieldName!='buildertek__Notes__c',col.fieldName!='buildertek__Cost_Code__c'),col.fieldName!='buildertek__UOM__c'),col.fieldName!='buildertek__Quantity__c'))?'slds-is-sortable inputCss':'slds-is-sortable'}"
                                                            scope="col">

                                                            <aura:if isTrue="{!and(col.fieldName !='buildertek__Old_Budget_Line__c',col.fieldName !='buildertek__CostCodeDivision__c')}">

                                                                <aura:if isTrue="{!col.title}">
                                                                    <div class="slds-truncate" title="{!col.title}" style="font-weight: 400;">
                                                                        {!col.label}
                                                                    </div>
                                                                    <aura:set attribute="else">
                                                                        <div class="slds-truncate" title="{!col.label}" style="font-weight: 400;">
                                                                            {!col.label}
                                                                        </div>
                                                                    </aura:set>
                                                                </aura:if>
                                                            </aura:if>
                                                        </th>
                                                    </aura:iteration>
                                                    
                                                </tr>
                                                <aura:iteration items="{!group.subGroupRecords}" var="subGroupRec" indexVar="subGroupIndex">
                                                    
                                                    <aura:iteration items="{!subGroupRec.records}" var="recs" indexVar="recIndex">

                                                        <tr class="{!v.currentTab+' '+v.budgetId+' groupRows_'+parentGroupIndex}" style="display:table-row;">
                                                            <!-- <tr class="{!'hideRows groupRows_'+parentGroupIndex}">-->

                                                            <td></td>
                                                            <!-- <td></td>-->
                                                            <td>

                                                                <div class="slds-form-element">
                                                                    <div class="slds-form-element__control">
                                                                        <div class="slds-checkbox">
                                                                            <input type="checkbox"  name="{!parentGroupIndex+'-'+subGroupIndex+'-'+recIndex+'-'+v.currentTab}" checked="{!recs.isSelected}" id="{!parentGroupIndex+'-'+subGroupIndex+'-'+recIndex+'-'+v.currentTab+'-'+v.budgetId}" onclick="{!c.unCheckAll}" />

                                                                            <label class="slds-checkbox__label" for="{!parentGroupIndex+'-'+subGroupIndex+'-'+recIndex+'-'+v.currentTab+'-'+v.budgetId}">
                                                                                <span class="slds-checkbox_faux"></span>
                                                                                <span
                                                                                    class="slds-form-element__label"></span>
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <!-- <lightning:input type="checkbox"
                                                                                     name="{!parentGroupIndex+'-'+subGroupIndex+'-'+recIndex}"
                                                                                     checked="{!recs.isSelected}" onchange="{!c.unCheckAll}" /> -->

                                                                <!-- <lightning:input type="checkbox"
                                                                                 name="{!parentGroupIndex+'-'+subGroupIndex+'-'+recIndex}"
                                                                                 checked="{!recs.isSelected}" onchange="{!c.unCheckAll}" /> -->

                                                            </td>
                                                            <td style="padding-left:0rem;">

                                                                <div class="slds-truncate">
                                                                    <span data-id="{!recs.recordId}" onclick="{!c.onclickDuplicate}" class="pointer1">
                                                                        <lightning:icon iconName="utility:copy"
                                                                            size="xx-small" title="Duplicate" />
                                                                        &nbsp;
                                                                    </span>
                                                                    <span data-id="{!recs.recordId}" onclick="{!c.editBudget}" class="pointer1">
                                                                        <lightning:icon iconName="utility:edit"
                                                                            size="xx-small" title="Edit" />
                                                                        &nbsp;
                                                                    </span>
                                                                    <span data-id="{!recs.recordId}" onclick="{!c.deleteBudget}" class="pointer1">
                                                                        <lightning:icon iconName="utility:delete"
                                                                            size="xx-small" title="Delete" />
                                                                    </span>
                                                                </div>
                                                            </td>

                                                            <td style="font-size: 0.78rem !important;">
                                                                <aura:if isTrue="{!v.enableMassUpdate}">
                                                                    <!-- component.set("v.isExpandGrp",false);
                                                                  <aura:if isTrue="{!v.isExpandGrp}">-->

                                                                    <lightning:input value="{!recs.recordName}" onchange="{!c.changeNameHandler}" style="padding-bottom:1.3rem !important;" />

                                                                    <aura:set attribute="else">
                                                                        <span style="white-space: pre-wrap;">
                                                                            <ui:outputURL
                                                                                value="{!'/one/one.app?#/sObject/'+ recs.recordId + '/view'}"
                                                                                target="_blank"
                                                                                label="{!recs.recordName}" />
                                                                        </span>
                                                                    </aura:set>

                                                                </aura:if>

                                                            </td>
                                                            <aura:iteration items="{!recs.recordList}" var="value" indexVar="groIndex">
                                                                <aura:if isTrue="{!value.fieldName != 'buildertek__Contractor__c' &amp;&amp; value.fieldName != 'buildertek__CostCodeDivision__c'}" >
                                                                    <td class="ShowIconClass" data-myvalue="{!groIndex}" style="font-size: 0.78rem !important;">
                                                                        <aura:if isTrue="{!or(and(and(v.isEditMode, v.fieldName == value.fieldName), v.quoteItemId == recs.recordId),and(v.enableMassUpdate,
                                                                                        or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(or(
                                                                                        value.fieldName=='Name',
                                                                                        value.fieldName=='buildertek__Sales_Price__c'),
                                                                                        value.fieldName=='buildertek__Unit_Price__c'),value.fieldName == 'buildertek__Cost_Code_Name__c'),
                                                                                        value.fieldName=='buildertek__Notes__c'),value.fieldName == 'buildertek__UOM__c'),
                                                                                        value.fieldName=='buildertek__Cost_Code__c'),value.fieldName=='buildertek__Quantity__c'),
                                                                                        value.fieldName=='buildertek__Amount_In__c'),value.fieldName=='buildertek__Amount_Out_2__c'),
                                                                                        value.fieldName=='buildertek__Base_Sq_Feet__c'),value.fieldName=='buildertek__Budget__c'),
                                                                                        value.fieldName=='buildertek__Item_Name__c'),value.fieldName=='buildertek__Forecast_To_Complete__c'),
                                                                                        value.fieldName=='buildertek__Cost_Type__c'),value.fieldName=='buildertek__Description__c'),
                                                                                        value.fieldName=='buildertek__Discount__c'),value.fieldName=='buildertek__Eligible_Amount__c'),
                                                                                        value.fieldName=='buildertek__Group__c'),value.fieldName=='buildertek__Complete__c'),
                                                                                        value.fieldName=='buildertek__Previously_Billed__c'),value.fieldName=='buildertek__Product__c'),
                                                                                        value.fieldName=='buildertek__Regional_Factor__c'),value.fieldName=='buildertek__Trade_Type__c'),
                                                                                        value.fieldName=='buildertek__Upgrades__c'),value.fieldName=='buildertek__Contractor__c'), value.fieldName=='buildertek__Markup__c'), value.fieldName=='buildertek__Tax__c')  
                                                                                        )))}">

                                                                            <aura:if isTrue="{!value.fieldType != 'picklist'}">
                                                                                <!--  <aura:if isTrue="{!value.fieldName == 'buildertek__Cost_Code_Name__c'}">
                                                                                    <ui:inputText aura:id="inputId"
                                                                                                    value="{!value.originalValue}"
                                                                                                    change="{!c.updateQuoteData}"
                                                                                                    blur="{!c.onblur}" />
                                                                                </aura:if>-->
                                                                                <aura:if isTrue="{!value.fieldType == 'reference'}">
                                                                                    <c:BT_LookupFields childObjectName="buildertek__Budget_Item__c" selectedRecordId="{!value.originalValue}" fieldName="{!value.fieldName}" index="{!recIndex}" groupindex="{!groIndex}" />
                                                                                    <aura:set attribute="else">
                                                                                        <aura:if isTrue="{!value.fieldType == 'string'}">
                                                                                            <ui:inputText aura:id="inputId" value="{!value.originalValue}" change="{!c.updateQuoteData}" blur="{!c.onblur}" />
                                                                                            <aura:set attribute="else">
                                                                                                <ui:inputNumber aura:id="inputId" value="{!value.originalValue}" change="{!c.updateQuoteData}" blur="{!c.onblur}" />
                                                                                            </aura:set>

                                                                                        </aura:if>
                                                                                    </aura:set>

                                                                                    <aura:set attribute="else">
                                                                                        <ui:inputNumber aura:id="inputId" value="{!value.originalValue}" change="{!c.updateQuoteData}" blur="{!c.onblur}" />
                                                                                    </aura:set>
                                                                                    <!--  <aura:set attribute="else">
                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__Cost_Code_Name__c'}">
                                                                                        <ui:inputText aura:id="inputId"
                                                                                                    value="{!value.originalValue}"
                                                                                                    change="{!c.updateQuoteData}"
                                                                                                    blur="{!c.onblur}" />
                                                                                    </aura:if>
                                                                                    </aura:set>-->

                                                                                </aura:if>

                                                                                <aura:set attribute="else">
                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__UOM__c'}">
                                                                                        <ui:inputSelect value="{! value.originalValue }" class="select-class" change="{!c.updateQuoteData}">
                                                                                            <aura:iteration var="option" items="{! v.options }">
                                                                                                <option value="{! option.value }" selected="{!value.originalValue == option.value}">
                                                                                                    {! option.key }</option>
                                                                                            </aura:iteration>
                                                                                        </ui:inputSelect>
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__Priority__c'}">
                                                                                        <ui:inputSelect value="{! value.originalValue }" class="select-class" change="{!c.updateQuoteData}">
                                                                                            <aura:iteration var="option" items="{! v.priorityOptions }">

                                                                                                <option value="{! option.value }" selected="{!value.originalValue == option.value}">
                                                                                                    {! option.key }</option>
                                                                                            </aura:iteration>
                                                                                        </ui:inputSelect>
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__Cost_Type__c'}">
                                                                                        <ui:inputSelect value="{! value.originalValue }" class="select-class" change="{!c.updateQuoteData}">
                                                                                            <aura:iteration var="option" items="{! v.costttypeoptions }">
                                                                                                <option value="{! option.value }" selected="{!value.originalValue == option.value}">
                                                                                                    {! option.key }</option>
                                                                                            </aura:iteration>
                                                                                        </ui:inputSelect>
                                                                                    </aura:if>

                                                                                </aura:set>
                                                                            </aura:if>
                                                                            <aura:set attribute="else">
                                                                                <div class="slds-truncate">
                                                                                    <aura:if isTrue="{!value.fieldType == 'reference'}">
                                                                                        <aura:if isTrue="{!value.fieldName == 'buildertek__Contractor__c'}">
                                                                                            <ui:outputURL value="{!'/one/one.app?#/sObject/'+ value.originalValue + '/view'}" target="_blank" label="{!value.referenceValue}" />
                                                                                            <!--  <c:BT_FieldSetMassUpdate record="{!recs}"  index="{!recIndex}" field="{!value}"  
                                                                                    isMassUpdateEnable="false"
                                                                                    childObjectName="buildertek__Budget_Item__c"/> -->
                                                                                            <!-- <aura:set attribute="else">
                                                                                        <ui:outputText aura:id="inputId"
                                                                                                    value="{!value.originalValue}"
                                                                                                    />
                                                                                    </aura:set> -->
                                                                                        </aura:if>
                                                                                        <aura:if isTrue="{!value.fieldType == 'reference'}">
                                                                                            <aura:if isTrue="{!value.fieldName == 'buildertek__Cost_Code__c'}">

                                                                                                <ui:outputURL value="{!'/one/one.app?#/sObject/'+ value.originalValue + '/view'}" target="_blank" label="{!value.referenceValue}" />

                                                                                            </aura:if>
                                                                                        </aura:if>
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!value.fieldType == 'currency'}">
                                                                                        <!-- Table Data Set From Here -->
                                                                                        <aura:if isTrue="{!not(empty(value.originalValue))}">
                                                                                            <lightning:formattedNumber value="{!value.originalValue}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                                            <!--</aura:if>-->
                                                                                            <!--<lightning:formattedNumber value="{!value.originalValue}" currencyDisplayAs="code" 
                                                                                                                    currencyCode="{!value.iscurrencyValue}" style="currency" />-->
                                                                                            <!--<lightning:formattedNumber value="{!value.originalValue}" currencyDisplayAs="code" 
                                                                                                                    currencyCode="GBP" style="currency" />-->
                                                                                            <!--  <lightning:formattedNumber
                                                                                                                    value="{!value.originalValue}"
                                                                                                                    style="currency" /> -->
                                                                                            <aura:set attribute="else">
                                                                                                <!--<aura:if isTrue='{!v.multicurrency}'>
                                                                                                    <lightning:formattedNumber value="0.00" currencyDisplayAs="code" 
                                                                                                                    currencyCode="{!value.CurrencyIsoCode}" style="currency" />
                                                                                                </aura:if>
                                                                                                <aura:if isTrue='{!!v.multicurrency}'>-->

                                                                                                <lightning:formattedNumber value="0.00" currencyDisplayAs="code" currencyCode="{!v.currencycode}" style="currency" />
                                                                                                <!--</aura:if>-->
                                                                                                <!-- <ui:outputCurrency value="0.00"/> -->
                                                                                                <!--<lightning:formattedNumber
                                                                                                                        value="0.00" style="currency" />-->
                                                                                                <!--<lightning:formattedNumber value="0.00" currencyDisplayAs="code" 
                                                                                                                    currencyCode="{!value.iscurrencyValue}" style="currency" />-->
                                                                                            </aura:set>
                                                                                        </aura:if>
                                                                                    </aura:if>

                                                                                    <aura:if isTrue="{!value.fieldName == 'Name'}">
                                                                                        <lightning:input value="{!value.originalValue}" />
                                                                                    </aura:if>



                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__Cost_Code_Name__c'}">
                                                                                        <!-- <ui:outputURL
                                                                                                    value="{!'/one/one.app?#/sObject/'+ value.originalValue + '/view'}"
                                                                                                    target="_blank"
                                                                                                    label="{!value.referenceValue}" />-->
                                                                                        <lightning:formattedText value="{!value.originalValue}" />
                                                                                        <!--  <lightning:input
                                                                                                        value="{!value.originalValue}" />-->
                                                                                    </aura:if>

                                                                                    <aura:if isTrue="{!value.fieldType == 'number'}">
                                                                                        <lightning:formattedNumber value="{!value.originalValue}" />
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!and(and(value.fieldType == 'string', value.fieldName !='buildertek__Item_Name__c'),value.fieldName !='buildertek__CostCodeDivision__c' )}">
                                                                                        <aura:if isTrue="{!not(empty(value.originalValue))}">
                                                                                            <lightning:formattedNumber value="{!value.originalValue/100}" style="percent" minimumFractionDigits="2" />
                                                                                            <aura:set attribute="else">
                                                                                                <lightning:formattedNumber value="0.00" style="percent" minimumFractionDigits="2" />
                                                                                            </aura:set>
                                                                                        </aura:if>
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!value.fieldName == 'buildertek__Item_Name__c'}">
                                                                                        <lightning:formattedText value="{!value.originalValue}" />
                                                                                    </aura:if>
                                                                                    <aura:if isTrue="{!value.fieldType == 'textarea'}">
                                                                                        <lightning:formattedRichText value="{!value.originalValue}" class="textAreaCss" />
                                                                                    </aura:if>


                                                                                    <aura:if isTrue="{!and(!value.referenceValue,value.fieldName != 'buildertek__Old_Budget_Line__c')}">
                                                                                        <ui:outputURL value="{!'/one/one.app?#/sObject/'+ value.originalValue + '/view'}" target="_blank" label="{!value.referenceValue}" />
                                                                                    </aura:if>
                                                                                    <button class="slds-button slds-button_icon slds-cell-edit__button slds-m-left_x-small" tabindex="-1" title="">
                                                                                        <aura:if
                                                                                            isTrue="{!value.isEditable == true}">
                                                                                            <span style="display:none;"
                                                                                                data-id="{!recs.recordId}"
                                                                                                data-label="{!value.fieldName}"
                                                                                                data-group="{!recs.groupId}"
                                                                                                onclick="{!c.inlineEdit}">
                                                                                                <lightning:icon
                                                                                                    iconName="utility:edit"
                                                                                                    size="xx-small"
                                                                                                    alternativeText="edit" />
                                                                                            </span>
                                                                                        </aura:if>
                                                                                        <span
                                                                                            class="slds-assistive-text">Edit</span>
                                                                                    </button>
                                                                                </div>
                                                                            </aura:set>
                                                                        </aura:if>

                                                                    </td>
                                                                    
                                                                </aura:if>
                                                            </aura:iteration>

                                                        </tr>
                                                    </aura:iteration>
                                                </aura:iteration>

                                                <!-- * this row is showing the total in copmonent -->
                                                    <tr class="groupFooter">
                                                        <td colspan="3"> </td>

                                                        <td>
                                                            <span style="font-weight: bold;font-size: 0.78rem !important;"> Total </span>
                                                        </td>

                                                        <aura:iteration items="{!v.TotalRecords.columns}" var="col" indexVar="colIndex">

                                                            <aura:if isTrue="{!col.fieldName != 'Name'}">
                                                                <td>
                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Unit_Price__c'}">
                                                                        <aura:if isTrue="{!group.totals.unitPricekey == 'buildertek__Unit_Price__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.unitPrice}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Original_Budget__c'}">
                                                                        <aura:if isTrue="{!group.totals.orignalbudgetkey == 'buildertek__Original_Budget__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.orignalbudget}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Total_Sales_Price__c'}">
                                                                        <aura:if isTrue="{!group.totals.totalSalesPricekey == 'buildertek__Total_Sales_Price__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.totalSalesPrice}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Total_Approvals_CO__c'}">
                                                                        <aura:if isTrue="{!group.totals.TotalApprovalskey == 'buildertek__Total_Approvals_CO__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.TotalApprovals}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Committed_Costs__c'}">
                                                                        <aura:if isTrue="{!group.totals.CommittedCostkey == 'buildertek__Committed_Costs__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.CommittedCost}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Additional_Costs__c'}">
                                                                        <aura:if isTrue="{!group.totals.AdditionalCostsKey == 'buildertek__Additional_Costs__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.AdditionalCosts}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Invoice_total__c'}">
                                                                        <aura:if isTrue="{!group.totals.InvoiceCostsKey == 'buildertek__Invoice_total__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.InvoiceCosts}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__CO_Total__c'}">
                                                                        <aura:if isTrue="{!group.totals.TotalCOkey == 'buildertek__CO_Total__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.TotalC0}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                        
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Labor1__c'}">
                                                                        <aura:if isTrue="{!group.totals.Labor1key == 'buildertek__Labor1__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.Labor1}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Projected_Costs__c'}">
                                                                        <aura:if isTrue="{!group.totals.ProjectedCostskey == 'buildertek__Projected_Costs__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.ProjectedCosts}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Forecast_To_Complete__c'}">
                                                                        <aura:if isTrue="{!group.totals.Forecastskey == 'buildertek__Forecast_To_Complete__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.Forecast}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Total_Costs__c'}">
                                                                        <aura:if isTrue="{!group.totals.TotalCostsKey == 'buildertek__Total_Costs__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.TotalCosts}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Profit_Loss__c'}">
                                                                        <aura:if isTrue="{!group.totals.ProfitLosskey == 'buildertek__Profit_Loss__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.ProfitLoss}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Sales_Price__c'}">
                                                                        <aura:if isTrue="{!group.totals.unitSalesPricekey == 'buildertek__Sales_Price__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.unitSalesPrice}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Gross_Profit__c'}">
                                                                        <aura:if isTrue="{!group.totals.grossMarginKey == 'buildertek__Gross_Profit__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.grossMargin}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>

                                                                    <aura:if isTrue="{!col.fieldName == 'buildertek__Labor__c'}">
                                                                        <aura:if isTrue="{!group.totals.laborKey == 'buildertek__Labor__c'}">
                                                                            <span style="font-weight: bold;font-size: 0.78rem !important;">
                                                                                <lightning:formattedNumber value="{!group.totals.labor}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                                            </span>
                                                                        </aura:if>
                                                                    </aura:if>
                                                                    
                                                                </td>
                                                            </aura:if>

                                                        </aura:iteration>

                                                    </tr>


                                                <aura:if isTrue="{!parentGroupIndex != v.TotalRecords.groupHierarchy.length-1}">
                                                    <br />
                                                </aura:if>
                                            </aura:iteration>
                                        </tbody>
                                    </table>

                                </div>

                            </div>

                        </aura:if>
                    </div>
                </div>
            </div>
            <!-- start New Expense popup -->
            <aura:if isTrue="{!v.isNewExpense}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container Expensemodal">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{! c.doCancel }" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">New Expense
                                </h2>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                <h3 class="slds-section__title slds-theme--shade primaryPaletteBorder test-id__section-header-container">
                                    <span class="test-id__section-header-title section-header-title slds-p-horizontal--small slds-truncate">Information</span>
                                </h3>
                                <br />
                                <lightning:recordEditForm aura:id="expense" objectApiName="buildertek__Expense__c">
                                    <lightning:messages />
                                    <div class="slds-grid slds-gutters">
                                        <div class="slds-col">

                                            <label>Description</label>
                                            <lightning:inputField fieldName="buildertek__Description__c" value="{!v.expenseDescription}" variant="label-hidden" /><br />
                                            <label class="labelbottom">Budget</label>
                                            <lightning:inputField aura:id="budgetId" fieldName="buildertek__Budget__c" value="{!v.expensebudget}" variant="label-hidden" onchange="{!c.onBudgetChange}" /><br />
                                            <label class="labelbottom">Budget Line</label>
                                            <!-- <div>-->
                                            <!--  <c:customLookup  objectAPIName="buildertek__Budget_Item__c" parentRecordId = "{!v.expensebudget}"
                                                                IconName="{!v.IconName}" selectedRecord="{!v.budgetItemId}" />  -->
                                            <lightning:inputField fieldName="buildertek__Budget_Line__c" value="{!v.budgetItemId}" variant="label-hidden" />
                                            <!-- </div>-->
                                            <div class="slds-m-top_small">
                                                <label>Amount</label>
                                                <lightning:inputField fieldName="buildertek__Amount__c" value="{!v.expenseAmount}" variant="label-hidden" />
                                            </div>

                                            <br />
                                            <label class="labelbottom">Cost Code</label>
                                            <lightning:inputField fieldName="buildertek__Cost_Code__c" value="{!v.expenseCostCode}" variant="label-hidden" />
                                        </div>
                                        <br />
                                        <div class="slds-col">
                                            <div class="slds-m-top_x-small">

                                                <label class="labelbottom">Payment Method</label>
                                                <lightning:inputField fieldName="buildertek__Payment_Method__c" value="{!v.expensePaymentMethod}" variant="label-hidden" />
                                            </div>
                                            <div class="slds-m-top_small">
                                                <label class="labelbottom">Type</label>
                                                <lightning:inputField fieldName="buildertek__Type__c" value="{!v.expenseType}" variant="label-hidden" />
                                            </div>
                                            <div class="slds-m-top_x-small">
                                                <label>Ref No.</label>
                                                <lightning:inputField fieldName="buildertek__Ref_No__c" value="{!v.expenseRefNo}" variant="label-hidden" /><br />
                                            </div>

                                            <label>Notes</label>
                                            <lightning:inputField fieldName="buildertek__Notes__c" value="{!v.expenseNote}" variant="label-hidden" />
                                        </div>
                                    </div>
                                </lightning:recordEditForm>
                                <!--<lightning:inputField aura:id="povendor" fieldName="buildertek__Vendor__c" value="{!v.newPO.buildertek__Vendor__c}" required="true" />-->
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" label="Save" title="Save" onclick="{! c.submitForm }" />
                            </footer>

                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>

            <!--mass add lines-->

            <!-- Select Schedule popup -->
            <aura:if isTrue="{!v.showSelectSchedule}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container" style="width: 50%">
                        <div aura:id="poContainer" class="c-container" style="height:40rem !important">
                            <!-- height:100% -->
                            <header class="slds-modal__header">

                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <!-- <lightning:layout >
                                    <lightning:layoutItem >
                                         <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Select Schedule</h2>
                                   </lightning:layoutItem>
                                </lightning:layout> -->
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Select Schedule
                                </h2>
                                <p></p>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="height:75% !important;">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <!-- <th scope="col" width="5%">
                                                
                                            </th> -->
                                            <th scope="col" class="slds-truncate">
                                                <!-- <lightning:input type="checkbox"
                                                                         name="{!item.Id}"
                                                                         onchange="{!c.selectedSchedule}" /> -->
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Duration">Schedule Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Description</div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.scheduleRecords}" var="item" indexVar="index">
                                            <tr>
                                                <td class="slds-truncate" style="width: 10px;">
                                                    <lightning:input type="checkbox" name="{!item.Id}" onchange="{!c.selectedSchedule}" />
                                                </td>
                                                <td class="slds-truncate" style="">
                                                    {!item.Name}
                                                </td>
                                                <td>
                                                    {!item.buildertek__Description__c}
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <!--<lightning:button variant="brand" type="submit" name="save" label="Save" />-->
                                <lightning:button variant="brand" type="submit" name="Continue" label="Continue" onclick="{!c.createScheduleItem}" />
                                <lightning:button variant="brand" type="submit" name="createNewSchedule" label="Create New Schedule" onclick="{!c.createANewSchedule}" />
                                <!--  onclick="{!c.createANewSchedule}"  -->

                                <!--<lightning:button variant="brand" title="Yes" label="Yes"
                                              onclick="{!c.handleSubmit}" />-->
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>

            <aura:if isTrue="{!v.duplicateExp}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container Expensemodal popupsize">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <!--  <lightning:buttonIcon iconName="utility:close" onclick="{! c.doCancel }" alternativeText="close"
                                                  variant="bare-inverse" class="slds-modal__close" /> -->
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Confirmation
                                </h2>
                                <p></p>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="height:100%">
                                <p>
                                    <center style=" font-size: medium ">This looks like a duplicate entry. Would you like to continue adding this Expense to the Budget?</center>
                                </p>
                                <br />
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="No" label="No" onclick="{! c.doCancel }" />
                                <!--<lightning:button variant="brand" type="submit" name="save" label="Save" />-->
                                <lightning:button variant="brand" type="submit" name="save" label="Save" onclick="{!c.doSave}" />

                                <!--<lightning:button variant="brand" title="Yes" label="Yes"
                                              onclick="{!c.handleSubmit}" />-->
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            <aura:if isTrue="{!v.isContingency}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container contingencyModal" style="{!v.customModalCss}">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{! c.closeContingencyModel }" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Contingency Management
                                </h2>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
                                <c:ContingencyBudgetItems recordId="{!v.recordId}" customModalCss="{!v.customModalCss}" isContingency="{!v.isContingency}" />
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" label="Cancel" title="Cancel" onclick="{! c.closeContingencyModel }" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            <aura:if isTrue="{!v.addposection}">
                <aura:html tag="style">
                    .slds-modal__container{
                        max-width:60rem !important;
                    }
                </aura:html>
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container" style="width: 70%;">
                        <div aura:id="poContainer" class="c-container" style="position: relative; height:90vh" >
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Purchase Orders
                                </h2>
                                <p></p>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="height:80%">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th scope="col" class="slds-truncate">
                                                <lightning:input aura:id="selectAllPO" type="checkbox" name="checkAll" onchange="{!c.checkAllPO}" />
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Duration">PO Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Description</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">PO Total</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Vendor</div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.recordList}" var="item" indexVar="index">
                                            <tr>
                                                <td style="padding-left: 0.5rem; width: 30px;">
                                                    <lightning:input type="checkbox" name="input1" checked="{!item.Selected}" id="{!item.Id}" onchange="{!c.checkPO}" />
                                                    <!-- <span id="{!item.Id}" onchange="{!c.saveSelectedPO}">  <ui:inputRadio aura:id="radio" name="select" label="" value="{!item.selectedPurchaseOrder}" /> </span> -->
                                                </td>
                                                <td class="slds-truncate" style="">
                                                    {!item.Name}
                                                </td>
                                                <td>
                                                    {!item.buildertek__Description__c}
                                                </td>
                                                <td>
                                                    <lightning:formattedNumber value="{!item.buildertek__PO_Total__c}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                </td>
                                                <td>
                                                    {!item.buildertek__Vendor__r.Name}
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" type="submit" name="Save" label="Save" onclick="{!c.newPO}" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>

            <aura:if isTrue="{!v.addtcsection}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container" style="width: 50%;">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Time Cards
                                </h2>
                                <p></p>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="height:80%">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th scope="col" class="slds-truncate">
                                                <lightning:input aura:id="selectAllTimeCards" type="checkbox" name="checkAll" onchange="{!c.checkAllTimeCards}" />

                                                <!-- <lightning:input type="checkbox"
                                                                         name="{!item.Id}"
                                                                         onchange="{!c.selectedSchedule}" /> -->
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Duration">TimeCard Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Description</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Daily Expense</div>
                                            </th>
                                            <!-- * commented this column becuase there is no vendor on the time card -->
                                            <!-- <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Vendor</div>
                                            </th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.recordList}" var="item" indexVar="index">
                                            <tr>
                                                <!-- <td class="slds-truncate" style="width: 10px;">
                                                    <lightning:input type="checkbox"
                                                                         name="{!item.Id}"
                                                                         onchange="{!c.selectedSchedule}" /> 
                                                </td>-->
                                                <td style="padding-left: 0.5rem; width: 30px;">
                                                    <lightning:input  type="checkbox" checked="{!item.Selected}" id="{!item.Id}" onchange="{!c.checkTimeCard}" />
                                                    <!-- <span id="{!item.Id}" onchange="{!c.saveSelectedTC}">
                                                        <ui:inputRadio aura:id="radio" name="select" label=""
                                                            value="{!item.selectedTimeCards}" />
                                                    </span> -->
                                                </td>
                                                <td class="slds-truncate" style="">
                                                    {!item.Name}
                                                </td>
                                                <td>
                                                    {!item.buildertek__Description__c}
                                                </td>
                                                <td>
                                                    <!--<aura:if isTrue='{!v.multicurrency}'>
                                                        <lightning:formattedNumber value="{!item.buildertek__PO_Total__c}" style="currency" currencyCode="{!item.CurrencyIsoCode}" currencyDisplayAs="code"/>
                                                    </aura:if>
                                                    <aura:if isTrue='{!!v.multicurrency}'>-->
                                                    <lightning:formattedNumber value="{!item.buildertek__Daily_Expense__c}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                    <!--</aura:if>-->
                                                    <!--<lightning:formattedNumber value="{!item.buildertek__PO_Total__c}" style="currency" currencyCode="USD"/>-->

                                                </td>
                                                <!-- * commented this column becuase there is no vendor on the time card -->
                                                <!-- <td>
                                                    {!item.buildertek__Vendor__r.Name}
                                                </td> -->
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" type="submit" name="Save" label="Save" onclick="{!c.updateBudgetLine}" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            <aura:if isTrue="{!v.addinvsection}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container" style="width: 50%;">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Invoices (AP)
                                </h2>
                                <p></p>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="height:80%">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th scope="col" class="slds-truncate">
                                                <lightning:input aura:id="selectAllInvoices" type="checkbox" name="checkAll" onchange="{!c.checkAllInvoices}" />

                                                <!-- <lightning:input type="checkbox"
                                                                         name="{!item.Id}"
                                                                         onchange="{!c.selectedSchedule}" /> -->
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Duration">Invoice Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Description</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Total Amount</div>
                                            </th>
                                            <!-- * commented this column becuase there is no vendor on the time card -->
                                            <!-- <th scope="col">
                                                <div class="slds-truncate" title="Project Description">Vendor</div>
                                            </th> -->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.recordList}" var="item" indexVar="index">
                                            <tr>
                                                <!-- <td class="slds-truncate" style="width: 10px;">
                                                    <lightning:input type="checkbox"
                                                                         name="{!item.Id}"
                                                                         onchange="{!c.selectedSchedule}" /> 
                                                </td>-->
                                                <td style="padding-left: 0.5rem; width: 30px;">
                                                    <lightning:input aura:id="selectInvoice" type="checkbox" checked="{!item.Selected}" id="{!item.Id}" onchange="{!c.checkInvoice}" />

                                                    <!-- <span id="{!item.Id}" onchange="{!c.saveSelectedINVO}">
                                                        <ui:inputRadio aura:id="radio" name="select" label=""
                                                            value="{!item.selectedTimeCards}" />
                                                    </span> -->
                                                </td>
                                                <td class="slds-truncate" style="">
                                                    {!item.Name}
                                                </td>
                                                <td>
                                                    {!item.buildertek__Description__c}
                                                </td>
                                                <td>
                                                    <!--<aura:if isTrue='{!v.multicurrency}'>
                                                        <lightning:formattedNumber value="{!item.buildertek__PO_Total__c}" style="currency" currencyCode="{!item.CurrencyIsoCode}" currencyDisplayAs="code"/>
                                                    </aura:if>
                                                    <aura:if isTrue='{!!v.multicurrency}'>-->
                                                    <lightning:formattedNumber value="{!item.buildertek__Total_Amount__c}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                    <!--</aura:if>-->
                                                    <!--<lightning:formattedNumber value="{!item.buildertek__PO_Total__c}" style="currency" currencyCode="USD"/>-->

                                                </td>
                                                <!-- * commented this column becuase there is no vendor on the time card -->
                                                <!-- <td>
                                                    {!item.buildertek__Vendor__r.Name}
                                                </td> -->
                                            </tr>
                                        </aura:iteration>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" type="submit" name="Save" label="Save" onclick="{!c.updateBudgetLineInvoice}" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>
            <aura:if isTrue="{!v.createNewSchedule}">
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container" style="width: 60%;">
                        <div aura:id="poContainer" class="c-container" style="height:50rem !important">
                            <!-- height:100% -->
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <p></p>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Create New Schedule
                                </h2>
                                <p></p>
                            </header>
                            <h3 class="slds-section__title slds-theme--shade primaryPaletteBorder test-id__section-header-container">
                                <span class="test-id__section-header-title section-header-title slds-p-horizontal--small slds-truncate">Schedule
                                    Details</span>
                            </h3>
                            <div class="slds-modal__content " id="modal-content-id-1" aura:id="poContainer1">
                                <lightning:recordEditForm aura:id="scheduleCreateForm" objectApiName="buildertek__Schedule__c" onsuccess="{!c.handleOnSuccess}">
                                    <lightning:messages />
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                            <lightning:inputField fieldName="buildertek__Project__c" value="{!v.sampleNewRecord.buildertek__Project__c}">
                                            </lightning:inputField>
                                        </div>
                                        <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                            <lightning:inputField fieldName="buildertek__Type__c">
                                            </lightning:inputField>
                                        </div>
                                    </div>
                                    <div class="slds-grid">
                                        <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                            <lightning:inputField fieldName="buildertek__Initial_Start_Date__c">
                                            </lightning:inputField>
                                        </div>
                                        <div class="slds-col slds-size_1-of-2 slds-p-around_medium">
                                            <lightning:inputField fieldName="buildertek__Description__c">
                                            </lightning:inputField>
                                        </div>
                                    </div>
                                    <footer class="slds-modal__footer">
                                        <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                        <lightning:button type="submit" label="Save" variant="brand" />
                                    </footer>
                                </lightning:recordEditForm>
                            </div>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>

            <aura:if isTrue="{!v.addcosection}">
                <aura:html tag="style">
                    .slds-modal__container{
                        max-width: 50rem;
                        width: 60%;
                    }
                    .coFildData{
                        max-width: 60px;
                    }
                </aura:html>
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Change Orders</h2>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="max-height:70vh;">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th scope="col" class="slds-truncate">
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">CO Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">CO Amount</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">Vendor</div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.coRecordList}" var="item" indexVar="index">
                                            <tr>
                                                <td style="padding-left: 0.5rem; width: 30px;">
                                                    <ui:inputRadio aura:id="radio" name="coSelect" text="{!item.Id}" label="" change="{!c.saveSelectedCO}" />
                                                </td>
                                                <td class="slds-truncate coFildData">
                                                    {!item.Name}
                                                </td>
                                                <td class="coFildData">
                                                    <lightning:formattedNumber value="{!item.buildertek__Total_Amount__c}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                </td>
                                                <td class="slds-truncate coFildData">
                                                    {!item.buildertek__Vendor__r.Name}
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                        <aura:if isTrue="{!empty(v.coRecordList)}">
                                            <td colspan="5" style="text-align: center; line-height: 10rem; font-size: 18px; ">
                                                No Data Found
                                            </td>
                                        </aura:if>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" type="submit" name="Save" label="Save" onclick="{!c.addNewCO}" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>


            <aura:if isTrue="{!v.addExpenseSection}">
                <aura:html tag="style">
                    .slds-modal__container{
                        max-width: 50rem;
                        width: 60%;
                    }
                    .coFildData{
                        max-width: 60px;
                    }
                </aura:html>
                <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                    <div class="slds-modal__container">
                        <div aura:id="poContainer" class="c-container">
                            <header class="slds-modal__header">
                                <lightning:buttonIcon iconName="utility:close" onclick="{!c.doCancel}" alternativeText="close" variant="bare-inverse" class="slds-modal__close" />
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Expenses</h2>
                            </header>
                            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1" style="max-height:70vh;">
                                <table class="slds-table slds-table_bordered slds-table_cell-buffer">
                                    <thead>
                                        <tr class="slds-text-title_caps">
                                            <th scope="col" class="slds-truncate">
                                                <lightning:input aura:id="selectAllExpense" type="checkbox" name="checkAll" onchange="{!c.checkAllExpense}" />
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">Expense Name</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">Description</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">Expense Total</div>
                                            </th>
                                            <th scope="col">
                                                <div class="slds-truncate">Vendor</div>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <aura:iteration items="{!v.ExpenseRecordList}" var="item" indexVar="index">
                                            <tr>
                                                <td style="padding-left: 0.5rem; width: 30px;">
                                                    <lightning:input type="checkbox" name="input1" checked="{!item.Selected}" id="{!item.Id}" onchange="{!c.checkExpensee}" />
                                                </td>
                                                <td class="slds-truncate coFildData">
                                                    {!item.Name}
                                                </td>
                                                <td class="slds-truncate coFildData">
                                                    {!item.buildertek__Description__c}
                                                </td>
                                                <td>
                                                    <lightning:formattedNumber value="{!item.buildertek__Total_Expense__c}" style="currency" currencyCode="{!v.currencycode}" currencyDisplayAs="code" />
                                                </td>
                                                <td class="slds-truncate coFildData">
                                                    {!item.buildertek__Vendor__r.Name}
                                                </td>
                                            </tr>
                                        </aura:iteration>
                                        <aura:if isTrue="{!empty(v.ExpenseRecordList)}">
                                            <td colspan="5" style="text-align: center; line-height: 10rem; font-size: 18px; ">
                                                No Data Found
                                            </td>
                                        </aura:if>
                                    </tbody>
                                </table>
                            </div>
                            <footer class="slds-modal__footer">
                                <lightning:button variant="neutral" title="Cancel" label="Cancel" onclick="{! c.doCancel }" />
                                <lightning:button variant="brand" type="submit" name="Save" label="Save" onclick="{!c.addNewExpense}" />
                            </footer>
                        </div>
                    </div>
                </section>
                <div class="slds-backdrop slds-backdrop_open"></div>
            </aura:if>



            <!-- End New Expense popup -->
            <lightning:notificationsLibrary aura:id="notifLib" />
            <lightning:overlayLibrary aura:id="overlayLib" />
            <div aura:id="newItem" />
        </div>
    </div>
</aura:component>