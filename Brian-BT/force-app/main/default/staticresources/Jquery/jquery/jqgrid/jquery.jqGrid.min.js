!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(r){return t(r,e.document)}):"object"==typeof module&&module.exports?module.exports=function(e,r){return e||(e=window),void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(r,e.document),r}:t(jQuery,e.document)}("undefined"!=typeof window?window:this,function(e,t){function r(e,t,i){if(!(this instanceof r))return new r(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=i}function i(t,r,i,a,o){var l,n,s=a.length,d=this;for(d.items=[],d.indexesOfSourceData=[],d.trimByCollect=t,d.caseSensitive=r,d.skipSort=i,d.fieldLength=s,d.fieldNames=new Array(s),d.fieldSortDirection=new Array(s),d.fieldCompare=new Array(s),l=0;l<s;l++){switch(n=a[l],d.fieldNames[l]=n[o||"dataName"],n.sorttype){case"integer":case"int":d.fieldCompare[l]=function(e,t){return e=Math.floor(Number(e)),t=Math.floor(Number(t)),e===t?0:e<t?-1:1};break;case"number":case"currency":case"float":d.fieldCompare[l]=function(e,t){return e=Number(e),t=Number(t),e===t?0:e<t?-1:1};break;default:d.fieldCompare[l]=e.isFunction(n.compare)?n.compare:function(e,t){var r=e,i=t;if(null==r&&(r=""),null==i&&(i=""),r=String(r),i=String(i),this.caseSensitive||(r=r.toUpperCase(),i=i.toUpperCase()),r===i){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(null===e)return-1;if(null===t)return 1}return r<i?-1:1}}d.fieldSortDirection[l]="desc"===n.sortorder?-1:1}}var a={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){var t=["st","nd","rd","th"];return e<11||e>13?t[Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};e.jgrid=e.jgrid||{};var o=e.jgrid;o.locales=o.locales||{};var l=o.locales,n={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(null==o.defaults||e.isEmptyObject(l)||void 0===l["en-US"])&&(void 0===l["en-US"]&&e.extend(!0,o,{locales:{"en-US":a}}),o.defaults=o.defaults||{},void 0===o.defaults.locale&&(o.defaults.locale="en-US")),o.defaults=o.defaults||{};var s=o.defaults;e.extend(!0,o,{version:"4.15.0-pre",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-secondary",fmButton:"btn btn-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-secondary",actionsDiv:"",actionsButton:"btn btn-xs btn-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-secondary",deleteRuleButton:"btn btn-xs btn-secondary",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-secondary",deleteGroupButton:"btn btn-xs btn-secondary"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-secondary",clearButton:"btn btn-xs btn-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldEncodePostedData:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},clearArray:function(e){for(;e.length>0;)e.pop()},format:function(t){var r=e.makeArray(arguments).slice(1);return null==t&&(t=""),t.replace(/\{(\d+)\}/g,function(e,t){return r[t]})},template:function(t){var r,i=e.makeArray(arguments).slice(1),a=i.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(t,o){var l,n;if(!isNaN(parseInt(o,10)))return i[parseInt(o,10)];for(r=0;r<a;r++)if(e.isArray(i[r]))for(n=(l=i[r]).length;n--;)if(o===l[n].nm)return l[n].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!=(e=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&3===e.length&&(t=parseFloat(e[2]||-1)):"Netscape"===navigator.appName&&null!=(e=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&2===e.length&&(t=parseFloat(e[1]||-1)),t},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getRelativeRect:function(t){var r,i,a=t instanceof e&&t.length>0?t[0]:t,o=e(a).outerHeight(),l=e(this).closest(".ui-jqgrid")[0];return l?(r=null!=a.getBoundingClientRect?a.getBoundingClientRect():e(a).offset(),i=null!=l.getBoundingClientRect?l.getBoundingClientRect():e(l).offset(),{top:r.top+o-i.top,left:r.left-i.left}):{top:0,left:0}},getCellIndex:function(t){var r=e(t);return r.is("tr")?-1:(r=(r.is("td")||r.is("th")?r:r.closest("td,th"))[0],null==r?-1:o.msie?e.inArray(r,r.parentNode.cells):r.cellIndex)},stripHtml:function(e){return e=String(e),e?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),e&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):""):e},stripPref:function(t,r){var i=e.type(t);return"string"!==i&&"number"!==i||(r=""!==(t=String(t))?String(r).replace(String(t),""):r),r},getRes:function(e,t){var r,i=t.split("."),a=i.length;if(null!=e){for(r=0;r<a;r++){if(!i[r])return null;if(void 0===(e=e[i[r]]))break;if("string"==typeof e)return e}return e}},parseDate:function(t,r,i,a){var n,s,d,c=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,u=0,p=0,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,h=/[^\-+\dA-Z]/g,g="string"==typeof r?r.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,m=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},v={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},b=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};if(void 0===(a=function(e,t){var r,i,a=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],n=t||{},s=(o.formatter||{}).date||{},d=null==e||null==e.locale?{}:((l[e.locale]||{}).formatter||{}).date,c=a.length,u={};for(r=0;r<c;r++)void 0!==n[i=a[r]]?u[i]=n[i]:void 0!==s[i]?u[i]=s[i]:void 0!==d[i]&&(u[i]=d[i]);return u}(this.p,a)).parseRe&&(a.parseRe=/[#%\\\/:_;.,\t\s\-]/),a.masks.hasOwnProperty(t)&&(t=a.masks[t]),r&&null!=r)if(isNaN(r)||"u"!==String(t).toLowerCase())if(isNaN(r)||"u1000"!==String(t).toLowerCase())if(r.constructor===Date)u=r;else if(null!==g)u=new Date(parseInt(g[1],10)),g[3]&&(p=60*Number(g[5])+Number(g[6]),p*="-"===g[4]?1:-1,p-=u.getTimezoneOffset(),u.setTime(Number(Number(u)+60*p*1e3)));else{for("ISO8601Long"===a.srcformat&&"Z"===r.charAt(r.length-1)&&(p-=(new Date).getTimezoneOffset()),r=String(r).replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),t=t.replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),s=0,d=Math.min(t.length,r.length);s<d;s++){switch(t[s]){case"M":-1!==(n=e.inArray(r[s],a.monthNames))&&n<12&&(r[s]=n+1,v.m=r[s]);break;case"F":-1!==(n=e.inArray(r[s],a.monthNames,12))&&n>11&&(r[s]=n+1-12,v.m=r[s]);break;case"n":v.m=parseInt(r[s],10);break;case"j":v.d=parseInt(r[s],10);break;case"g":v.h=parseInt(r[s],10);break;case"a":-1!==(n=e.inArray(r[s],a.AmPm))&&n<2&&r[s]===a.AmPm[n]&&(r[s]=n,v.h=b(r[s],v.h));break;case"A":-1!==(n=e.inArray(r[s],a.AmPm))&&n>1&&r[s]===a.AmPm[n]&&(r[s]=n-2,v.h=b(r[s],v.h))}void 0!==r[s]&&(v[t[s].toLowerCase()]=parseInt(r[s],10))}if(v.f&&(v.m=v.f),0===v.m&&0===v.y&&0===v.d)return"&#160;";v.m=parseInt(v.m,10)-1;var w=v.y;w>=70&&w<=99?v.y=1900+v.y:w>=0&&w<=69&&(v.y=2e3+v.y),u=new Date(v.y,v.m,v.d,v.h,v.i,v.s,v.u),0!==p&&u.setTime(Number(Number(u)+60*p*1e3))}else u=new Date(parseFloat(r));else u=new Date(1e3*parseFloat(r));else u=new Date(v.y,v.m,v.d,v.h,v.i,v.s,v.u);if(a.userLocalTime&&0===p&&0!=(p-=(new Date).getTimezoneOffset())&&u.setTime(Number(Number(u)+60*p*1e3)),void 0===i)return u;if(a.masks.hasOwnProperty(i)?i=a.masks[i]:i||(i="Y-m-d"),"u1000"===i.toLowerCase())return u.getTime();var y=u.getHours(),x=u.getMinutes(),C=u.getDate(),j=u.getMonth()+1,D=u.getTimezoneOffset(),q=u.getSeconds(),R=u.getMilliseconds(),S=u.getDay(),_=u.getFullYear(),I=(S+6)%7+1,F=(new Date(_,j-1,C)-new Date(_,0,1))/864e5,G=I<5?Math.floor((F+I-1)/7)+1:Math.floor((F+I-1)/7)||((new Date(_-1,0,1).getDay()+6)%7<4?53:52),k={d:m(C),D:a.dayNames[S],j:C,l:a.dayNames[S+7],N:I,S:a.S(C),w:S,z:F,W:G,F:a.monthNames[j-1+12],m:m(j),M:a.monthNames[j-1],n:j,t:"?",L:"?",o:"?",Y:_,y:String(_).substring(2),a:y<12?a.AmPm[0]:a.AmPm[1],A:y<12?a.AmPm[2]:a.AmPm[3],B:"?",g:y%12||12,G:y,h:m(y%12||12),H:m(y),i:m(x),s:m(q),u:R,e:"?",I:"?",O:(D>0?"-":"+")+m(100*Math.floor(Math.abs(D)/60)+Math.abs(D)%60,4),P:"?",T:(String(u).match(f)||[""]).pop().replace(h,""),Z:"?",c:"?",r:"?",U:Math.floor(u/1e3)};return i.replace(c,function(e){return k.hasOwnProperty(e)?k[e]:e.substring(1)})},parseDateToNumber:function(e,t){var r=o.parseDate.call(this,e,t);return r instanceof Date?r.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){var t=this;if(null==t.p||!t.p.id)return"";var r=t.p.id;switch(e){case n.GRID:return r;case n.GRID_BOX_DIV:return"gbox_"+r;case n.GRID_VIEW_DIV:return"gview_"+r;case n.DIALOG_ALERT_DIV:return"alertmod_"+r;case n.COLUMN_RESIZER_DIV:return"rs_m"+r;case n.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+r;case n.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){var t=o.getGridComponentId.call(this,e);return t?"#"+o.jqID(t):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(t,r){var i;if(r instanceof e||r.length>0)i=r[0];else{if(!o.isHTMLElement(r))return e();r=e(i=r)}switch(t){case n.BODY_TABLE:return r.hasClass("ui-jqgrid-bdiv")?r.children("div").children(".ui-jqgrid-btable"):e();case n.HEADER_TABLE:return r.hasClass("ui-jqgrid-hdiv")?r.children("div").children(".ui-jqgrid-htable"):e();case n.FOOTER_TABLE:return r.hasClass("ui-jqgrid-sdiv")?r.children("div").children(".ui-jqgrid-ftable"):e();case n.FROZEN_HEADER_TABLE:return r.hasClass("ui-jqgrid-hdiv")?r.children(".ui-jqgrid-htable"):e();case n.FROZEN_FOOTER_TABLE:return r.hasClass("ui-jqgrid-sdiv")?r.children(".ui-jqgrid-ftable"):e();case n.BODY_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.bDiv):e();case n.HEADER_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.hDiv):e();case n.FOOTER_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.sDiv):e();default:return e()}},fixScrollOffsetAndhBoxPadding:function(){var t=this,r=t.grid;if(r){var i=t.p,a=r.bDiv,o=function(t){var r=e(t).children("div").first();r.css(r.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",i.scrollOffset),t.scrollLeft=a.scrollLeft};e(a).width()>0&&(i.scrollOffset=a.offsetWidth-a.clientWidth,o(r.hDiv),r.sDiv&&o(r.sDiv))}},mergeCssClasses:function(){var t,r,i,a,o=e.makeArray(arguments),l={},n=[];for(t=0;t<o.length;t++)for(i=String(o[t]).replace(/[\t\r\n\f]/g," ").split(" "),r=0;r<i.length;r++)""===(a=i[r])||l.hasOwnProperty(a)||(l[a]=!0,n.push(a));return n.join(" ")},hasOneFromClasses:function(t,r){var i,a=e(t),o=String(r).replace(/[\t\r\n\f]/g," ").split(" "),l=o.length;for(i=0;i<l;i++)if(a.hasClass(o[i]))return!0;return!1},hasAllClasses:function(t,r){var i,a=e(t),o=String(r).replace(/[\t\r\n\f]/g," ").split(" "),l=o.length;for(i=0;i<l;i++)if(!a.hasClass(o[i]))return!1;return!0},detectRowEditing:function(e){return this.grid&&null!=this.p&&null!=this.p.editingInfo&&null!=this.p.editingInfo[e]?this.p.editingInfo[e]:null},getCell:function(t,r){var i,a,o=this.grid,l=this.p;return o&&l?((t instanceof e||t.length>0)&&(t=t[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&t instanceof HTMLTableRowElement&&null!=t.cells?(a=e(t.cells[r]),i=o.fbRows,null!=i&&r<i[0].cells.length?a.add(i[t.rowIndex].cells[r]):a):e()):e()},getDataFieldOfCell:function(e,t){var r,i=this.p,a=o.getCell.call(this,e,t);return i.treeGrid&&a.children("div.tree-wrap").length>0&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper")),i.colModel[t].autoResizable?0===(r=a.children("span."+i.autoResizing.wrapperClassName)).length&&(r=a):r=a,r},enumEditableCells:function(t,r,i){var a=this,o=a.grid,l=a.rows,n=a.p;if(null==o||null==l||null==n||null==t||null==t.rowIndex||!t.id||!e.isFunction(i))return null;var s,d,c,u,p,f,g,m,v,b,w,y=n.colModel,x=y.length,C=t.rowIndex,j=o.fbRows,D=null!=j,q=D?j[C]:null;for(D&&(t=a.rows[C]),s=0;s<x&&(d=y[s],"cb"===(c=d.name)||"subgrid"===c||"rn"===c||(D&&!d.frozen&&(D=!1),v=(D?q:t).cells[s],(b=e(v)).hasClass("not-editable-cell")||(w=b.width(),!0===n.treeGrid&&c===n.ExpandColumn?(w-=b.children("div.tree-wrap").outerWidth(),b=b.children("span.cell-wrapperleaf,span.cell-wrapper").first()):w=0,p=h(n.idPrefix,t.id),u={rowid:t.id,id:p,iCol:s,iRow:C,cmName:c,cm:d,mode:r,td:v,tr:t,trFrozen:q,dataElement:b[0],dataWidth:w},"local"===n.datatype&&(g=null!=(f=n._index[p])?n.data[f]:void 0)&&(u.item=g),d.edittype||(d.edittype="text"),((n.editingInfo[t.id]||{}).editable||{}).hasOwnProperty(c)?m=n.editingInfo[t.id].editable[c]:(m=d.editable,m=e.isFunction(m)?m.call(a,u):m),!0!==m&&"hidden"!==m||(u.editable=m,!1!==i.call(a,u)))));s++);},getEditedValue:function(t,r,i,a){var l,n,d,c,u,p,f=r.formatoptions||{},h=r.editoptions||{},g=h.custom_value,m="[name="+o.jqID(r.name)+"]",v=this,b=e(v);if("hidden"===a||"readonly"===a)return e(v).jqGrid("getCell",t.closest("tr.jqgrow").attr("id"),r.name);switch(r.edittype){case"checkbox":n=["Yes","No"],"string"==typeof h.value&&(n=h.value.split(":")),l=t.find("input[type=checkbox]").is(":checked")?n[0]:n[1];break;case"text":case"password":case"textarea":case"button":l=(c=t.find("input"+m+",textarea"+m)).val(),"date"===c.prop("type")&&3===String(l).split("-").length&&(d=f.newformat||b.jqGrid("getGridRes","formatter.date.newformat"),l=o.parseDate.call(v,"Y-m-d",l,d));break;case"select":c=t.find("select option:selected"),h.multiple?(u=[],p=[],c.each(function(){u.push(e(this).val()),p.push(e(this).text())}),l=u.join(","),i.text=p.join(",")):(l=c.val(),i.text=c.text()),i.value=l;break;case"custom":try{if(!e.isFunction(g))throw"e1";if(void 0===(l=g.call(v,t.find(".customelement"),"get")))throw"e2"}catch(t){var w,y=o.info_dialog,x=function(e){b.jqGrid("getGridRes",e)};switch(String(t)){case"e1":w="function 'custom_value' "+x("edit.msg.nodefined");break;case"e2":break;default:w=t.message}y&&e.isFunction(y)?y.call(v,x("errors.errcap"),w,x("edit.bClose")):(e.isFunction(s.fatalError)?s.fatalError:alert)(w)}break;default:l=t.find("*"+m).text()}return l},guid:1,uidPref:"jqg",randId:function(e){return(e||o.uidPref)+o.guid++},getAccessor:function(t,r){var i,a,o=[];if(e.isFunction(r))return r(t);if(null!=t&&t.hasOwnProperty(r))return t[r];try{if("string"==typeof r&&(o=r.split(".")),a=o.length)for(i=t;null!=i&&a--;)i=i[o.shift()]}catch(e){}return i},getXmlData:function(t,r,i){var a="string"==typeof r?r.match(/^(.*)\[(\w+)\]$/):null;if(e.isFunction(r))return r(t);if(a&&a[2])return a[1]?e(a[1],t).attr(a[2]):e(t).attr(a[2]);if(void 0!==t){var o=e(t).find(r);return i?o:o.length>0?e(o).text():void 0}},cellWidth:function(){var t=e("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),r=t.appendTo("body").find("td").width();return t.remove(),Math.abs(r-5)>.1},isCellClassHidden:function(t){if(null==t||""===t)return!1;var r=e("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(t||"")+"'></td></tr></table></div></div></div>"),i=r.appendTo("body").find("td").is(":hidden");return r.remove(),i},cell_width:!0,ajaxOptions:{},from:function(t){var r=this;return new function(t,i){var a=this,l=t,n=!0,s=!1,d=null,c=/[\$,%]/g,u=null,p=null,f=0,h=!1,g="",m=[],v=Object.prototype.toString;if("object"!=typeof t||!t.push)throw"data provides is not an array";if(t.length>0&&"object"!=typeof t[0])throw"data items are not objects";return this._hasData=function(){return null!==l&&0!==l.length},this._getStr=function(e){var t=[];return s&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),s&&t.push(")"),n||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(t){return s&&(t=e.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),n?t:t.toUpperCase()},this._funcLoop=function(t){var r=[];return e.each(l,function(e,i){r.push(t(i))}),r},this._append=function(e){var t;for(null===d?d="":d+=""===g?" && ":g,t=0;t<f;t++)d+="(";h&&(d+="!"),d+="("+e+")",h=!1,g="",f=0},this._setCommand=function(e,t){u=e,p=t},this._resetNegate=function(){h=!1},this._repeatCommand=function(e,t){return null===u?a:null!==e&&null!==t?u(e,t):null===p?u(e):u(p,e)},this._equals=function(e,t){return 0===a._compare(e,t,1)},this._compare=function(e,t,r){return void 0===r&&(r=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===v.call(e)&&"[object Date]"===v.call(t)?e<t?-r:e>t?r:0:(n||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:e>t?r:0)},this._performSort=function(){0!==m.length&&(l=a._doSort(l,0))},this._doSort=function(e,t){var r=m[t].by,i=m[t].dir,o=m[t].type,l=m[t].datefmt,n=m[t].sfunc;if(t===m.length-1)return a._getOrder(e,r,i,o,l,n);t++;var s,d,c,u=a._getGroup(e,r,i,o,l),p=[];for(s=0;s<u.length;s++)for(c=a._doSort(u[s].items,t),d=0;d<c.length;d++)p.push(c[d]);return p},this._getOrder=function(t,i,l,s,d,u){var p,f,h,g=[],m=[],v="a"===l?1:-1;void 0===s&&(s="text"),h="float"===s||"number"===s||"currency"===s||"numeric"===s?function(e){var t=parseFloat(String(e).replace(c,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===s||"integer"===s?function(e){return null!=e?parseFloat(String(e).replace(c,"")):Number.NEGATIVE_INFINITY}:"date"===s||"datetime"===s?function(e){return o.parseDateToNumber.call(r,d,e)}:e.isFunction(s)?s:function(t){return t=null!=t?e.trim(String(t)):"",n?t:t.toUpperCase()},e.each(t,function(e,t){void 0===(f=""!==i?o.getAccessor(t,i):t)&&(f=""),f=h.call(r,f,t),m.push({vSort:f,data:t,index:e})}),e.isFunction(u)?m.sort(function(e,t){return u.call(r,e.vSort,t.vSort,v,e.data,t.data)}):m.sort(function(e,t){return a._compare(e.vSort,t.vSort,v)});for(var b=0,w=t.length;b<w;)p=m[b].index,g.push(t[p]),b++;return g},this._getGroup=function(t,r,i,l,n){var s=[],d=null,c=null;return e.each(a._getOrder(t,r,i,l,n),function(e,t){var i=o.getAccessor(t,r);null==i&&(i=""),a._equals(c,i)||(c=i,null!==d&&s.push(d),d=a._group(r,i)),d.items.push(t)}),null!==d&&s.push(d),s},this.ignoreCase=function(){return n=!1,a},this.useCase=function(){return n=!0,a},this.trim=function(){return s=!0,a},this.noTrim=function(){return s=!1,a},this.execute=function(){var t=d,r=[];return null===t?a:(e.each(l,function(){var i=t.split(" && "),a=this,o=!1;e.each(i,function(e,t){var r=JSON.parse("["+t.slice(1,-1)+"]");switch(r[0].filterType.toLowerCase()){case"contains":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).toLowerCase().indexOf(r[0].searchText.toLowerCase(),0)>-1;break;case"startswith":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).substr(0,r[0].searchTextLength)==String(r[0].searchText);break;case"endswith":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).substr(String(jQuery.jgrid.getAccessor(a,r[0].colName)).length-r[0].searchTextLength,r[0].searchTextLength)==r[0].searchText;break;case"==":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))==parseFloat(r[0].searchText)}break;case"===":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))===parseFloat(r[0].searchText)}break;case"!==":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))!==parseFloat(r[0].searchText)}break;case"<":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))<parseFloat(r[0].searchText)}break;case">":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))>parseFloat(r[0].searchText)}break;case"<=":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))<=parseFloat(r[0].searchText)}break;case">=":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))>=parseFloat(r[0].searchText)}}if(!1===o)return!1}),o&&r.push(a)}),l=r,a)},this.data=function(){return l},this.select=function(t){if(a.execute(),e.isFunction(t)){var r=[];return e.each(l,function(e,i){r.push(t(i))}),r}return a._hasData()?(a._performSort(),l):[]},this.hasMatch=function(){return!!a._hasData()&&(a.execute(),l.length>0)},this.andNot=function(e,t,r){return h=!h,a.and(e,t,r)},this.orNot=function(e,t,r){return h=!h,a.or(e,t,r)},this.not=function(e,t,r){return a.andNot(e,t,r)},this.and=function(e,t,r){return g=" && ",void 0===e?a:a._repeatCommand(e,t,r)},this.or=function(e,t,r){return g=" || ",void 0===e?a:a._repeatCommand(e,t,r)},this.orBegin=function(){return f++,a},this.orEnd=function(){return null!==d&&(d+=")"),a},this.isNot=function(e){return h=!h,a.is(e)},this.is=function(e){return a._append("this."+e),a._resetNegate(),a},this._compareValues=function(e,t,i,l,n){var s=t;void 0===i&&(i=null);var d=i,u=void 0===n.stype?"text":n.stype;if(null!==i)switch(u){case"int":case"integer":d=String(d).replace(c,""),d=isNaN(Number(d))||""===d?"0":Number(d),s="parseInt("+s+"||0,10)",d=String(parseInt(d,10));break;case"boolean":s="normilizeBoolean("+s+")",d="normilizeBoolean("+String(d)+")";break;case"float":case"number":case"currency":case"numeric":d=String(d).replace(c,""),d=isNaN(Number(d))||""===d?"0":Number(d),s="parseFloat("+s+"||0)",d=String(d);break;case"date":case"datetime":d=String(o.parseDateToNumber.call(r,n.newfmt||"Y-m-d",d)),s='jQuery.jgrid.parseDateToNumber.call(self,"'+n.srcfmt+'",'+s+")";break;default:s=a._getStr(s),d=a._getStr('"'+a._toStr(d)+'"')}return a._append(s+" "+l+" "+d),a._setCommand(e,t),a._resetNegate(),a},this.equals=function(e,t,r){return a._compareValues(a.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return a._compareValues(a.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return a._compareValues(a.equals,e,null,"===",r)},this.greater=function(e,t,r){return a._compareValues(a.greater,e,t,">",r)},this.less=function(e,t,r){return a._compareValues(a.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return a._compareValues(a.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return a._compareValues(a.lessOrEquals,e,t,"<=",r)},this.startsWith=function(t,r){var i=null==r?t:r,o=s?e.trim(i.toString()).length:i.toString().length;return a._append(JSON.stringify({filterType:"startsWith",colName:t,searchText:a._toStr(r),searchTextLength:o})),a._setCommand(a.startsWith,t),a._resetNegate(),a},this.endsWith=function(t,r){var i=null==r?t:r,o=s?e.trim(i.toString()).length:i.toString().length;return a._append(JSON.stringify({filterType:"endsWith",colName:t,searchText:a._toStr(r),searchTextLength:o})),a._setCommand(a.endsWith,t),a._resetNegate(),a},this.contains=function(e,t){return a._append(JSON.stringify({filterType:"contains",colName:e,searchText:a._toStr(t)})),a._setCommand(a.contains,e),a._resetNegate(),a},this.groupBy=function(e,t,r,i){return a._hasData()?a._getGroup(l,e,t,r,i):null},this.orderBy=function(t,r,i,o,l){return r=null==r?"a":e.trim(r.toString().toLowerCase()),null==i&&(i="text"),null==o&&(o="Y-m-d"),null==l&&(l=!1),"desc"!==r&&"descending"!==r||(r="d"),"asc"!==r&&"ascending"!==r||(r="a"),m.push({by:t,dir:r,type:i,datefmt:o,sfunc:l}),a},this.inSet=function(e,t,i){var o=void 0===t?null:t,l=void 0===i.stype?"text":i.stype;return o=a._getStr('"'+a._toStr(o)+'"'),"text"!==l?a._compareValues(a.equals,e,t,"==",i):(a._append("jQuery.inArray("+a._getStr(e)+","+o+".split('"+(r.p.inFilterSeparator||",")+"')) >= 0"),a._setCommand(a.inSet,e),a._resetNegate(),a)},this.custom=function(e,t,r){return a._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+r+'"})'),a._setCommand(a.custom,t),a._resetNegate(),a},a}(t,null)},serializeFeedback:function(t,r,i){var a,o=this;return o instanceof e&&o.length>0&&(o=o[0]),"string"==typeof i?i:"string"==typeof(a=e(o).triggerHandler(r,i))?a:(null!=a&&"object"==typeof a||(a=i),e.isFunction(t)?t.call(o,a):a)},fullBoolFeedback:function(t,r){var i=this,a=e.makeArray(arguments).slice(2),o=e(i).triggerHandler(r,a);if(o=!1!==o&&"stop"!==o,e.isFunction(t)){var l=t.apply(i,a);!1!==l&&"stop"!==l||(o=!1)}return o},feedback:function(t,r,i,a){var l=this;if(l instanceof e&&l.length>0&&(l=l[0]),null==t||"string"!=typeof a||a.length<2)return null;var n="on"===a.substring(0,2)?"jqGrid"+r+a.charAt(2).toUpperCase()+a.substring(3):"jqGrid"+r+a.charAt(0).toUpperCase()+a.substring(1),s=e.makeArray(arguments).slice(4),d=t[a+i];return s.unshift(n),s.unshift(d),o.fullBoolFeedback.apply(l,s)},builderSortIcons:function(t){var r=this,i=r.p,a=e(r),l=a.jqGrid("getGuiStyles","states.disabled"),n=function(n){var s=i.colModel[t],d=null!=s&&e.isFunction(s.sortIconName)?s.sortIconName:i.sortIconName,c=e.isFunction(d)?d.call(r,{order:n,iCol:t,cm:s}):a.jqGrid("getIconRes","sort."+n);return o.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+n,"horizontal"===i.viewsortcols[1]?"ui-i-"+n:"",l,c,"ui-sort-"+i.direction)};return"<span class='s-ico"+(i.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+n("asc")+"'></span><span class='"+n("desc")+"'></span></span>"},builderFmButon:function(t,r,i,a,l){var n=this.p,s=e(this),d=function(e){return s.jqGrid("getGuiStyles","dialog."+e)};return null==n?"":"<a id='"+t+"' class='"+o.mergeCssClasses("fm-button",d("fmButton"),d("right"===l?"rightCorner":"left"===l?"leftCorner":"defaultCorner"),"right"===a?"fm-button-icon-right":"left"===a?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(i?"<span class='fm-button-icon "+(s.jqGrid("getIconRes",i)||i)+"'></span>":"")+(r?"<span class='fm-button-text'>"+r+"</span>":"")+"</a>"},convertOnSaveLocally:function(t,r,i,a,o,l){if(null==this.p)return t;if(e.isFunction(r.convertOnSave))return r.convertOnSave.call(this,{newValue:t,cm:r,oldValue:i,id:a,item:o,iCol:l});if("boolean"!=typeof i&&"number"!=typeof i)return t;if("boolean"!=typeof i||"checkbox"!==r.edittype&&"checkbox"!==r.formatter)"number"!=typeof i||isNaN(t)||("number"===r.formatter||"currency"===r.formatter?t=parseFloat(t):"integer"===r.formatter&&(t=parseInt(t,10)));else{var n=String(t).toLowerCase(),s=null!=r.editoptions&&"string"==typeof r.editoptions.value?r.editoptions.value.split(":"):["yes","no"];e.inArray(n,["1","true",s[0].toLowerCase()])>=0?t=!0:e.inArray(n,["0","false",s[1].toLowerCase()])>=0&&(t=!1)}return t},parseDataToHtml:function(t,r,i,a,l,n,s){var d,c,u,p,f,h,g,m,v,b=this,w=b.p,y=e(b),x=!1,C=[],j=[],D=!0!==w.altRows||y.jqGrid("isBootstrapGuiStyle")?"":w.altclass,q=!!w.grouping&&!0===w.groupingView.groupCollapse,R=parseInt(w.rowNum,10),S=e.fn.jqGrid,_=!0===w.treeGrid&&w.treeANode>-1?b.rows[w.treeANode].rowIndex+1:b.rows.length,I=b.formatCol;for(_<=1&&(w.rowIndexes={}),("local"===w.datatype&&!w.deselectAfterSort||w.multiPageSelection)&&(x=!0),n&&(R*=n+1),d=0;d<Math.min(t,R);d++){for(f=r[d],h=i[d],g=null!=a?a[d]:h,u=((1===l?0:l)+d)%2==1?D:"",x?w.multiselect?(p=-1!==e.inArray(f,w.selarrrow))&&null===w.selrow&&(w.selrow=f):p=f===w.selrow:p=!1,m=C.length,C.push(""),c=0;c<w.colModel.length;c++)switch(v=w.colModel[c].name){case"rn":C.push(function(e,t,r,i){var a=(parseInt(r,10)-1)*parseInt(i,10)+1+t;return"<td role='gridcell' class='"+S.getGuiStyles.call(y,"rowNum","jqgrid-rownum")+"' "+I(e,t,a,null,t,!0)+">"+a+"</td>"}(c,d,w.page,w.rowNum));break;case"cb":C.push(function(t,r,i,a,o){var l="&nbsp;",n=!0,s={rowid:t,iRow:i,iCol:r,data:o,checked:a};return e.isFunction(w.hasMultiselectCheckBox)&&(n=w.hasMultiselectCheckBox.call(b,s)),n&&(l=e.isFunction(w.checkboxHtml)?w.checkboxHtml.call(b,s):"<input type='checkbox' id='jqg_"+w.id+"_"+t+"' class='cbox' name='jqg_"+w.id+"_"+t+"'"+(a?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+I(r,i,"",null,t,!0)+">"+l+"</td>"}(f,c,d,p,h));break;case"subgrid":C.push(S.addSubGridCell.call(y,c,d+l,f,h));break;default:C.push(function(e,t,r,i,a,o){var l=b.formatter(e,t,r,a,"add",o);return"<td role='gridcell' "+I(r,i,l,a,e,o)+">"+l+"</td>"}(f,h[v],c,d+l,g,h))}w.grouping&&S.groupingPrepare&&!w.groupingView._locgr&&(S.groupingPrepare.call(y,h,d),e.isFunction(w.groupingView.groupCollapse)&&(q=w.groupingView.groupCollapse.call(b,{group:w.groupingView.groups[w.groupingView.groups.length-1],rowid:f,data:h}))),C[m]=b.constructTr(f,q,u,h,g,p),C.push("</tr>"),w.rowIndexes[f]=_,_++,w.grouping&&(j.push(C),C=[]),C.length>w.maxItemsToJoin&&(C=[C.join("")])}return w.grouping&&S.groupingRender&&(s&&(w.groupingView._locgr=!0),C=[S.groupingRender.call(y,j,R)],o.clearArray(j)),C},fillSelectOptions:function(r,i,a,o,l,n){var s,d,c,u,p,f,h,g,m=[],v=!1;if(i){if("function"==typeof i&&(i=i()),"string"==typeof i)for(d=i.split(o),s=0;s<d.length;s++)(c=d[s].split(a)).length>2&&(c[1]=e.map(c,function(e,t){if(t>0)return e}).join(a)),m.push({value:c[0],innerHtml:c[1],selectValue:e.trim(c[0]),selectText:e.trim(c[1]),selected:!1}),""===c[0]&&(v=!0);else if("object"==typeof i)for(h in i)i.hasOwnProperty(h)&&m.push({value:h,innerHtml:i[h],selectValue:e.trim(h),selectText:e.trim(i[h]),selected:!1}),""===h&&(v=!0);if("string"==typeof n){for(g=l?e.map(n.split(","),function(t){return e.trim(t)}):[e.trim(n)],n=e.trim(n),s=0;s<m.length;s++)p=m[s],l||p.selectValue!==n||(p.selected=!0,f=!0),l&&e.inArray(p.selectValue,g)>-1&&(p.selected=!0,f=!0);if(!f)for(s=0;s<m.length;s++)p=m[s],l||p.selectText!==n||(p.selected=!0),l&&e.inArray(p.selectText,g)>-1&&(p.selected=!0)}for(s=0;s<m.length;s++)p=m[s],(u=t.createElement("option")).value=p.value,u.innerHTML=p.innerHtml,p.selected&&(u.selected=!0),r.appendChild(u);return v}},getMethod:function(t){return this.getAccessor(e.fn.jqGrid,t)},extend:function(t){e.extend(e.fn.jqGrid,t),this.no_legacy_api||e.fn.extend(t)}});var d=o.clearArray,c=o.jqID,u=o.getGridComponentIdSelector,p=o.getGridComponentId,f=o.getGridComponent,h=o.stripPref,g=o.randId,m=o.getAccessor,v=o.convertOnSaveLocally,b=o.stripHtml,w=o.htmlEncode,y=o.htmlDecode,x=o.mergeCssClasses,C=o.hasOneFromClasses,j=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)};e.fn.jqGrid=function(r){var i,a=e.fn.jqGrid;if("string"==typeof r){if(!(i=a[r]))throw"jqGrid - No such method: "+r;return i.apply(this,e.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var i,v,y=this,D=e(y),q=e.isFunction,R=e.isArray,S=e.extend,_=e.inArray,I=e.trim,F=e.each,G=a.setSelection,k=a.getGridRes,O=q(s.fatalError)?s.fatalError:alert,N=r.locale||s.locale||"en-US",T=null!=l[N]&&"boolean"==typeof l[N].isRTL&&l[N].isRTL?"rtl":"ltr",E=r.iconSet||s.iconSet||("bootstrap"===(r.guiStyle||s.guiStyle)||"bootstrapPrimary"===(r.guiStyle||s.guiStyle)?"glyph":"jQueryUI"),A=r.guiStyle||s.guiStyle||"jQueryUI",B=function(e){return a.getIconRes.call(y,e)},M=function(e,t){return D.jqGrid("getGuiStyles",e,t)};null==r&&(r={datatype:"local"}),void 0!==r.datastr&&R(r.datastr)&&(v=r.datastr,r.datastr=[]),void 0!==r.data&&(i=r.data,r.data=[]),null!=o.formatter&&null!=o.formatter.unused||O("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===r.datatype&&void 0!==r.dataType&&(r.datatype=r.dataType,delete r.dataType),void 0===r.mtype&&void 0!==r.type&&(r.mtype=r.type,delete r.type),y.p={iconSet:E};var z=S(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(r,i,a){if("abort"!==i&&"abort"!==a){var o=r.getResponseHeader("Content-Type"),l=r.responseText||"",n=function(t){try{var r,i=e.parseJSON(t),a=[];for(r in i)i.hasOwnProperty(r)&&"StackTrace"!==r&&a.push(r+": "+i[r]);t=a.join("<br />")}catch(e){}return t};"text/html"===o?l=function(r){var i,a,o,l=t.createElement("div");for(o=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(r),l.innerHTML=null!=o&&2===o.length?o[1]:r,a=(i=l.getElementsByTagName("script")).length;a--;)i[a].parentNode.removeChild(i[a]);r=l.innerHTML;try{""===e.trim(e(r).text())&&(r="")}catch(e){}return r}(l):"application/json"===o?l=n(l):"text/plain"===o&&(l=n(l)),500!==r.status&&0!==r.status&&(l=(i||a)+(a&&a!==i?": "+a:"")+" "+r.status+" "+r.statusText+(""!==l?"<hr />":"")+l),D.jqGrid("displayErrorMessage",l||i||a)}},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,multiPageSelection:!1,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:T,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:B("grouping.common"),plusicon:B("grouping.plus"),minusicon:B("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:E,guiStyle:A,locale:N,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:B("treeGrid.common"),plusLtr:B("treeGrid.plusLtr"),plusRtl:B("treeGrid.plusRtl"),minus:B("treeGrid.minus"),leaf:B("treeGrid.leaf")}},s,{navOptions:S(!0,{commonIconClass:B("nav.common"),editicon:B("nav.edit"),addicon:B("nav.add"),delicon:B("nav.del"),searchicon:B("nav.search"),refreshicon:B("nav.refresh"),viewicon:B("nav.view"),saveicon:B("nav.save"),cancelicon:B("nav.cancel"),buttonicon:B("nav.newbutton")},o.nav||{}),actionsNavOptions:S(!0,{commonIconClass:B("actions.common"),editicon:B("actions.edit"),delicon:B("actions.del"),saveicon:B("actions.save"),cancelicon:B("actions.cancel")},o.actionsNav||{}),formEditing:S(!0,{commonIconClass:B("form.common"),prevIcon:B("form.prev"),nextIcon:B("form.next"),saveicon:[!0,"left",B("form.save")],closeicon:[!0,"left",B("form.undo")]},o.edit||{}),searching:S(!0,{commonIconClass:B("search.common"),findDialogIcon:B("search.search"),resetDialogIcon:B("search.reset"),queryDialogIcon:B("search.query")},o.search||{}),formViewing:S(!0,{commonIconClass:B("form.common"),prevIcon:B("form.prev"),nextIcon:B("form.next"),closeicon:[!0,"left",B("form.cancel")]},o.view||{}),formDeleting:S(!0,{commonIconClass:B("form.common"),delicon:[!0,"left",B("form.del")],cancelicon:[!0,"left",B("form.cancel")]},o.del||{})},r||{}),P=function(e){return k.call(D,e)},L=function(e){var t=o.getRes(z,e);return void 0!==t?t:k.call(D,"defaults."+e)};if(z.recordpos=z.recordpos||("rtl"===z.direction?"left":"right"),z.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==z.autoResizing.widthOfVisiblePartOfSortIcon?z.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===z.iconSet?13:12,z.datatype=void 0!==z.datatype?z.datatype:void 0!==i||null==z.url?"local":null!=z.jsonReader&&"object"==typeof z.jsonReader?"json":"xml",z.jsonReader=z.jsonReader||{},z.url=z.url||"",z.cellsubmit=void 0!==z.cellsubmit?z.cellsubmit:void 0===z.cellurl?"clientArray":"remote",z.gridview=void 0!==z.gridview?z.gridview:null==z.afterInsertRow,void 0!==i&&(z.data=i,r.data=i),void 0!==v&&(z.datastr=v,r.datastr=v),"TABLE"===y.tagName.toUpperCase())if(""===y.id&&D.attr("id",g()),void 0!==t.documentMode&&t.documentMode<=5)O("Grid can not be used in this ('quirks') mode!");else{D.empty().attr("tabindex","0"),y.p=z,z.id=y.id,z.idSel="#"+c(y.id),z.gBoxId=p.call(y,n.GRID_BOX_DIV),z.gBox=u.call(y,n.GRID_BOX_DIV),z.gViewId=p.call(y,n.GRID_VIEW_DIV),z.gView=u.call(y,n.GRID_VIEW_DIV),z.rsId=p.call(y,n.COLUMN_RESIZER_DIV),z.rs=u.call(y,n.COLUMN_RESIZER_DIV),z.cbId=p.call(y,n.HEADER_SELECT_ALL_ROWS_CHECKBOX),z.cb=u.call(y,n.HEADER_SELECT_ALL_ROWS_CHECKBOX);var V=o.fixScrollOffsetAndhBoxPadding,H=function(e){var t,r={},i=e.length;for(t=0;t<i;t++)r[e[t].name]=t;return r},W=function(){var e,t,r={},i=z.colModel,a=i.length;for(e=0;e<a;e++)((t=i[e]).createColumnIndex||z.createColumnIndex&&!1!==t.createColumnIndex||"select"===t.stype&&(t.searchoptions||{}).generateValue||"select"===t.edittype&&(t.editoptions||{}).generateValue)&&(r[i[e].name]={});return r},U=function(e){var t,r,i={},a=e.length;for(t=0;t<a;t++)i["string"==typeof(r=e[t])?r:r.name]=t;return i},Y=function(){var t,r,i={};for(this.p.rowIndexes=i,r=0;r<this.rows.length;r++)t=this.rows[r],e(t).hasClass("jqgrow")&&(i[t.id]=t.rowIndex)},X=function(t){var r=e(this).data("pageX");r?(r=(r=String(r).split(";"))[r.length-1],e(this).data("pageX",r+";"+t.pageX)):e(this).data("pageX",t.pageX)},Q=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},J={headers:[],cols:[],footers:[],dragStart:function(r,i,a,l){var s=this,d=e(s.bDiv),c=d.closest(z.gBox).offset(),u=l.offset().left+("rtl"===z.direction?0:s.headers[r].width+(o.cell_width?0:Q(z.cellLayout,0))-2);s.resizing={idx:r,startX:u,sOL:u,moved:!1,delta:u-i.pageX},s.curGbox=e(z.rs),s.curGbox.prependTo("body"),s.curGbox.css({display:"block",left:u,top:a[1]+c.top+1,height:a[2]}),s.curGbox.css("height",a[2]-(s.curGbox.outerHeight()-s.curGbox.height())+"px"),s.curGbox.data("idx",r),s.curGbox.data("delta",u-i.pageX),X.call(this.curGbox,i),j.call(f(n.BODY_TABLE,d)[0],"resizeStart",i,r),t.onselectstart=function(){return!1},e(t).on("mousemove.jqGrid",function(e){if(J.resizing)return J.dragMove(e),!1}).on("mouseup.jqGrid"+z.id,function(){if(J.resizing)return J.dragEnd(),!1})},dragMove:function(t){var r=this,i=r.resizing;if(i){var a,o,l=t.pageX+i.delta-i.startX,n=r.headers,s=n[i.idx],d="ltr"===z.direction?s.width+l:s.width-l,c=((z.colModel[i.idx]||{}).autoResizing||{}).minColWidth||z.minResizingWidth;i.moved=!0,d>c&&(null==r.curGbox&&(r.curGbox=e(z.rs)),r.curGbox.css({left:i.sOL+l}),!0===z.forceFit?(a=n[i.idx+z.nv],(o="ltr"===z.direction?a.width-l:a.width+l)>z.autoResizing.minColWidth&&(s.newWidth=d,a.newWidth=o)):(r.newWidth="ltr"===z.direction?z.tblwidth+l:z.tblwidth-l,s.newWidth=d))}},resizeColumn:function(t,r,i){var o,l=this,s=l.headers,d=l.footers,c=s[t],u=c.newWidth||c.width,p=f(n.BODY_TABLE,l.bDiv),h=f(n.HEADER_TABLE,l.hDiv).children("thead").children("tr").first()[0].cells;u=parseInt(u,10),z.colModel[t].width=u,c.width=u,h[t].style.width=u+"px",l.cols[t].style.width=u+"px",l.fbRows&&(e(l.fbRows[0].cells[t]).css("width",u),e(f(n.FROZEN_HEADER_TABLE,l.fhDiv)[0].rows[0].cells[t]).css("width",u),z.footerrow&&e(f(n.FROZEN_FOOTER_TABLE,l.fsDiv)[0].rows[0].cells[t]).css("width",u)),d.length>0&&(d[t].style.width=u+"px"),!0!==i&&V.call(p[0]),!0===z.forceFit?(u=(o=s[t+z.nv]).newWidth||o.width,o.width=u,h[t+z.nv].style.width=u+"px",l.cols[t+z.nv].style.width=u+"px",d.length>0&&(d[t+z.nv].style.width=u+"px"),z.colModel[t+z.nv].width=u):(z.tblwidth=l.newWidth||z.tblwidth,!0!==i&&(l.hDiv.scrollLeft=l.bDiv.scrollLeft,z.footerrow&&(l.sDiv.scrollLeft=l.bDiv.scrollLeft))),z.autowidth||void 0!==z.widthOrg&&"auto"!==z.widthOrg&&"100%"!==z.widthOrg||!0===i||a.setGridWidth.call(p,l.newWidth+z.scrollOffset,!1),r||j.call(p[0],"resizeStop",u,t)},dragEnd:function(){var r=this;r.hDiv.style.cursor="default",r.resizing&&(null!==r.resizing&&!0===r.resizing.moved&&(e(r.headers[r.resizing.idx].el).removeData("autoResized"),r.resizeColumn(r.resizing.idx,!1)),e(z.rs).removeData("pageX"),r.resizing=!1,setTimeout(function(){e(z.rs).css("display","none").prependTo(z.gBox)},z.doubleClickSensitivity)),r.curGbox=null,t.onselectstart=function(){return!0},e(t).off("mousemove.jqGrid mouseup.jqGrid"+z.id)},populateVisible:function(){var t=this,r=e(t),i=t.grid,a=i.bDiv,o=e(a);i.timer&&clearTimeout(i.timer),i.timer=null;var l=o.height();if(l){var n,s;if(t.rows.length)try{n=t.rows[1],s=n?e(n).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(e){s=i.prevRowHeight}if(s){i.prevRowHeight=s;var d=z.rowNum;i.scrollTop=a.scrollTop;var c,u,p,f=i.scrollTop,h=Math.round(r.position().top)-f,g=h+r.height(),m=s*d;if(g<l&&h<=0&&(void 0===z.lastpage||(parseInt((g+f+m-1)/m,10)||0)<=z.lastpage)&&(u=parseInt((l-g+m-1)/m,10)||1,g>=0||u<2||!0===z.scroll?(c=(Math.round((g+f)/m)||0)+1,h=-1):h=1),h>0&&(c=(parseInt(f/m,10)||0)+1,u=(parseInt((f+l)/m,10)||0)+2-c,p=!0),u){if(z.lastpage&&(c>z.lastpage||1===z.lastpage||c===z.page&&c===z.lastpage))return;i.hDiv.loading?i.timer=setTimeout(function(){i.populateVisible.call(t)},z.scrollTimeout):(z.page=c,p&&(i.selectionPreserver.call(t),i.emptyRows.call(t,!1,!1)),i.populate.call(t,u))}}}},scrollGrid:function(){if(z.scroll){var e=this.scrollTop;void 0===J.scrollTop&&(J.scrollTop=0),e!==J.scrollTop&&(J.scrollTop=e,J.timer&&clearTimeout(J.timer),J.timer=setTimeout(function(){J.populateVisible.call(y)},z.scrollTimeout))}return J.hDiv.scrollLeft=this.scrollLeft,z.footerrow&&(J.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var t=this,r=e(t),i=z.selrow,a=z.selarrrow?e.makeArray(z.selarrrow):null,o=t.grid.bDiv,l=o.scrollLeft,n=function(){var e;if(z.selrow=null,!z.multiPageSelection){if(d(z.selarrrow),z.multiselect&&a&&a.length>0)for(e=0;e<a.length;e++)a[e]!==i&&G.call(r,a[e],!1,null);i&&G.call(r,i,!1,null)}o.scrollLeft=l,r.off(".selectionPreserver",n)};r.on("jqGridGridComplete.selectionPreserver",n)}};y.grid=J,j.call(y,"beforeInitGrid"),z.iColByName=H(z.colModel),z.iPropByName=U(z.additionalProperties),o.msie=o.msiever()>0;var Z,$=e("<div class='"+M("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!z.multiselect+"'></div>"),K=o.msie;z.direction=I(z.direction.toLowerCase()),-1===_(z.direction,["ltr","rtl"])&&(z.direction="ltr"),Z=z.direction,e($).insertBefore(y),D.removeClass("scroll").appendTo($);var ee=e("<div class='"+M("gBox","ui-jqgrid")+"'></div>");e(ee).attr({id:z.gBoxId,dir:Z}).insertBefore($),e($).attr("id",z.gViewId).appendTo(ee),e("<div class='"+M("overlay","jqgrid-overlay")+"' id='lui_"+z.id+"'></div>").insertBefore($),e("<div class='"+M("loading","loading")+"' id='load_"+z.id+"'>"+L("loadtext")+"</div>").insertBefore($),D.attr({role:"presentation","aria-labelledby":"gbox_"+y.id});var te,re=["shiftKey","altKey","ctrlKey"],ie=function(e){return h(z.idPrefix,e)},ae=function(e,t,r,i,a,l){var n,s,d,c,u,p,f,h=z.colModel[e],g=r,m=h.classes,v=h.align?"text-align:"+h.align+";":"",w=function(e){return"string"==typeof e?e.replace(/\'/g,"&#39;"):e},x=" aria-describedby='"+z.id+"_"+h.name+"'";if(!0===h.hidden&&(v+="display:none;"),0===t)v+="width: "+J.headers[e].width+"px;";else if((q(h.cellattr)||"string"==typeof h.cellattr&&null!=o.cellattr&&q(o.cellattr[h.cellattr]))&&(n=q(h.cellattr)?h.cellattr:o.cellattr[h.cellattr],z.useUnformattedDataForCellAttr&&null!=l?g=l[h.name]:h.autoResizable&&(s="<span class='"+z.autoResizing.wrapperClassName+"'>",g=r.substring(s.length,r.length-"</span>".length)),"string"==typeof(c=n.call(y,a,g,i,h,l))))for(c=c.replace(/\n/g,"&#xA;");;){if(null===(u=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(c))||u.length<5)return!f&&h.title&&(f=g),x+" style='"+w(v)+"'"+(m?" class='"+w(m)+"'":"")+(f?" title='"+w(f)+"'":"");switch(p=u[3],c=u[4],u[1].toLowerCase()){case"class":m?m+=" "+p:m=p;break;case"title":f=p;break;case"style":v+=p;break;default:x+=" "+u[1]+"="+u[2]+p+u[2]}}return d=""!==v?"style='"+v+"'":"",d+=(void 0!==m?" class='"+m+"'":"")+(h.title&&g?" title='"+b(r).replace(/\'/g,"&apos;")+"'":""),d+=x},oe=function(e){return null==e||""===e?"&#160;":z.autoencode?w(e):String(e)},le=function(e){var t=z.treeReader,r=t.loaded,i=t.leaf_field,a=t.expanded_field,o=function(e){return!0===e||"true"===e||"1"===e};if("nested"===z.treeGridModel&&!e[i]){var l=parseInt(e[t.left_field],10),n=parseInt(e[t.right_field],10);e[i]=n===l+1}void 0!==e[r]&&(e[r]=o(e[r])),e[i]=o(e[i]),e[a]=o(e[a])},ne=function(e,t){var r,i;for(r in z.indexByColumnData)z.indexByColumnData.hasOwnProperty(r)&&(i=e[r],e.hasOwnProperty(r)&&void 0!==i&&""!==i&&(z.ignoreCase&&(i=String(i).toLowerCase()),void 0===z.indexByColumnData[r][i]&&(z.indexByColumnData[r][i]={}),z.indexByColumnData[r][i][t]=e[r],void 0===z.dataIndexById[t]&&(z.dataIndexById[t]={}),void 0===z.dataIndexById[t][r]&&(z.dataIndexById[t][r]={}),z.dataIndexById[t][r][i]=z.indexByColumnData[r][i]))},se=function(){var e,t,r,i,a,o,l,n,s,d,c,u,p=z.data,f=p.length,h=z.localReader,v=z.additionalProperties,b=h.cell,w=z.arrayReaderInfos;if("local"===z.datatype&&!0===h.repeatitems)for(i=!1===z.keyName?q(h.id)?h.id.call(y,p):h.id:z.keyName,isNaN(i)?q(i)||null!=z.arrayReaderInfos[i]&&(a=z.arrayReaderInfos[i].order):a=Number(i),e=0;e<f;e++){t=p[e],r=b?m(t,b)||t:t,d=R(r),l={};for(s in w)w.hasOwnProperty(s)&&(u=w[s],o=m(r,d?u.order:u.name),1===u.type&&null!=(c=v[u.index])&&q(c.convert)&&(o=c.convert(o,r)),void 0!==o&&(l[s]=o));void 0!==l[i]?n=void 0!==l[i]?l[i]:g():(void 0===(n=m(t,R(t)?a:i))&&(n=m(r,R(r)?a:i)),void 0===n&&(n=g())),n=String(n),l[h.id]=n,z.treeGrid&&le(l),S(p[e],l)}else if(z.treeGrid)for(e=0;e<f;e++)le(p[e])},de=function(){var e,t,r,i,a=z.data.length;for(e=!1===z.keyName||z.loadonce&&z.dataTypeOrg?z.localReader.id:z.keyName,z._index={},z.dataIndexById={},z.indexByColumnData=W(),t=0;t<a;t++)i=z.data[t],void 0===(r=m(i,e))&&(r=String(g()),void 0===i[e]&&(i[e]=r)),z._index[r]=t,ne.call(this,i,r)},ce=function(){var t,r,i=e.fn.fmatter;for(t=0;t<z.colModel.length;t++)"string"==typeof(r=z.colModel[t].formatter)&&null!=i&&q(i[r])&&q(i[r].pageFinalization)&&i[r].pageFinalization.call(this,t)},ue=function(t,r){var i,a,o,l=z.colModel,n=l.length;for(i=0;i<n;i++)(a=l[i]).cellBuilder=null,t||(o={colModel:a,gid:z.id,pos:i},void 0===a.formatter?a.cellBuilder=z.autoencode?function(e){return null==e||""===e?"&#160;":w(e)}:function(e){return null==e||""===e?"&#160;":String(e)}:"string"==typeof a.formatter&&null!=e.fn.fmatter&&q(e.fn.fmatter.getCellBuilder)?a.cellBuilder=e.fn.fmatter.getCellBuilder.call(y,a.formatter,o,r||"add"):q(a.getCellBuilder)&&(a.cellBuilder=a.getCellBuilder.call(y,o,r||"add")))},pe=function(r,i,l,n){var s=this,c=e(s),u=new Date,p=z.datatype,f="local"!==p&&z.loadonce||"xmlstring"===p||"jsonstring"===p,h=("xmlstring"===p||"xml"===p)&&e.isXMLDoc(r),v=z.localReader,b=m;if(r&&("xml"!==p||h)){switch(-1!==z.treeANode||z.scroll?i=i>1?i:1:(J.emptyRows.call(s,!1,!0),i=1),f&&(d(z.data),d(z.lastSelectedData),z._index={},z.grouping&&null!=z.groupingView&&(z.groupingView.groups=[],z.groupingView._locgr=!1),z.localReader.id="_id_"),z.reccount=0,p){case"xml":case"xmlstring":v=z.xmlReader,b=o.getXmlData;break;case"json":case"jsonp":case"jsonstring":v=z.jsonReader}var w,y,x,C,D,S,_,I,F,G,k,O,N,T={},E=z.colModel,A=E.length,B=z.arrayReaderInfos,M={},P=function(e){return function(t){var r=null!=t&&q(t.getAttribute)?t.getAttribute(e):null;return null!==r?r:void 0}},L=function(e){return function(){var t,r=M[e];if(null!=r)return t=r.childNodes,t.length>0?t[0].nodeValue:void 0}};z.page=Q(b(r,v.page),z.page),z.lastpage=Q(b(r,v.total),1),z.records=Q(b(r,v.records)),q(v.userdata)?z.userData=v.userdata.call(s,r)||{}:h?b(r,v.userdata,!0).each(function(){z.userData[this.getAttribute("name")]=e(this).text()}):z.userData=b(r,v.userdata)||{},ue();var V,H,W,U,X={},Z=z.additionalProperties,$=function(e,t){h&&"string"==typeof t&&(/^\w+$/.test(t)?X[e]=L(t):/^\[\w+\]$/.test(t)&&(X[e]=P(t.substring(1,t.length-1))))},K=function(e){var t=e.name,r=h?e.xmlmap||t:"local"===p&&!z.dataTypeOrg||"jsonstring"===p||"json"===p||"jsonp"===p?e.jsonmap||t:t;!1!==z.keyName&&!0===e.key&&(z.keyName=t),("string"==typeof r||q(r))&&(X[t]=r),q(r)||$(t,r)};for(w=0;w<A;w++)K(E[w]);for(A=Z.length,w=0;w<A;w++)"object"==typeof(W=Z[w])&&null!=W?K(W):$(W,W);if(D=!1===z.keyName?q(v.id)?v.id.call(s,r):v.id:z.keyName,isNaN(D)?q(D)||(B[D]&&(S=B[D].order),h&&("string"==typeof D&&/^\[\w+\]$/.test(D)?D=P(D.substring(1,D.length-1)):"string"==typeof D&&/^\w+$/.test(D)&&(D=L(D)))):S=Number(D),C=b(r,v.root,!0),v.row)if(1===C.length&&"string"==typeof v.row&&/^\w+$/.test(v.row)){for(U=[],k=(G=C[0].childNodes).length,F=0;F<k;F++)1===(O=G[F]).nodeType&&O.nodeName===v.row&&U.push(O);C=U}else C=b(C,v.row,!0);null==C&&R(r)&&(C=r),C||(C=[]),(x=C.length)>0&&z.page<=0&&(z.page=1);var ee=parseInt(z.rowNum,10);n&&(ee*=n+1);var te,re,ie=[],ae=[];for(U=[],w=0;w<x;w++){if(re=C[w],y=v.repeatitems&&v.cell?b(re,v.cell,!0)||re:re,V=v.repeatitems&&(h||R(y)),T={},M={},h&&!V&&null!=y)for(k=(G=y.childNodes).length,F=0;F<k;F++)1===(O=G[F]).nodeType&&(M[O.nodeName]=O);for(I in B)B.hasOwnProperty(I)&&(N=B[I],V?(H=y[N.order],h&&null!=H&&(H=H.textContent||H.text)):H=null!=X[I]&&"string"!=typeof X[I]?X[I].call(s,y,{cmName:I,iItem:w}):b(y,"string"==typeof X[I]?X[I]:N.name),1===N.type&&null!=(W=Z[N.index])&&q(W.convert)&&(H=W.convert(H,y)),void 0!==H&&(T[I]=H));if(void 0!==T[D]?te=void 0!==T[D]?T[D]:g():(void 0===(te=b(re,R(re)?S:D))&&(te=b(y,R(y)?S:D)),void 0===te&&(te=g())),void 0===T[D]&&(T[D]=te),te=String(te),_=z.idPrefix+te,z.treeGrid&&le(T),w<ee)ae.push(_),ie.push(y),U.push(T);else if(!f)break;(f||!0===z.treeGrid)&&(T._id_=te,z.data.push(T),ne(T,te),z._index[T._id_]=z.data.length-1)}if(f&&!0!==z.treeGrid){if(z.forceClientSorting)return;z.lastSelectedData=z.data.slice()}var oe=o.parseDataToHtml.call(s,x,ae,U,ie,i,n,f);ue(!0);var se=z.treeANode>-1?z.treeANode:0,de=e(s.tBodies[0]);if(!0===z.treeGrid&&se>0?e(s.rows[se]).after(oe.join("")):z.scroll?de.append(oe.join("")):null==s.firstElementChild||void 0!==t.documentMode&&t.documentMode<=9?(de.html(de.html()+oe.join("")),s.grid.cols=s.rows[0].cells):(s.firstElementChild.innerHTML+=oe.join(""),s.grid.cols=s.rows[0].cells),z.grouping&&Y.call(s),!0===z.subGrid)try{a.addSubGrid.call(c,z.iColByName.subgrid)}catch(e){}if(!1===z.gridview||q(z.afterInsertRow))for(w=0;w<Math.min(x,ee);w++)j.call(s,"afterInsertRow",ae[w],U[w],ie[w]);if(z.totaltime=new Date-u,w>0&&0===z.records&&(z.records=x),d(oe),!0===z.treeGrid)try{a.setTreeNode.call(c,se+1,w+se+1)}catch(e){}z.reccount=Math.min(x,ee),z.treeANode=-1,z.userDataOnFooter&&a.footerData.call(c,"set",z.userData,!0),f&&(z.records=x,z.lastpage=Math.ceil(x/ee)),l||s.updatepager(!1,!0),ce.call(s)}},fe=function(){function t(e){var r,i,a,o,l,n,d=0;if(null!=e.groups){for((i=e.groups.length&&"OR"===e.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<e.groups.length;r++){d>0&&i&&b.or();try{t(e.groups[r])}catch(e){O(e)}d++}i&&b.orEnd()}if(null!=e.rules)try{for((a=e.rules.length&&"OR"===e.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<e.rules.length;r++)l=e.rules[r],o=e.groupOp.toString().toUpperCase(),v[l.op]&&l.field?(d>0&&o&&"OR"===o&&(b=b.or()),null!=(n=s[l.field])&&(n.reader,b=v[l.op](b,o)(l.field,l.data,s[l.field]))):null!=z.customSortOperations&&null!=z.customSortOperations[l.op]&&q(z.customSortOperations[l.op].filter)&&(b=b.custom(l.op,l.field,l.data)),d++;a&&b.orEnd()}catch(e){O(e)}}var r=e(this),i=z.multiSort?[]:"",l={},n=!1,s={},d=[],c=[],u=P("formatter.date.srcformat"),p=P("formatter.date.newformat");if(!R(z.data))return{};z.multiSort&&ye(i,l);var f,h,g=!!z.grouping&&z.groupingView,m=function(e,t,r){var a,o,l=e.index||e.name,m=e.sorttype||"text";if(s[e.name]={reader:z.dataTypeOrg?e.name:e.jsonmap||e.name,iCol:t,stype:m,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===r},"date"!==m&&"datetime"!==m||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(a=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:u,o=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:p):a=o=e.datefmt||"Y-m-d",s[e.name].srcfmt=a,s[e.name].newfmt=o),z.grouping)for(h=0,f=g.groupField.length;h<f;h++)e.name===g.groupField[h]&&(d[h]=s[l],c[h]=l);z.multiSort||n||e.index!==z.sortname&&e.name!==z.sortname||(i=e.name,n=!0)};if(F(z.colModel,function(e){m(this,e)}),F(z.additionalProperties,function(e){m("string"==typeof this?{name:this}:this,e,!0)}),z.treeGrid)return a.SortTree.call(r,i,z.sortorder,null!=s[i]&&s[i].stype?s[i].stype:"text",null!=s[i]&&s[i].srcfmt?s[i].srcfmt:""),!1;var v={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().inSet:e.andNot().inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},b=o.from.call(this,z.data);if(z.ignoreCase&&(b=b.ignoreCase()),!0===z.search){var w=z.postData[(z.searching||{}).sFilter||z.prmNames.filters];if(w)"string"==typeof w&&(w=e.parseJSON(w)),t(w);else try{var y=s[z.postData.searchField];b=v[z.postData.searchOper](b)(q(y.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+z.idSel+'")[0].p.colModel['+y.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+y.reader+"')",z.postData.searchString,s[z.postData.searchField])}catch(e){}}if(z.grouping)for(h=0;h<f&&h<c.length&&h<d.length;h++)b.orderBy(c[h],g.groupOrder[h],d[h].stype,d[h].srcfmt);z.multiSort?F(i,function(){b.orderBy(this,l[this],s[this].stype,s[this].srcfmt,s[this].sfunc)}):i&&z.sortorder&&n&&b.orderBy(z.sortname,"DESC"===z.sortorder.toUpperCase()?"d":"a",s[i].stype,s[i].srcfmt,s[i].sfunc),z.lastSelectedData=b.select();var x=parseInt(z.rowNum,10),C=z.lastSelectedData.length,j=parseInt(z.page,10),D=Math.ceil(C/x),S={};if(z.grouping&&z.groupingView._locgr){z.groupingView.groups=[];var _,I,G;if(z.footerrow&&z.userDataOnFooter){for(I in z.userData)z.userData.hasOwnProperty(I)&&(z.userData[I]=0);G=!0}for(_=0;_<C;_++){if(G)for(I in z.userData)z.userData.hasOwnProperty(I)&&(z.userData[I]+=parseFloat(z.lastSelectedData[_][I]||0));a.groupingPrepare.call(r,z.lastSelectedData[_],_,x)}}b=null,s=null;var k=z.localReader;return S[k.total]=D,S[k.page]=j,S[k.records]=C,S[k.root]=z.lastSelectedData.slice((j-1)*x,j*x),S[k.userdata]=z.userData,S},he=function(r){var i,a=this,o=r.outerWidth();return o<=0&&(i=e(a).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",e(t.body).append("<div id='testpg' class='"+M("gBox","ui-jqgrid")+"' style='font-size:"+i+";visibility:hidden;margin:0;padding:0;' ></div>"),e(r).clone().appendTo("#testpg"),o=e("#testpg>.ui-pg-table").width(),e("#testpg").remove()),o>0&&r.parent().width(o),o},ge=function(){var t=this;t.grid.hDiv.loading=!0,z.hiddengrid||a.progressBar.call(e(t),{method:"show",loadtype:z.loadui,htmlcontent:L("loadtext")})},me=function(){var t=this;t.grid.hDiv.loading=!1,a.progressBar.call(e(t),{method:"hide",loadtype:z.loadui})},ve=function(t){var r=this,i=e(r),l=r.grid;if(!l.hDiv.loading){var n,s,c=z.scroll&&!1===t,u={},p=z.prmNames;z.page<=0&&(z.page=Math.min(1,z.lastpage)),null!==p.search&&(u[p.search]=z.search),null!==p.nd&&(u[p.nd]=(new Date).getTime()),(isNaN(parseInt(z.rowNum,10))||parseInt(z.rowNum,10)<=0)&&(z.rowNum=z.maxRowNum),null!==p.rows&&(u[p.rows]=z.rowNum),null!==p.page&&(u[p.page]=z.page),null!==p.sort&&(u[p.sort]=z.sortname),null!==p.order&&(u[p.order]=z.sortorder),null!==z.rowTotal&&null!==p.totalrows&&(u[p.totalrows]=z.rowTotal);var f=q(z.loadComplete),h=f?z.loadComplete:null,g=0;if(t=t||1,t>1?null!==p.npage?(u[p.npage]=t,g=t-1,t=1):h=function(e){z.page++,l.hDiv.loading=!1,f&&z.loadComplete.call(r,e),ve.call(r,t-1)}:null!==p.npage&&delete z.postData[p.npage],z.grouping&&a.groupingSetup){a.groupingSetup.call(i);var m,v,b,w,x=z.groupingView,C="";for(m=0;m<x.groupField.length;m++){for(v=x.groupField[m],b=0;b<z.colModel.length;b++)(w=z.colModel[b]).name===v&&w.index&&(v=w.index);C+=v+" "+x.groupOrder[m]+", "}u[p.sort]=C+u[p.sort]}S(z.postData,u);var D=z.scroll?r.rows.length-1:1,R=function(){V.call(r),z.autowidth||void 0!==z.widthOrg&&"auto"!==z.widthOrg&&"100%"!==z.widthOrg||a.setGridWidth.call(i,z.tblwidth+z.scrollOffset,!1)},_=function(){var e;if(z.autoresizeOnLoad)a.autoResizeAllColumns.call(i),d(z.columnsToReResizing),z.autowidth&&a.setGridWidth.call(i,i.closest(".ui-jqgrid").parent().width(),!0);else{for(e=0;e<z.columnsToReResizing.length;e++)a.autoResizeColumn.call(i,z.columnsToReResizing[e]);d(z.columnsToReResizing)}},I=function(){j.call(r,"loadComplete",s),_(),i.triggerHandler("jqGridAfterLoadComplete",[s]),me.call(r),z.datatype="local",z.datastr=null,R()},F=function(e){i.triggerHandler("jqGridLoadComplete",[e]),h&&h.call(r,e),_(),i.triggerHandler("jqGridAfterLoadComplete",[e]),c&&l.populateVisible.call(r),1===t&&me.call(r),R()},G=function(){var e=fe.call(r);pe.call(r,e,D,t>1,g),F(e)};if(!j.call(r,"beforeRequest"))return;if(q(z.datatype))return void z.datatype.call(r,z.postData,"load_"+z.id,D,t,g);switch(n=z.datatype.toLowerCase(),e(J.eDiv).hide(),n){case"json":case"jsonp":case"xml":case"script":e.ajax(S({url:z.url,type:z.mtype,dataType:n,data:o.serializeFeedback.call(y,z.serializeGridData,"jqGridSerializeGridData",z.postData),success:function(i,a,o){z.jqXhr=null,e(J.eDiv).hide(),q(z.beforeProcessing)&&!1===z.beforeProcessing.call(r,i,a,o)?me.call(r):(pe.call(r,i,D,t>1,g),F(i),(z.loadonce||z.treeGrid)&&(z.dataTypeOrg=z.datatype,z.datatype="local",z.forceClientSorting&&G()))},error:function(e,i,a){z.jqXhr=null,q(z.loadError)&&z.loadError.call(r,e,i,a),1===t&&me.call(r)},beforeSend:function(e,t){var i=!0;if(q(z.loadBeforeSend)&&(i=z.loadBeforeSend.call(r,e,t)),void 0===i&&(i=!0),!1===i)return!1;z.jqXhr=e,ge.call(r)}},o.ajaxOptions,z.ajaxGridOptions));break;case"xmlstring":ge.call(r),s="string"==typeof z.datastr?e.parseXML(z.datastr):z.datastr,pe.call(r,s),I(),z.forceClientSorting&&G();break;case"jsonstring":ge.call(r),s=z.datastr&&"string"==typeof z.datastr?e.parseJSON(z.datastr):z.datastr,pe.call(r,s),I(),z.forceClientSorting&&G();break;case"local":case"clientside":ge.call(r),z.datatype="local",G()}}},be=function(t){var r=this.grid;e(z.cb,r.hDiv).prop("checked",t),z.frozenColumns&&e(z.cb,r.fhDiv).prop("checked",t)},we=function(t,r){var i,a,l,n,s,u,p=M("states.hover"),f=M("states.disabled"),h="<td class='ui-pg-button "+f+"'><span class='ui-separator'></span></td>",g="",m="<table style='table-layout:auto;white-space: pre;"+("left"===z.pagerpos?"margin-right:auto;":"right"===z.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",v="",b=function(e,t,r){return!!j.call(y,"onPaging",e,{newPage:t,currentPage:Q(z.page,1),lastPage:Q(z.lastpage,1),currentRowNum:Q(z.rowNum,10),newRowNum:r})&&(z.selrow=null,z.multiselect&&(z.multiPageSelection||d(z.selarrrow),be.call(y,!1)),d(z.savedRow),z.editingInfo={},!0)};if(r+="_"+t,i="pg_"+t,a=t+"_left",l=t+"_center",n=t+"_right",e("#"+c(t)).append("<div id='"+i+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+a+"' class='ui-jqgrid-pg-left'"+(void 0!==z.pagerLeftWidth?" style='width:"+z.pagerLeftWidth+"px;'":"")+"></td><td id='"+l+"' class='ui-jqgrid-pg-center'"+(void 0!==z.pagerCenterWidth?" style='width:"+z.pagerCenterWidth+"px;'":"")+"></td><td id='"+n+"' class='ui-jqgrid-pg-right'"+(void 0!==z.pagerRightWidth?" style='width:"+z.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),i="#"+c(i),z.rowList.length>0){v="<td dir='"+Z+"'>";var w=L("pgrecs");v+="<select class='"+M("pager.pagerSelect","ui-pg-selbox")+"' "+(w?"title='"+w+"'":"")+">";var x;for(u=0;u<z.rowList.length;u++)1===(x=z.rowList[u].toString().split(":")).length&&(x[1]=x[0]),v+="<option value='"+x[0]+"'"+(Q(z.rowNum,0)===Q(x[0],0)?" selected='selected'":"")+">"+x[1]+"</option>";v+="</select></td>"}if("rtl"===Z&&(m+=v),!0===z.pginput&&(g="<td dir='"+Z+"'>"+o.format(L("pgtext")||"","<input aria-label='Page No.' class='"+M("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+t+"'>0</span>")+"</td>"),t="#"+c(t),!0===z.pgbuttons){var D=["first","prev","next","last"],q=D.slice(),R=M("pager.pagerButton","ui-pg-button");for("rtl"===Z&&D.reverse(),u=0;u<D.length;u++)m+=function(e,t){var i=L("pg"+e);return"<td role='button' tabindex='0' id='"+e+r+"' class='"+R+"' "+(i?"title='"+i+"'":"")+"><span class='"+B("pager."+t)+"'></span></td>"}(D[u],q[u]),1===u&&(m+=""!==g?h+g+h:"")}else""!==g&&(m+=g);"ltr"===Z&&(m+=v),m+="</tr></tbody></table>",!0===z.viewrecords&&e("td"+t+"_"+z.recordpos,i).append("<span dir='"+Z+"' style='text-align:"+z.recordpos+"' class='ui-paging-info'></span>");var S=e("td"+t+"_"+z.pagerpos,i);S.append(m),s=he.call(this,S.children(".ui-pg-table")),z._nvtd=[],z._nvtd[0]=s?Math.floor((z.width-s)/2):Math.floor(z.width/3),z._nvtd[1]=0,m=null,e(".ui-pg-selbox",i).on("change",function(){var t=Q(this.value,10),r=Math.round(z.rowNum*(z.page-1)/t-.5)+1;return!!b("records",r,t)&&(z.page=r,z.rowNum=t,z.pager&&e(".ui-pg-selbox",z.pager).val(t),z.toppager&&e(".ui-pg-selbox",z.toppager).val(t),ve.call(y),!1)}),!0===z.pgbuttons&&(e(".ui-pg-button",i).hover(function(){C(this,f)?this.style.cursor="default":(e(this).addClass(p),this.style.cursor="pointer")},function(){C(this,f)||(e(this).removeClass(p),this.style.cursor="default")}),e("#first"+c(r)+", #prev"+c(r)+", #next"+c(r)+", #last"+c(r)).click(function(){if(C(this,f))return!1;var e=Q(z.page,1),t=e,i=this.id,a=Q(z.lastpage,1),o=!1,l=!0,n=!0,s=!0,d=!0;return 0===a||1===a?(e<=1&&(l=!1,n=!1),s=!1,d=!1):a>1&&e>=1?1===e?(l=!1,n=!1):e===a&&(s=!1,d=!1):a>1&&0===e&&(s=!1,d=!1,e=a-1),this.id==="first"+r&&l&&(i="first",t=1,o=!0),this.id==="prev"+r&&n&&(i="prev",t=e-1,o=!0),this.id==="next"+r&&s&&(i="next",t=e+1,o=!0),this.id==="last"+r&&d&&(i="last",t=a,o=!0),!!b(i,t,Q(z.rowNum,10))&&(z.page=t,o&&ve.call(y),!1)})),!0===z.pginput&&e("input.ui-pg-input",i).on("keypress.jqGrid",function(t){var r=t.charCode||t.keyCode||0,i=Q(e(this).val(),1);return 13===r?!!b("user",i,Q(z.rowNum,10))&&(e(this).val(i),z.page=e(this).val()>0?e(this).val():z.page,ve.call(y),!1):this}),S.children(".ui-pg-table").on("keydown.jqGrid",function(e){var t;13===e.which&&(t=S.find(":focus")).length>0&&t.trigger("click")})},ye=function(t,r,i){if(F((z.sortname+" "+z.sortorder).split(","),function(){var r=e.trim(this).split(" ");2===r.length&&t.push(r[0])}),null!=i){var a=e.inArray(i.index||i.name,t);""!==i.lso&&a<0?t.push(i.index||i.name):""===i.lso&&a>=0&&t.splice(a,1)}F(z.colModel,function(){var i,a=this.index||this.name;this.lso&&(i=this.lso.split("-"),e.inArray(a,t)<0&&t.push(a),r[a]=i[i.length-1])})},xe=function(t,r){var i,a="",l=z.colModel[t],n=M("states.disabled"),s=e(z.frozenColumns?r:y.grid.headers[t].el),d=s.find("span.s-ico"),c=d.children("span.ui-icon-asc"),u=d.children("span.ui-icon-desc"),p=c,f=u,h=[],g={};if(s.find("span.ui-grid-ico-sort").addClass(n),s.attr("aria-selected","false"),l.lso?(d.show(),"desc"===(i=(i=l.lso.split("-"))[i.length-1])&&(p=u,f=c),p.removeClass(n).css("display",""),z.showOneSortIcon&&f.hide(),s.attr("aria-selected","true")):z.viewsortcols[0]||d.hide(),ye(h,g,l),"string"==typeof z.sortname&&""!==z.sortname&&z.sortname.split(",").length<h.length){var m=function(t){F(z.colModel,function(){var r,i="#jqgh_"+o.jqID(z.id+"_"+this.name),a=e(i);if(this.lso&&(this.index||this.name)===t){if("function"==typeof h.indexOf)r=h.indexOf(t);else{for(r=0;r<h.length&&h[r]!==t;r++);r===h.length&&(r=-1)}r>=0&&(h.splice(r,1),this.lso="")}z.frozenColumns&&(a=a.add(e(J.fhDiv).find(i))),a.children(".s-ico")[this.lso?"show":"hide"]()})};if("lastClickedFirstSorted"===z.multiSortOrder&&h.length>1)for(h.unshift(h[h.length-1]),h.pop();h.length>z.maxSortColumns;)m(h[h.length-1]);else q(z.multiSortOrder)&&(h=z.multiSortOrder.call(y,{sortNames:h,cm:l,sortDirs:g,removeSorting:m})||h)}F(h,function(){a.length>0&&(a+=", "),a+=this+" "+g[this],z.sortorder=g[this]}),z.sortname=a.substring(0,a.length-z.sortorder.length-1),z.showSortOrder&&F(z.colModel,function(){if(this.sortable){var t=_(this.name,h),r="#jqgh_"+o.jqID(z.id+"_"+this.name),i=e(r);z.frozenColumns&&(i=i.add(e(J.fhDiv).find(r))),i.children(".ui-jqgrid-sort-order").html(t<0?"&nbsp;":q(z.formatSortOrder)?z.formatSortOrder.call(y,{cm:this,sortIndex:t}):t+1)}})},Ce=function(t,r,i,o,l,n){var s=this,u=s.grid,p=z.colModel[r],f=M("states.disabled");if(null!=p&&p.sortable&&!(z.savedRow.length>0)){if(z.lastsort===r&&""!==z.sortname?"asc"===z.sortorder?z.sortorder="desc":"desc"===z.sortorder?z.sortorder="asc":z.sortorder=p.firstsortorder||"asc":z.sortorder=p.firstsortorder||"asc",p.lso?"asc"===p.lso?p.lso+="-desc":"desc"===p.lso?p.lso+="-asc":"asc-desc"!==p.lso&&"desc-asc"!==p.lso||!z.threeStateSort&&!z.multiSort||(p.lso=""):p.lso=p.firstsortorder||"asc",i||(z.page=1),z.multiSort)xe(r,l);else{if(o){if(z.lastsort===r&&z.sortorder===o&&!i)return;z.sortorder=o}var h=u.headers,g=u.fhDiv,m=h[z.lastsort]?e(h[z.lastsort].el):e(),v=e(z.frozenColumns?l:h[r].el),b=v.find("span.s-ico"),w=b.children("span.ui-icon-"+z.sortorder),y=b.children("span.ui-icon-"+("asc"===z.sortorder?"desc":"asc"));p=z.colModel[z.lastsort],m.find("span.ui-grid-ico-sort").addClass(f),m.attr("aria-selected","false"),z.frozenColumns&&(g.find("span.ui-grid-ico-sort").addClass(f),g.find("th").attr("aria-selected","false")),z.viewsortcols[0]||(z.lastsort!==r?(z.frozenColumns&&g.find("span.s-ico").hide(),m.find("span.s-ico").hide(),b.show()):""===z.sortname&&b.show()),z.lastsort!==r&&"true"===m.data("autoResized")&&(null!=p&&null!=p.autoResizing&&p.autoResizing.compact||z.autoResizing.compact)&&z.columnsToReResizing.push(z.lastsort),p=z.colModel[r],b.css("display",""),""!==p.lso?(w.removeClass(f).css("display",""),z.showOneSortIcon&&y.removeClass(f).hide(),v.attr("aria-selected","true")):(v.attr("aria-selected","false"),z.threeStateSort&&(z.sortorder="",z.viewsortcols[0]||b.hide())),z.lastsort!==r&&"true"===v.data("autoResized")&&(null!=p&&null!=p.autoResizing&&p.autoResizing.compact||z.autoResizing.compact)&&z.columnsToReResizing.push(r),z.sortname=p.index||t}if(j.call(s,"onSortCol",z.sortname,r,z.sortorder,n||{})){if("local"===z.datatype?z.deselectAfterSort&&!z.multiPageSelection&&a.resetSelection.call(e(s)):z.multiPageSelection||(z.selrow=null,z.multiselect&&(be.call(s,!1),d(z.selarrrow))),d(z.savedRow),z.editingInfo={},z.scroll){var x=u.bDiv.scrollLeft;J.emptyRows.call(s,!0,!1),u.hDiv.scrollLeft=x}z.subGrid&&"local"===z.datatype&&e("td.sgexpanded","#"+c(z.id)).each(function(){e(this).trigger("click")}),ve.call(s),z.lastsort=r,z.sortname!==t&&r&&(z.lastsort=r)}else z.lastsort=r}},je=function(e){var t,r=e,i=e;for(t=e+1;t<z.colModel.length;t++)if(!0!==z.colModel[t].hidden){i=t;break}return i-r},De=function(e){return z.iColByName[(e.id||"").substring(z.id.length+1)]};-1===_(z.multikey,re)&&(z.multikey=!1),z.keyName=!1,z.sortorder=z.sortorder.toLowerCase(),o.cell_width=o.cellWidth();var qe,Re,Se=o.cmTemplate;for(qe=0;qe<z.colModel.length;qe++)te="string"==typeof(Re=z.colModel[qe]).template?null==Se||"object"!=typeof Se[Re.template]&&!q(Se[Re.template])?{}:Se[Re.template]:Re.template,q(te)&&(te=te.call(y,{cm:Re,iCol:qe})),Re=S(!0,{},z.cmTemplate,te||{},Re),!1===z.keyName&&!0===Re.key&&(z.keyName=Re.name),z.colModel[qe]=Re;for(z.indexByColumnData=W(),qe=0;qe<z.additionalProperties.length;qe++)Re=z.additionalProperties[qe],!1===z.keyName&&!0===Re.key&&(z.keyName=Re.name);if(0===z.colNames.length)for(qe=0;qe<z.colModel.length;qe++)z.colNames[qe]=void 0!==z.colModel[qe].label?z.colModel[qe].label:z.colModel[qe].name;if(z.colNames.length===z.colModel.length){if(!0===z.grouping&&(z.scroll=!1,z.rownumbers=!1,z.treeGrid=!1,z.gridview=!0),z.subGrid&&q(a.setSubGrid))try{a.setSubGrid.call(D)}catch(e){}if(z.multiselect&&("left"===z.multiselectPosition||"right"===z.multiselectPosition)){var _e="left"===z.multiselectPosition?"unshift":"push";z.colNames[_e]("<span class='slds-checkbox'><input id='"+z.cbId+"' class='cbox' type='checkbox' aria-checked='false' name='"+z.cbId+"'/><label class='slds-checkbox__label' for='"+z.cbId+"'><span class='slds-checkbox_faux'></span></label></span>"),z.colModel[_e]({name:"cb",width:o.cell_width?z.multiselectWidth+z.cellLayout:z.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(z.rownumbers&&(z.colNames.unshift(""),z.colModel.unshift({name:"rn",width:o.cell_width?z.rownumWidth+z.cellLayout:z.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),z.iColByName=H(z.colModel),z.xmlReader=S(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},z.xmlReader),z.jsonReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},z.jsonReader),z.localReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},z.localReader),z.scroll&&(z.pgbuttons=!1,z.pginput=!1,z.rowList=[]),!0===z.treeGrid){try{a.setTreeGrid.call(D)}catch(e){}"local"!==z.datatype&&(z.localReader={id:"_id_"}),z.iPropByName=U(z.additionalProperties)}if(function(){var e,t,r,i=z.remapColumns,a=z.colModel,o=a.length,l=[];for(e=0;e<o;e++)r=a[e].name,_(r,z.reservedColumnNames)<0&&l.push(r);if(null!=i)for(t=l.slice(),e=0;e<i.length;e++)l[e]=t[i[e]];z.cmNamesInputOrder=l}(),function(){var t,r,i,a,o,l=z.colModel,n=z.cmNamesInputOrder,s=z.additionalProperties,d=n.length;for(z.arrayReaderInfos={},r=z.arrayReaderInfos,o=0;o<d;o++)i=n[o],_(i,z.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(void 0!==(a=z.iColByName[i])?r[i]={name:i,index:a,order:o,type:0}:void 0!==(a=z.iPropByName[i])?r[i]={name:i,index:a,order:o,type:1}:i===(z.prmNames.rowidName||"rowid")&&(r[i]={index:a,type:2}));for(d=l.length,t=0;t<d;t++)i=l[t].name,_(i,z.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(r[i]={name:i,index:t,order:o,type:0},o++);for(d=s.length,t=0;t<d;t++)null==(i=s[t])||r.hasOwnProperty(i)||("object"==typeof i&&"string"===e.type(i.name)&&(i=i.name),r[i]={name:i,index:t,order:o,type:1},o++)}(),z.data.length&&(se.call(y),de.call(y)),!0===z.shrinkToFit&&!0===z.forceFit)for(qe=z.colModel.length-1;qe>=0;qe--)if(!0!==z.colModel[qe].hidden){z.colModel[qe].resizable=!1;break}var Ie,Fe,Ge,ke,Oe,Ne,Te,Ee,Ae=[],Be=[],Me=[],ze="<thead><tr class='ui-jqgrid-labels' role='row'>",Pe="<tbody><tr style='display:none;'>",Le=M("states.hover"),Ve=M("states.disabled");if(z.multiSort){Ae=z.sortname.split(",");var He;for(He=0;He<Ae.length;He++)Me=I(Ae[He]).split(" "),Ae[He]=I(Me[0]),Be[He]=Me[1]?I(Me[1]):z.sortorder||"asc"}for(qe=0;qe<z.colNames.length;qe++){switch(Re=z.colModel[qe],Oe=z.headertitles||Re.headerTitle?" title='"+b("string"==typeof Re.headerTitle?Re.headerTitle:z.colNames[qe])+"'":"",ze+="<th id='"+z.id+"_"+Re.name+"' class='"+M("colHeaders","ui-th-column ui-th-"+Z+" "+(Re.labelClasses||""))+"'"+Oe+">",Ie=Re.index||Re.name,Re.labelAlign){case"left":Ne="text-align:left;";break;case"right":Ne="text-align:right;";break;case"likeData":Ne=void 0===Re.align||"left"===Re.align?"text-align:left;":"right"===Re.align?"text-align:right;":"";break;default:Ne=""}ze+="<div id='jqgh_"+z.id+"_"+Re.name+"'"+(K?" class='ui-th-div-ie'":"")+(""===Ne?"":" style='"+Ne+"'")+" role='columnheader'>",Ee=Re.autoResizable&&"actions"!==Re.formatter?"<span class='"+z.autoResizing.wrapperClassName+"'>"+z.colNames[qe]+"</span>":z.colNames[qe],z.sortIconsBeforeText?(ze+=(z.builderSortIcons||o.builderSortIcons).call(y,qe),ze+=Ee):(ze+=Ee,ze+=(z.builderSortIcons||o.builderSortIcons).call(y,qe)),ze+="</div></th>",Pe+="<td></td>",Re.width=Re.width?parseInt(Re.width,10):150,"boolean"!=typeof Re.title&&(Re.title=!0),Re.lso="",Ie===z.sortname&&(z.lastsort=qe,Re.lso=z.sortorder||Re.firstsortorder||"asc"),z.multiSort&&-1!==(Me=_(Ie,Ae))&&(Re.lso=Be[Me])}ze+="</tr></thead>",Pe+="</tr></tbody>";var We=e("<table class='"+M("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+z.id+"'>"+ze+Pe+"</table>");if(e(We[0].tHead).children("tr").children("th").hover(function(){e(this).addClass(Le)},function(){e(this).removeClass(Le)}),z.multiselect&&e(z.cb,We).on("click",function(){var t,r,i=M("states.select"),a=[],o=z.iColByName.cb,l=function(t,r){e(t)[r?"addClass":"removeClass"](i).attr(r?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==o&&e(t.cells[o]).children("span").children("input.cbox").prop("checked",r)},n=J.fbRows,s=Ve+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",c=z._index;if(d(z.selarrrow),this.checked){if(t=!0,z.selrow=y.rows.length>1?y.rows[y.rows.length-1].id:null,z.multiPageSelection&&("local"===z.datatype||z.treeGrid)&&null!=z.data&&z.data.length>0&&null!=c)for(r in c)c.hasOwnProperty(r)&&z.selarrrow.push(z.idPrefix+r)}else t=!1,z.selrow=null;var u=t?z.selarrrow:a;e(y.rows).each(function(r){C(this,s)||(l(this,t),e.inArray(this.id,u)<0&&u.push(this.id),n&&l(n[r],t))}),j.call(y,"onSelectAll",t?z.selarrrow:a,t)}),!0===z.autowidth){var Ue=Math.floor(e(ee).innerWidth());z.width=Ue>0?Ue:"nw"}isNaN(z.width)?isNaN(parseFloat(z.width))||(z.width=parseFloat(z.width)):z.width=Number(z.width),z.widthOrg=z.width,function(){var e,t,r,i,a=0,l=o.cell_width?0:Q(z.cellLayout,0),n=0,s=Q(z.scrollOffset,0),d=!1,c=0,u=o.isCellClassHidden;F(z.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),z.grouping&&z.autowidth){var e=_(this.name,z.groupingView.groupField);e>=0&&z.groupingView.groupColumnShow.length>e&&(this.hidden=!z.groupingView.groupColumnShow[e])}this.widthOrg=t=Q(this.width,0),!1!==this.hidden||u(this.classes)||(a+=t+l,this.fixed?c+=t+l:n++)}),isNaN(z.width)&&(z.width=a+(!1!==z.shrinkToFit||isNaN(z.height)?0:s)),J.width=z.width,z.tblwidth=a,!1===z.shrinkToFit&&!0===z.forceFit&&(z.forceFit=!1),!0===z.shrinkToFit&&n>0&&(r=J.width-l*n-c,isNaN(z.height)||(r-=s,d=!0),a=0,F(z.colModel,function(i){!1!==this.hidden||u(this.classes)||this.fixed||(t=Math.round(r*this.width/(z.tblwidth-l*n-c)),this.width=t,a+=t,e=i)}),i=0,d?J.width-c-(a+l*n)!==s&&(i=J.width-c-(a+l*n)-s):d||1===Math.abs(J.width-c-(a+l*n))||(i=J.width-c-(a+l*n)),z.colModel[e].width+=i,z.tblwidth=a+i+l*n+c,z.tblwidth>z.width&&(z.colModel[e].width-=z.tblwidth-parseInt(z.width,10),z.tblwidth=z.width))}(),e(ee).css("width",J.width+"px").append("<div class='"+M("resizer","ui-jqgrid-resize-mark")+"' id='"+z.rsId+"'>&#160;</div>"),e(z.rs).on("selectstart",function(){return!1}).click(X).dblclick(function(t){var r=e(this).data("idx"),i=e(this).data("pageX"),o=z.colModel[r];if(null==i||null==o)return!1;var l=String(i).split(";"),n=parseFloat(l[0]),s=parseFloat(l[1]);return!(2===l.length&&(Math.abs(n-s)>5||Math.abs(t.pageX-n)>5||Math.abs(t.pageX-s)>5)||(j.call(y,"resizeDblClick",r,o,t)&&o.autoResizable&&a.autoResizeColumn.call(D,r),j.call(y,"afterResizeDblClick",{iCol:r,cm:o,cmName:o.name}),1))}),e($).css("width",J.width+"px");var Ye="";z.footerrow&&(Ye+="<table role='presentation' style='width:1px' class='"+M("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+M("rowFooter","footrow footrow-"+Z)+"'>");var Xe="<tr class='"+M("gridRow","jqgfirstrow ui-row-"+z.direction)+"' role='row' style='height:auto'>";if(z.disableClick=!1,e("th",We[0].tHead.rows[0]).each(function(r){var i=z.colModel[r],a=i.name,o=e(this),l=o.children("div"),n=l.children("span.s-ico"),s=z.showOneSortIcon;Fe=i.width,void 0===i.resizable&&(i.resizable=!0),i.resizable?(Ge=t.createElement("span"),e(Ge).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+Z).on("selectstart",function(){return!1}),o.addClass(z.resizeclass)):Ge="",o.css("width",Fe+"px").prepend(Ge),Ge=null;var d="";if(!0===i.hidden&&(o.css("display","none"),d="display:none;"),Xe+="<td role='gridcell' "+(i.classes?"class='"+i.classes+"' ":"")+"style='height:0;width:"+Fe+"px;"+d+"'></td>",J.headers[r]={width:Fe,el:this},"boolean"!=typeof(ke=i.sortable)&&(i.sortable=!0,ke=!0),"cb"!==a&&"subgrid"!==a&&"rn"!==a&&ke&&z.viewsortcols[2]&&l.addClass("ui-jqgrid-sortable"),ke)if(z.multiSort){var c="desc"===i.lso?"asc":"desc";z.viewsortcols[0]?(n.css("display",""),i.lso&&(n.children("span.ui-icon-"+i.lso).removeClass(Ve),s&&n.children("span.ui-icon-"+c).hide())):i.lso&&(n.css("display",""),n.children("span.ui-icon-"+i.lso).removeClass(Ve),s&&n.children("span.ui-icon-"+c).hide()),z.showSortOrder&&(Me=_(a,Ae),n["beforeSortIcons"===z.sortOrderPosition?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(Me<0?"&nbsp;":q(z.formatSortOrder)?z.formatSortOrder.call(y,{cm:this,sortIndex:Me}):Me+1)+"</span>"))}else{var u="desc"===z.sortorder?"asc":"desc";z.viewsortcols[0]?(n.css("display",""),r===z.lastsort&&(n.children("span.ui-icon-"+z.sortorder).removeClass(Ve),s&&n.children("span.ui-icon-"+u).hide())):r===z.lastsort&&""!==i.lso&&(n.css("display",""),n.children("span.ui-icon-"+z.sortorder).removeClass(Ve),s&&n.children("span.ui-icon-"+u).hide())}z.footerrow&&(Ye+="<td role='gridcell' "+ae(r,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(t){var r,i=e(this),a=i.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===e(t.target).closest("th>span.ui-jqgrid-resize").length)return null!=(r=De(this))&&(!0===z.forceFit&&(z.nv=je(r)),J.dragStart(r,t,function(){var t=[i.position().left+i.outerWidth()];return"rtl"===z.direction&&(t[0]=z.width-t[0]),t[0]-=a?0:J.bDiv.scrollLeft,t.push(e(J.hDiv).position().top),t.push(e(J.bDiv).offset().top-e(J.hDiv).offset().top+e(J.bDiv).height()+(J.sDiv?e(J.sDiv).height():0)),t}(),i)),!1}).click(function(t){if(z.disableClick)return z.disableClick=!1,!1;var r,i,a="th.ui-th-column>div";z.viewsortcols[2]?a+=".ui-jqgrid-sortable":a+=">span.s-ico>span.ui-grid-ico-sort";var o=e(t.target).closest(a);if(1===o.length){z.viewsortcols[2]||(r=!0,i=o.hasClass("ui-icon-desc")?"desc":"asc");var l=De(this);return null!=l&&Ce.call(y,e("div",this)[0].id.substring(5+z.id.length+1),l,r,i,this,t),!1}}),z.sortable&&q(a.sortableColumns))try{a.sortableColumns.call(D,e(We[0].tHead.rows[0]))}catch(e){}z.footerrow&&(Ye+="</tr></tbody></table>"),Xe+="</tr>",D.html("<tbody>"+Xe+"</tbody>"),D.addClass(M("grid","ui-jqgrid-btable"+(!0===z.altRows&&D.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var Qe=!(!z.caption||!0!==z.hiddengrid),Je=e("<div class='ui-jqgrid-hbox"+("rtl"===Z?"-rtl":"")+"'></div>"),Ze=M("top"),$e=M("bottom");if(J.hDiv=t.createElement("div"),e(J.hDiv).css({width:J.width+"px"}).addClass(M("hDiv","ui-jqgrid-hdiv")).append(Je).scroll(function(){var t=e(this).next(".ui-jqgrid-bdiv")[0];return t&&(t.scrollLeft=this.scrollLeft),!1}),e(Je).append(We),We=null,Qe&&e(J.hDiv).hide(),z.rowNum=parseInt(z.rowNum,10),(isNaN(z.rowNum)||z.rowNum<=0)&&(z.rowNum=z.maxRowNum),z.pager){var Ke,et;"string"==typeof z.pager&&"#"!==z.pager.substr(0,1)?(et=z.pager,Ke=e("#"+c(z.pager))):!0===z.pager?(et=g(),(Ke=e("<div id='"+et+"'></div>")).appendTo("body"),z.pager="#"+c(et)):et=(Ke=e(z.pager)).attr("id"),Ke.length>0?(Ke.css({width:J.width+"px"}).addClass(M("pager.pager","ui-jqgrid-pager "+$e)).appendTo(ee),Qe&&Ke.hide(),we.call(y,et,""),z.pager="#"+c(et)):z.pager=""}!1===z.cellEdit&&!0===z.hoverrows&&D.on("mouseover.jqGrid",function(t){Te=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(Te).attr("class")&&e(Te).addClass(Le)}).on("mouseout.jqGrid",function(t){Te=e(t.target).closest("tr.jqgrow"),e(Te).removeClass(Le)});var tt,rt,it,at=function(t){var r,i,a;do{if((r=e(t).closest("td")).length>0){if(i=r.parent(),a=i.parent().parent(),i.is(".jqgrow")&&(a[0]===this||a.is("table.ui-jqgrid-btable")&&(a[0].id||"").replace("_frozen","")===this.id))break;t=r.parent()}}while(r.length>0);return r};D.before(J.hDiv).click(function(t){var r=M("states.select"),i=t.target,l=at.call(y,i),n=l.parent(),s=function(){z.multiselect&&u&&!z.multiboxonly&&p&&G.call(D,tt,!0,t);try{a.editCell.call(D,n[0].rowIndex,rt,!0)}catch(e){}};if(0!==n.length&&!C(n,Ve)){tt=n[0].id;var u=e(i).hasClass("cbox")&&e(i).is(":enabled")&&!C(i,Ve),p=j.call(y,"beforeSelectRow",tt,t),f=o.detectRowEditing.call(y,tt),h=null!=f&&"cellEditing"!==f.mode;if("A"!==i.tagName&&(!h||u))if(rt=l[0].cellIndex,it=l.html(),j.call(y,"onCellSelect",tt,rt,it,t),!0!==z.cellEdit||z.noCellSelection)if(p){if(z.multikey)t[z.multikey]?G.call(D,tt,!0,t):z.multiselect&&u&&(u=e("#jqg_"+c(z.id)+"_"+tt).is(":checked"),e("#jqg_"+c(z.id)+"_"+tt).prop("checked",!u));else if(z.multiselect&&z.multiboxonly)if(u)G.call(D,tt,!0,t);else{var g=z.frozenColumns?z.id+"_frozen":"";e(z.selarrrow).each(function(t,i){var o=a.getGridRowById.call(D,i);o&&e(o).removeClass(r),e("#jqg_"+c(z.id)+"_"+c(i)).prop("checked",!1),g&&(e("#"+c(i),"#"+c(g)).removeClass(r),e("#jqg_"+c(z.id)+"_"+c(i),"#"+c(g)).prop("checked",!1))}),d(z.selarrrow),G.call(D,tt,!0,t)}else{var m=z.selrow;G.call(D,tt,!0,t),"toggle"!==z.singleSelectClickMode||z.multiselect||m!==tt||(y.grid.fbRows&&(n=n.add(y.grid.fbRows[n[0].rowIndex]===n[0]?y.rows[n[0].rowIndex]:y.grid.fbRows[n[0].rowIndex])),n.removeClass(r).attr({"aria-selected":"false",tabindex:"-1"}),z.selrow=null)}z.cellEdit&&s()}else u&&e(i).prop("checked",!1);else s()}}).on("reloadGrid",function(t,r){var i=this,o=i.grid,l=e(this);if(!0===z.treeGrid&&(z.datatype=z.treedatatype),r=S({},s.reloadGridOptions||{},z.reloadGridOptions||{},r||{}),"local"===z.datatype&&z.dataTypeOrg&&z.loadonce&&r.fromServer&&(z.datatype=z.dataTypeOrg,delete z.dataTypeOrg),r.current&&o.selectionPreserver.call(i),"local"===z.datatype?(z.multiPageSelection||a.resetSelection.call(l),z.data.length&&(se.call(i),de.call(i))):z.treeGrid||z.multiPageSelection||(z.selrow=null,z.multiselect&&(d(z.selarrrow),be.call(i,!1)),d(z.savedRow),z.editingInfo={}),z.iRow=-1,z.iCol=-1,z.scroll&&J.emptyRows.call(i,!0,!1),r.page){var n=parseInt(r.page,10);n>z.lastpage&&(n=z.lastpage),n<1&&(n=1),z.page=n,o.prevRowHeight?o.bDiv.scrollTop=(n-1)*o.prevRowHeight*z.rowNum:o.bDiv.scrollTop=0}return o.prevRowHeight&&z.scroll&&void 0===r.page?(delete z.lastpage,o.populateVisible.call(i)):o.populate.call(i),!0===z._inlinenav&&l.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(e){var t=at.call(y,e.target),r=t.parent();if(t.length>0&&!j.call(y,"ondblClickRow",r.attr("id"),r[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=at.call(y,e.target),r=t.parent(),i=r.attr("id");if(0!==t.length)return z.multiselect||z.selrow===i||!0!==z.selectOnContextMenu||G.call(D,i,!0,e),!!j.call(y,"onRightClickRow",i,r[0].rowIndex,t[0].cellIndex,e)&&void 0}),J.bDiv=t.createElement("div"),K&&"auto"===String(z.height).toLowerCase()&&(z.height="100%"),e(J.bDiv).append(e("<div style='position:relative;'></div>").append("<div></div>").append(y)).addClass("ui-jqgrid-bdiv").css({height:z.height+(isNaN(z.height)?"":"px"),width:J.width+"px"}).scroll(J.scrollGrid),z.maxHeight&&e(J.bDiv).css("max-height",z.maxHeight+(isNaN(z.maxHeight)?"":"px")),D.css({width:"1px"}),e.support.tbody||2===e(">tbody",y).length&&e(">tbody:gt(0)",y).remove(),z.multikey&&e(J.bDiv).on(o.msie?"selectstart":"mousedown",function(){return!1}),Qe&&e(J.bDiv).hide(),J.cDiv=t.createElement("div");var ot=B("gridMinimize.visible"),lt=B("gridMinimize.hidden"),nt=L("showhide"),st=!0===z.hidegrid?e("<a role='link' class='"+M("titleButton","ui-jqgrid-titlebar-close")+"'"+(nt?" title='"+nt+"'":"")+"/>").hover(function(){st.addClass(Le)},function(){st.removeClass(Le)}).append("<span class='"+ot+"'></span>"):"";if(e(J.cDiv).append("<span class='ui-jqgrid-title'>"+z.caption+"</span>").append(st).addClass(M("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===Z?"-rtl ":" ")+Ze)),e(J.cDiv).insertBefore(J.hDiv),z.toolbar[0]){J.uDiv=t.createElement("div"),"top"===z.toolbar[1]?e(J.uDiv).insertBefore(J.hDiv):"bottom"===z.toolbar[1]&&e(J.uDiv).insertAfter(J.hDiv);var dt=M("toolbarUpper","ui-userdata");"both"===z.toolbar[1]?(J.ubDiv=t.createElement("div"),e(J.uDiv).addClass(dt).attr("id","t_"+z.id).insertBefore(J.hDiv),e(J.ubDiv).addClass(M("toolbarBottom","ui-userdata")).attr("id","tb_"+z.id).insertAfter(J.hDiv),Qe&&e(J.ubDiv).hide()):e(J.uDiv).width(J.width).addClass(dt).attr("id","t_"+z.id),Qe&&e(J.uDiv).hide()}if("string"==typeof z.datatype&&(z.datatype=z.datatype.toLowerCase()),z.toppager?(z.toppager=z.id+"_toppager",J.topDiv=e("<div id='"+z.toppager+"'></div>")[0],e(J.topDiv).addClass(M("pager.pager","ui-jqgrid-toppager"+(z.caption?"":" "+Ze))).css({width:J.width+"px"}).insertBefore(J.hDiv),we.call(y,z.toppager,"_t"),z.toppager="#"+c(z.toppager)):""!==z.pager||z.scroll||(z.rowNum=z.maxRowNum),z.footerrow&&(J.sDiv=e("<div class='ui-jqgrid-sdiv'></div>")[0],Je=e("<div class='ui-jqgrid-hbox"+("rtl"===Z?"-rtl":"")+"'></div>"),e(J.sDiv).append(Je).width(J.width).insertAfter(J.hDiv),e(Je).append(Ye),J.footers=e(".ui-jqgrid-ftable",J.sDiv)[0].rows[0].cells,z.rownumbers&&(J.footers[0].className=M("rowNum","jqgrid-rownum")),Qe&&e(J.sDiv).hide()),Je=null,z.caption){var ct=z.datatype;!0===z.hidegrid&&(e(".ui-jqgrid-titlebar-close",J.cDiv).click(function(t){var r=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",i=this;!0===z.toolbar[0]&&("both"===z.toolbar[1]&&(r+=",#"+c(e(J.ubDiv).attr("id"))),r+=",#"+c(e(J.uDiv).attr("id")));var a=e(r,z.gView).length;return z.toppager&&(r+=","+z.toppager),"visible"===z.gridstate?e(r,z.gBox).slideUp("fast",function(){0==--a&&(e("span",i).removeClass(ot).addClass(lt),z.gridstate="hidden",e(z.gBox).hasClass("ui-resizable")&&e(".ui-resizable-handle",z.gBox).hide(),e(J.cDiv).addClass($e),Qe||j.call(y,"onHeaderClick",z.gridstate,t))}):"hidden"===z.gridstate&&(e(J.cDiv).removeClass($e),e(r,z.gBox).slideDown("fast",function(){0==--a&&(e("span",i).removeClass(lt).addClass(ot),Qe&&(z.datatype=ct,ve.call(y),Qe=!1),z.gridstate="visible",e(z.gBox).hasClass("ui-resizable")&&e(".ui-resizable-handle",z.gBox).show(),Qe||j.call(y,"onHeaderClick",z.gridstate,t))})),!1}),Qe&&(z.datatype="local",e(".ui-jqgrid-titlebar-close",J.cDiv).trigger("click")))}else e(J.cDiv).hide(),e(J.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");e(J.hDiv).after(J.bDiv),J.eDiv=e("<div class='"+M("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+Z)+"' style='display:none;'><span class='"+M("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],e(J.hDiv).after(J.eDiv),e(ee).click(X).dblclick(function(t){var r=e(z.rs),i=r.offset(),o=r.data("idx"),l=r.data("delta"),n=z.colModel[o],s=e(this).data("pageX")||r.data("pageX");if(null==s||null==n)return!1;var d=String(s).split(";"),c=parseFloat(d[0]),u=parseFloat(d[1]);return!(2===d.length&&(Math.abs(c-u)>5||Math.abs(t.pageX-c)>5||Math.abs(t.pageX-u)>5)||(j.call(y,"resizeDblClick",o,n)&&i.left-1<=t.pageX+l&&t.pageX+l<=i.left+r.outerWidth()+1&&n.autoResizable&&a.autoResizeColumn.call(D,o),j.call(y,"afterResizeDblClick",{iCol:o,cm:n,cmName:n.name}),1))}),z.pager||e(J.cDiv).nextAll("div:visible").filter(":last").addClass($e),e(".ui-jqgrid-labels",J.hDiv).on("selectstart",function(){return!1}),y.formatCol=ae,y.sortData=Ce,y.updatepager=function(t,r){var i,a,l,s,d,c,u,p,h=this,g=e(h),m=h.grid,v=z.pager||"",b=z.pager?"_"+z.pager.substr(1):"",w=m.bDiv,y=e.fmatter?e.fmatter.NumberFormat:null,x=z.toppager?"_"+z.toppager.substr(1):"",C=M("states.hover"),D=M("states.disabled");if((l=parseInt(z.page,10)-1)<0&&(l=0),l*=parseInt(z.rowNum,10),d=l+z.reccount,z.scroll){var q=e(f(n.BODY_TABLE,w)[0].rows).slice(1);l=d-q.length,z.reccount=q.length;var R=q.outerHeight()||m.prevRowHeight;if(R){var S=l*R,_=o.fixMaxHeightOfDiv.call(h,parseInt(z.records,10)*R);e(w).children("div").first().css({height:_+"px"}).children("div").first().css({height:S+"px",display:""}),0===w.scrollTop&&z.page>1&&(w.scrollTop=z.rowNum*(z.page-1)*R)}w.scrollLeft=m.hDiv.scrollLeft}if(v+=z.toppager?(v?",":"")+z.toppager:""){if(u=P("formatter.integer")||{},i=Q(z.page),a=Q(z.lastpage),e(".selbox",v).prop("disabled",!1),!0===z.pginput){var I=e(".ui-pg-input",v),F=String(z.page).length;I.val(z.page),I.each(function(){var t=parseInt(e(this).attr("size"),10);t>0&&t<F&&e(this).attr("size",F)}),p=z.toppager?"#sp_1"+b+",#sp_1"+x:"#sp_1"+b,e(p).html(e.fmatter?y(z.lastpage,u):z.lastpage).closest(".ui-pg-table").each(function(){he.call(h,e(this))})}z.viewrecords&&(0===z.reccount?e(".ui-paging-info",v).html(L("emptyrecords")):(s=l+1,c=z.records,e.fmatter&&(s=y(s,u),d=y(d,u),c=y(c,u)),e(".ui-paging-info",v).html(o.format(L("recordtext"),s,d,c)))),!0===z.pgbuttons&&(a<=0&&(i=0),i<=0&&(i=a=0),1===i||0===i?(e("#first"+b+", #prev"+b).addClass(D).removeClass(C),z.toppager&&e("#first_t"+x+", #prev_t"+x).addClass(D).removeClass(C)):(e("#first"+b+", #prev"+b).removeClass(D),z.toppager&&e("#first_t"+x+", #prev_t"+x).removeClass(D)),i===a||0===i?(e("#next"+b+", #last"+b).addClass(D).removeClass(C),z.toppager&&e("#next_t"+x+", #last_t"+x).addClass(D).removeClass(C)):(e("#next"+b+", #last"+b).removeClass(D),z.toppager&&e("#next_t"+x+", #last_t"+x).removeClass(D)))}!0===t&&!0===z.rownumbers&&e(">td.jqgrid-rownum",h.rows).each(function(t){e(this).html(l+1+t)}),r&&z.jqgdnd&&g.jqGrid("gridDnD","updateDnD"),j.call(h,"gridComplete"),g.triggerHandler("jqGridAfterGridComplete")},y.refreshIndex=de,y.addItemDataToColumnIndex=ne,y.removeItemDataFromColumnIndex=function(t){var r,i,a,o=z.dataIndexById[t];if(null!=o){for(r in o)if(o.hasOwnProperty(r)){i=o[r];for(a in i)i.hasOwnProperty(a)&&(delete z.indexByColumnData[r][a][t],e.isEmptyObject(z.indexByColumnData[r][a])&&delete z.indexByColumnData[r][a])}delete z.dataIndexById[t]}},y.generateValueFromColumnIndex=function(t,r,i){var a,o,l=e(this).jqGrid("getUniqueValueFromColumnIndex",t),n="";if(null!=l)for(i=i||";",r=r||":",a=0,o=l.length;a<o;a++)""!==n&&(n+=i||";"),n+=l[a]+(r||":")+l[a];return n},y.setHeadCheckBox=be,y.fixScrollOffsetAndhBoxPadding=V,y.constructTr=function(t,r,i,l,n,s){var d,c="-1",u="",p=r?"display:none;":"",f=this,h=M("gridRow","jqgrow ui-row-"+z.direction)+(i?" "+i:"")+(s?" "+M("states.select"):""),g=e(f).triggerHandler("jqGridRowAttr",[l,n,t]);if("object"!=typeof g&&(g=q(z.rowattr)?z.rowattr.call(f,l,n,t):"string"==typeof z.rowattr&&null!=o.rowattr&&q(o.rowattr[z.rowattr])?o.rowattr[z.rowattr].call(f,l,n,t):{}),null!=g&&!e.isEmptyObject(g)){g.hasOwnProperty("id")&&(t=g.id,delete g.id),g.hasOwnProperty("tabindex")&&(c=g.tabindex,delete g.tabindex),g.hasOwnProperty("style")&&(p+=g.style,delete g.style),g.hasOwnProperty("class")&&(h+=" "+g.class,delete g.class);try{delete g.role}catch(e){}for(d in g)g.hasOwnProperty(d)&&(u+=" "+d+"="+g[d])}if(z.treeGrid&&parseInt(l[z.treeReader.level_field],10)!==parseInt(z.tree_root_level,10)){var m=a.getNodeParent.call(e(this),l);!m||!m.hasOwnProperty(z.treeReader.expanded_field)||m[z.treeReader.expanded_field]||r||(p+="display:none;")}return"<tr role='row' id='"+t+"' tabindex='"+c+"' class='"+h+"'"+(""===p?"":" style='"+p+"'")+u+">"},y.formatter=function(t,r,i,a,o,l){var n,s=z.colModel[i];if(void 0!==s.formatter){var d={rowId:t=""!==String(z.idPrefix)?ie(t):t,colModel:s,gid:z.id,pos:i,rowData:l||a};n=q(s.cellBuilder)?s.cellBuilder.call(y,r,d,a,o):q(s.formatter)?s.formatter.call(y,r,d,a,o):e.fmatter?e.fn.fmatter.call(y,s.formatter,r,d,a,o):oe(r)}else n=oe(r);if(n=s.autoResizable&&"actions"!==s.formatter?"<span class='"+z.autoResizing.wrapperClassName+"'>"+n+"</span>":n,z.treeGrid&&"edit"!==o&&(null==z.ExpandColumn&&0===i||z.ExpandColumn===s.name)){null==l&&(l=z.data[z._index[t]]);var c=parseInt(l[z.treeReader.level_field]||0,10),u=0===parseInt(z.tree_root_level,10)?c:c-1,p=l[z.treeReader.leaf_field],f=l[z.treeReader.expanded_field],h=l[z.treeReader.icon_field],g=p?(null!=h&&""!==h?h:z.treeIcons.leaf)+" tree-leaf":f?z.treeIcons.minus+" tree-minus":z.treeIcons.plus+" tree-plus";if(!p&&h&&"string"==typeof h){var m=h.split(",");2===m.length&&(g=f?m[0]:m[1])}n="<div class='tree-wrap' style='width:"+18*(u+1)+"px;'><div class='"+x(z.treeIcons.commonIconClass,g,"treeclick")+"' style='"+(!0===z.ExpandColClick?"cursor:pointer;":"")+("rtl"===z.direction?"margin-right:":"margin-left:")+18*u+"px;'></div></div><span class='cell-wrapper"+(p?"leaf":"")+"'"+(z.ExpandColClick?" style='cursor:pointer;'":"")+">"+n+"</span>"}return n},S(J,{populate:ve,emptyRows:function(r,i){var a=this,o=J.bDiv,l=null!=J.fbDiv?J.fbDiv.children(".ui-jqgrid-btable")[0]:null,n=function(r){if(r){var i=r.rows,a=i[0];if(z.deepempty)i&&e(i).slice(1).remove();else if(z.quickEmpty)if("quickest"===z.quickEmpty)r.replaceChild(t.createElement("tbody"),r.tBodies[0]),r.firstChild.appendChild(a);else for(;i.length>1;)r.deleteRow(i.length-1);else e(r.firstChild).empty().append(a)}};e(a).off(".jqGridFormatter"),n(a),n(l),r&&z.scroll&&(e(o.firstChild).css({height:"auto"}),e(o.firstChild.firstChild).css({height:0,display:"none"}),0!==o.scrollTop&&(o.scrollTop=0)),!0===i&&z.treeGrid&&(d(z.data),d(z.lastSelectedData),z._index={},z.dataIndexById={},z.indexByColumnData={}),z.rowIndexes={},z.iRow=-1,z.iCol=-1},beginReq:ge,endReq:me}),y.addXmlData=pe,y.addJSONData=pe,y.rebuildRowIndexes=Y,y.grid.cols=y.rows[0].cells,j.call(y,"onInitGrid"),z.treeGrid&&"local"===z.datatype&&null!=z.data&&z.data.length>0&&(z.datatype="jsonstring",z.datastr=z.data,z.data=[]),ve.call(y),z.hiddengrid=!1}else O(P("errors.model"))}else O("Element is not a table!")}})};var D=e.fn.jqGrid;o.extend({getGridRes:function(t){var r=this[0];if(!r||!r.grid||!r.p)return null;var i=o.getRes(l[r.p.locale],t)||o.getRes(l["en-US"],t),a=o.getRes(o,t);return"object"!=typeof i||null===i||e.isArray(i)?void 0!==a?a:i:e.extend(!0,{},i,a||{})},getGuiStyles:function(t,r){var i=this instanceof e&&this.length>0?this[0]:this;if(!i||!i.grid||!i.p)return"";var a,l=i.p.guiStyle||o.defaults.guiStyle||"jQueryUI",n=o.getRes(o.guiStyles[l],t);return void 0===n&&"string"==typeof(a=o.getRes(o.guiStyles[l],"baseGuiStyle"))&&(n=o.getRes(o.guiStyles[a],t)),o.mergeCssClasses(n||"",r||"")},isBootstrapGuiStyle:function(){return e.inArray("ui-jqgrid-bootstrap",e(this).jqGrid("getGuiStyles","gBox").split(" "))>=0},displayErrorMessage:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(r&&r.grid&&r.p&&t){var i=e(r.grid.eDiv),a=i.children(".ui-jqgrid-error");a.html(t),i.show(),r.p.errorDisplayTimeout&&setTimeout(function(){a.empty(),i.hide()},r.p.errorDisplayTimeout)}},getIconRes:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(!r||!r.p)return"";var i=r.p,a=o.icons[i.iconSet],l=function(e,t){var r,i,a,l=t.split("."),n=l.length,s=[];if(null==(e="string"==typeof e?o.icons[e]:e))return"";for((r=e).common&&s.push(r.common),a=0;a<n&&(i=l[a]);a++){if(void 0===(r=r[i])){if("common"===i)break;return""}if("string"==typeof r){s.push(r);break}null!=r&&r.common&&s.push(r.common)}return o.mergeCssClasses.apply(this,s)};if(null==a)return"";var n=l(i.iconSet,t);return""===n&&null!=a.baseIconSet&&(n=l(a.baseIconSet,t)),n||""},isInCommonIconClass:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(!r||!r.p)return"";var i=r.p,a=o.icons[i.iconSet];if(null==a)return!1;var l=a.common;if(void 0===l){if(null==a.baseIconSet)return!1;if(null==(a=o.icons[a.baseIconSet]))return!1;l=a.common}return"string"==typeof l&&e.inArray(t,l.split(" "))>=0},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var r,i=[],a="",o=t.p.indexByColumnData[e];if(null!=o){for(a in o)if(o.hasOwnProperty(a)){for(r in o[a])if(o[a].hasOwnProperty(r)){a=String(o[a][r]);break}i.push(a)}t.p.ignoreCase?void 0===String.prototype.localeCompare?i.sort(function(e,t){var r=e.toLowerCase(),i=t.toLowerCase();return r===i?0:r>i?1:-1}):i.sort(function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())}):i.sort()}return i},generateDatalistFromColumnIndex:function(t){if(!this[0]||!this[0].grid)return null;var r,i,a=this.jqGrid("getUniqueValueFromColumnIndex",t),o=e("<datalist></datalist>");if(!(null!=a&&a.length>0))return e();for(r=0,i=a.length;r<i;r++)o.append(e("<option></option>").attr("value",a[r]));return o},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(t,r){return this.each(function(){var i=this;if(null==r&&(r=!1),i.grid&&"object"==typeof t)if(!0===r){var a=e.extend({},i.p,t);i.p=a}else e.extend(!0,i.p,t)})},abortAjaxRequest:function(){return this.each(function(){var e=this;null!=e.p.jqXhr&&e.p.jqXhr.abort(),e.grid.endReq.call(e)})},getGridRowById:function(t){if(null==t)return null;var r,i=t.toString();return this.each(function(){var a,o,l=this.rows;if(null!=this.p.rowIndexes&&(o=l[this.p.rowIndexes[i]])&&o.id===i&&(r=o),!r)try{for(a=l.length;a--;)if(o=l[a],i===o.id){r=o;break}}catch(i){r=e(this.grid.bDiv).find("#"+c(t)),r=r.length>0?r[0]:null}}),r},getDataIDs:function(){var t=[];return this.each(function(){var r,i,a=this.rows,o=a.length;if(o&&o>0)for(r=0;r<o;r++)i=a[r],e(i).hasClass("jqgrow")&&t.push(i.id)}),t},setSelection:function(t,r,i){return this.each(function(){var a,l,n,s,d,c,u,p=this,f=e(p),h=p.p,g=D.getGuiStyles,m=D.getGridRowById,v=g.call(f,"states.select"),b=g.call(f,"states.disabled"),w=p.grid.fbRows,y=function(t,r){var i=r?"addClass":"removeClass",a=h.iColByName.cb,o=r?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},l=function(t){e(t)[i](v).attr(o),void 0!==a&&e(t.cells[a]).children("span").children("input.cbox").prop("checked",r)};l(t),w&&l(w[t.rowIndex])};void 0!==t&&(r=!1!==r,null!=i&&(u=e(i.target).closest("tr.jqgrow")).length>0&&(l=u[0],w&&(l=p.rows[l.rowIndex])),null==l&&(l=m.call(f,t)),!l||!l.className||l.className.indexOf(b)>-1||(!0===h.scrollrows&&null!=(n=m.call(f,t))&&(n=n.rowIndex)>=0&&function(t,r){var i=r.clientHeight,a=r.scrollTop,o=e(t).position().top,l=t.clientHeight;o+l>=i+a?r.scrollTop=o-(i+a)+l+a:o<i+a&&o<a&&(r.scrollTop=o)}(p.rows[n],p.grid.bDiv),h.multiselect?(p.setHeadCheckBox(!1),h.selrow=l.id,-1===(s=e.inArray(h.selrow,h.selarrrow))?(a=!0,h.selarrrow.push(h.selrow)):null!==o.detectRowEditing.call(p,l.id)?a=!0:(a=!1,h.selarrrow.splice(s,1),d=h.selarrrow[0],h.selrow=void 0===d?null:d),"ui-subgrid"!==l.className&&y(l,a),r&&j.call(p,"onSelectRow",l.id,a,i||{})):"ui-subgrid"!==l.className&&(h.selrow!==l.id?(null!==h.selrow&&(c=m.call(f,h.selrow))&&y(c,!1),y(l,!0),a=!0):a=!1,h.selrow=l.id,r&&j.call(p,"onSelectRow",l.id,a,i||{}))))})},resetSelection:function(t){return this.each(function(){var r,i=this,a=e(this),o=i.p,l=D.getGuiStyles,n=D.getGridRowById,s=l.call(a,"states.select"),c="edit-cell "+s,u="selected-row "+l.call(a,"states.hover"),p=o.iColByName.cb,f=void 0!==p,h=i.grid.fbRows,g=function(t){var r,i={"aria-selected":"false",tabindex:"-1"};e(t).removeClass(s).attr(i),f&&e(t.cells[p]).children("span").children("input.cbox").prop("checked",!1),h&&(r=h[t.rowIndex],e(r).removeClass(s).attr(i),f&&e(r.cells[p]).children("span").children("input.cbox").prop("checked",!1))};if(void 0!==t){if(r=n.call(a,t),g(r),f){i.setHeadCheckBox(!1);var m=e.inArray(t,o.selarrrow);-1!==m&&o.selarrrow.splice(m,1)}}else o.multiselect?(e(i.rows).each(function(){var t=e.inArray(this.id,o.selarrrow);-1!==t&&(g(this),o.selarrrow.splice(t,1))}),i.setHeadCheckBox(!1),o.multiPageSelection||d(o.selarrrow),o.selrow=null):o.selrow&&(r=n.call(a,o.selrow),g(r),o.selrow=null);!0===o.cellEdit&&parseInt(o.iCol,10)>=0&&parseInt(o.iRow,10)>=0&&(null!=(r=i.rows[o.iRow])&&(e(r.cells[o.iCol]).removeClass(c),e(r).removeClass(u)),h&&null!=(r=h[o.iRow])&&(e(r.cells[o.iCol]).removeClass(c),e(r).removeClass(u))),d(o.savedRow),o.editingInfo={}})},isCellEditing:function(t,r,i){var a=this[0],l=o.detectRowEditing.call(a,t);if(null!=l&&("inlineEditing"===l.mode||"cellEditing"===l.mode&&l.savedRow.ic===r)){r=isNaN(r)?a.p.iColByName[r]:parseInt(r,10);var n=null!=i&&i.id===t?i:D.getGridRowById.call(e(a),t),s=a.p.colModel[r],d=s.editable;if(e.isFunction(d)&&(d=d.call(a,{rowid:t,id:h(a.p.idPrefix,t),iCol:r,iRow:n.rowIndex,cmName:s.name,cm:s,mode:l.mode,td:n.cells[r],tr:n,dataElement:o.getDataFieldOfCell.call(a,n,r)[0]})),!0===d)return!0}return!1},getRowData:function(t,r){var i,a={};return"object"==typeof t&&(r=t,t=void 0),r=r||{},this.each(function(){var l,n,s,d,c,u,p,f=this,g=f.p,m=!1,v=1,b=f.rows;if(void 0===t)m=!0,i=[],v=b.length;else if(!(l=D.getGridRowById.call(e(f),t)))return a;for(n=0;n<v;n++)if(m&&(l=b[n]),e(l).hasClass("jqgrow")){for(o.detectRowEditing.call(f,t),d=e(l).find("td[role=gridcell]"),s=0;s<d.length;s++)if(c=g.colModel[s],u=c.name,e.inArray(u,g.reservedColumnNames)<0&&"actions"!==c.formatter&&(!r.skipHidden||!c.hidden))if(p=d[s],D.isCellEditing.call(e(f),t,s,l))a[u]=o.getEditedValue.call(f,o.getDataFieldOfCell.call(f,l,s),c,{},c.editable);else if(!0===g.treeGrid&&u===g.ExpandColumn)a[u]=y(e("span",p).first().html());else try{a[u]=e.unformat.call(f,p,{rowId:t,colModel:c},s)}catch(t){a[u]=y(e(p).html())}!r.includeId||!1!==g.keyName&&null!=a[g.keyName]||(a[g.prmNames.id]=h(g.idPrefix,l.id)),m&&(i.push(a),a={})}}),i||a},delRowData:function(t){var r,i,a,o=!1;return this.each(function(){var l=this,n=l.p;if(!(r=D.getGridRowById.call(e(l),t)))return!1;if(n.subGrid&&(a=e(r).next()).hasClass("ui-subgrid")&&a.remove(),e(r).remove(),n.records--,n.reccount--,l.updatepager(!0,!1),o=!0,n.multiselect&&-1!==(i=e.inArray(t,n.selarrrow))&&n.selarrrow.splice(i,1),n.multiselect&&n.selarrrow.length>0?n.selrow=n.selarrrow[n.selarrrow.length-1]:n.selrow===t&&(n.selrow=null),"local"===n.datatype){var s=h(n.idPrefix,t),d=n._index[s];void 0!==d&&(l.removeItemDataFromColumnIndex(s),n.data.splice(d,1),l.refreshIndex())}if(l.rebuildRowIndexes(),!0===n.altRows&&o&&!e(l).jqGrid("isBootstrapGuiStyle")){var c=n.altclass,u=l.grid.fbRows;e(l.rows).each(function(t){var r=e(this);u&&(r=r.add(u[this.rowIndex])),r[t%2==0?"addClass":"removeClass"](c)})}j.call(l,"afterDelRow",t)}),o},setRowData:function(t,r,i){var a=!0;return this.each(function(){var o,l=this,n=l.p,s=typeof i,d={};if(!l.grid)return!1;if(!(o=D.getGridRowById.call(e(l),t)))return!1;if(r)try{var c,u=h(n.idPrefix,t),p=n._index[u],f={},g=null!=p?n.data[p]:void 0;if(e(n.colModel).each(function(t){var i=this,a=i.name,o=m(r,a);void 0!==o&&("local"===n.datatype&&null!=g&&(o=v.call(l,o,i,g[a],u,g,t),e.isFunction(i.saveLocally)?i.saveLocally.call(l,{newValue:o,newItem:d,oldItem:g,id:u,cm:i,cmName:a,iCol:t}):d[a]=o),f[a]=o)}),e(n.colModel).each(function(i){var a,s=this,c=s.name,u=m(r,c),p=e(o.cells[i]);if(void 0!==u){"local"===n.datatype&&null!=g&&(u=d[c]),a=s.title?{title:u}:{},u=l.formatter(t,u,i,r,"edit",f),"select"===s.formatter&&(a=s.title?{title:b(u)}:{});var h=p;!0===n.treeGrid&&c===n.ExpandColumn&&(h=h.children("span.cell-wrapperleaf,span.cell-wrapper").first()),h.html(u),p.attr(a),n.frozenColumns&&(h=e(l.grid.fbRows[o.rowIndex].cells[i]),!0===n.treeGrid&&c===n.ExpandColumn&&(h=h.children("span.cell-wrapperleaf,span.cell-wrapper").first()),h.html(u).attr(a))}}),"local"===n.datatype){if(n.treeGrid)for(c in n.treeReader)n.treeReader.hasOwnProperty(c)&&delete d[n.treeReader[c]];void 0!==g&&(n.data[p]=e.extend(!0,g,d),l.removeItemDataFromColumnIndex(u),l.addItemDataToColumnIndex(n.data[p],u))}j.call(l,"afterSetRow",{rowid:t,inputData:r,iData:p,iRow:o.rowIndex,tr:o,localData:d,cssProp:i})}catch(e){a=!1}a&&("string"===s?e(o).addClass(i):null!==i&&"object"===s&&e(o).css(i))}),a},changeRowid:function(t,r){return this.each(function(){var i,a,l,n,s,d,c,u=this,p=e(u),f=u.p;if(u.grid&&f&&t!==r&&(n=p.jqGrid("getGridRowById",t))&&null==p.jqGrid("getGridRowById",r)){var h=o.stripPref(f.idPrefix,t),g=o.stripPref(f.idPrefix,r),m=!1===f.keyName?f.prmNames.id:f.keyName;for(f.iColByName[m]>=0&&p.jqGrid("setCell",t,m,g),"local"===f.datatype&&void 0!==f._index[h]&&(f._index[g]=f._index[h],i=f.data[f._index[h]],delete f._index[h],i.hasOwnProperty(m)&&(i[m]=g)),f.rowIndexes[r]=n.rowIndex,delete f.rowIndexes[t],(s=null==u.grid.fbRows?e(n):e(n).add(u.grid.fbRows[n.rowIndex])).attr("id",r),f.selrow===t&&(f.selrow=r),e.isArray(f.selarrrow)&&(a=e.inArray(t,f.selarrrow))>=0&&(f.selarrrow[a]=r),f.multiselect&&(l="jqg_"+f.id+"_"+r,s.find("input.cbox").attr("id",l).attr("name",l)),a=0;a<f.colModel.length;a++)"actions"===(d=f.colModel[a]).formatter?s.find(".ui-jqgrid-actions .ui-pg-div").each(function(){var t=this.id,r=t.length-h.length;r>0&&t.substr(r)===h&&e(this).attr("id",t.substr(0,r)+g)}):("showlink"===d.formatter||null!=d.unformat&&null!=d.formatter)&&(c=p.jqGrid("getCell",r,a),p.jqGrid("setCell",r,a,c,!1,!1,!0));j.call(u,"afterChangeRowid",{rowid:r,oldRowid:t,iRow:n.rowIndex,tr:n})}})},addRowData:function(t,r,i,a){e.inArray(i,["first","last","before","after","afterSelected","beforeSelected"])<0&&(i="last");var l,n,s,d,c,u,p,f,h,b,w,y=!1;return r&&(e.isArray(r)?(u=!0,p=t):(r=[r],u=!1),this.each(function(){var x,C,q=this,R=q.p,S=r.length,_=e(q),I=q.rows,F=0,G=D.getGridRowById,k=R.colModel,O=R.additionalProperties;for(u||(void 0!==t?t=String(t):(t=g(),!1!==R.keyName&&(p=R.keyName,void 0!==r[0][p]&&(t=r[0][p])))),f=R.altclass;F<S;){if(h=r[F],n=[],u)try{void 0===(t=h[p])&&(t=g())}catch(e){t=g()}for(w=o.stripPref(R.idPrefix,t),x={},d=0;d<k.length;d++)b=k[d],"rn"!==(l=b.name)&&"cb"!==l&&"subgrid"!==l&&(c=v.call(q,h[l],b,void 0,w,{},d),e.isFunction(b.saveLocally)?b.saveLocally.call(q,{newValue:c,newItem:x,oldItem:{},id:w,rowid:t,cm:b,cmName:l,iCol:d}):void 0!==c&&(x[l]=c));for(d=0;d<O.length;d++)"object"==typeof(l=O[d])&&l.hasOwnProperty("name")&&(l=l.name),void 0!==(c=m(h,l))&&(x[l]=c);if("local"===R.datatype&&(x[R.localReader.id]=w,R._index[w]=R.data.length,R.data.push(x),q.addItemDataToColumnIndex(x,w)),C=R.grouping,R.grouping=!1,n=o.parseDataToHtml.call(q,1,[t],[h]),R.grouping=C,n=n.join(""),0===I.length)e(q.tBodies[0]).append(n);else switch("afterSelected"!==i&&"beforeSelected"!==i||(void 0===a&&null!==R.selrow?(a=R.selrow,i="afterSelected"===i?"after":"before"):i="afterSelected"===i?"last":"first"),i){case"last":e(I[I.length-1]).after(n),s=I.length-1;break;case"first":e(I[0]).after(n),s=1;break;case"after":(s=G.call(_,a))&&(e(I[s.rowIndex+1]).hasClass("ui-subgrid")?(e(I[s.rowIndex+1]).after(n),s=s.rowIndex+2):(e(s).after(n),s=s.rowIndex+1));break;case"before":(s=G.call(_,a))&&(e(s).before(n),s=s.rowIndex-1)}!0===R.subGrid&&D.addSubGrid.call(_,R.iColByName.subgrid,s),R.records++,R.reccount++,0===R.lastpage&&(R.lastpage=1),j.call(q,"afterAddRow",{rowid:t,inputData:r,position:i,srcRowid:a,iRow:s,localData:x,iData:R.data.length-1}),F++}!0!==R.altRows||u||_.jqGrid("isBootstrapGuiStyle")||("last"===i?(I.length-1)%2==0&&e(I[I.length-1]).addClass(f):e(I).each(function(t){t%2==1?e(this).addClass(f):e(this).removeClass(f)})),q.rebuildRowIndexes(),q.updatepager(!0,!0),y=!0})),y},footerData:function(t,r,i){function a(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}var o=!1,l={};return null==t&&(t="get"),"boolean"!=typeof i&&(i=!0),t=t.toLowerCase(),this.each(function(){var n,s,d,c,u=this,p=u.p;if(!u.grid||!p.footerrow)return!1;if("set"===t&&a(r))return!1;o=!0;var f=e(u.grid.sDiv).children(".ui-jqgrid-hbox").children(".ui-jqgrid-ftable")[0];if(null==f||null==f.rows)return!1;var h=f.rows[0].cells,g=p.colModel,m=null==u.grid.fsDiv?{}:u.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===t)for(c=0;c<g.length;c++)d=g[c].name,e.inArray(d,p.reservedColumnNames)<0&&(!1!==r?(n=e(h[c]).text(),e.trim(n)&&(l[d]=n)):l[d]=e(h[c]).html());else if("set"===t)for(d in r)c=p.iColByName[d],r.hasOwnProperty(d)&&void 0!==c&&(n=i?u.formatter("",r[d],c,r,"edit"):r[d],(s=e(h[c]).add(m[c])).html(n),g[c].title&&s.attr({title:b(n)}))}),"get"===t?l:o},resetColumnResizerHeight:function(){return this.each(function(){if(e.jgrid.msie){var t,r,i,a,o=this.grid.headers;for(i=0;i<o.length;i++)(a=(t=e(o[i].el)).height())&&(r=t.children(".ui-jqgrid-resize")).length>0&&Math.abs(a-r.height())>.5&&t.children(".ui-jqgrid-resize").height(a)}})},rotateColumnHeaders:function(t,r){return this.each(function(){var i,a,o,l,n,s,d,c,u,p,f,h,g=e(this),m=g.jqGrid("getGridParam");for(e.isArray(t)||(t=[t]),i=0;i<t.length;i++)l=t[i],(a=isNaN(l)?m.iColByName[l]:parseInt(l,10))>=0&&(s=(n=(o=e(this.grid.headers[a].el)).children("div")).children("span."+m.autoResizing.wrapperClassName),d=n.children("span.s-ico").outerWidth(!0),c=s.outerWidth(),f=parseFloat(o.css("padding-top")||0),h=parseFloat(o.css("padding-bottom")||0),u=parseFloat(o.css("padding-left")||0),p=parseFloat(o.css("padding-right")||0),m.showSortOrder&&(d+=.5*d),void 0!==r&&0!==r||(r=c+d+u+p),o.height(r),o.css({paddingTop:p+"px",paddingBottom:u+"px",paddingLeft:f+"px",paddingRight:h+"px"}),r=Math.max(o.parent().height(),r),n.css("min-width",r-u-p+"px").addClass("rotate").css({bottom:0}),m.colModel[a].rotated=!0);g.jqGrid("resetColumnResizerHeight"),m.frozenColumns&&setTimeout(function(){g.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(t,r,i){return this.each(function(){var a,l=this,n=e(l),s=l.grid,d=!1,c=l.p,u=o.cell_width?0:c.cellLayout;if(s){"string"==typeof t&&(t=[t]),r="none"!==r&&!1!==r?"":"none",i=i||{};var p=""===r,f=c.groupHeader,h=f&&("object"==typeof f||e.isFunction(f));if(h&&!i.skipSetGroupHeaders&&D.destroyGroupHeader.call(n,!1),e(c.colModel).each(function(o){var n=function(t){var i,a,l,n;for(i=0,a=t.length;i<a;i++)n=(l=t[i]).cells[o],(!e(l).hasClass("jqgroup")||null!=n&&1===n.colSpan)&&(0===i&&e(l).hasClass("jqgfirstrow")?(e(n).css("height","1px"),e(n).css("display",r),e(n).css("height","0")):e(n).css("display",r))};if(-1!==e.inArray(this.name,t)&&this.hidden===p){if(!0===c.frozenColumns&&!0===this.frozen&&!i.notSkipFrozen)return!0;n(e(s.hDiv).find(".ui-jqgrid-htable>thead>tr")),!0===c.frozenColumns&&null!=s.fhDiv&&n(e(s.fhDiv).find(".ui-jqgrid-htable>thead>tr")),n(l.rows),!0===c.frozenColumns&&null!=s.fbRows&&n(l.rows),c.footerrow&&(n(e(s.sDiv).find("tr.footrow")),!0===c.frozenColumns&&null!=s.fsDiv&&n(e(s.fsDiv).find("tr.footrow"))),a=parseInt(this.width,10),"none"===r?c.tblwidth-=a+u:c.tblwidth+=a+u,this.hidden=!p,d=!0,i.skipFeedback?(i.toReport=i.toReport||{},i.toReport[this.name]=p):j.call(l,"onShowHideCol",p,this.name,o,i)}}),!0===d){var g=c.autowidth||void 0!==c.widthOrg&&"auto"!==c.widthOrg&&"100%"!==c.widthOrg?c.width:c.tblwidth+parseInt(c.scrollOffset,10);i.skipSetGridWidth?i.newGridWidth=g:D.setGridWidth.call(n,g)}if(h&&!i.skipSetGroupHeaders)if(null!=c.pivotOptions&&null!=c.pivotOptions.colHeaders&&c.pivotOptions.colHeaders.length>1){var m,v=c.pivotOptions.colHeaders;for(m=0;m<v.length;m++)v[m]&&v[m].groupHeaders.length&&D.setGroupHeaders.call(n,v[m])}else D.setGroupHeaders.call(n,c.groupHeader)}})},hideCol:function(t,r){return this.each(function(){D.showHideCol.call(e(this),t,"none",r)})},showCol:function(t,r){return this.each(function(){D.showHideCol.call(e(this),t,"",r)})},remapColumns:function(t,r,i){function a(t){var r=t.length?f(t):e.extend({},t);e.each(d,function(e){t[e]=r[this]})}function o(t,r){(r?t.children(r):t.children()).each(function(){var t=this,r=f(t.cells);e.each(d,function(e){var i=r[this],a=t.cells[e];null!=i&&null!=a&&i.cellIndex!==e&&i.parentNode.insertBefore(i,a)})})}var l,n,s,d,c=this[0],u=c.p,p=c.grid,f=e.makeArray,h=!0===u.frozenColumns,g=this.jqGrid("getNumberOfFrozenColumns");if(null!=p&&null!=u){for(d=function(){var e,r=[],i=[],a=t.length;for(e=0;e<a;e++)h&&t[e]<g?r.push(t[e]):i.push(t[e]);return r.concat(i)}(),a(u.colModel),a(u.colNames),a(p.headers),s=e(p.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),h&&null!=p.fhDiv&&(s=s.add(p.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),o(s,i&&":not(.ui-jqgrid-labels)"),r&&(s=e(c.tBodies[0]),h&&null!=p.fbDiv&&(s=s.add(p.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),o(s,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),u.footerrow&&(s=e(p.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),h&&null!=p.fsDiv&&(s=s.add(p.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),o(s)),u.remapColumns&&(u.remapColumns.length?a(u.remapColumns):u.remapColumns=f(d)),u.lastsort=e.inArray(u.lastsort,d),u.iColByName={},l=0,n=u.colModel.length;l<n;l++)u.iColByName[u.colModel[l].name]=l;j.call(c,"onRemapColumns",d,r,i)}},remapColumnsByName:function(t,r,i){var a,o,l=this[0].p,n=[],s=t.slice(),d=e.inArray;for(l.subGrid&&d("subgrid",s)<0&&s.unshift("subgrid"),l.multiselect&&d("cb",s)<0&&s.unshift("cb"),l.rownumbers&&d("rn",s)<0&&s.unshift("rn"),a=0,o=s.length;a<o;a++)n.push(l.iColByName[s[a]]);return D.remapColumns.call(this,n,r,i),this},setGridWidth:function(t,r){return this.each(function(){var i,a,l,n,s=this,d=s.p,c=s.grid,u=0,p=0,f=!1,h=0,g=o.isCellClassHidden,m=t;if(c&&null!=d){s.fixScrollOffsetAndhBoxPadding();var v,b,w,y,x=d.colModel,C=d.scrollOffset,j=o.cell_width?0:d.cellLayout,D=c.headers,q=c.footers,R=c.bDiv,S=c.hDiv,_=c.sDiv,I=c.cols,F=e(S).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,G=function(t){c.width=d.width=t,e(d.gBox).css("width",t+"px"),e(d.gView).css("width",t+"px"),e(R).css("width",t+"px"),e(S).css("width",t+"px"),d.pager&&e(d.pager).css("width",t+"px"),d.toppager&&e(d.toppager).css("width",t+"px"),!0===d.toolbar[0]&&(e(c.uDiv).css("width",t+"px"),"both"===d.toolbar[1]&&e(c.ubDiv).css("width",t+"px")),d.footerrow&&e(_).css("width",t+"px")};if("boolean"!=typeof r&&(r=d.shrinkToFit),!isNaN(m)){if(m=parseInt(m,10),G(m),!1===r&&!0===d.forceFit&&(d.forceFit=!1),!0===r){if(e.each(x,function(){!1!==this.hidden||g(this.classes)||(i=this.widthOrg,u+=i+j,this.fixed?h+=this.width+j:p++)}),0===p)return;if(d.tblwidth=parseInt(u,10),l=m-j*p-h,isNaN(d.height)||(R.clientHeight<R.scrollHeight||1===s.rows.length)&&(f=!0,l-=C),(y=l/(d.tblwidth-j*p-h))<0)return;if(u=0,w=I.length>0,e.each(x,function(e){!1!==this.hidden||g(this.classes)||this.fixed||(i=Math.round(this.widthOrg*y),this.width=i,u+=i,D[e].width=i,F[e].style.width=i+"px",d.footerrow&&(q[e].style.width=i+"px"),w&&(I[e].style.width=i+"px"),a=e)}),!a)return;n=0,f?m-h-(u+j*p)!==C&&(n=m-h-(u+j*p)-C):1!==Math.abs(m-h-(u+j*p))&&(n=m-h-(u+j*p)),(v=x[a]).width+=n,d.tblwidth=parseInt(u+n+j*p+h,10),d.tblwidth>m&&(b=d.tblwidth-parseInt(m,10),d.tblwidth=m,v.width=v.width-b),i=v.width,D[a].width=i,F[a].style.width=i+"px",w&&(I[a].style.width=i+"px"),d.footerrow&&(q[a].style.width=i+"px"),d.tblwidth+(f?C:0)<d.width&&G(d.tblwidth+(f?C:0)),R.offsetWidth>R.clientWidth&&(d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg||G(R.offsetWidth))}d.tblwidth&&(d.tblwidth=parseInt(d.tblwidth,10),m=d.tblwidth,S.scrollLeft=R.scrollLeft,b=Math.abs(m-d.width),d.shrinkToFit&&!r&&b<3&&b>0&&(m<d.width&&G(m),R.offsetWidth>R.clientWidth&&(d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg||G(R.offsetWidth)))),s.fixScrollOffsetAndhBoxPadding();var k={resizeDiv:!0,resizedRows:{iRowStart:r?0:-1,iRowEnd:-1}};e(s).triggerHandler("jqGridResetFrozenHeights",[{header:k,resizeFooter:!0,body:k}])}}})},setGridHeight:function(t){return this.each(function(){var r=this,i=r.grid,a=r.p;if(i){var o=e(i.bDiv);o.css({height:t+(isNaN(t)?"":"px")}),!0===a.frozenColumns&&e(a.idSel+"_frozen").parent().height(o.height()-16),a.height=t,a.scroll&&i.populateVisible.call(r),r.fixScrollOffsetAndhBoxPadding(),e(r).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(t){return this.each(function(){var r=this,i=r.grid.cDiv;r.p.caption=t,e("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",i).html(t),e(i).show(),e(i).nextAll("div").removeClass(D.getGuiStyles.call(r,"top")),e(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(t,r,i,a){return this.each(function(){var o,l,n=this,s=n.p;if(n.grid){if(isNaN(t)){if(void 0===(o=s.iColByName[t]))return}else o=parseInt(t,10);o>=0&&(l=e(n.grid.headers[o].el),s.frozenColumns&&(l=l.add(n.grid.fhDiv.find(".ui-jqgrid-htable tr.ui-jqgrid-labels th.ui-th-column").eq(o))),r&&(l.each(function(){var t=e("[id^=jqgh_]",this),i=t.children("span.ui-jqgrid-cell-wrapper");if(i.length>0)i.html(r);else{var a=e(".s-ico",this);t.empty().html(r)[s.sortIconsBeforeText?"prepend":"append"](a)}}),s.colNames[o]=r),i&&("string"==typeof i?l.addClass(i):l.css(i)),"object"==typeof a&&l.attr(a))}})},setCell:function(t,r,i,a,l,n){return this.each(function(){var s,d,c,u,p,f,g,m,b,w,x=this,C=x.p,j=-1,q=C.colModel,R={};if(x.grid&&(j=isNaN(r)?C.iColByName[r]:parseInt(r,10))>=0&&(p=D.getGridRowById.call(e(x),t))){if(f=o.getCell.call(x,p,j),""!==i||!0===n){if(c=q[j],"local"===C.datatype&&(b=h(C.idPrefix,t),void 0!==(w=C._index[b])&&(u=C.data[w])),null==u){for(d=0;d<p.cells.length;d++)if(d!==j&&(g=o.getDataFieldOfCell.call(x,p,d)).length>0){try{m=e.unformat.call(x,g,{rowId:t,colModel:q[d]},d)}catch(e){m=y(g[0].innerHTML)}R[q[d].name]=m}}else R=u;R[c.name]=i,s=x.formatter(t,i,j,R,"edit");var S=f;!0===C.treeGrid&&c.name===C.ExpandColumn&&(S=S.children("span.cell-wrapperleaf,span.cell-wrapper").first()),S.html(s),c.title&&f.attr({title:i}),null!=u&&(s=v.call(x,i,c,u[c.name],b,u,j),e.isFunction(c.saveLocally)?c.saveLocally.call(x,{newValue:s,newItem:u,oldItem:u,id:b,cm:c,cmName:c.name,iCol:j}):u[c.name]=s)}(a||l)&&(f=o.getCell.call(x,p,j),a&&f["string"==typeof a?"addClass":"css"](a),"object"==typeof l&&f.attr(l))}})},getCell:function(t,r){var i=!1;return this.each(function(){var a,l,n,s,d=this,c=d.p;if(d.grid&&(a=isNaN(r)?c.iColByName[r]:parseInt(r,10))>=0&&(l=D.getGridRowById.call(e(d),t))){n=o.getDataFieldOfCell.call(d,l,a).first(),s=c.colModel[a];try{i=D.isCellEditing.call(e(d),t,a,l)?o.getEditedValue.call(d,n,s,{},s.editable):e.unformat.call(d,n,{rowId:l.id,colModel:s},a)}catch(e){i=y(n.html())}}}),i},getCol:function(t,r,i){var a,l,n,s,d=[],c=0;return r="boolean"==typeof r&&r,void 0===i&&(i=!1),this.each(function(){var u,p,f=this,h=f.p;if(f.grid&&(u=isNaN(t)?h.iColByName[t]:parseInt(t,10))>=0){var g,m,v=f.rows,b=v.length,w=0,x=0,C=h.colModel[u];if(b&&b>0){for(;w<b;){if(g=v[w],e(g).hasClass("jqgrow")){p=o.getDataFieldOfCell.call(f,g,u).first(),m=g.id;try{a=D.isCellEditing.call(e(f),m,u,g)?o.getEditedValue.call(f,p,C,{},C.editable):e.unformat.call(f,p,{rowId:m,colModel:C},u)}catch(e){a=y(p.html())}void 0!=a&&""!=a.trim()||(a=0),i?(s=parseFloat(a),isNaN(s)||(c+=s,void 0===n&&(n=l=s),l=Math.min(l,s),n=Math.max(n,s),x++)):r?d.push({id:m,value:a}):d.push(a)}w++}if(i)switch(i.toLowerCase()){case"sum":d=c;break;case"avg":d=c/x;break;case"count":d=b-1;break;case"min":d=l;break;case"max":d=n}}}}),d},clearGridData:function(t){return this.each(function(){var r=this,i=r.p,a=r.rows,o=r.grid;o&&i&&a&&("boolean"!=typeof t&&(t=!1),e(r).off(".jqGridFormatter"),o.emptyRows.call(r,!1,!0),i.footerrow&&t&&e(".ui-jqgrid-ftable td",o.sDiv).html("&#160;"),i.selrow=null,d(i.selarrrow),d(i.savedRow),i.editingInfo={},d(i.data),d(i.lastSelectedData),i._index={},i.rowIndexes={},i.dataIndexById={},i.indexByColumnData={},i.records=0,i.page=1,i.lastpage=0,i.reccount=0,r.updatepager(!0,!1))})},getInd:function(t,r){var i=D.getGridRowById.call(e(this),t);return!!i&&(!0===r?i:i.rowIndex)},bindKeys:function(t){var r=e.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this,i=t.p,a=e(t);i.scrollrows=r.scrollingRows,a.on("keydown.jqGrid",function(l){var n=e(this).find("tr[tabindex=0]")[0],s=o.detectRowEditing.call(t,e(l.target).closest("tr.jqgrow").attr("id")),d=function(t){do{if(null===(n=n[t]))return}while(e(n).is(":hidden")||!e(n).hasClass("jqgrow"));D.setSelection.call(a,n.id,!0),l.preventDefault()},c=function(o,l){var n=r["on"+o+(l||"")];a.triggerHandler("jqGridKey"+o,[i.selrow]),e.isFunction(n)&&n.call(t,i.selrow)},u=function(t){if(i.treeGrid){var r=i.data[i._index[h(i.idPrefix,n.id)]][i.treeReader.expanded_field];"Right"===t&&(r=!r),r&&e(n).find("div.treeclick").trigger("click")}c(t,"Key")};if(n&&null===s)switch(l.keyCode){case 38:d("previousSibling");break;case 40:d("nextSibling");break;case 37:u("Left");break;case 39:u("Right");break;case 13:c("Enter");break;case 32:c("Space")}})})},unbindKeys:function(){return this.each(function(){e(this).off("keydown.jqGrid")})},getLocalRow:function(e){var t,r=!1;return this.each(function(){var i=this.p;void 0!==e&&null!=i&&null!=i._index&&null!=i.data&&(t=i._index[h(i.idPrefix,e)])>=0&&(r=i.data[t])}),r},progressBar:function(t){return t=e.extend({htmlcontent:"",method:"hide",loadtype:"disable"},t||{}),this.each(function(){var r="show"===t.method,i=c(this.p.id),a=e("#load_"+i);switch(""!==t.htmlcontent&&a.html(t.htmlcontent),t.loadtype){case"disable":break;case"enable":a.toggle(r);break;case"block":e("#lui_"+i).toggle(r),a.toggle(r)}})},setColWidth:function(t,r,i,a){return this.each(function(){var o,l=this,n=e(l),s=l.grid,d=l.p;if("string"==typeof t){if(void 0===(t=d.iColByName[t]))return}else if("number"!=typeof t)return;null!=(o=s.headers[t])&&(o.newWidth=r,s.newWidth=d.tblwidth+r-o.width,s.resizeColumn(t,!d.frozenColumns,a),!1===i||a||(l.fixScrollOffsetAndhBoxPadding(),D.setGridWidth.call(n,s.newWidth+d.scrollOffset,!1)))})},getAutoResizableWidth:function(t){var r=this;if(0===r.length)return-1;var i,a,l,n,s,d=(r=r[0]).rows,c=r.p,u=c.colModel[t],p=e(r.grid.headers[t].el),f=p.children("div"),h=parseFloat(p.css(u.rotated?"padding-top":"padding-left")||0),g=parseFloat(p.css(u.rotated?"padding-bottom":"padding-right")||0),m=f.children("span.s-ico"),v=f.children("."+c.autoResizing.wrapperClassName),b=u.rotated?v.outerHeight():v.outerWidth(),w=parseFloat(v.css(u.rotated?"height":"width")||0),y=0,x=0,C=null!=u.autoResizing&&void 0!==u.autoResizable.compact?u.autoResizable.compact:c.autoResizing.compact,j=c.autoResizing.wrapperClassName;if(null==u||!u.autoResizable||0===v.length||u.hidden||o.isCellClassHidden(u.classes)||u.fixed)return-1;for(C&&!m.is(":visible")&&"none"===m.css("display")||(x=u.rotated?m.outerHeight(!0):m.outerWidth(!0)+f.children(".ui-jqgrid-sort-order").outerWidth(!0),c.sortIconsBeforeText||(x-="rtl"===c.direction?parseFloat(m.css("padding-left")||0)+parseFloat(m.css("margin-left")||0):parseFloat(m.css("padding-right")||0)+parseFloat(m.css("margin-right")||0))),u.rotated?x=Math.max(x,b+h+g):x+=b+h+(w===b?h+g:0)+parseFloat(f.css("margin-left")||0)+parseFloat(f.css("margin-right")||0),l=0,d=r.rows;l<d.length;l++)a=(i=d[l]).cells[t],n=e(i.cells[t]),null!=a&&(e(i).hasClass("jqgrow")||e(i).hasClass("jqgroup")&&1===a.colSpan)?(s=e(a.firstChild)).hasClass(j)?x=Math.max(x,s.outerWidth()+y):c.treeGrid&&c.ExpandColumn===u.name&&(s=n.children(".cell-wrapper,.cell-wrapperleaf"),x=Math.max(x,s.outerWidth()+y+n.children(".tree-wrap").outerWidth())):e(i).hasClass("jqgfirstrow")&&(y=(o.cell_width?parseFloat(n.css("padding-left")||0)+parseFloat(n.css("padding-right")||0):0)+parseFloat(n.css("border-right")||0)+parseFloat(n.css("border-left")||0));return x=Math.max(x,null!=u.autoResizing&&void 0!==u.autoResizing.minColWidth?u.autoResizing.minColWidth:c.autoResizing.minColWidth),Math.min(x,null!=u.autoResizing&&void 0!==u.autoResizing.maxColWidth?u.autoResizing.maxColWidth:c.autoResizing.maxColWidth)},autoResizeColumn:function(t,r){return this.each(function(){var i,a=this,o=e(this),l=a.p,n=l.colModel[t],s=e(a.grid.headers[t].el),d=D.getAutoResizableWidth.call(o,t),c=(n.autoResizing||{}).resetWidthOrg;null==n||d<0||d===n.width||(D.setColWidth.call(o,t,d,l.autoResizing.adjustGridWidth&&!l.autoResizing.fixWidthOnShrink&&!r,r),l.autoResizing.fixWidthOnShrink&&l.shrinkToFit&&!r&&(n.fixed=!0,i=n.widthOrg,n.widthOrg=n.width,D.setGridWidth.call(o,l.width,!0),n.widthOrg=i,n.fixed=!1),(c||void 0===c&&l.autoResizing.resetWidthOrg)&&(n.widthOrg=n.width),s.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var t,r,i=this,a=e(i),o=i.p,l=o.colModel,n=l.length,s=o.shrinkToFit,d=o.autoResizing.adjustGridWidth,c=o.autoResizing.fixWidthOnShrink,u=parseInt(o.widthOrg,10),p=i.grid,f=D.autoResizeColumn;for(o.shrinkToFit=!1,o.autoResizing.adjustGridWidth=!0,o.autoResizing.fixWidthOnShrink=!1,t=0;t<n;t++)(r=l[t]).autoResizable&&"actions"!==r.formatter&&f.call(a,t,!0);p.hDiv.scrollLeft=p.bDiv.scrollLeft,o.footerrow&&(p.sDiv.scrollLeft=p.bDiv.scrollLeft),i.fixScrollOffsetAndhBoxPadding(),isNaN(u)?d&&D.setGridWidth.call(a,p.newWidth+o.scrollOffset,!1):D.setGridWidth.call(a,u,!1),o.autoResizing.fixWidthOnShrink=c,o.autoResizing.adjustGridWidth=d,o.shrinkToFit=s})}});var q=function(t,r){var i=this.grid.fbRows;return e((null!=i&&i[0].cells.length>r?i[t.rowIndex]:t).cells[r])};o.extend({editCell:function(t,r,i){return this.each(function(){var a,l,n,s,d=this,c=e(d),u=d.p,p=d.rows;if(d.grid&&!0===u.cellEdit&&null!=p&&null!=p[t]&&(t=parseInt(t,10),r=parseInt(r,10),!isNaN(t)&&!isNaN(r))){var f,h=p[t],g=null!=h?h.id:null,m=e(h),v=parseInt(u.iCol,10),b=parseInt(u.iRow,10),w=e(p[b]),y=u.savedRow;if(null!=g){if(u.selrow=g,u.knv||c.jqGrid("GridNav"),y.length>0){if(!0===i&&t===b&&r===v)return;c.jqGrid("saveCell",y[0].id,y[0].ic)}else setTimeout(function(){e("#"+o.jqID(u.knv)).attr("tabindex","-1").focus()},1);if(s=u.colModel[r],"subgrid"!==(a=s.name)&&"cb"!==a&&"rn"!==a){n=q.call(d,h,r);var x=s.editable;e.isFunction(x)&&(x=x.call(d,{rowid:g,iCol:r,iRow:t,cmName:a,cm:s,mode:"cell"}));var C=c.jqGrid("getGuiStyles","states.select","edit-cell"),D=c.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==x||!0!==i||n.hasClass("not-editable-cell"))u.noCellSelection||(v>=0&&b>=0&&(q.call(d,w[0],v).removeClass(C),w.removeClass(D)),n.addClass(C),m.addClass(D)),l=n.html().replace(/&#160;/gi,""),j.call(d,"onSelectCell",g,a,l,t,r);else{u.noCellSelection||(v>=0&&b>=0&&(q.call(d,w[0],v).removeClass(C),w.removeClass(D)),n.addClass(C),m.addClass(D)),s.edittype||(s.edittype="text"),f=s.edittype;try{l=e.unformat.call(d,n,{rowId:g,colModel:s},r)}catch(e){l="textarea"===f?n.text():n.html()}if(u.autoEncodeOnEdit&&(l=o.oldDecodePostedData(l)),("&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l=""),e.isFunction(u.formatCell)){var R=u.formatCell.call(d,g,a,l,t,r);void 0!==R&&(l=R)}j.call(d,"beforeEditCell",g,a,l,t,r),y.push({id:t,ic:r,name:a,v:l}),u.editingInfo[g]={mode:"cellEditing",savedRow:y[y.length-1],editable:{}},u.editingInfo[g].editable[a]=x;var S=e.extend({},s.editoptions||{},{id:t+"_"+a,name:a,rowId:g,mode:"cell",cm:s,iCol:r}),_=o.createEl.call(d,f,S,l,!0,e.extend({},o.ajaxOptions,u.ajaxSelectOptions||{})),I=n,F=!0===u.treeGrid&&a===u.ExpandColumn;F&&(I=n.children("span.cell-wrapperleaf,span.cell-wrapper")),I.html("").append(_).attr("tabindex","0"),F&&e(_).width(n.width()-n.children("div.tree-wrap").outerWidth()),o.bindEv.call(d,_,S),setTimeout(function(){e(_).focus()},1),e("input, select, textarea",n).on("keydown",function(i){if(27===i.keyCode&&(e("input.hasDatepicker",n).length>0?e(".ui-datepicker").is(":hidden")?c.jqGrid("restoreCell",t,r):e("input.hasDatepicker",n).datepicker("hide"):c.jqGrid("restoreCell",t,r)),13===i.keyCode&&!i.shiftKey)return c.jqGrid("saveCell",t,r),!1;if(9===i.keyCode){if(d.grid.hDiv.loading)return!1;i.shiftKey?c.jqGrid("prevCell",t,r):c.jqGrid("nextCell",t,r)}i.stopPropagation()}),j.call(d,"afterEditCell",g,a,l,t,r)}u.iCol=r,u.iRow=t}}}})},saveCell:function(t,r){return this.each(function(){var i=this,a=e(i),l=i.p,n=i.grid,s=o.info_dialog,d=o.jqID;if(n&&!0===l.cellEdit){var c=a.jqGrid("getGridRes","errors"),u=c.errcap,p=a.jqGrid("getGridRes","edit").bClose,f=l.savedRow,h=f.length>=1?0:null;if(null!==h){var g,m=i.rows[t],v=m.id,b=e(m),w=l.colModel[r],y=w.name,x=q.call(i,m,r),C={},D=o.getEditedValue.call(i,x,w,C);if(D!==f[h].v){void 0!==(g=a.triggerHandler("jqGridBeforeSaveCell",[v,y,D,t,r]))&&(D=g),e.isFunction(l.beforeSaveCell)&&void 0!==(g=l.beforeSaveCell.call(i,v,y,D,t,r))&&(D=g);var R=o.checkValues.call(i,D,r,void 0,void 0,{oldValue:f[h].v,newValue:D,cmName:y,rowid:v,iCol:r,iRow:t,cm:w,tr:m,td:x,mode:"cell"}),S=w.formatoptions||{};if(null==R||!0===R||!0===R[0]){var _=a.triggerHandler("jqGridBeforeSubmitCell",[v,y,D,t,r])||{};if(e.isFunction(l.beforeSubmitCell)&&((_=l.beforeSubmitCell.call(i,v,y,D,t,r))||(_={})),e("input.hasDatepicker",x).length>0&&e("input.hasDatepicker",x).datepicker("hide"),"date"===w.formatter&&!0!==S.sendFormatted&&(D=e.unformat.date.call(i,D,w)),"remote"===l.cellsubmit)if(l.cellurl){var I={};I[y]=D;var F=l.prmNames,G=F.id,k=F.oper;I[G]=o.stripPref(l.idPrefix,v),I[k]=F.editoper,I=e.extend(_,I),l.autoEncodeOnEdit&&e.each(I,function(t,r){e.isFunction(r)||(I[t]=o.oldEncodePostedData(r))}),a.jqGrid("progressBar",{method:"show",loadtype:l.loadui,htmlcontent:a.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),n.hDiv.loading=!0,e.ajax(e.extend({url:e.isFunction(l.cellurl)?l.cellurl.call(i,l.cellurl,t,r,v,D,y):l.cellurl,data:o.serializeFeedback.call(i,l.serializeCellData,"jqGridSerializeCellData",I),type:"POST",complete:function(o){if(n.endReq.call(i),(o.status<300||304===o.status)&&(0!==o.status||4!==o.readyState)){var d=a.triggerHandler("jqGridAfterSubmitCell",[i,o,I.id,y,D,t,r])||[!0,""];(!0===d||!0===d[0]&&e.isFunction(l.afterSubmitCell))&&(d=l.afterSubmitCell.call(i,o,I.id,y,D,t,r)),null==d||!0===d||!0===d[0]?(a.jqGrid("setCell",v,r,D,!1,!1,!0),x.addClass("dirty-cell"),b.addClass("edited"),j.call(i,"afterSaveCell",v,y,D,t,r),f.splice(0,1),delete l.editingInfo[v]):(s.call(i,u,d[1],p),a.jqGrid("restoreCell",t,r))}},error:function(o,n,d){a.triggerHandler("jqGridErrorCell",[o,n,d]),e.isFunction(l.errorCell)?(l.errorCell.call(i,o,n,d),a.jqGrid("restoreCell",t,r)):(s.call(i,u,o.status+" : "+o.statusText+"<br/>"+n,p),a.jqGrid("restoreCell",t,r))}},o.ajaxOptions,l.ajaxCellOptions||{}))}else try{s.call(i,u,c.nourl,p),a.jqGrid("restoreCell",t,r)}catch(e){}"clientArray"===l.cellsubmit&&(a.jqGrid("setCell",v,r,"select"===w.edittype&&"select"!==w.formatter?C.text:D,!1,!1,!0),x.addClass("dirty-cell"),b.addClass("edited"),j.call(i,"afterSaveCell",v,y,D,t,r),f.splice(0,1),delete l.editingInfo[v])}else try{setTimeout(function(){var t=o.getRelativeRect.call(i,x);s.call(i,u,D+" "+R[1],p,{top:t.top,left:t.left+e(i).closest(".ui-jqgrid").offset().left})},50),a.jqGrid("restoreCell",t,r)}catch(e){}}else a.jqGrid("restoreCell",t,r)}setTimeout(function(){e("#"+d(l.knv)).attr("tabindex","-1").focus()},0)}})},checkRequiredFieldValue:function(t,r){var i;return this.each(function(){var a,o=this,l=e("td:eq("+r+")",o.rows[t]),n=o.p.colModel[r],s=n.name,d=e.jgrid.jqID(s);switch(n.edittype){case"select":if(n.editoptions.multiple){var c=e("#"+t+"_"+d,o.rows[t]),u=[];(a=e(c).val())?a.join(","):a="",e("option:selected",c).each(function(t,r){u[t]=e(r).text()}),u.join(",")}else a=e("#"+t+"_"+d+" option:selected",o.rows[t]).val(),e("#"+t+"_"+d+" option:selected",o.rows[t]).text();n.formatter;break;case"checkbox":var p=["Yes","No"];n.editoptions&&(p=n.editoptions.value.split(":")),a=e("#"+t+"_"+d,o.rows[t]).is(":checked")?p[0]:p[1];break;case"password":case"text":case"textarea":case"button":a=e("#"+t+"_"+d,o.rows[t]).val();break;case"custom":try{if(!n.editoptions||!e.isFunction(n.editoptions.custom_value))throw"e1";if(void 0===(a=n.editoptions.custom_value.call(o,e(".customelement",l),"get")))throw"e2"}catch(t){"e1"===t&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===t?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,t.message,e.jgrid.edit.bClose)}}var f;void 0!=a?(f=e.jgrid.checkValues.call(o,a,r),i=f[0]):i=void 0==a}),i},restoreCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=l.p,s=l.rows[t],d=s.id;if(l.grid&&!0===n.cellEdit){var c=n.savedRow,u=q.call(l,s,r);if(c.length>=1){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",u).datepicker("hide")}catch(e){}a=n.colModel[r],!0===n.treeGrid&&a.name===n.ExpandColumn?u.children("span.cell-wrapperleaf,span.cell-wrapper").empty():u.empty(),u.attr("tabindex","-1"),i=c[0].v,o=a.formatoptions||{},"date"===a.formatter&&!0!==o.sendFormatted&&(i=e.unformat.date.call(l,i,a)),e(l).jqGrid("setCell",d,r,i,!1,!1,!0),j.call(l,"afterRestoreCell",d,i,t,r),c.splice(0,1),delete n.editingInfo[d]}setTimeout(function(){e("#"+n.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=e(l),s=l.p,d=!1,c=l.rows;if(l.grid&&!0===s.cellEdit&&null!=c&&null!=c[t]){for(i=r+1;i<s.colModel.length;i++)if(o=s.colModel[i],a=o.editable,e.isFunction(a)&&(a=a.call(l,{rowid:c[t].id,iCol:i,iRow:t,cmName:o.name,cm:o,mode:"cell"})),!0===a){d=i;break}!1!==d?n.jqGrid("editCell",t,d,!0):s.savedRow.length>0&&n.jqGrid("saveCell",t,r)}})},prevCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=e(l),s=l.p,d=!1,c=l.rows;if(l.grid&&!0===s.cellEdit&&null!=c&&null!=c[t]){for(i=r-1;i>=0;i--)if(o=s.colModel[i],a=o.editable,e.isFunction(a)&&(a=a.call(l,{rowid:c[t].id,iCol:i,iRow:t,cmName:o.name,cm:o,mode:"cell"})),!0===a){d=i;break}!1!==d?n.jqGrid("editCell",t,d,!0):s.savedRow.length>0&&n.jqGrid("saveCell",t,r)}})},GridNav:function(){return this.each(function(){function t(e,t,r){var i=o.rows[e];if("v"===r.substr(0,1)){var a=d.clientHeight,l=d.scrollTop,n=i.offsetTop+i.clientHeight,s=i.offsetTop;"vd"===r&&n>=l+a&&(d.scrollTop=d.scrollTop+i.clientHeight),"vu"===r&&s<l&&(d.scrollTop=d.scrollTop-i.clientHeight)}if("h"===r){var c=d.clientWidth,u=d.scrollLeft,p=i.cells[t],f=p.offsetLeft+p.clientWidth,h=p.offsetLeft;f>=c+parseInt(u,10)?d.scrollLeft=d.scrollLeft+p.clientWidth:h<u&&(d.scrollLeft=d.scrollLeft-p.clientWidth)}}function r(e,t){var r,i=0,a=n.colModel;if("lft"===t)for(i=e+1,r=e;r>=0;r--)if(!0!==a[r].hidden){i=r;break}if("rgt"===t)for(i=e-1,r=e;r<a.length;r++)if(!0!==a[r].hidden){i=r;break}return i}var i,a,o=this,l=e(o),n=o.p,s=o.grid;if(s&&!0===n.cellEdit){var d=s.bDiv;n.knv=n.id+"_kn";var c=e("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+n.knv+"'></div></div>");e(c).insertBefore(s.cDiv),e("#"+n.knv).focus().keydown(function(e){var s=parseInt(n.iRow,10),d=parseInt(n.iCol,10);switch(a=e.keyCode,"rtl"===n.direction&&(37===a?a=39:39===a&&(a=37)),a){case 38:s-1>0&&(t(s-1,d,"vu"),l.jqGrid("editCell",s-1,d,!1));break;case 40:s+1<=o.rows.length-1&&(t(s+1,d,"vd"),l.jqGrid("editCell",s+1,d,!1));break;case 37:d-1>=0&&(t(s,i=r(d-1,"lft"),"h"),l.jqGrid("editCell",s,i,!1));break;case 39:d+1<=n.colModel.length-1&&(t(s,i=r(d+1,"rgt"),"h"),l.jqGrid("editCell",s,i,!1));break;case 13:d>=0&&s>=0&&l.jqGrid("editCell",s,d,!0);break;default:return!0}return!1})}})},getChangedCells:function(t){var r=[];return t||(t="all"),this.each(function(){var i=this,a=i.p,l=o.htmlDecode,n=i.rows;i.grid&&!0===a.cellEdit&&e(n).each(function(o){var s={};if(e(this).hasClass("edited")){var d=this;e(this.cells).each(function(r){var c=a.colModel[r],u=c.name,p=q.call(i,d,r);if("cb"!==u&&"subgrid"!==u&&"rn"!==u&&("dirty"!==t||p.hasClass("dirty-cell")))try{s[u]=e.unformat.call(i,p[0],{rowId:n[o].id,colModel:c},r)}catch(e){s[u]=l(p.html())}}),s.id=this.id,r.push(s)}})}),r}});var R=D.getGuiStyles,S=D.getGridRes;o.jqModal=o.jqModal||{},e.extend(!0,o.jqModal,{toTop:!0}),e.extend(o,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(t,r){var i=!(!(r=e.extend({jqm:!0,gb:"",removemodal:!1},r||{})).gb||"string"!=typeof r.gb||"#gbox_"!==r.gb.substr(0,6))&&e("#"+r.gb.substr(6))[0],a=e(t);if(r.onClose){var o=i?r.onClose.call(i,t):r.onClose(t);if("boolean"==typeof o&&!o)return}if(e.fn.jqm&&!0===r.jqm)a.attr("aria-hidden","true").jqmHide();else{if(""!==r.gb)try{e(">.jqgrid-overlay",r.gb).first().hide()}catch(e){}a.hide().attr("aria-hidden","true")}r.removemodal&&a.remove()},createModal:function(r,i,a,l,n,s,d){var c=o.jqID,u=this.p;a=e.extend(!0,{resizingRightBottomIcon:D.getIconRes.call(this,"form.resizableLtr")},o.jqModal||{},null!=u?u.jqModal||{}:{},a);var p=t.createElement("div"),f="#"+c(r.themodal),h="rtl"===e(a.gbox).attr("dir"),g=!!r.resizeAlso&&"#"+c(r.resizeAlso);d=e.extend({},d||{}),p.className=R.call(this,"dialog.window","ui-jqdialog"),p.id=r.themodal,p.dir=h?"rtl":"ltr";var m=t.createElement("div");m.className=R.call(this,"dialog.document"),e(m).attr("role","document");var v=t.createElement("div");v.className=R.call(this,"dialog.subdocument"),m.appendChild(v),p.appendChild(m);var b=t.createElement("div");b.className=R.call(this,"dialog.header","ui-jqdialog-titlebar "+(h?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),b.id=r.modalhead,e(b).append("<span class='ui-jqdialog-title'>"+a.caption+"</span>");var w=R.call(this,"states.hover"),y=e("<a aria-label='Close' class='"+R.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){y.addClass(w)},function(){y.removeClass(w)}).append("<span class='"+D.getIconRes.call(this,"form.close")+"'></span>");e(b).append(y);var x=t.createElement("div");e(x).addClass(R.call(this,"dialog.content","ui-jqdialog-content")).attr("id",r.modalcontent),e(x).append(i),v.appendChild(x),e(v).prepend(b),!0===s?e("body").append(p):"string"==typeof s?e(s).append(p):e(p).insertBefore(l),e(p).css(d),void 0===a.jqModal&&(a.jqModal=!0);var C={};if(e.fn.jqm&&!0===a.jqModal?(0===a.left&&0===a.top&&a.overlay&&((a=e(n).offset()).left+=4,a.top+=4),C.top=a.top+"px",C.left=a.left):0===a.left&&0===a.top||(C.left=a.left,C.top=a.top+"px"),e("a.ui-jqdialog-titlebar-close",b).click(function(){var t=e(f).data("onClose")||a.onClose,r=e(f).data("gbox")||a.gbox;return o.hideModal(f,{gb:r,jqm:a.jqModal,onClose:t,removemodal:a.removemodal||!1}),!1}),0!==a.width&&a.width||(a.width=300),0!==a.height&&a.height||(a.height=200),!a.zIndex){var j=e(l).parents("*[role=dialog]").first().css("z-index");j?(a.zIndex=parseInt(j,10)+2,a.toTop=!0):a.zIndex=950}if(C.left&&(C.left+="px"),e(p).css(e.extend({width:isNaN(a.width)?"auto":a.width+"px",height:isNaN(a.height)?"auto":a.height+"px",zIndex:a.zIndex},C)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":r.modalhead,"aria-hidden":"true"}),void 0===a.drag&&(a.drag=!0),void 0===a.resize&&(a.resize=!0),a.drag)if(e.fn.jqDrag)e(b).css("cursor","move"),e(p).jqDrag(b);else try{e(p).draggable({handle:e("#"+c(b.id))})}catch(e){}if(a.resize)if(e.fn.jqResize)e(x).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+a.resizingRightBottomIcon+"'></div>"),e(f).jqResize(".jqResize",g);else try{e(p).resizable({handles:"se, sw",alsoResize:g})}catch(e){}!0===a.closeOnEscape&&e(p).keydown(function(t){if(27===t.which){var r=e(f).data("onClose")||a.onClose;o.hideModal(f,{gb:a.gbox,jqm:a.jqModal,onClose:r,removemodal:a.removemodal||!1,formprop:!a.recreateForm||!1,form:a.form||""})}})},viewModal:function(t,r){if(r=e.extend(!0,{overlay:30,modal:!1,overlayClass:R.call(this,"overlay"),onShow:o.showModal,onHide:o.closeModal,gbox:"",jqm:!0,jqM:!0},o.jqModal||{},r||{}),e.fn.jqm&&!0===r.jqm)r.jqM?e(t).attr("aria-hidden","false").jqm(r).jqmShow():e(t).attr("aria-hidden","false").jqmShow();else{""!==r.gbox&&(e(">.jqgrid-overlay",r.gbox).first().show(),e(t).data("gbox",r.gbox)),e(t).show().attr("aria-hidden","false");try{e(":input:visible",t)[0].focus()}catch(e){}}},info_dialog:function(t,r,i,a){var l=this,n=l.p,s=e.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},o.jqModal||{},null!=n?n.jqModal||{}:{},{caption:"<b>"+t+"</b>"},a||{}),d=s.jqModal;e.fn.jqm&&!d&&(d=!1);var c,u="",p=R.call(l,"states.hover");if(s.buttons.length>0)for(c=0;c<s.buttons.length;c++)void 0===s.buttons[c].id&&(s.buttons[c].id="info_button_"+c),u+=o.builderFmButon.call(l,s.buttons[c].id,s.buttons[c].text);var f=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",h="text-align:"+s.align+";",g=e("#info_dialog"),m="<div id='info_id'>";m+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+h+"'>"+o.htmlDecode(r)+"</div>",(i||""!==u)&&(m+="<hr class='"+R.call(l,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+s.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(i?o.builderFmButon.call(l,"closedialog",i):"")+u+"</div>"),m+="</div>";try{"false"===g.attr("aria-hidden")&&o.hideModal("#info_dialog",{jqm:d}),g.remove()}catch(e){}o.createModal.call(l,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},m,s,"","",!0),g=e("#info_dialog"),u&&e.each(s.buttons,function(){e("#"+o.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(t){return e.isFunction(t.data.click)&&t.data.click.call(l,t,g),!1})}),e("#closedialog","#info_id").click(function(){return o.hideModal("#info_dialog",{jqm:d,onClose:g.data("onClose")||s.onClose,gb:g.data("gbox")||s.gbox}),!1}),e(".fm-button","#info_dialog").hover(function(){e(this).addClass(p)},function(){e(this).removeClass(p)}),e.isFunction(s.beforeOpen)&&s.beforeOpen(),o.viewModal.call(l,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:s.modal,jqm:d}),e.isFunction(s.afterOpen)&&s.afterOpen();try{g.focus()}catch(e){}},bindEv:function(t,r){var i=this;e.isFunction(r.dataInit)&&r.dataInit.call(i,t,r),r.dataEvents&&e.each(r.dataEvents,function(){void 0!==this.data?e(t).on(this.type,"object"==typeof this.data&&null!==this.data?e.extend(!0,{},r,this.data):this.data,this.fn):e(t).on(this.type,r,this.fn)})},createEl:function(r,i,a,l,n){function s(t,r,i){var a=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol"];void 0!==i&&e.isArray(i)&&e.merge(a,i),e.each(r,function(r,i){-1===e.inArray(r,a)&&e(t).attr(r,i)}),r.hasOwnProperty("id")||e(t).attr("id",o.randId())}var d="",c=this,u=c.p,p=o.info_dialog,f=function(t){return S.call(e(c),t)},h=f("errors.errcap"),g=f("edit"),m=g.msg,v=g.bClose;if(null==i)return"";switch(r){case"textarea":d=t.createElement("textarea"),l?i.cols||e(d).css({width:"100%","box-sizing":"border-box"}):i.cols||(i.cols=19),i.rows||(i.rows=2),("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))&&(a=""),d.value=a,s(d,i),e(d).attr({role:"textbox"});break;case"checkbox":if(d=t.createElement("input"),d.type="checkbox",i.value){var b=i.value.split(":");a===b[0]&&(d.checked=!0,d.defaultChecked=!0),d.value=b[0],e(d).data("offval",b[1])}else{var w=String(a).toLowerCase();w.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==w?(d.checked=!0,d.defaultChecked=!0,d.value=a):d.value="on",e(d).data("offval","off")}s(d,i,["value"]),e(d).attr({role:"checkbox","aria-checked":d.checked?"true":"false"});break;case"select":d=t.createElement("select");var y,x=[],C=null;!0===i.multiple||"multiple"===i.multiple?(y=!0,d.multiple="multiple",e(d).attr("aria-multiselectable","true"),x=a.split(","),x=e.map(x,function(t){return e.trim(t)})):(y=!1,x[0]=e.trim(a)),void 0===i.size&&(i.size=y?3:1);try{C=i.rowId}catch(e){}if(u&&u.idPrefix&&(C=o.stripPref(u.idPrefix,C)),void 0===i.dataUrl&&i.generateValue&&null!=u.indexByColumnData[i.cm.name]&&(i.value=c.generateValueFromColumnIndex(i.cm.name,i.separator,i.delimiter)),void 0!==i.dataUrl){var j=i.postData||n.postData,D={elem:d,options:i,cm:i.cm,mode:i.mode,rowid:C,iCol:i.iCol,ovm:x};s(d,i,j?["postData"]:void 0),e.ajax(e.extend({url:e.isFunction(i.dataUrl)?i.dataUrl.call(c,C,a,String(i.name),D):i.dataUrl,type:"GET",dataType:"html",data:e.isFunction(j)?j.call(c,C,a,String(i.name)):j,context:D,success:function(t,r,i){var a=this.ovm,l=this.elem,n=this.cm,s=this.iCol,d=e.extend({},this.options),u=this.rowid,p=this.mode,f=e.isFunction(d.buildSelect)?d.buildSelect.call(c,t,i,n,s):t;"string"==typeof f&&(f=e(e.trim(f)).html()),f&&(e(l).append(f),setTimeout(function(){var t;e("option",l).each(function(r){0===r&&l.multiple&&(this.selected=!1),e.inArray(e.trim(e(this).val()),a)>-1&&(this.selected=!0,t=!0)}),t||e("option",l).each(function(){e.inArray(e.trim(e(this).text()),a)>-1&&(this.selected=!0)}),o.fullBoolFeedback.call(c,d.selectFilled,"jqGridSelectFilled",{elem:l,options:d,cm:n,rowid:u,mode:p,cmName:null!=n?n.name:d.name,iCol:s})},0))}},n||{}))}else i.value&&(o.fillSelectOptions(d,i.value,void 0===i.separator?":":i.separator,void 0===i.delimiter?";":i.delimiter,y,a),s(d,i,["value"]),o.fullBoolFeedback.call(c,i.selectFilled,"jqGridSelectFilled",{elem:d,options:i,cm:i.cm,rowid:C,mode:i.mode,cmName:null!=i.cm?i.cm.name:i.name,iCol:i.iCol}));break;case"text":case"password":case"button":var q;q="button"===r?"button":"textbox",(d=t.createElement("input")).type=r,s(d,i),d.value=a,"button"!==r&&(l?i.size||e(d).css({width:"100%","box-sizing":"border-box"}):i.size||(i.size=20)),e(d).attr("role",q);break;case"image":case"file":(d=t.createElement("input")).type=r,s(d,i);break;case"custom":d=t.createElement("span");try{if(!e.isFunction(i.custom_element))throw"editoptions.custom_element is not a function";var R=i.custom_element.call(c,a,i);if(!(R instanceof jQuery||o.isHTMLElement(R)||"string"==typeof R))throw"editoptions.custom_element returns value of a wrong type";R=e(R).addClass("customelement").attr({id:i.id,name:i.name}),e(d).empty().append(R)}catch(e){"e1"===e&&p.call(c,h,"function 'custom_element' "+m.nodefined,v),"e2"===e?p.call(c,h,"function 'custom_element' "+m.novalue,v):p.call(c,h,"string"==typeof e?e:e.message,v)}}return d},checkDate:function(e,t){var r,i={};if(e=e.toLowerCase(),r=-1!==e.indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(r),3!==(t=t.split(r)).length)return!1;var a,o,l,n=-1,s=-1,d=-1;for(o=0;o<e.length;o++)l=isNaN(t[o])?0:parseInt(t[o],10),i[e[o]]=l,-1!==(a=e[o]).indexOf("y")&&(n=o),-1!==a.indexOf("m")&&(d=o),-1!==a.indexOf("d")&&(s=o);a="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var c,u=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1!==n&&(c=i[e[n]].toString(),2===a&&1===c.length&&(a=1),!(c.length!==a||0===i[e[n]]&&"00"!==t[n]||-1===d||(c=i[e[d]].toString()).length<1||i[e[d]]<1||i[e[d]]>12||-1===s||(c=i[e[s]].toString()).length<1||i[e[s]]<1||i[e[s]]>31||2===i[e[d]]&&i[e[s]]>function(e){return e%4!=0||e%100==0&&e%400!=0?28:29}(i[e[n]])||i[e[s]]>u[i[e[d]]]))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t,r=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!o.isEmpty(e)){if(!(t=e.match(r)))return!1;if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}return!0},checkValues:function(t,r,i,a,l){var n,s,d,c,u,p=this,f=p.p,h=f.colModel,g=o.isEmpty,m=S.call(e(p),"edit.msg"),v=function(t){var r=n[t];return e.isFunction(r)?r.call(p,l):r},b=S.call(e(p),"formatter.date.masks");if(void 0===i){if("string"==typeof r&&(r=f.iColByName[r]),void 0===r||r<0)return[!0,"",""];c=h[r],n=c.editrules,null!=c.formoptions&&(s=c.formoptions.label)}else n=i,s=void 0===a?"_":a,c=h[r];if(n){if(s||(s=null!=f.colNames?f.colNames[r]:c.label),!0===v("required")&&g(t))return[!1,s+": "+m.required,""];var w=!1!==v("required");if(!0===v("number")&&(!1!==w||!g(t))&&isNaN(t))return[!1,s+": "+m.number,""];if(void 0!==n.minValue&&!isNaN(n.minValue)&&parseFloat(t)<parseFloat(n.minValue))return[!1,s+": "+m.minValue+" "+n.minValue,""];if(void 0!==n.maxValue&&!isNaN(n.maxValue)&&parseFloat(t)>parseFloat(n.maxValue))return[!1,s+": "+m.maxValue+" "+n.maxValue,""];if(!0===v("email")&&!(!1===w&&g(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t)))return[!1,s+": "+m.email,""];if(!0===v("integer")&&(!1!==w||!g(t))){if(isNaN(t))return[!1,s+": "+m.integer,""];if(t%1!=0||-1!==t.indexOf("."))return[!1,s+": "+m.integer,""]}if(!0===v("date")&&!(!1===w&&g(t)||(c.formatoptions&&c.formatoptions.newformat?(d=c.formatoptions.newformat,b.hasOwnProperty(d)&&(d=b[d])):d=h[r].datefmt||"Y-m-d",o.checkDate(d,t))))return[!1,s+": "+m.date+" - "+d,""];if(!0===v("time")&&!(!1===w&&g(t)||o.checkTime(t)))return[!1,s+": "+m.date+" - hh:mm (am/pm)",""];if(!0===v("url")&&!(!1===w&&g(t)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(t)))return[!1,s+": "+m.url,""];if(!0===n.custom){if(!1!==w||!g(t))return e.isFunction(n.custom_func)?(u=n.custom_func.call(p,t,s,r),e.isArray(u)?u:[!1,m.customarray,""]):[!1,m.customfcheck,""]}else if(e.isFunction(n.custom)&&(!1!==w||!g(t)))return u=n.custom.call(p,l),e.isArray(u)?u:[!1,m.customarray,""]}return[!0,"",""]}}),o.extend({getColProp:function(e){var t,r={},i=this[0];return null!=i&&i.grid&&void 0!==(t=i.p.iColByName[e])?i.p.colModel[t]:r},setColProp:function(t,r){return this.each(function(){var i,a=this,o=a.p;a.grid&&null!=o&&r&&void 0!==(i=o.iColByName[t])&&e.extend(!0,o.colModel[i],r)})},sortGrid:function(e,t,r){return this.each(function(){var i,a,o,l=this,n=l.grid,s=l.p,d=s.colModel,c=d.length,u=!1;if(n)for(e||(e=s.sortname),"boolean"!=typeof t&&(t=!1),a=0;a<c;a++)if((i=d[a]).index===e||i.name===e){!0===s.frozenColumns&&!0===i.frozen&&(u=n.fhDiv.find("#"+s.id+"_"+e)),u&&0!==u.length||(u=n.headers[a].el),("boolean"!=typeof(o=i.sortable)||o)&&l.sortData("jqgh_"+s.id+"_"+e,a,t,r,u);break}})},clearBeforeUnload:function(){return this.each(function(){var r,i=this,a=i.p,l=i.grid,n=o.clearArray,s=Object.prototype.hasOwnProperty;e.isFunction(l.emptyRows)&&l.emptyRows.call(i,!0,!0),e(t).off("mousemove.jqGrid mouseup.jqGrid"+a.id),e(i).off();var d,c=l.headers.length;for(d=0;d<c;d++)l.headers[d].el=null;for(r in l)l.hasOwnProperty(r)&&(l.propOrMethod=null);var u=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(c=u.length,d=0;d<c;d++)s.call(i,u[d])&&(i[u[d]]=null);i._index={},n(a.data),n(a.lastSelectedData),n(a.selarrrow),n(a.savedRow),a.editingInfo={}})},GridDestroy:function(){return this.each(function(){var t=this,r=t.p;if(t.grid&&null!=r){r.pager&&e(r.pager).remove();try{e("#alertmod_"+c(r.id)).remove(),e(t).jqGrid("clearBeforeUnload"),e(r.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var t=this,r=e(t),i=t.p,a=e.fn.jqGrid;t.grid&&(r.removeClass(a.getGuiStyles.call(r,"grid","ui-jqgrid-btable")),i.pager&&(i.pager.substr(1,e.jgrid.uidPref.length)===e.jgrid.uidPref?e(i.pager).remove():e(i.pager).empty().removeClass(a.getGuiStyles.call(r,"pager.pager","ui-jqgrid-pager "+a.getGuiStyles.call(r,"bottom"))).removeAttr("style").removeAttr("dir")),r.jqGrid("clearBeforeUnload"),r.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),r.empty(),r.insertBefore(i.gBox).show(),e(i.pager).insertBefore(i.gBox).show(),e(i.gBox).remove())})},setGridState:function(t){return this.each(function(){var r=this,i=r.p,a=r.grid,o=a.cDiv,l=e(a.uDiv),n=e(a.ubDiv);if(a&&null!=i){var s=function(e){return D.getIconRes.call(r,"gridMinimize."+e)},d=s("visible"),c=s("hidden");"hidden"===t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",i.gView).slideUp("fast"),i.pager&&e(i.pager).slideUp("fast"),i.toppager&&e(i.toppager).slideUp("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideUp("fast"),l.slideUp("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",o).removeClass(d).addClass(c),i.gridstate="hidden"):"visible"===t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",i.gView).slideDown("fast"),i.pager&&e(i.pager).slideDown("fast"),i.toppager&&e(i.toppager).slideDown("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideDown("fast"),l.slideDown("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",o).removeClass(c).addClass(d),i.gridstate="visible")}})},filterToolbar:function(r){return this.each(function(){var i=this,a=i.grid,l=e(i),n=i.p,s=o.info_dialog,d=o.htmlEncode;if(!this.ftoolbar){var u,p=e.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:n.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},o.search,n.searching||{},r||{}),f=n.colModel,h=function(e){return S.call(l,e)},g=h("errors.errcap"),m=h("edit.bClose"),v=h("edit.msg"),b=R.call(i,"states.hover"),w=R.call(i,"states.select"),y=R.call(i,"filterToolbar.dataField"),x={},C=function(e){var t="gs_";switch(p.idMode){case"compatibility":t+=n.idPrefix;break;case"new":t+=n.id+"_"}return t+e},j=function(e){return"#"+c(C(e))},D=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},q=function(t){var r,i,a,o,l,s,d=n.postData[p.sFilter],c={},u=n.iColByName;if(t)for(i=0;i<f.length;i++)!1!==(l=f[i]).search&&(s=l.searchoptions||{},c[l.name]={op:s.sopt?s.sopt[0]:"select"===l.stype||"checkbox"===l.stype?"eq":p.defaultSearch,data:void 0!==s.defaultValue?s.defaultValue:""});if(!d||!n.search)return c;if("string"==typeof d)try{d=e.parseJSON(d)}catch(e){d={}}else d=d||{};if(a=d.rules||{},null==d||null!=d.groupOp&&null!=p.groupOp&&d.groupOp.toUpperCase()!==p.groupOp.toUpperCase()||null==a||0===a.length||null!=d.groups&&d.groups.length>0)return c;for(i=0;i<a.length;i++)for(l=f[u[(o=a[i]).field]],r=0;r<f.length;r++)if(((l=f[r]).index||l.name)===o.field&&!1!==l.search){if((s=l.searchoptions||{}).sopt){if(e.inArray(o.op,s.sopt)<0)continue}else if("select"===l.stype||"checkbox"===l.stype){if("eq"!==o.op)continue}else if(o.op!==p.defaultSearch)continue;c[l.name]={op:o.op,data:o.data}}return c},_=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},I=function(){var t={},r=0,o={};e.each(f,function(){var l,s,d=this,c=d.index||d.name,u=d.searchoptions||{},f=e(j(d.name),!0===d.frozen&&!0===n.frozenColumns?a.fhDiv:a.hDiv),g=function(e,t){var r=d.formatoptions||{};return void 0!==r[e]?r[e]:h("formatter."+(t||d.formatter)+"."+e)},m=function(e){var t=g("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(s=p.searchOperators?f.parent().prev().children("a").data("soper")||p.defaultSearch:u.sopt?u.sopt[0]:"select"===d.stype||"checkbox"===d.stype?"eq":p.defaultSearch,"custom"===d.stype&&e.isFunction(u.custom_value)&&f.length>0&&"SPAN"===f[0].nodeName.toUpperCase())l=u.custom_value.call(i,f.children(".customelement").first(),"get");else if("select"===d.stype)l=f.prop("multiple")?null==(l=f.val())||0===l.length?"":l.join(n.inFilterSeparator||","):f.val();else if("checkbox"===d.stype){var v=D(u);switch(f.data("state")){case-1:l="";break;case 0:l=v.off;break;default:l=v.on}}else switch(l=e.trim(f.val()),d.formatter){case"integer":""!==(l=m(l).replace(g("decimalSeparator","number"),"."))&&(l=String(parseInt(l,10)));break;case"number":""!==(l=m(l).replace(g("decimalSeparator"),"."))&&"0"===String(l).charAt(0)&&(l=String(parseFloat(l)));break;case"currency":var b=g("prefix"),w=g("suffix");b&&b.length&&(l=l.substr(b.length)),w&&w.length&&(l=l.substr(0,l.length-w.length)),""!==(l=m(l).replace(g("decimalSeparator"),"."))&&(l=String(parseFloat(l)))}if(l||"nu"===s||"nn"===s||e.inArray(s,n.customUnaryOperations)>=0)t[c]=l,o[c]=s,r++;else if(t.hasOwnProperty(c)&&delete t[c],!p.stringResult&&!p.searchOperators&&"local"!==n.datatype)try{null!=n.postData&&n.postData.hasOwnProperty(c)&&delete n.postData[c]}catch(e){}});var s=r>0;if(p.stringResult||p.searchOperators||"local"===n.datatype){var d='{"groupOp":"'+p.groupOp+'","rules":[',c=0;e.each(t,function(e,t){c>0&&(d+=","),d+='{"field":"'+e+'",',d+='"op":"'+o[e]+'",',d+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',c++}),d+="]}",n.postData[p.sFilter]=d,e.each([p.sField,p.sValue,p.sOper],function(e,t){n.postData.hasOwnProperty(t)&&delete n.postData[t]})}else e.extend(n.postData,t);var u;n.searchurl&&(u=n.url,l.jqGrid("setGridParam",{url:n.searchurl}));var g="stop"===l.triggerHandler("jqGridToolbarBeforeSearch");!g&&e.isFunction(p.beforeSearch)&&(g=p.beforeSearch.call(i)),g||l.jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[e.extend({page:1},p.reloadGridSearchOptions||{})]),u&&l.jqGrid("setGridParam",{url:u}),l.triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(p.afterSearch)&&p.afterSearch.call(i)},F=h("search.odata")||[],G=n.customSortOperations,k=function(t,r,a){e("#sopt_menu").remove(),r=parseInt(r,10),a=parseInt(a,10)+18;var o,s=0,c=[],u=e(t).data("soper"),h=e(t).data("colname"),g=e(".ui-jqgrid-view").css("font-size")||"11px",m="<ul id='sopt_menu' class='"+R.call(i,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+g+";left:"+r+"px;top:"+a+"px;'>";if(void 0!==(s=n.iColByName[h])){var v,y,x,C,j,D=f[s],q=e.extend({},D.searchoptions);for(q.sopt||(q.sopt=[],q.sopt[0]="select"===D.stype||"checkbox"===D.stype?"eq":p.defaultSearch),e.each(F,function(){c.push(this.oper)}),null!=G&&e.each(G,function(e){c.push(e)}),s=0;s<q.sopt.length;s++)x=q.sopt[s],-1!==(o=e.inArray(x,c))&&(void 0!==(v=F[o])?(C=p.operands[x],j=v.text):null!=G&&(C=(y=G[x]).operand,j=y.text),m+='<li class="ui-menu-item '+(u===x?w:"")+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+d(x)+'" data-oper="'+d(C)+'"><table><tr><td style="width:25px">'+d(C)+"</td><td>"+d(j)+"</td></tr></table></a></li>");m+="</ul>",e("body").append(m),e("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),e("#sopt_menu > li > a").hover(function(){e(this).addClass(b)},function(){e(this).removeClass(b)}).click(function(){var r=e(this).attr("value"),i=e(this).data("oper");if(l.triggerHandler("jqGridToolbarSelectOper",[r,i,t]),e("#sopt_menu").hide(),e(t).data("soper",r).text(i),!0===p.autosearch){var a=e(t).parent().next().children()[0];(e(a).val()||"nu"===r||"nn"===r||e.inArray(r,n.customUnaryOperations)>=0)&&I()}})}},O=[],N=e("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});p.loadFilterDefaults&&(x=q()||{}),e.each(f,function(r){var a,d,c,f,w,j,D,q=this,S=q.searchoptions||{},k=q.editoptions||{},T=e("<th></th>",{class:R.call(i,"colHeaders","ui-th-column ui-th-"+n.direction+" "+(p.applyLabelClasses?q.labelClasses||"":"")),role:"gridcell","aria-describedby":n.id+"_"+q.name}),E=e("<div></div>"),A=e("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),B=A.children("tbody").children("tr").children("td"),M=B.eq(0),z=B.eq(1),P=B.eq(2);if(!0===this.hidden&&T.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),a=e.extend({mode:"filter",name:q.name,cm:q,iCol:r,id:C(q.name)},S),this.search){if(p.searchOperators){for(f=n.search&&null!=x[this.name]?x[this.name].op:a.sopt?a.sopt[0]:"select"===q.stype||"checkbox"===q.stype?"eq":p.defaultSearch,w=0;w<F.length;w++)if(F[w].oper===f){c=p.operands[f]||"";break}if(void 0===c&&null!=G){var L;for(L in G)if(G.hasOwnProperty(L)&&L===f){c=G[L].operand;break}}void 0===c&&(c="="),M.append("<a title='"+(null!=a.searchtitle?a.searchtitle:h("search.operandTitle"))+"' data-soper='"+f+"' class='"+R.call(i,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+c+"</a>")}if(M.data("colindex",r),null!=a.sopt&&1!==a.sopt.length||M.hide(),n.search&&null!=x[this.name]&&(a.defaultValue=x[this.name].data),void 0===a.clearSearch&&(a.clearSearch="text"===this.stype),a.clearSearch){var V=e.isFunction(p.resetTitle)?p.resetTitle.call(i,{options:p,cm:q,cmName:q.name,iCol:r}):(h("search.resetTitle")||"Clear Search Value")+" "+o.stripHtml(n.colNames[r]);V=o.htmlEncode(V),P.append("<a title='"+V+"' aria-label='"+V+"' class='"+R.call(i,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+p.resetIcon+"</span></a>")}else P.hide();switch(E.append(A),this.stype){case"checkbox":var H=void 0!==a.defaultValue?a.defaultValue:"-1";D=e("<input role='search' type='checkbox' class='"+y+"' name='"+(q.index||q.name)+"' id='"+C(q.name)+"' aria-labelledby='jqgh_"+n.id+"_"+q.name+"' data-state='"+H+"'/>"),"-1"===H?D.prop("indeterminate",!0):"1"===H&&D.prop("checked",!0),D.click(function(){var t=e(this);switch(t.data("state")){case-1:_(t,1);break;case 0:_(t,-1);break;default:_(t,0)}!0===p.autosearch&&I()}),z.append(D),a.attr&&D.attr(a.attr),O.push({elem:D[0],options:a});break;case"select":if(d=this.surl||a.dataUrl)e.ajax(e.extend({url:d,context:{$tdInput:z,options:a,cm:q,iCol:r},dataType:"html",success:function(r,l,n){var s,d,c,u=this.cm,f=this.iCol,h=this.options,g=this.$tdInput;void 0!==h.buildSelect?(s=h.buildSelect.call(i,r,n,u,f))&&g.append(s):g.append(r),(c=g.children("select")).attr({name:u.index||u.name,id:C(u.name)}),h.attr&&c.attr(h.attr),c.addClass(y),c.css({width:"100%"}),0===c.find("option[value='']").length&&"string"==typeof a.noFilterText&&((d=t.createElement("option")).value="",d.innerHTML=a.noFilterText,c.prepend(d),null!=e(c[0].options[c[0].selectedIndex]).attr("selected")||c[0].multiple||(c[0].selectedIndex=0)),c[0].multiple&&0===c.find("option[selected]").length&&-1!==c[0].selectedIndex&&(c[0].options[c[0].selectedIndex].selected=!1),void 0!==h.defaultValue&&c.val(h.defaultValue),o.bindEv.call(i,c[0],h),o.fullBoolFeedback.call(i,h.selectFilled,"jqGridSelectFilled",{elem:c[0],options:h,cm:u,cmName:u.name,iCol:f,mode:"filter"}),!0===p.autosearch&&c.change(function(){return I(),!1})}},o.ajaxOptions,n.ajaxSelectOptions||{}));else{var W,U,Y;if(q.searchoptions?(W=void 0===S.value?k.value||"":S.value,U=void 0===S.separator?k.separator||":":S.separator,Y=void 0===S.delimiter?k.delimiter||";":S.delimiter):q.editoptions&&(W=void 0===k.value?"":k.value,U=void 0===k.separator?":":k.separator,Y=void 0===k.delimiter?";":k.delimiter),S.generateValue&&null!=n.indexByColumnData[q.name]&&(W=i.generateValueFromColumnIndex(q.name,U,Y)),W){if((j=t.createElement("select")).style.width="100%",D=e(j).attr({name:q.index||q.name,role:"search",id:C(q.name),"aria-describedby":n.id+"_"+q.name}),a.attr&&D.attr(a.attr),!o.fillSelectOptions(j,W,U,Y,null!=a.attr&&a.attr.multiple)&&"string"==typeof a.noFilterText){var X=t.createElement("option");X.value="",X.innerHTML=a.noFilterText,X.selected=!0,D.prepend(X)}void 0!==a.defaultValue&&D.val(a.defaultValue),D.addClass(y),O.push({elem:j,options:a}),z.append(j),o.fullBoolFeedback.call(i,a.selectFilled,"jqGridSelectFilled",{elem:j,options:q.searchoptions||k,cm:q,cmName:q.name,iCol:r,mode:"filter"}),!0===p.autosearch&&D.change(function(){return I(),!1})}}break;case"text":if(D=e("<input role='search' type='text' placeholder='Type search term' class='slds-input' name='"+(q.index||q.name)+"' id='"+C(q.name)+"' aria-labelledby='jqgh_"+n.id+"_"+q.name+"' value='"+(void 0!==a.defaultValue?a.defaultValue:"")+"'/>"),z.append(D),q.createColumnIndex&&a.generateDatalist){var Q="dl_"+C(q.name),J=l.jqGrid("generateDatalistFromColumnIndex",q.name);null!=J&&J.length>0&&(D.attr("list",Q),z.append(J.attr("id",Q)))}a.attr&&D.attr(a.attr),O.push({elem:D[0],options:a}),!0===p.autosearch&&(p.searchOnEnter?D.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(I(),!1):this}):D.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:u&&clearTimeout(u),u=setTimeout(function(){I()},p.autosearchDelay)}}));break;case"custom":z.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(q.index||q.name)+"' id='"+C(q.name)+"'/>");try{if(!e.isFunction(a.custom_element))throw"e1";var Z=a.custom_element.call(i,void 0!==a.defaultValue?a.defaultValue:"",a);if(!Z)throw"e2";Z=e(Z).addClass("customelement"),E.find("span[name='"+(q.index||q.name)+"']").append(Z)}catch(e){"e1"===e&&s.call(i,g,"function 'custom_element' "+v.nodefined,m),"e2"===e?s.call(i,g,"function 'custom_element' "+v.novalue,m):s.call(i,g,"string"==typeof e?e:e.message,m)}}}T.append(E),T.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){e(this).addClass(b)},function(){e(this).removeClass(b)}),N.append(T),p.searchOperators||M.hide()}),e(a.hDiv).find(">div>.ui-jqgrid-htable>thead").append(N),e.each(O,function(){o.bindEv.call(i,this.elem,this.options)}),p.searchOperators&&(e(".soptclass",N).click(function(t){var r=e(this).offset(),i=r.left,a=r.top;k(this,i,a),t.stopPropagation()}),e("body").on("click",function(t){"soptclass"!==t.target.className&&e("#sopt_menu").hide()})),e(".clearsearchclass",N).click(function(){var t,r,i=e(this).closest(".ui-search-clear"),a=i.siblings(".ui-search-oper"),o=a.children("a"),l=o.data("soper"),s=parseInt(a.data("colindex"),10),d=i.siblings(".ui-search-input"),c=f[s],u=e.extend({},c.searchoptions||{}),h=u.defaultValue||"";switch(c.stype){case"select":h?d.find("select").val(h):d.find("select")[0].selectedIndex=0;break;case"checkbox":_(d.find("input[type=checkbox]"),-1);break;default:d.find("input").val(h)}("nu"===l||"nn"===l||e.inArray(l,n.customUnaryOperations)>=0)&&(t=u.sopt?u.sopt[0]:"select"===c.stype||"checkbox"===c.stype?"eq":p.defaultSearch,r=null!=G&&null!=G[t]?G[t].operand:p.operands[t]||"",o.data("soper",t).text(r)),!0===p.autosearch&&I()}),i.ftoolbar=!0,i.triggerToolbar=I,i.clearToolbar=function(t){var r,o={},s=0;t="boolean"!=typeof t||t,e.each(f,function(){var t,l,d=this,c=e(j(d.name),!0===d.frozen&&!0===n.frozenColumns?a.fhDiv:a.hDiv),u=d.searchoptions||{};switch(void 0!==u.defaultValue&&(t=u.defaultValue),r=d.index||d.name,d.stype){case"checkbox":_(c,-1);break;case"select":if(l=!(c.length>0&&c[0].multiple),c.find("option").each(function(r){if(this.selected=0===r&&l,e(this).val()===t)return this.selected=!0,!1}),void 0!==t)o[r]=t,s++;else try{delete n.postData[r]}catch(e){}break;case"text":if(c.val(t||""),void 0!==t)o[r]=t,s++;else try{delete n.postData[r]}catch(e){}break;case"custom":e.isFunction(u.custom_value)&&c.length>0&&"SPAN"===c[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),u.custom_value.call(i,c.children(".customelement").first(),"set",t))}});var d=s>0;if(n.resetsearch=!0,p.stringResult||p.searchOperators||"local"===n.datatype){var c='{"groupOp":"'+p.groupOp+'","rules":[',u=0;e.each(o,function(e,t){u>0&&(c+=","),c+='{"field":"'+e+'",',c+='"op":"eq",',c+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',u++}),c+="]}",n.postData[p.sFilter]=c,e.each([p.sField,p.sValue,p.sOper],function(e,t){n.postData.hasOwnProperty(t)&&delete n.postData[t]})}else e.extend(n.postData,o);var h;n.searchurl&&(h=n.url,l.jqGrid("setGridParam",{url:n.searchurl}));var g="stop"===l.triggerHandler("jqGridToolbarBeforeClear");!g&&e.isFunction(p.beforeClear)&&(g=p.beforeClear.call(i)),g||t&&l.jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[e.extend({page:1},p.reloadGridResetOptions||{})]),h&&l.jqGrid("setGridParam",{url:h}),l.triggerHandler("jqGridToolbarAfterClear"),e.isFunction(p.afterClear)&&p.afterClear.call(i)},i.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",a.hDiv),r=!0===n.frozenColumns&&e("tr.ui-search-toolbar",a.fhDiv);"none"===t.css("display")?(t.show(),r&&r.show()):(t.hide(),r&&r.hide()),!0===n.frozenColumns&&(l.jqGrid("destroyFrozenColumns"),l.jqGrid("setFrozenColumns"))},!0===n.frozenColumns&&(l.jqGrid("destroyFrozenColumns"),l.jqGrid("setFrozenColumns")),l.on("jqGridRefreshFilterValues.filterToolbar"+(p.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var t,r,a,o,l,s,d,c=q(!0)||{};if(p.stringResult||p.searchOperators||"local"===n.datatype||!n.search){for(t in c)if(c.hasOwnProperty(t)&&(r=c[t],a=e(j(t)),s=a.closest("th.ui-th-column"),a.length>0&&s.length>0)){if(d=(n.colModel[s[0].cellIndex]||{}).searchoptions||{},"SELECT"===a[0].tagName.toUpperCase()&&a[0].multiple)a.val(r.data.split(n.inFilterSeparator||","));else if(a.is("input[type=checkbox]")){var u=D(d);_(a,r.data===u.on?1:r.data===u.off?0:-1)}else if(a.find(".customelement").length>0&&e.isFunction(d.custom_value)){var f=d.custom_value.call(i,a.find(".customelement").first(),"get");""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),void 0===f&&(f=""),r.data!==f&&String(r.data)!==String(f)&&d.custom_value.call(i,a.find(".customelement").first(),"set",r.data)}else""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),e.trim(a.val())!==String(r.data)&&a.val(r.data);(o=a.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",r.op),o.text(p.operands[r.op]||(n.customSortOperations[r.op]||{}).operand)}for(l=0;l<n.colModel.length;l++)t=n.colModel[l].name,c.hasOwnProperty(t)||e(j(t)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var t=this;t.ftoolbar&&(t.triggerToolbar=null,t.clearToolbar=null,t.toggleToolbar=null,t.ftoolbar=!1,e(t.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===t.p.frozenColumns&&e(t).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var r,i,a,o,l,n=this,s=n.grid,d=n.p.colModel,c=e("table.ui-jqgrid-htable thead",s.hDiv);if(s){e(n).off(".setGroupHeaders");var u=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),p=s.headers;for(r=0,i=p.length;r<i;r++){l=d[r].hidden?"none":"",a=e(p[r].el).width(p[r].width).css("display",l);try{a.removeAttr("rowSpan")}catch(e){a.attr("rowSpan",1)}u.append(a),(o=a.children("span.ui-jqgrid-resize")).length>0&&(o[0].style.height=""),a.children("div")[0].style.top=""}e(c).children("tr.ui-jqgrid-labels").remove(),e(c).prepend(u),!0===t&&e(n).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var r,i,a,l,n,s,d,c,u,p,f,h,g,m,v=this,b=0,w=v.p,y=w.colModel,x=y.length,C=v.grid.headers,j=e("table.ui-jqgrid-htable",v.grid.hDiv),D=o.isCellClassHidden,q=j.children("thead").children("tr.ui-jqgrid-labels"),S=q.last().addClass("jqg-second-row-header"),_=j.children("thead"),I=j.find(".jqg-first-row-header");for(void 0===I[0]?I=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):I.empty(),e(v).prepend(_),a=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<x;r++)if(n=C[r].el,s=e(n),i=y[r],d={height:"0",width:C[r].width+"px",display:i.hidden?"none":""},e("<th>",{role:"gridcell"}).css(d).addClass("ui-first-th-"+w.direction+(t.applyLabelClasses?" "+(i.labelClasses||""):"")).appendTo(I),n.style.width="",m=R.call(v,"colHeaders","ui-th-column-header ui-th-"+w.direction+" "+(t.applyLabelClasses?i.labelClasses||"":"")),u=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0}(i.name,t.groupHeaders)){for(p=u.numberOfColumns,f=u.titleText,h=0,c=0;c<p&&r+c<x;c++)y[r+c].hidden||D(y[r+c].classes)||h++;l=e("<th>").addClass(m).html(f||"&nbsp;"),h>0&&l.attr("colspan",String(h)),w.headertitles&&l.attr("title",l.text()),0===h&&l.hide(),s.before(l),a.append(n),b=p-1}else 0===b?t.useColSpanStyle?s.attr("rowspan",q.length+1):(e("<th>").addClass(m).css({display:i.hidden?"none":"","border-top":"0 none"}).insertBefore(s),a.append(n)):(a.append(n),b--);(g=e(v).children("thead")).prepend(I),a.insertAfter(S),j.prepend(g),e(v).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,r=(e=e[0]).p.colModel,i=r.length,a=-1;for(t=0;t<i&&!0===r[t].frozen;t++)a=t;return a+1},setFrozenColumns:function(t){return t=t||{},this.each(function(){var r=this,i=e(r),a=r.p,o=r.grid;if(o&&null!=a&&!0!==a.frozenColumns){var l,n,s=a.colModel,d=s.length,u=-1,p=!1,f=[],h=c(a.id),g=R.call(r,"states.hover"),m=R.call(r,"states.disabled");if(!0!==a.subGrid&&!0!==a.treeGrid&&!a.scroll){for(l=0;l<d&&!0===s[l].frozen;l++)p=!0,u=l,f.push("#jqgh_"+h+"_"+c(s[l].name));if(a.sortable){n=e(o.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{n.sortable("destroy")}catch(e){}i.jqGrid("setGridParam",{sortable:{options:{items:f.length>0?">th:not(:has("+f.join(",")+"),:hidden)":">th:not(:hidden)"}}}),i.jqGrid("sortableColumns",n)}if(u>=0&&p){var v=a.caption?e(o.cDiv).outerHeight():0,b=e(".ui-jqgrid-htable",a.gView).height();a.toppager&&(v+=e(o.topDiv).outerHeight()),!0===a.toolbar[0]&&"bottom"!==a.toolbar[1]&&(v+=e(o.uDiv).outerHeight()),o.fhDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===a.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+v+"px;height:"+b+"px;' class='"+R.call(r,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),o.fbDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===a.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),e(a.gView).append(o.fhDiv);var w=e(".ui-jqgrid-htable",a.gView).clone(!0),y=w[0].tHead.rows;if(a.groupHeader){e(y[0].cells).filter(":gt("+u+")").remove(),e(y).filter(".jqg-third-row-header").each(function(){e(this).children("th[id]").each(function(){var t,i=e(this).attr("id");i&&i.substr(0,r.id.length+1)===r.id+"_"&&(t=i.substr(r.id.length+1),a.iColByName[t]>u&&e(this).remove())})});var x,C,j=-1,D=-1;e(y).filter(".jqg-second-row-header").children("th").each(function(){if(x=parseInt(e(this).attr("colspan")||1,10),C=parseInt(e(this).attr("rowspan")||1,10),C>1?(j++,D++):x&&(j+=x,D++),j===u)return!1}),j!==u&&(D=u),e(y).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){e(this).children(":gt("+D+")").remove()})}else e(y).each(function(){e(this).children(":gt("+u+")").remove()});if(e(w).width(1),e(o.fhDiv).append(w).scroll(function(){this.scrollLeft=0}),a.footerrow){var q=e(".ui-jqgrid-bdiv",a.gView).height();o.fsDiv=e("<div style='position:absolute;"+("rtl"===a.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+parseInt(q,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),e(a.gView).append(o.fsDiv);var S=e(".ui-jqgrid-ftable",a.gView).clone(!0);e("tr",S).each(function(){e("td:gt("+u+")",this).remove()}),e(S).width(1),e(o.fsDiv).append(S)}i.on("jqGridSortCol.setFrozenColumns",function(t,r,i){var l=e("tr.ui-jqgrid-labels:last th:eq("+a.lastsort+")",o.fhDiv),n=e("tr.ui-jqgrid-labels:last th:eq("+i+")",o.fhDiv);e("span.ui-grid-ico-sort",l).addClass(m),e(l).attr("aria-selected","false"),e("span.ui-icon-"+a.sortorder,n).removeClass(m),e(n).attr("aria-selected","true"),a.viewsortcols[0]||a.lastsort!==i&&(e("span.s-ico",l).hide(),e("span.s-ico",n).show())}),e(a.gView).append(o.fbDiv),e(o.bDiv).scroll(function(){e(o.fbDiv).scrollTop(e(this).scrollTop())}),e(o.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(i){o.bDiv.scrollTop+=e.isFunction(t.mouseWheel)?t.mouseWheel.call(r,i):"mousewheel"===i.type?-i.originalEvent.wheelDelta/10:6*i.originalEvent.detail}),!0===a.hoverrows&&e(a.idSel).off("mouseover.jqGrid mouseout.jqGrid");var _=function(e,t){var r=e.height();Math.abs(r-t)>=1&&t>0&&(e.height(t),r=e.height(),Math.abs(t-r)>=1&&e.height(t+Math.round(t-r)))},I=function(e,t){var r=e.width();Math.abs(r-t)>=1&&(e.width(t),r=e.width(),Math.abs(t-r)>=1&&e.width(t+Math.round(t-r)))},F=function(t,r,i,o){var n,s,d,c,u,p,f,h,g,m,v,b,w=e(r).position().top;if(null!=t&&t.length>0){if(t[0].scrollTop=r.scrollTop,t.css("rtl"===a.direction?{top:w,right:0}:{top:w,left:0}),d=t.children("table").children("thead").children("tr"),0===(c=e(r).children("div").children("table").children("thead").children("tr")).length&&t.children("table").length>0&&(d=e(t.children("table")[0].rows),c=e(e(r).children("div").children("table")[0].rows)),s=Math.min(d.length,c.length),m=s>0?e(d[0]).position().top:0,v=s>0?e(c[0]).position().top:0,i>=0)for(o>=0&&(s=Math.min(o+1,s)),n=i;n<s;n++)if("none"!==(u=e(c[n])).css("display")&&u.is(":visible")){if(w=u.position().top,p=e(d[n]),f=p.position().top,h=u.height(),null!=a.groupHeader&&a.groupHeader.useColSpanStyle)for(b=u[0].cells,l=0;l<b.length;l++)null!=(g=b[l])&&"TH"===g.nodeName.toUpperCase()&&(h=Math.max(h,e(g).height()));_(p,h+(w-v)+(m-f))}_(t,r.clientHeight)}},G={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},k={header:G,resizeFooter:!0,body:G};i.on("jqGridAfterGridComplete.setFrozenColumns",function(){e(a.idSel+"_frozen").remove(),e(o.fbDiv).height(o.hDiv.clientHeight);var t=e(this).clone(!0),r=t[0].rows,l=i[0].rows;if(e(r).filter("tr[role=row]").each(function(){e(this.cells).filter("td[role=gridcell]:gt("+u+")").remove()}),o.fbRows=r,t.width(1).attr("id",a.id+"_frozen"),t.appendTo(o.fbDiv),!0===a.hoverrows){var n=function(t,r,i){e(t)[r](g),e(i[t.rowIndex])[r](g)};e(r).filter(".jqgrow").hover(function(){n(this,"addClass",l)},function(){n(this,"removeClass",l)}),e(l).filter(".jqgrow").hover(function(){n(this,"addClass",r)},function(){n(this,"removeClass",r)})}F(o.fhDiv,o.hDiv,0,-1),F(o.fbDiv,o.bDiv,0,-1),o.sDiv&&F(o.fsDiv,o.sDiv,0,-1)});var O=function(t){e(o.fbDiv).scrollTop(e(o.bDiv).scrollTop()),t.header.resizeDiv&&F(o.fhDiv,o.hDiv,t.header.resizedRows.iRowStart,t.header.resizedRows.iRowEnd),t.body.resizeDiv&&F(o.fbDiv,o.bDiv,t.body.resizedRows.iRowStart,t.body.resizedRows.iRowEnd),t.resizeFooter&&o.sDiv&&t.resizeFooter&&F(o.fsDiv,o.sDiv,0,-1);var r=o.fhDiv[0].clientWidth;t.header.resizeDiv&&null!=o.fhDiv&&o.fhDiv.length>=1&&_(e(o.fhDiv),o.hDiv.clientHeight),t.body.resizeDiv&&null!=o.fbDiv&&o.fbDiv.length>0&&I(e(o.fbDiv),r),t.resizeFooter&&null!=o.fsDiv&&o.fsDiv.length>=0&&I(e(o.fsDiv),r)};e(a.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){O(k)},50)}),i.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var r=i.jqGrid("getInd",t);O({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:r}}})}),i.on("jqGridResizeStop.setFrozenColumns",function(){O(k)}),i.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){O(t||k)}),o.hDiv.loading||setTimeout(function(){i.triggerHandler("jqGridAfterGridComplete")},0),a.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var t=this,r=e(t),i=t.grid,a=t.p,o=c(a.id);if(i&&!0===a.frozenColumns){if(e(i.fhDiv).remove(),e(i.fbDiv).off(".setFrozenColumns"),e(i.fbDiv).remove(),i.fhDiv=null,i.fbDiv=null,i.fbRows=null,a.footerrow&&(e(i.fsDiv).remove(),i.fsDiv=null),r.off(".setFrozenColumns"),!0===a.hoverrows){var l,n=R.call(t,"states.hover");r.on("mouseover.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(l).attr("class")&&e(l).addClass(n)}).on("mouseout.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),e(l).removeClass(n)})}if(a.frozenColumns=!1,a.sortable){var s=e(i.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");s.sortable("destroy"),r.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+o+"_cb,#jqgh_"+o+"_rn,#jqgh_"+o+"_subgrid),:hidden)"}}}),r.jqGrid("sortableColumns",s)}}})}}),e.fn.jqFilter=function(t){if("string"==typeof t){var r=e.fn.jqFilter[t];if(!r)throw"jqFilter - No such method: "+t;var i=e.makeArray(arguments).slice(1);return r.apply(this,i)}var a=e.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},o.filter,t||{});return this.each(function(){if(!this.filter){this.p=a,null!==a.filter&&void 0!==a.filter||(a.filter={groupOp:a.groupOps[0].op,rules:[],groups:[]});var t,r,i=a.columns.length,l=/msie/i.test(navigator.userAgent)&&!window.opera,n=e.isFunction,s=null!=o.defaults&&n(o.defaults.fatalError)?o.defaults.fatalError:alert,d=function(){return e("#"+o.jqID(a.id))[0]||null},c=function(t,r){return e(d()).jqGrid("getGuiStyles",t,r||"")},u=function(t){return e(d()).jqGrid("getGridRes","search."+t)},p=function(e){var t=d(),r=t.p.iColByName[e];return void 0!==r?{cm:t.p.colModel[r],iCol:r}:(r=t.p.iPropByName[e],void 0!==r?{cm:t.p.additionalProperties[r],iCol:r,isAddProp:!0}:{cm:null,iCol:-1})},f=c("states.error"),h=c("dialog.content");if(a.initFilter=e.extend(!0,{},a.filter),i){for(t=0;t<i;t++)(r=a.columns[t]).stype?r.inputtype=r.stype:r.inputtype||(r.inputtype="text"),r.sorttype?r.searchtype=r.sorttype:r.searchtype||(r.searchtype="string"),void 0===r.hidden&&(r.hidden=!1),r.label||(r.label=r.name),r.cmName=r.name,r.index&&(r.name=r.index),r.hasOwnProperty("searchoptions")||(r.searchoptions={}),r.hasOwnProperty("searchrules")||(r.searchrules={});a.showQuery&&e(this).append("<table class='queryresult "+h+"' style='display:block;max-width:440px;border:0px none;' dir='"+a.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var g=function(e,t){var r=[!0,""],i=d();if(n(t.searchrules))r=t.searchrules.call(i,e,t);else if(o&&o.checkValues)try{r=o.checkValues.call(i,e,-1,t.searchrules,t.label)}catch(e){}r&&r.length&&!1===r[0]&&(a.error=!r[0],a.errmsg=r[1])};this.onchange=function(){return a.error=!1,a.errmsg="",!!n(a.onChange)&&a.onChange.call(d(),a,this)},this.reDraw=function(){e("table.group:first",this).remove();var t=this.createTableForGroup(a.filter,null);e(this).append(t),n(a.afterRedraw)&&a.afterRedraw.call(d(),a,this)},this.createTableForGroup=function(t,r){var i,o=this,l=e("<table class='"+c("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),n="left";"rtl"===a.direction&&(n="right",l.attr("dir","rtl")),null===r&&l.append("<tr class='error' style='display:none;'><th colspan='5' class='"+f+"' align='"+n+"'></th></tr>");var s=e("<tr></tr>");l.append(s);var d=e("<th colspan='5' align='"+n+"'></th>");if(s.append(d),!0===a.ruleButtons){var p=e("<select class='"+c("searchDialog.operationSelect","opsel")+"'></select>");d.append(p);var h,g="";for(i=0;i<a.groupOps.length;i++)h=t.groupOp===o.p.groupOps[i].op?" selected='selected'":"",g+="<option value='"+o.p.groupOps[i].op+"'"+h+">"+o.p.groupOps[i].text+"</option>";p.append(g).on("change",function(){t.groupOp=e(p).val(),o.onchange()})}var m="<span></span>";if(a.groupButton&&(m=e("<input type='button' value='+ {}' title='"+u("addGroupTitle")+"' class='"+c("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===t.groups&&(t.groups=[]),t.groups.push({groupOp:a.groupOps[0].op,rules:[],groups:[]}),o.reDraw(),o.onchange(),!1}),d.append(m),!0===a.ruleButtons){var v,b=e("<input type='button' value='+' title='"+u("addRuleTitle")+"' class='"+c("searchDialog.addRuleButton","add-rule ui-add")+"'/>");b.on("click",function(){var r,a;for(void 0===t.rules&&(t.rules=[]),i=0;i<o.p.columns.length;i++)if(r=void 0===o.p.columns[i].search||o.p.columns[i].search,a=!0===o.p.columns[i].hidden,!0===o.p.columns[i].searchoptions.searchhidden&&r||r&&!a){v=o.p.columns[i];break}var l;return l=v.searchoptions.sopt?v.searchoptions.sopt:o.p.sopt?o.p.sopt:-1!==e.inArray(v.searchtype,o.p.strarr)?o.p.stropts:o.p.numopts,t.rules.push({field:v.name,op:l[0],data:""}),o.reDraw(),!1}),d.append(b)}if(null!==r){var w=e("<input type='button' value='-' title='"+u("deleteGroupTitle")+"' class='"+c("searchDialog.deleteGroupButton","delete-group")+"'/>");d.append(w),w.on("click",function(){for(i=0;i<r.groups.length;i++)if(r.groups[i]===t){r.groups.splice(i,1);break}return o.reDraw(),o.onchange(),!1})}if(void 0!==t.groups){var y,x,C;for(i=0;i<t.groups.length;i++)y=e("<tr></tr>"),l.append(y),x=e("<td class='first'></td>"),y.append(x),(C=e("<td colspan='4'></td>")).append(this.createTableForGroup(t.groups[i],t)),y.append(C)}if(void 0===t.groupOp&&(t.groupOp=o.p.groupOps[0].op),void 0!==t.rules)for(i=0;i<t.rules.length;i++)l.append(this.createTableRowForRule(t.rules[i],t));return l},this.createTableRowForRule=function(t,r){var i,s,f,h,g=this,m=d(),v=e("<tr></tr>"),b="";v.append("<td class='first'></td>");var w=e("<td class='columns'></td>");v.append(w);var y,x=e("<select class='"+c("searchDialog.label","selectLabel")+"'></select>"),C=[];w.append(x),x.on("change",function(){t.field=e(x).val();var r,i,a=e(this).parents("tr:first");for(i=0;i<g.p.columns.length;i++)if(g.p.columns[i].name===t.field){r=g.p.columns[i];break}if(r){var d=e.extend({},r.editoptions||{});delete d.readonly,delete d.disabled;var u=e.extend({},d||{},r.searchoptions||{},p(r.cmName),{id:o.randId(),name:r.name,mode:"search"});u.column=r,l&&"text"===r.inputtype&&(u.size||(u.size=10));var h=o.createEl.call(m,r.inputtype,e.extend({},u,u.attr||{}),"",!0,g.p.ajaxSelectOptions||{},!0);e(h).addClass(c("searchDialog.elem","input-elm")),s=u.sopt?u.sopt:g.p.sopt?g.p.sopt:-1!==e.inArray(r.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts;var v,b,w,j="",D=0;for(C=[],e.each(g.p.ops,function(){C.push(this.oper)}),g.p.cops&&e.each(g.p.cops,function(e){C.push(e)}),i=0;i<s.length;i++)b=s[i],-1!==(y=e.inArray(s[i],C))&&(w=void 0!==(v=g.p.ops[y])?v.text:g.p.cops[b].text,0===D&&(t.op=b),j+="<option value='"+b+"'>"+w+"</option>",D++);if(e(".selectopts",a).empty().append(j),e(".selectopts",a)[0].selectedIndex=0,o.msie&&o.msiever()<9){var q=parseInt(e("select.selectopts",a)[0].offsetWidth,10)+1;e(".selectopts",a).width(q),e(".selectopts",a).css("width","auto")}if(e(".data",a).empty().append(h),f.createColumnIndex&&u.generateDatalist){var R="dl_"+h.id,S=e(m).jqGrid("generateDatalistFromColumnIndex",f.name);null!=S&&S.length>0&&(e(h).attr("list",R),e(".data",a).append(S.attr("id",R)))}o.bindEv.call(m,h,u),e(".input-elm",a).on("change",u,function(r){var i=r.target,a=r.data.column;t.data=a&&"custom"===a.inputtype&&n(a.searchoptions.custom_value)?a.searchoptions.custom_value.call(m,e(this).find(".customelement").first(),"get"):i.value,e(i).is("input[type=checkbox]")&&!e(i).is(":checked")&&(t.data=e(i).data("offval")),g.onchange()}),setTimeout(function(){t.data=e(h).val(),g.onchange()},0)}});var j,D,q=0;for(i=0;i<g.p.columns.length;i++)j=void 0===g.p.columns[i].search||g.p.columns[i].search,D=!0===g.p.columns[i].hidden,(!0===g.p.columns[i].searchoptions.searchhidden&&j||j&&!D)&&(h="",t.field===g.p.columns[i].name&&(h=" selected='selected'",q=i),b+="<option value='"+g.p.columns[i].name+"'"+h+">"+g.p.columns[i].label+"</option>");x.append(b);var R=e("<td class='operators'></td>");v.append(R),f=a.columns[q],l&&"text"===f.inputtype&&(f.searchoptions.size||(f.searchoptions.size=10));var S=e.extend({},f.editoptions||{});delete S.readonly,delete S.disabled;var _=e.extend({},S,f.searchoptions||{},p(f.cmName),{id:o.randId(),name:f.name});_.column=f;var I=o.createEl.call(m,f.inputtype,e.extend({},_,_.attr||{}),t.data,!0,g.p.ajaxSelectOptions||{},!0);("nu"===t.op||"nn"===t.op||e.inArray(t.op,m.p.customUnaryOperations)>=0)&&(e(I).attr("readonly","true"),e(I).attr("disabled","true"));var F=e("<select class='"+c("searchDialog.operator","selectopts")+"'></select>");R.append(F),F.on("change",function(){t.op=e(F).val();var r=e(this).parents("tr:first"),i=e(".input-elm",r)[0];"nu"===t.op||"nn"===t.op||e.inArray(t.op,m.p.customUnaryOperations)>=0?(t.data="","SELECT"!==i.tagName.toUpperCase()&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):("SELECT"===i.tagName.toUpperCase()&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled")),g.onchange()}),s=f.searchoptions.sopt?f.searchoptions.sopt:g.p.sopt?g.p.sopt:-1!==e.inArray(f.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts,b="";var G,k;for(e.each(g.p.ops,function(){C.push(this.oper)}),g.p.cops&&e.each(g.p.cops,function(e){C.push(e)}),i=0;i<s.length;i++)k=s[i],-1!==(y=e.inArray(s[i],C))&&(G=g.p.ops[y],b+="<option value='"+k+"'"+(h=t.op===k?" selected='selected'":"")+">"+(void 0!==G?G.text:g.p.cops[k].text)+"</option>");F.append(b);var O=e("<td class='data'></td>");if(v.append(O),O.append(I),f.createColumnIndex&&f.searchoptions.generateDatalist){var N="dl_"+I.id,T=e(m).jqGrid("generateDatalistFromColumnIndex",f.name);null!=T&&T.length>0&&(e(I).attr("list",N),O.append(T.attr("id",N)))}o.bindEv.call(m,I,f.searchoptions),e(I).addClass(c("searchDialog.elem","input-elm")).on("change",function(){t.data="custom"===f.inputtype?f.searchoptions.custom_value.call(m,e(this).find(".customelement").first(),"get"):e(this).val(),e(this).is("input[type=checkbox]")&&!e(this).is(":checked")&&(t.data=e(this).data("offval")),e.isArray(t.data)&&(t.data=t.data.join(a.inFilterSeparator||",")),g.onchange()});var E=e("<td></td>");if(v.append(E),!0===a.ruleButtons){var A=e("<input type='button' value='-' title='"+u("deleteRuleTitle")+"' class='"+c("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");E.append(A),A.on("click",function(){for(i=0;i<r.rules.length;i++)if(r.rules[i]===t){r.rules.splice(i,1);break}return g.reDraw(),g.onchange(),!1})}return v},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){r.length>1&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){s(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)r.length>1&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){s(e)}return r+=")","()"===r?"":r},this.getStringForRule=function(t){var r,i,o,l="",s="",c=t.data,u=["int","integer","float","number","currency"];for(r=0;r<a.ops.length;r++)if(a.ops[r].oper===t.op){l=a.operands.hasOwnProperty(t.op)?a.operands[t.op]:"",s=a.ops[r].oper;break}if(""===s&&null!=a.cops)for(o in a.cops)if(a.cops.hasOwnProperty(o)&&(s=o,l=a.cops[o].operand,n(a.cops[o].buildQueryValue)))return a.cops[o].buildQueryValue.call(a,{cmName:t.field,searchValue:c,operand:l});for(r=0;r<a.columns.length;r++)if(a.columns[r].name===t.field){i=a.columns[r];break}return null==i?"":("bw"!==s&&"bn"!==s||(c+="%"),"ew"!==s&&"en"!==s||(c="%"+c),"cn"!==s&&"nc"!==s||(c="%"+c+"%"),"in"!==s&&"ni"!==s||(c=" ("+c+")"),a.errorcheck&&g(t.data,i),-1!==e.inArray(i.searchtype,u)||"nn"===s||"nu"===s||e.inArray(s,d().p.customUnaryOperations)>=0?t.field+" "+l+" "+c:t.field+" "+l+' "'+c+'"')},this.resetFilter=function(){a.filter=e.extend(!0,{},a.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){e("th."+f,this).html(""),e("tr.error",this).hide()},this.showError=function(){e("th."+f,this).html(a.errmsg),e("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(a.filter)},this.toString=function(){function e(e){if(r.p.errorcheck){var t,i;for(t=0;t<r.p.columns.length;t++)if(r.p.columns[t].name===e.field){i=r.p.columns[t];break}i&&g(e.data,i)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(r){var i,a="(";if(void 0!==r.groups)for(i=0;i<r.groups.length;i++)a.length>1&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=t(r.groups[i]);if(void 0!==r.rules)for(i=0;i<r.rules.length;i++)a.length>1&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=e(r.rules[i]);return a+=")","()"===a?"":a}var r=this;return t(a.filter)},this.reDraw(),a.showQuery&&this.onchange(),this.filter=!0}}})},e.extend(e.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){"string"==typeof t&&(t=e.parseJSON(t)),this.each(function(){this.p.filter=t,this.reDraw(),this.onchange()})}});var _={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var r=this.removeWhite(e),i=this.toObj(r),a=this.toJson(i,e.nodeName,"\t");return"{\n"+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var r,i=function(e,t,r){var a,o,l,n,s="";if(e instanceof Array)if(0===e.length)s+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(a=0,o=e.length;a<o;a+=1)s+=r+i(e[a],t,r+"\t")+"\n";else if("object"==typeof e){l=!1,s+=r+"<"+t;for(n in e)e.hasOwnProperty(n)&&("@"===n.charAt(0)?s+=" "+n.substr(1)+'="'+e[n].toString()+'"':l=!0);if(s+=l?">":"/>",l){for(n in e)e.hasOwnProperty(n)&&("#text"===n?s+=e[n]:"#cdata"===n?s+="<![CDATA["+e[n]+"]]>":"@"!==n.charAt(0)&&(s+=i(e[n],n,r+"\t")));s+=("\n"===s.charAt(s.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?s+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),'""'===e.toString()||0===e.toString().length?s+=r+"<"+t+">__EMPTY_STRING_</"+t+">":s+=r+"<"+t+">"+e.toString()+"</"+t+">");return s},a="";for(r in e)e.hasOwnProperty(r)&&(a+=i(e[r],r,""));return t?a.replace(/\t/g,t):a.replace(/\t|\n/g,"")},toObj:function(t){var r,i,a={},o=/function/i,l=0,n=0,s=!1;if(1===t.nodeType){if(t.attributes.length)for(r=0;r<t.attributes.length;r+=1)a["@"+t.attributes[r].nodeName]=(t.attributes[r].nodeValue||"").toString();if(t.firstChild){for(i=t.firstChild;i;i=i.nextSibling)1===i.nodeType?s=!0:3===i.nodeType&&i.nodeValue.match(/[^ \f\n\r\t\v]/)?l+=1:4===i.nodeType&&(n+=1);if(s)if(l<2&&n<2)for(this.removeWhite(t),i=t.firstChild;i;i=i.nextSibling)3===i.nodeType?a["#text"]=this.escape(i.nodeValue):4===i.nodeType?o.test(i.nodeValue)?a[i.nodeName]=[a[i.nodeName],i.nodeValue]:a["#cdata"]=this.escape(i.nodeValue):a[i.nodeName]?a[i.nodeName]instanceof Array?a[i.nodeName][a[i.nodeName].length]=this.toObj(i):a[i.nodeName]=[a[i.nodeName],this.toObj(i)]:a[i.nodeName]=this.toObj(i);else t.attributes.length?a["#text"]=this.escape(this.innerXml(t)):a=this.escape(this.innerXml(t));else if(l)t.attributes.length?a["#text"]=this.escape(this.innerXml(t)):"__EMPTY_ARRAY_"===(a=this.escape(this.innerXml(t)))?a="[]":"__EMPTY_STRING_"===a&&(a="");else if(n)if(n>1)a=this.escape(this.innerXml(t));else for(i=t.firstChild;i;i=i.nextSibling){if(o.test(t.firstChild.nodeValue)){a=t.firstChild.nodeValue;break}a["#cdata"]=this.escape(i.nodeValue)}}t.attributes.length||t.firstChild||(a=null)}else 9===t.nodeType?a=this.toObj(t.documentElement):(null!=e.jgrid&&null!=e.jgrid.defaults&&e.isFunction(e.jgrid.defaults.fatalError)?e.jgrid.defaults.fatalError:alert)("unhandled node type: "+t.nodeType);return a},toJson:function(e,t,r,i){void 0===i&&(i=!0);var a,o,l,n=t?'"'+t+'"':"",s="\t",d="\n",c=[],u=[];if(i||(s="",d=""),"[]"===e)n+=t?":[]":"[]";else if(e instanceof Array){for(o=0,a=e.length;o<a;o+=1)c[o]=this.toJson(e[o],"",r+s,i);n+=(t?":[":"[")+(c.length>1?d+r+s+c.join(","+d+r+s)+d+r:c.join(""))+"]"}else if(null===e)n+=(t&&":")+"null";else if("object"==typeof e){for(l in e)e.hasOwnProperty(l)&&(u[u.length]=this.toJson(e[l],l,r+s,i));n+=(t?":{":"{")+(u.length>1?d+r+s+u.join(","+d+r+s)+d+r:u.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return n},innerXml:function(e){var t,r="",i=function(e){var t,r,a="";if(1===e.nodeType){for(a+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)a+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(a+=">",r=e.firstChild;r;r=r.nextSibling)a+=i(r);a+="</"+e.nodeName+">"}else a+="/>"}else 3===e.nodeType?a+=e.nodeValue:4===e.nodeType&&(a+="<![CDATA["+e.nodeValue+"]]>");return a};if(e.hasOwnProperty("innerHTML"))r=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)r+=i(t);return r},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,r=e.firstChild;r;)3===r.nodeType?r.nodeValue.match(/[^ \f\n\r\t\v]/)?r=r.nextSibling:(t=r.nextSibling,e.removeChild(r),r=t):1===r.nodeType?(this.removeWhite(r),r=r.nextSibling):r=r.nextSibling;return e}};window.xmlJsonClass=_;var I=o.feedback,F=o.fullBoolFeedback,G=o.builderFmButon,k=function(e,t,r){var i;!0===t[0]&&(i="<span class='"+x("fm-button-icon",r,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(i):e.addClass("fm-button-icon-left").prepend(i))},O=function(e){return R.call(this,"states."+e)},N=function(t){t.find("tr[data-rowpos]").each(function(){var t=0;e(this).children("td").each(function(){"hidden"!==e(this).css("visibility")&&t++}),t||e(this).hide()})},T=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};o.extend({searchGrid:function(t){return this.each(function(){function r(t){v("beforeShow",t)&&(e(p).data("onClose",n.onClose),o.viewModal.call(i,p,{gbox:f,jqm:n.jqModal,overlay:n.overlay,modal:n.modal,overlayClass:n.overlayClass,toTop:n.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),v("afterShow",t))}var i=this,a=e(i),l=i.p;if(i.grid&&null!=l){var n=e.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:l.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},D.getGridRes.call(a,"search"),o.search||{},l.searching||{},t||{}),s="fbox_"+l.id,d=n.commonIconClass,u={themodal:"searchmod"+s,modalhead:"searchhd"+s,modalcontent:"searchcnt"+s,resizeAlso:s},p="#"+c(u.themodal),f=l.gBox,h=l.gView,g=e.each,m=l.postData[n.sFilter],v=function(){var t=e.makeArray(arguments);return t.unshift("Search"),t.unshift("Filter"),t.unshift(n),I.apply(i,t)},b=function(){o.hideModal(p,{gb:f,jqm:n.jqModal,onClose:n.onClose,removemodal:n.removemodal})};if("string"==typeof m&&(m=""!==e.trim(m)?e.parseJSON(m):void 0),e(p).remove(),void 0!==e(p)[0])r(e("#fbox_"+c(l.id)));else{var w=e("<div><div id='"+s+"' class='"+R.call(i,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(h);"rtl"===l.direction&&w.attr("dir","rtl");var y,C,j="",q="",S=!1,_=-1,k=e.extend([],l.colModel),N=G.call(i,s+"_search",n.Find,x(d,n.findDialogIcon),"right"),T=G.call(i,s+"_reset",n.Reset,x(d,n.resetDialogIcon),"left");if(n.showQuery&&(j=G.call(i,s+"_query","Query",x(d,n.queryDialogIcon),"left")+"&#160;"),n.searchForAdditionalProperties&&g(l.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,k.push(e)}),n.columns.length?(k=n.columns,_=0,y=k[0].index||k[0].name):g(k,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:l.colNames[e]),!S){var r=void 0===t.search||t.search,i=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!i)&&(S=!0,y=t.index||t.name,_=e)}}),!m&&y||!1===n.multipleSearch){var E="eq";_>=0&&k[_].searchoptions&&k[_].searchoptions.sopt?E=k[_].searchoptions.sopt[0]:n.sopt&&n.sopt.length&&(E=n.sopt[0]),m={groupOp:"AND",rules:[{field:y,op:E,data:""}]}}S=!1,n.tmplNames&&n.tmplNames.length&&(S=!0,q=n.tmplLabel,q+="<select class='ui-template'>",q+="<option value='default'>Default</option>",g(n.tmplNames,function(e,t){q+="<option value='"+e+"'>"+t+"</option>"}),q+="</select>"),C="<div class='"+R.call(i,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+s+"_2'><tbody><tr><td colspan='2'><hr class='"+R.call(i,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+l.direction+"'  style='float:"+("rtl"===l.direction?"right":"left")+";'>"+T+q+"</td><td class='EditButton EditButton-"+l.direction+"'>"+j+N+"</td></tr></tbody></table></div>",s=c(s),n.gbox=f,n.height="auto",e(s="#"+s).jqFilter({columns:k,filter:n.loadDefaults?m:null,showQuery:n.showQuery,errorcheck:n.errorcheck,sopt:n.sopt,groupButton:n.multipleGroup,ruleButtons:n.multipleSearch,afterRedraw:n.afterRedraw,ops:n.odata,cops:l.customSortOperations,operands:n.operands,ajaxSelectOptions:l.ajaxSelectOptions,groupOps:n.groupOps,onChange:function(t,r){t.showQuery&&e(".query",r).text(r.toUserFriendlyString()),F.call(i,n.afterChange,"jqGridFilterAfterChange",e(s),n,t,r)},direction:l.direction,id:l.id}),w.append(C),S&&n.tmplFilters&&n.tmplFilters.length&&e(".ui-template",w).on("change",function(){var t=e(this).val();return"default"===t?e(s).jqFilter("addFilter",m):e(s).jqFilter("addFilter",n.tmplFilters[parseInt(t,10)]),!1}),!0===n.multipleGroup&&(n.multipleSearch=!0),v("onInitialize",e(s)),n.layer?o.createModal.call(i,u,w,n,h,e(f)[0],"#"+c(n.layer),{position:"relative"}):o.createModal.call(i,u,w,n,h,e(f)[0]),(n.searchOnEnter||n.closeOnEscape)&&e(p).keydown(function(t){var r=e(t.target);return!n.searchOnEnter||13!==t.which||r.hasClass("add-group")||r.hasClass("add-rule")||r.hasClass("delete-group")||r.hasClass("delete-rule")||r.hasClass("fm-button")&&r.is("[id$=_query]")?n.closeOnEscape&&27===t.which?(e("#"+c(u.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(e(s+"_search").click(),!1)}),j&&e(s+"_query").on("click",function(){return e(".queryresult",w).toggle(),!1}),void 0===n.stringResult&&(n.stringResult=n.multipleSearch),e(s+"_search").on("click",function(){var t,r={},o="",d=e(s),c=d.find(".input-elm");if(c.filter(":focus")&&(c=c.filter(":focus")),c.change(),t=d.jqFilter("filterData"),n.errorcheck&&(d[0].hideError(),n.showQuery||d.jqFilter("toSQLString"),d[0].p.error))return d[0].showError(),!1;if(n.stringResult||"local"===l.datatype){try{o=JSON.stringify(t)}catch(e){}"string"==typeof o&&(r[n.sFilter]=o,g([n.sField,n.sValue,n.sOper],function(){r[this]=""}))}else n.multipleSearch?(r[n.sFilter]=t,g([n.sField,n.sValue,n.sOper],function(){r[this]=""})):(r[n.sField]=t.rules[0].field,r[n.sValue]=t.rules[0].data,r[n.sOper]=t.rules[0].op,r[n.sFilter]="");return e.extend(l.postData,r),F.call(i,n.onSearch,"jqGridFilterSearch",l.filters)&&(l.search=!0,a.trigger("reloadGrid",[e.extend({page:1},n.reloadGridSearchOptions||{})])),n.closeAfterSearch&&b(),!1}),e(s+"_reset").on("click",function(){var t={},r=e(s);return l.search=!1,l.resetsearch=!0,!1===n.multipleSearch?t[n.sField]=t[n.sValue]=t[n.sOper]="":t[n.sFilter]="",r[0].resetFilter(),S&&e(".ui-template",w).val("default"),e.extend(l.postData,t),F.call(i,n.onReset,"jqGridFilterReset")&&a.trigger("reloadGrid",[e.extend({page:1},n.reloadGridResetOptions||{})]),n.closeAfterReset&&b(),!1}),r(e(s));var A=O.call(i,"hover");e(".fm-button:not(."+O.call(i,"disabled").split(" ").join(".")+")",w).hover(function(){e(this).addClass(A)},function(){e(this).removeClass(A)})}}})},editGridRow:function(t,r){return this.each(function(){function i(){return e(E+" > tbody > tr > td .FormElement").each(function(){var t,r,i,a,l,n=e(".customelement",this),s=this.name;if(n.length){if(s=n.attr("name"),void 0!==(r=L[s])&&(t=P[r],i=t.editoptions||{},e.isFunction(i.custom_value))){try{if(m[s]=i.custom_value.call(f,e("#"+c(s),E),"get"),void 0===m[s])throw"e1"}catch(e){"e1"===e?o.info_dialog.call(f,Y,"function 'custom_value' "+q.msg.novalue,q.bClose):o.info_dialog.call(f,Y,e.message,q.bClose)}return!0}}else switch(l=e(this)[0].type){case"checkbox":m[s]=e(this).is(":checked")?e(this).val():e(this).data("offval");break;case"select-one":m[s]=e("option:selected",this).val();break;case"select-multiple":m[s]=e(this).val(),m[s]=m[s]?m[s].join(","):"";var d=[];e("option:selected",this).each(function(t,r){d[t]=e(r).text()});break;case"date":m[s]=e(this).val(),3===String(m[s]).split("-").length&&void 0!==(r=L[s])&&(a=((t=P[r]).formatoptions||{}).newformat||y.call(h,"formatter.date.newformat"),m[s]=o.parseDate.call(h[0],"Y-m-d",m[s],a));break;default:void 0!==l&&e.inArray(l,q.skipPostTypes)<0&&(m[s]=e(this).val())}}),!0}function a(t,r){var i,a,l,n,s,d=0;(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData={},q._savedData[w+"_id"]=t);var u=g.colModel;if("_empty"===t)return e(u).each(function(){i=this.name,l=e.extend({},this.editoptions||{}),(a=e("#"+c(i),r))&&a.length&&null!==a[0]&&(n="","custom"===this.edittype&&e.isFunction(l.custom_value)?l.custom_value.call(f,a,"set",n):l.defaultValue?(n=e.isFunction(l.defaultValue)?l.defaultValue.call(f):l.defaultValue,"checkbox"===a[0].type?(s=n.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(a[0].checked=!0,a[0].defaultChecked=!0,a[0].value=n):(a[0].checked=!1,a[0].defaultChecked=!1):a.val(n)):"checkbox"===a[0].type?(a[0].checked=!1,a[0].defaultChecked=!1,n=e(a).data("offval")):a[0].type&&"select"===a[0].type.substr(0,6)?a[0].selectedIndex=0:a.val(n),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=n))}),void e("#id_g",r).val(t);var p=D.getInd.call(h,t,!0);p&&(e(p.cells).filter("td[role=gridcell]").each(function(a){var l;if("cb"!==(i=u[a].name)&&"subgrid"!==i&&"rn"!==i&&!0===u[a].editable){try{l=e.unformat.call(f,e(this),{rowId:t,colModel:u[a]},a)}catch(t){l="textarea"===u[a].edittype?e(this).text():e(this).html()}switch(g.autoEncodeOnEdit&&(l=o.oldDecodePostedData(l)),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=l),i="#"+c(i),u[a].edittype){case"password":case"text":case"button":case"image":case"textarea":T(l)&&(l=""),e(i,r).val(l);break;case"select":var n=l.split(",");n=e.map(n,function(t){return e.trim(t)}),e(i+" option",r).each(function(){var t,r=this,i=e(r),o=e.trim(i.val());if(u[a].editoptions.multiple||n[0]!==o?u[a].editoptions.multiple&&(t=e.inArray(o,n))>-1?(n.splice(t,1),r.selected=!0):r.selected=!1:(n.splice(0,1),r.selected=!0),0===n.length)return!1}),n.length>0&&e(i+" option",r).each(function(){var t,r=this,i=e(r),o=e.trim(i.text());if(u[a].editoptions.multiple||e.trim(l)!==o&&n[0]!==o?u[a].editoptions.multiple&&(t=e.inArray(o,n))>-1&&(n.splice(t,1),r.selected=!0):(n.splice(0,1),r.selected=!0),0===n.length)return!1});break;case"checkbox":l=String(l),u[a].editoptions&&u[a].editoptions.value?l=u[a].editoptions.value.split(":")[0]===l:(l=l.toLowerCase(),l=l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l),e(i,r).prop({checked:l,defaultChecked:l});break;case"custom":try{if(!u[a].editoptions||!e.isFunction(u[a].editoptions.custom_value))throw"e1";u[a].editoptions.custom_value.call(f,e(i,r),"set",l)}catch(e){"e1"===e?o.info_dialog.call(f,Y,"function 'custom_value' "+q.msg.nodefined,q.bClose):o.info_dialog.call(f,Y,e.message,q.bClose)}}d++}}),d>0&&e("#id_g",E).val(t))}function l(){var t=q.url||g.editurl;e.each(P,function(r,i){var a=i.name,o=m[a];"date"!==i.formatter||null!=i.formatoptions&&!0===i.formatoptions.sendFormatted||(m[a]=e.unformat.date.call(f,o,i)),"clientArray"!==t&&i.editoptions&&!0===i.editoptions.NullIfEmpty&&m.hasOwnProperty(a)&&""===o&&(m[a]="null")})}function n(){var r,i,n,s,d,c,u,p,v=[!0,"",""],y=v,x={},C=g.prmNames,R=D.getInd.call(h,t),_=!1===R?null:f.rows[R],I=h.triggerHandler("jqGridAddEditBeforeCheckValues",[m,e(S),b]);I&&"object"==typeof I&&(m=I),R=!1===R?-1:R,e.isFunction(q.beforeCheckValues)&&(I=q.beforeCheckValues.call(f,m,e(S),b))&&"object"==typeof I&&(m=I);for(n in m)if(m.hasOwnProperty(n)&&(p=g.iColByName[n],null!=(y=o.checkValues.call(f,m[n],n,void 0,void 0,{oldValue:"_empty"===t?null:D.getCell.call(h,t,p),newValue:m[n],cmName:n,rowid:t,cm:P[p],iCol:p,iRow:R,tr:_,td:null==_?null:_.cells[p],mode:"_empty"===t?"addForm":"editForm"}))&&!0!==y||(y=v),!1===y[0]))break;if(l(),y[0]&&(void 0===(x=h.triggerHandler("jqGridAddEditClickSubmit",[q,m,b]))&&e.isFunction(q.onclickSubmit)&&(x=q.onclickSubmit.call(f,q,m,b)||{}),null!=(y=h.triggerHandler("jqGridAddEditBeforeSubmit",[m,e(S),b]))&&!0!==y||(y=v),y[0]&&e.isFunction(q.beforeSubmit)&&(null!=(y=q.beforeSubmit.call(f,m,e(S),b))&&!0!==y||(y=v))),y[0]&&!q.processing){if(q.processing=!0,e("#sData",A).addClass($),c=q.url||g.editurl,i=C.oper,r="clientArray"===c&&!1!==g.keyName?g.keyName:C.id,m[i]="_empty"===e.trim(m[w+"_id"])?C.addoper:C.editoper,m[i]!==C.addoper?m[r]=m[w+"_id"]:void 0===m[r]&&(m[r]=m[w+"_id"]),delete m[w+"_id"],m=e.extend(m,q.editData,x),!0===g.treeGrid){if(m[i]===C.addoper){s=g.selrow;var F="adjacency"===g.treeGridModel?g.treeReader.parent_id_field:"parent_id";m[F]=s}for(d in g.treeReader)if(g.treeReader.hasOwnProperty(d)&&(u=g.treeReader[d],m.hasOwnProperty(u))){if(m[i]===C.addoper&&"parent_id_field"===d)continue;delete m[u]}}m[r]=o.stripPref(g.idPrefix,m[r]),g.autoEncodeOnEdit&&e.each(m,function(t,r){e.isFunction(r)||(m[t]=o.oldEncodePostedData(r))});var G=e.extend({url:e.isFunction(c)?c.call(f,m[r],b,m,q):c,type:e.isFunction(q.mtype)?q.mtype.call(f,b,q,m[r],m):q.mtype,data:o.serializeFeedback.call(f,e.isFunction(q.serializeEditData)?q.serializeEditData:g.serializeEditData,"jqGridAddEditSerializeEditData",m),complete:function(t,l){if(h.jqGrid("progressBar",{method:"hide",loadtype:q.saveui}),e("#sData",A).removeClass($),m[r]=e("#id_g",E).val(),t.status>=300&&304!==t.status||0===t.status&&4===t.readyState?(y[0]=!1,y[1]=h.triggerHandler("jqGridAddEditErrorTextFormat",[t,b]),e.isFunction(q.errorTextFormat)?y[1]=q.errorTextFormat.call(f,t,b):y[1]=l+" Status: '"+t.statusText+"'. Error code: "+t.status):(null!=(y=h.triggerHandler("jqGridAddEditAfterSubmit",[t,m,b]))&&!0!==y||(y=v),y[0]&&e.isFunction(q.afterSubmit)&&(null!=(y=q.afterSubmit.call(f,t,m,b))&&!0!==y||(y=v))),!1===y[0])e("#FormError>td",E).html(y[1]),e("#FormError",E).show();else{g.autoEncodeOnEdit&&e.each(m,function(e,t){m[e]=o.oldDecodePostedData(t)});var n=[e.extend({},q.reloadGridOptions||{})];if(m[i]===C.addoper?(y[2]||(y[2]=o.randId()),null==m[r]||"_empty"===m[r]||m[i]===C.addoper?m[r]=y[2]:y[2]=m[r],q.reloadAfterSubmit?h.trigger("reloadGrid",n):!0===g.treeGrid?D.addChildNode.call(h,y[2],s,m):D.addRowData.call(h,y[2],m,q.addedrow),q.closeAfterAdd?(!0!==g.treeGrid&&j.call(h,y[2]),U()):q.clearAfterAdd&&a("_empty",S)):(q.reloadAfterSubmit?(h.trigger("reloadGrid",n),q.closeAfterEdit||setTimeout(function(){j.call(h,m[r])},1e3)):!0===g.treeGrid?D.setTreeRow.call(h,m[r],m):D.setRowData.call(h,m[r],m),q.closeAfterEdit&&U()),e.isFunction(q.afterComplete)){var d=t;setTimeout(function(){h.triggerHandler("jqGridAddEditAfterComplete",[d,m,e(S),b]),q.afterComplete.call(f,d,m,e(S),b),d=null},50)}if((q.checkOnSubmit||q.checkOnUpdate)&&(e(S).data("disabled",!1),"_empty"!==q._savedData[w+"_id"])){var c;for(c in q._savedData)q._savedData.hasOwnProperty(c)&&m[c]&&(q._savedData[c]=m[c])}}q.processing=!1;try{e(S).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},o.ajaxOptions,q.ajaxEditOptions);if(G.url||q.useDataProxy||(e.isFunction(g.dataProxy)?q.useDataProxy=!0:(y[0]=!1,y[1]+=" "+o.errors.nourl)),y[0])if(h.jqGrid("progressBar",{method:"show",loadtype:q.saveui,htmlcontent:q.savetext}),q.useDataProxy){var k=g.dataProxy.call(f,G,"set_"+w);void 0===k&&(k=[!0,""]),!1===k[0]?(y[0]=!1,y[1]=k[1]||"Error deleting the selected row!"):(G.data.oper===C.addoper&&q.closeAfterAdd&&U(),G.data.oper===C.editoper&&q.closeAfterEdit&&U())}else"clientArray"===G.url?(q.reloadAfterSubmit=!1,m=G.data,G.complete({status:200,statusText:""},"")):e.ajax(G)}!1===y[0]&&(e("#FormError>td",E).html(y[1]),e("#FormError",E).show())}function s(e,t){var r,i=!1;for(r in e)if(e.hasOwnProperty(r)&&String(e[r])!==String(t[r])){i=!0;break}return i}function d(){var t=!0;return e("#FormError",E).hide(),q.checkOnUpdate&&(m={},i(),(v=s(m,q._savedData))&&(e(S).data("disabled",!0),e(".confirm",M).show(),t=!1)),t}function u(t,r){var i=r[1].length-1;0===t?e("#pData",A).addClass(J):void 0!==r[1][t-1]&&C(e("#"+c(r[1][t-1])),J)?e("#pData",A).addClass(J):e("#pData",A).removeClass(J),t===i?e("#nData",A).addClass(J):void 0!==r[1][t+1]&&C(e("#"+c(r[1][t+1])),J)?e("#nData",A).addClass(J):e("#nData",A).removeClass(J)}function p(){var t=D.getDataIDs.call(h),r=e("#id_g",E).val();return[e.inArray(r,t),t]}var f=this,h=e(f),g=f.p;if(f.grid&&null!=g&&t){var m,v,b,w=g.id,y=D.getGridRes,j=D.setSelection,q=e.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:R.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:y.call(h,"defaults.savetext")||"Saving..."},y.call(h,"edit"),o.edit,g.formEditing||{},r||{}),S="FrmGrid_"+w,_=S,F="TblGrid_"+w,E="#"+c(F),A=E+"_2",B={themodal:"editmod"+w,modalhead:"edithd"+w,modalcontent:"editcnt"+w,resizeAlso:S},M="#"+c(B.themodal),z=g.gBox,P=g.colModel,L=g.iColByName,V=1,H=0,W=q.commonIconClass,U=function(){o.hideModal(M,{gb:z,jqm:q.jqModal,onClose:q.onClose,removemodal:q.removemodal})},Y=y.call(h,"errors.errcap"),X=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("AddEdit"),t.unshift(q),I.apply(f,t)},Q=O.call(f,"hover"),J=O.call(f,"disabled"),Z=O.call(f,"select"),$=O.call(f,"active"),K=O.call(f,"error");e(M).remove(),S="#"+c(S),"new"===t?(t="_empty",b="add",q.caption=q.addCaption):(q.caption=q.editCaption,b="edit");var ee=!0;!q.checkOnUpdate||!0!==q.jqModal&&void 0!==q.jqModal||q.modal||(ee=!1);var te=isNaN(q.dataheight)?q.dataheight:q.dataheight+"px",re=isNaN(q.datawidth)?q.datawidth:q.datawidth+"px",ie=e("<form name='FormPost' id='"+_+"' class='FormGrid' onSubmit='return false;' style='width:"+re+";overflow:auto;position:relative;height:"+te+";'></form>").data("disabled",!1),ae=e("<table id='"+F+"' class='EditTable'><tbody></tbody></table>");e(P).each(function(){var e=this.formoptions;V=Math.max(V,e?e.colpos||0:0),H=Math.max(H,e?e.rowpos||0:0)}),e(ie).append(ae);var oe=e("<tr id='FormError' style='display:none'><td class='"+K+"' colspan='"+2*V+"'>&#160;</td></tr>");if(oe[0].rp=0,e(ae).append(oe),oe=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*V+"'>"+(q.topinfo||"&#160;")+"</td></tr>"),oe[0].rp=0,e(ae).append(oe),X("beforeInitData",ie,b)){!function(){var r=o.detectRowEditing.call(f,t);if(null!=r)if("inlineEditing"===r.mode)D.restoreRow.call(h,t);else{var i=r.savedRow,a=f.rows[i.id];D.restoreCell.call(h,i.id,i.ic),e(a.cells[i.ic]).removeClass("edit-cell "+Z),e(a).addClass(Z).attr({"aria-selected":"true",tabindex:"0"})}}();var le="rtl"===g.direction,ne=le?"nData":"pData",se=le?"pData":"nData";!function(t,r,i){var a,l=0,n=[],s=!1,d=e(r),u="";for(a=1;a<=i;a++)u+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if("_empty"!==t&&(s=D.getInd.call(h,t)),e(P).each(function(r){var a,p,m,v,b,w=this,y=w.name,x=w.editable,C=!1,j=!1,D="_empty"===t?"addForm":"editForm";switch(e.isFunction(x)&&(x=x.call(f,{rowid:t,iCol:r,iRow:s,cmName:y,cm:w,mode:D})),p=!(w.editrules&&!0===w.editrules.edithidden||!0!==w.hidden&&"hidden"!==x),String(x).toLowerCase()){case"hidden":x=!0;break;case"disabled":x=!0,C=!0;break;case"readonly":x=!0,j=!0}if("cb"!==y&&"subgrid"!==y&&!0===x&&"rn"!==y){if(!1===s)v="";else{a=e(f.rows[s].cells[r]);try{v=e.unformat.call(f,a,{rowId:t,colModel:w},r)}catch(e){v=w.edittype&&"textarea"===w.edittype?a.text():a.html()}T(v)&&(v="")}var _=e.extend({},w.editoptions||{},{id:y,name:y,rowId:t,mode:D,cm:w,iCol:r}),I=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},w.formoptions||{}),F=parseInt(I.rowpos,10)||l+1,G=parseInt(2*(parseInt(I.colpos,10)||1),10);if("_empty"===t&&_.defaultValue&&(v=e.isFunction(_.defaultValue)?_.defaultValue.call(f):_.defaultValue),w.edittype||(w.edittype="text"),g.autoEncodeOnEdit&&(v=o.oldDecodePostedData(v)),b=o.createEl.call(f,w.edittype,_,v,!1,e.extend({},o.ajaxOptions,g.ajaxSelectOptions||{})),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[y]=v),e(b).addClass("FormElement"),e.inArray(w.edittype,["text","textarea","checkbox","password","select"])>-1&&e(b).addClass(R.call(f,"dialog.dataField")),m=d.find("tr[data-rowpos="+F+"]"),I.rowabove){var k=e("<tr><td class='contentinfo' colspan='"+2*i+"'>"+I.rowcontent+"</td></tr>");d.append(k),k[0].rp=F}0===m.length&&(m=e("<tr data-rowpos='"+F+"'></tr>").addClass("FormData").attr("id","tr_"+y),e(m).append(u),d.append(m),m[0].rp=F);var O=e("td:eq("+(G-2)+")",m[0]),N=e("td:eq("+(G-1)+")",m[0]);O.html(void 0===I.label?g.colNames[r]:I.label||"&#160;");var E=N[T(N.html())?"html":"append"](I.elmprefix);if(E.append(b).append(I.elmsuffix),"INPUT"===b.tagName.toUpperCase()&&w.createColumnIndex&&_.generateDatalist){var A=h.jqGrid("generateDatalistFromColumnIndex",w.name);null!=A&&A.length>0&&(e(b).attr("list","dl_"+b.id),E.append(A.attr("id","dl_"+b.id)))}C?(O.addClass(J),N.addClass(J),e(b).prop("readonly",!0),e(b).prop("disabled",!0)):j&&e(b).prop("readonly",!0),"custom"===w.edittype&&e.isFunction(_.custom_value)&&_.custom_value.call(f,e("#"+c(y),S),"set",v),o.bindEv.call(f,b,_),p&&O.add(N).css("visibility","hidden"),n[l]=r,l++}}),N(d),l>0){var p=e("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*i-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+w+"_id' value='"+t+"'/></td></tr>");p[0].rp=l+999,d.append(p),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[w+"_id"]=t)}}(t,ae,V);var de=G.call(f,ne,"",x(W,q.prevIcon),"","left"),ce=G.call(f,se,"",x(W,q.nextIcon),"","right"),ue=G.call(f,"sData",q.bSubmit),pe=G.call(f,"cData",q.bCancel),fe="<div class='"+R.call(f,"dialog.footer")+"'><table class='EditTable' id='"+F+"_2'><tbody><tr><td colspan='2'><hr class='"+R.call(f,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+g.direction+"'>"+(le?ce+de:de+ce)+"</td><td class='EditButton EditButton-"+g.direction+"'>"+ue+"&#160;"+pe+"</td></tr>";if(fe+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(q.bottominfo||"&#160;")+"</td></tr>",fe+="</tbody></table></div>",H>0){var he=[];e.each(e(ae)[0].rows,function(e,t){he[e]=t}),he.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(he,function(t,r){e("tbody",ae).append(r)})}q.gbox=z;var ge=!1;!0===q.closeOnEscape&&(q.closeOnEscape=!1,ge=!0);var me=e("<div></div>").append(e("<div class='"+R.call(f,"dialog.body")+"'></div>").append(ie)).append(fe);if(o.createModal.call(f,B,me,q,g.gView,e(z)[0]),q.topinfo&&e(".tinfo",E).show(),q.bottominfo&&e(".binfo",A).show(),me=null,fe=null,e(M).keydown(function(t){var r,i,a=(t.target.tagName||"").toUpperCase();if(!0===e(S).data("disabled"))return!1;if(13===t.which&&"TEXTAREA"!==a){if(r=e(A).find(":focus"),i=r.attr("id"),r.length>0&&e.inArray(i,["pData","nData","cData"])>=0)return r.trigger("click"),!1;if(!0===q.savekey[0]&&13===q.savekey[1])return e("#sData",A).trigger("click"),!1}if(!0===q.savekey[0]&&t.which===q.savekey[1]&&"TEXTAREA"!==a)return e("#sData",A).trigger("click"),!1;if(27===t.which)return!!d()&&(ge&&U(),!1);if(!0===q.navkeys[0]){if("_empty"===e("#id_g",E).val())return!0;if(t.which===q.navkeys[1])return e("#pData",A).trigger("click"),!1;if(t.which===q.navkeys[2])return e("#nData",A).trigger("click"),!1}}),q.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span",M).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close",M).off("click").click(function(){return!!d()&&(U(),!1)})),k(e("#sData",A),q.saveicon,W),k(e("#cData",A),q.closeicon,W),q.checkOnSubmit||q.checkOnUpdate){ue=G.call(f,"sNew",q.bYes),ce=G.call(f,"nNew",q.bNo),pe=G.call(f,"cNew",q.bExit);var ve=q.zIndex||999;ve++,e("<div class='"+q.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ve+";display:none;'>&#160;</div><div class='"+R.call(f,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(ve+1)+"'>"+q.saveData+"<br/><br/>"+ue+ce+pe+"</div>").insertAfter(S),e("#sNew",M).click(function(){return n(),e(S).data("disabled",!1),e(".confirm",M).hide(),!1}),e("#nNew",M).click(function(){return e(".confirm",M).hide(),e(S).data("disabled",!1),setTimeout(function(){e(S).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),e("#cNew",M).click(function(){return e(".confirm",M).hide(),e(S).data("disabled",!1),U(),!1})}X("onInitializeForm",e(S),b),"_empty"!==t&&q.viewPagerButtons?e("#pData,#nData",A).show():e("#pData,#nData",A).hide(),X("beforeShowForm",e(S),b),e(M).data("onClose",q.onClose),o.viewModal.call(f,M,{gbox:z,jqm:q.jqModal,overlay:q.overlay,modal:q.modal,overlayClass:q.overlayClass,toTop:q.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),ee||e("."+c(q.overlayClass)).click(function(){return!!d()&&(U(),!1)}),e(".fm-button",M).hover(function(){e(this).addClass(Q)},function(){e(this).removeClass(Q)}),e("#sData",A).click(function(){return m={},e("#FormError",E).hide(),i(),"_empty"===m[w+"_id"]?n():!0===q.checkOnSubmit&&(v=s(m,q._savedData))?(e(S).data("disabled",!0),e(".confirm",M).show()):n(),!1}),e("#cData",A).click(function(){return!!d()&&(U(),!1)}),e("#nData",A).click(function(){if(!d())return!1;e("#FormError",E).hide();var t=p();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(!X("onclickPgButtons","next",e(S),t[1][t[0]]))return!1;a(t[1][t[0]+1],S),j.call(h,t[1][t[0]+1]),X("afterclickPgButtons","next",e(S),t[1][t[0]+1]),u(t[0]+1,t)}return!1}),e("#pData",A).click(function(){if(!d())return!1;e("#FormError",E).hide();var t=p();if(-1!==t[0]&&t[1][t[0]-1]){if(!X("onclickPgButtons","prev",e(S),t[1][t[0]]))return!1;if(C(e("#"+c(t[1][t[0]-1])),J))return!1;a(t[1][t[0]-1],S),j.call(h,t[1][t[0]-1]),X("afterclickPgButtons","prev",e(S),t[1][t[0]-1]),u(t[0]-1,t)}return!1}),X("afterShowForm",e(S),b);var be=p();u(be[0],be)}}})},viewGridRow:function(t,r){return this.each(function(){function i(){!0!==f.closeOnEscape&&!0!==f.navkeys[0]||setTimeout(function(){e("#cData").focus()},0)}function a(t){var r,i,a=0,l=D.getInd.call(d,t,!0);l&&(e("td",l).each(function(t){i=S[t],"cb"!==(r=i.name)&&"subgrid"!==r&&"rn"!==r&&(r=c("v_"+r),e("#"+r+" span",g).html(o.getDataFieldOfCell.call(s,l,t).html()),a++)}),a>0&&e("#id_g",g).val(t))}function l(t,r){var i=r[1].length-1;0===t?e("#pData",m).addClass(M):void 0!==r[1][t-1]&&C(e("#"+c(r[1][t-1])),M)?e("#pData",m).addClass(M):e("#pData",m).removeClass(M),t===i?e("#nData",m).addClass(M):void 0!==r[1][t+1]&&C(e("#"+c(r[1][t+1])),M)?e("#nData",m).addClass(M):e("#nData",m).removeClass(M)}function n(){var t=D.getDataIDs.call(d),r=e("#id_g",g).val();return[e.inArray(r,t),t]}var s=this,d=e(s),u=s.p;if(s.grid&&null!=u&&t){var p=u.id,f=e.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},D.getGridRes.call(d,"view"),o.view||{},u.formViewing||{},r||{}),h="#ViewGrid_"+c(p),g="#ViewTbl_"+c(p),m=g+"_2",v="ViewGrid_"+p,b="ViewTbl_"+p,w=f.commonIconClass,y={themodal:"viewmod"+p,modalhead:"viewhd"+p,modalcontent:"viewcnt"+p,resizeAlso:v},j="#"+c(y.themodal),q=u.gBox,S=u.colModel,_=1,F=0,E=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("View"),t.unshift(f),I.apply(s,t)},A=function(){o.hideModal(j,{gb:q,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})},B=O.call(s,"hover"),M=O.call(s,"disabled"),z=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",P=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",L=e("<div class='"+R.call(s,"dialog.body")+"'><form name='FormPost' id='"+v+"' class='FormGrid' style='width:"+P+";overflow:auto;position:relative;height:"+z+";'></form></div>"),V=L.children("form.FormGrid"),H=e("<table id='"+b+"' class='EditTable'><tbody></tbody></table>");if(e(j).remove(),e(S).each(function(){var e=this.formoptions;_=Math.max(_,e?e.colpos||0:0),F=Math.max(F,e?e.rowpos||0:0)}),V.append(H),E("beforeInitData",V)){!function(t,r,i){var a,l,n,c,p,h,g,m,v=0,b=[],w=D.getInd.call(d,t),y=R.call(s,"dialog.viewData"),x=e(r),C=R.call(s,"dialog.viewLabel"),j=String(f.labelswidth)+(!f.labelswidth||isNaN(f.labelswidth)?"":"px"),q="<td class='"+R.call(s,"dialog.viewCellLabel","CaptionTD form-view-label")+(j?"' style='width:"+j+";":"")+"'>&#160;</td><td class='"+R.call(s,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",_="",I=["integer","number","currency"],F=0,G=0;for(p=0;p<i;p++)_+=q;if(e(S).each(function(){var t=this;(l=(!t.editrules||!0!==t.editrules.edithidden)&&!0===t.hidden)||"right"!==t.align||(t.formatter&&-1!==e.inArray(t.formatter,I)?F=Math.max(F,parseInt(t.width,10)):G=Math.max(G,parseInt(t.width,10)))}),h=0!==F?F:0!==G?G:0,e(S).each(function(t){var r=this;if(a=r.name,g=!1,l=(!r.editrules||!0!==r.editrules.edithidden)&&!0===r.hidden,m="boolean"!=typeof r.viewable||r.viewable,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&m){c=!1===w?"":o.getDataFieldOfCell.call(s,s.rows[w],t).html(),g="right"===r.align&&0!==h;var d=e.extend({},{rowabove:!1,rowcontent:""},r.formoptions||{}),p=parseInt(d.rowpos,10)||v+1,f=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var j=e("<tr><td class='contentinfo' colspan='"+2*i+"'>"+d.rowcontent+"</td></tr>");x.append(j),j[0].rp=p}0===(n=x.find("tr[data-rowpos="+p+"]")).length&&((n=e("<tr data-rowpos='"+p+"'></tr>").addClass("FormData").attr("id","trv_"+a)).append(_),x.append(n),n[0].rp=p);var D=void 0===d.label?u.colNames[t]:d.label,q=e("td:eq("+(f-1)+")",n[0]),R=e("td:eq("+(f-2)+")",n[0]);R.html("<label for='"+a+"'"+(C?" class='"+C+"'>":">")+(D||"&nbsp;")+"</label>"),q[T(q.html())?"html":"append"]("<span id='"+a+"'"+(y?" class='"+y+"'>":">")+(c||"&nbsp;")+"</span>").attr("id","v_"+a),g&&e("td:eq("+(f-1)+") span",n[0]).css({"text-align":"right",width:h+"px"}),l&&R.add(q).css("visibility","hidden"),b[v]=t,v++}}),N(x),v>0){var k=e("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*i-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");k[0].rp=v+99,x.append(k)}}(t,H,_);var W="rtl"===u.direction,U=W?"nData":"pData",Y=W?"pData":"nData",X=G.call(s,U,"",x(w,f.prevIcon),"","left"),Q=G.call(s,Y,"",x(w,f.nextIcon),"","right"),J=G.call(s,"cData",f.bClose);if(F>0){var Z=[];e.each(e(H)[0].rows,function(e,t){Z[e]=t}),Z.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(Z,function(t,r){e("tbody",H).append(r)})}f.gbox=q;var $=e("<div></div>").append(L).append("<div class='"+R.call(s,"dialog.footer")+"'><table border='0' class='EditTable' id='"+b+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+u.direction+"' width='"+(f.labelswidth||"auto")+"'>"+(W?Q+X:X+Q)+"</td><td class='EditButton EditButton-"+u.direction+"'>"+J+"</td></tr></tbody></table></div>");o.createModal.call(s,y,$,f,u.gView,e(u.gView)[0]),f.viewPagerButtons||e("#pData, #nData",m).hide(),$=null,e(j).keydown(function(t){var r,i;if(!0===e(h).data("disabled"))return!1;if(13===t.which&&(r=e(m).find(":focus"),i=r.attr("id"),r.length>0&&e.inArray(i,["pData","nData","cData"])>=0))return r.trigger("click"),!1;if(27===t.which)return f.closeOnEscape&&A(),!1;if(!0===f.navkeys[0]){if(t.which===f.navkeys[1])return e("#pData",m).trigger("click"),!1;if(t.which===f.navkeys[2])return e("#nData",m).trigger("click"),!1}}),k(e("#cData",m),f.closeicon,w),E("beforeShowForm",e(h)),o.viewModal.call(s,j,{gbox:q,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),e(".fm-button:not(."+M.split(" ").join(".")+")",m).hover(function(){e(this).addClass(B)},function(){e(this).removeClass(B)}),i(),e("#cData",m).click(function(){return A(),!1}),e("#nData",m).click(function(){e("#FormError",g).hide();var t=n();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(!E("onclickPgButtons","next",e(h),t[1][t[0]]))return!1;a(t[1][t[0]+1]),D.setSelection.call(d,t[1][t[0]+1]),E("afterclickPgButtons","next",e(h),t[1][t[0]+1]),l(t[0]+1,t)}return i(),!1}),e("#pData",m).click(function(){e("#FormError",g).hide();var t=n();if(-1!==t[0]&&t[1][t[0]-1]){if(!E("onclickPgButtons","prev",e(h),t[1][t[0]]))return!1;a(t[1][t[0]-1]),D.setSelection.call(d,t[1][t[0]-1]),E("afterclickPgButtons","prev",e(h),t[1][t[0]-1]),l(t[0]-1,t)}return i(),!1});var K=n();l(K[0],K)}}})},delGridRow:function(t,r){return this.each(function(){var i=this,a=i.p,l=e(i);if(i.grid&&null!=a&&t){var n,s,d,u,p=a.id,f=e.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!0,serializeDelData:null,useDataProxy:!1},D.getGridRes.call(l,"del"),o.del||{},a.formDeleting||{},r||{}),h="DelTbl_"+p,g="#DelTbl_"+c(p),m={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,resizeAlso:h},v="#"+c(m.themodal),b=a.gBox,w=f.commonIconClass,y=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("Delete"),t.unshift(f),I.apply(i,t)},x=O.call(i,"hover"),C=O.call(i,"active"),j=O.call(i,"error");if(e.isArray(t)||(t=[String(t)]),void 0!==e(v)[0]){if(!y("beforeInitData",e(g)))return;e("#DelData>td",g).text(t.join()).data("rowids",t),e("#DelError",g).hide(),!0===f.processing&&(f.processing=!1,e("#dData",g).removeClass(C)),y("beforeShowForm",e(g)),o.viewModal.call(i,v,{gbox:b,jqm:f.jqModal,jqM:!1,overlay:f.overlay,toTop:f.toTop,modal:f.modal}),y("afterShowForm",e(g))}else{var q=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",S=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",_="<div class='"+R.call(i,"dialog.body")+"'><div id='"+h+"' class='formdata' style='width:"+S+";overflow:auto;position:relative;height:"+q+";'>";_+="<table class='DelTable'><tbody>",_+="<tr id='DelError' style='display:none'><td class='"+j+"'></td></tr>",_+="<tr id='DelData' style='display:none'><td >"+t.join()+"</td></tr>",_+="<tr><td class='delmsg'>"+f.msg+"</td></tr>",_+="</tbody></table></div></div>";var F=G.call(i,"dData",f.bSubmit),N=G.call(i,"eData",f.bCancel);if(_+="<div class='"+R.call(i,"dialog.footer")+"'><table class='EditTable' id='"+h+"_2'><tbody><tr><td><hr class='"+R.call(i,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+a.direction+"'>"+F+"&#160;"+N+"</td></tr></tbody></table></div>",f.gbox=b,o.createModal.call(i,m,_,f,a.gView,e(a.gView)[0]),e("#DelData>td",g).data("rowids",t),!y("beforeInitData",e(_)))return;e(".fm-button",g+"_2").hover(function(){e(this).addClass(x)},function(){e(this).removeClass(x)}),k(e("#dData",g+"_2"),f.delicon,w),k(e("#eData",g+"_2"),f.cancelicon,w),e("#dData",g+"_2").click(function(){var t,r=[!0,""],c=e("#DelData>td",g),h=c.text(),m=c.data("rowids"),w={};if(e.isFunction(f.onclickSubmit)&&(w=f.onclickSubmit.call(i,f,h)||{}),e.isFunction(f.beforeSubmit)&&(r=f.beforeSubmit.call(i,h)||r),r[0]&&!f.processing){if(f.processing=!0,d=a.prmNames,n=e.extend({},f.delData,w),u=d.oper,n[u]=d.deloper,s=d.id,!(h=m.slice()).length)return!1;for(t in h)h.hasOwnProperty(t)&&(h[t]=o.stripPref(a.idPrefix,h[t]));n[s]=h.join(),e(this).addClass(C);var x=f.url||a.editurl,j=e.extend({url:e.isFunction(x)?x.call(i,n[s],n,f):x,type:f.mtype,data:e.isFunction(f.serializeDelData)?f.serializeDelData.call(i,n):n,complete:function(t,s){var d;if(e("#dData",g+"_2").removeClass(C),t.status>=300&&304!==t.status||0===t.status&&4===t.readyState?(r[0]=!1,e.isFunction(f.errorTextFormat)?r[1]=f.errorTextFormat.call(i,t):r[1]=s+" Status: '"+t.statusText+"'. Error code: "+t.status):e.isFunction(f.afterSubmit)&&(r=f.afterSubmit.call(i,t,n)||[!0]),!1===r[0])e("#DelError>td",g).html(r[1]),e("#DelError",g).show();else{if("local"===a.datatype||!0===a.treeGrid||!f.reloadAfterSubmit)if(!0===a.treeGrid)try{D.delTreeNode.call(l,m[0])}catch(e){}else for(m=m.slice(),d=0;d<m.length;d++)D.delRowData.call(l,m[d]);f.reloadAfterSubmit&&l.trigger("reloadGrid",[e.extend({},f.reloadGridOptions||{})]),setTimeout(function(){y("afterComplete",t,h,e(g))},50)}f.processing=!1,r[0]&&o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})}},o.ajaxOptions,f.ajaxDelOptions);if(j.url||f.useDataProxy||(e.isFunction(a.dataProxy)?f.useDataProxy=!0:(r[0]=!1,r[1]+=" "+o.errors.nourl)),r[0])if(f.useDataProxy){var q=a.dataProxy.call(i,j,"del_"+p);void 0===q&&(q=[!0,""]),!1===q[0]?(r[0]=!1,r[1]=q[1]||"Error deleting the selected row!"):o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})}else"clientArray"===j.url?(n=j.data,j.complete({status:200,statusText:""},"")):e.ajax(j)}return!1===r[0]&&(e("#DelError>td",g).html(r[1]),e("#DelError",g).show()),!1}),e("#eData",g+"_2").click(function(){return o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal}),!1}),y("beforeShowForm",e(g)),o.viewModal.call(i,v,{gbox:b,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal}),y("afterShowForm",e(g))}!0===f.closeOnEscape&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+c(m.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(r,i,a,l,n,s,d){return"object"==typeof r&&(d=s,s=n,n=l,l=a,a=i,i=r,r=void 0),l=l||{},a=a||{},d=d||{},n=n||{},s=s||{},this.each(function(){var u=this,p=u.p,f=e(u);if(u.grid&&null!=p&&!(u.nav&&e(r).find(".navtable").length>0)){var h=p.id,g=e.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},D.getGridRes.call(f,"nav"),o.nav||{},p.navOptions||{},i||{});g.position=g.position||("rtl"===p.direction?"right":"left");var m,v,b,w=p.idSel,y=p.gBox,j=g.commonIconClass,q={themodal:"alertmod_"+h,modalhead:"alerthd_"+h,modalcontent:"alertcnt_"+h},S=function(){var r=t.documentElement,i=window,a=1024,l=768,n=f.closest(".ui-jqgrid").offset();void 0===e("#"+c(q.themodal))[0]&&(g.alerttop||g.alertleft||(void 0!==i.innerWidth?(a=i.innerWidth,l=i.innerHeight):null!=r&&void 0!==r.clientWidth&&0!==r.clientWidth&&(a=r.clientWidth,l=r.clientHeight),a=a/2-parseInt(g.alertwidth,10)/2-n.left,l=l/2-25-n.top),o.createModal.call(u,q,"<div class='"+R.call(u,"dialog.body")+"'><div>"+g.alerttext+"</div></div>",{gbox:y,jqModal:g.jqModal,drag:!0,resize:!0,caption:g.alertcap,top:null!=g.alerttop?g.alerttop:l,left:null!=g.alertleft?g.alertleft:a,width:g.alertwidth,height:g.alertheight,closeOnEscape:g.closeOnEscape,zIndex:g.alertzIndex,removemodal:g.removemodal},p.gView,e(y)[0],!1)),o.viewModal.call(u,"#"+c(q.themodal),{gbox:y,toTop:g.alertToTop,jqm:g.jqModal});var s=e("#"+c(q.modalhead)).find(".ui-jqdialog-titlebar-close");s.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){s.focus()},50)},_=O.call(u,"hover"),I=O.call(u,"disabled"),F=R.call(u,"navButton","ui-pg-button");if(u.grid){u.modalAlert=S,void 0===r&&(p.pager?(r=p.pager,p.toppager&&(g.cloneToTop=!0)):p.toppager&&(r=p.toppager));var G,k,N,T,E,A,B,M=1,z=["left","center","right"],P="<div class='"+R.call(u,"navButton","ui-pg-button "+O.call(u,"disabled"))+"'><span class='ui-separator'></span></div>",L=function(){C(this,I)||e(this).addClass(_)},V=function(){e(this).removeClass(_)},H=function(t,r,i){if(!C(this,I)){var a=p.selrow;a?e.isFunction(t)?t.call(u,a,i):D[r].call(f,a,i):S()}return!1},W=function(t,r,i){var a=e("<div class='"+F+"' tabindex='0' role='button'></div>"),o=g[t+"icon"],l=e.trim(g[t+"text"]);return a.append("<div class='ui-pg-div'><span class='"+(g.iconsOverText?x("ui-pg-button-icon-over-text",j,o):x(j,o))+"'></span>"+(l?"<span class='ui-pg-button-text"+(g.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l+"</span>":"")+"</div>"),e(b).append(a),a.attr({title:g[t+"title"]||"",id:r||t+"_"+T}).click(i).hover(L,V),a};for(g.cloneToTop&&p.toppager&&(M=2),G=0;G<M;G++){if(b=e("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===p.direction?"right":"left")+";table-layout:auto;'></div>"),0===G?(T=h,(N=r)===p.toppager&&(T+="_top",M=1)):(N=p.toppager,T=h+"_top"),g.add&&W("add",l.id,function(){return C(this,I)||(e.isFunction(g.addfunc)?g.addfunc.call(u,l):D.editGridRow.call(f,"new",l)),!1}),g.edit&&W("edit",a.id,function(){return H.call(this,g.editfunc,"editGridRow",a)}),g.view&&W("view",d.id,function(){return H.call(this,g.viewfunc,"viewGridRow",d)}),g.del&&W("del",n.id,function(){var t;return C(this,I)||(p.multiselect?0===(t=p.selarrrow).length&&(t=null):t=p.selrow,t?e.isFunction(g.delfunc)?g.delfunc.call(u,t,n):D.delGridRow.call(f,t,n):S()),!1}),(g.add||g.edit||g.del||g.view)&&e(b).append(P),g.search&&(k=W("search",s.id,function(){return C(this,I)||(e.isFunction(g.searchfunc)?g.searchfunc.call(u,s):D.searchGrid.call(f,s)),!1}),s.showOnLoad&&!0===s.showOnLoad&&e(k,b).click()),g.refresh&&W("refresh","",function(){if(!C(this,I)){e.isFunction(g.beforeRefresh)&&g.beforeRefresh.call(u),p.search=!1,p.resetsearch=!0;try{if("currentfilter"!==g.refreshstate){p.postData.filters="";try{e("#fbox_"+w).jqFilter("resetFilter")}catch(e){}e.isFunction(u.clearToolbar)&&u.clearToolbar(!1)}}catch(e){}switch(g.refreshstate){case"firstpage":f.trigger("reloadGrid",[e.extend({},g.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":f.trigger("reloadGrid",[e.extend({},g.reloadGridOptions||{},{current:!0})])}e.isFunction(g.afterRefresh)&&g.afterRefresh.call(u)}return!1}),v=e(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",e("body").append("<div id='testpg2' class='"+R.call(u,"gBox","ui-jqgrid")+"' style='font-size:"+v+";visibility:hidden;' ></div>"),m=e(b).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(N+"_"+g.position,N).append(b),g.hideEmptyPagerParts)for(E=0;E<z.length;E++)z[E]!==g.position&&(0===(B=e(N+"_"+z[E],N)).length||0===B[0].childNodes.length?B.hide():1===B[0].childNodes.length&&(A=B[0].firstChild,!e(A).is("table.ui-pg-table")||0!==A.rows&&0!==A.rows[0].cells.length||B.hide()));p._nvtd&&(m>p._nvtd[0]&&(e(N+"_"+g.position,N).width(m),p._nvtd[0]=m),p._nvtd[1]=m),u.nav=!0,b.on("keydown.jqGrid",function(t){var r;if(13===t.which&&(r=e(this).find(".ui-pg-button").filter(":focus")).length>0){var i=r[0].id,a=i.substr(0,e(this).closest(".ui-jqgrid-toppager").length>0?i.length-h.length-5:i.length-h.length-1)+"mod"+p.id,o=e(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(e.inArray(a,o)<0)return r.trigger("click"),!1}})}f.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(t,r){return"object"==typeof t&&(r=t,t=void 0),this.each(function(){var i=this,a=i.p;if(i.grid){var l=e.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},D.getGridRes.call(e(i),"nav"),o.nav||{},a.navOptions||{},r||{}),n=l.id,s=O.call(i,"hover"),d=O.call(i,"disabled"),u=R.call(i,"navButton","ui-pg-button");if(void 0===t)if(a.pager){if(D.navButtonAdd.call(e(i),a.pager,l),!a.toppager)return;t=a.toppager,n&&(n+="_top")}else a.toppager&&(t=a.toppager);"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+c(t));var p=e(".navtable",t),f=l.commonIconClass;if(p.length>0){if(n&&p.find("#"+c(n)).length>0)return;var h=e("<div tabindex='0' role='button'></div>");"NONE"===l.buttonicon.toString().toUpperCase()?e(h).addClass(u).append("<div class='ui-pg-div'>"+(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>"):e(h).addClass(u).append("<div class='ui-pg-div'><span class='"+(l.iconsOverText?x("ui-pg-button-icon-over-text",f,l.buttonicon):x(f,l.buttonicon))+"'></span>"+(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>"),n&&e(h).attr("id",n),"first"===l.position&&p.children("div.ui-pg-button").length>0?p.children("div.ui-pg-button").first().before(h):p.append(h),e(h,p).attr("title",l.title||"").click(function(t){return C(this,d)||e.isFunction(l.onClickButton)&&l.onClickButton.call(i,l,t),!1}).hover(function(){C(this,d)||e(this).addClass(s)},function(){e(this).removeClass(s)}),e(i).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(t,r){return r=e.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},r||{}),this.each(function(){if(this.grid){var i=this,a=i.p,o=R.call(i,"navButton","ui-pg-button "+O.call(i,"disabled"));if(void 0===t)if(a.pager){if(D.navSeparatorAdd.call(e(i),a.pager,r),!a.toppager)return;t=a.toppager}else a.toppager&&(t=a.toppager);"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+c(t));var l=e(".navtable",t);if(l.length>0){var n="<div class='"+o+"'><span class='"+r.sepclass+"'></span>"+r.sepcontent+"</div>";"first"===r.position?0===l.children("div.ui-pg-button").length?l.append(n):l.children("div.ui-pg-button").first().before(n):l.append(n)}}})},GridToForm:function(t,r){return this.each(function(){var i,a,o,l,n=this;if(n.grid){var s=D.getRowData.call(e(n),t);if(s)for(i in s)if(s.hasOwnProperty(i))if((a=e("[name="+c(i)+"]",r)).is("input:radio")||a.is("input:checkbox"))for(o=0;o<a.length;o++)(l=e(a[o])).prop("checked",l.val()===String(s[i]));else a.val(T(s[i])?"":s[i])}})},FormToGrid:function(t,r,i,a){return this.each(function(){var o=this;if(o.grid){i||(i="set"),a||(a="first");var l=e(r).serializeArray(),n={};e.each(l,function(e,t){n[t.name]=t.value}),"add"===i?D.addRowData.call(e(o),t,n,a):"set"===i&&D.setRowData.call(e(o),t,n)}})}}),o.extend({groupingSetup:function(){return this.each(function(){var t,r,i,a,l,n=this,s=n.p,d=s.colModel,c=s.groupingView;if(null===c||"object"!=typeof c&&!e.isFunction(c))s.grouping=!1;else if(c.groupField.length){for(void 0===c.visibiltyOnNextGrouping&&(c.visibiltyOnNextGrouping=[]),c.lastvalues=[],c._locgr||(c.groups=[]),c.counters=[],t=0;t<c.groupField.length;t++)c.groupOrder[t]||(c.groupOrder[t]="asc"),c.groupText[t]||(c.groupText[t]="{0}"),"boolean"!=typeof c.groupColumnShow[t]&&(c.groupColumnShow[t]=!0),"boolean"!=typeof c.groupSummary[t]&&(c.groupSummary[t]=!1),c.groupSummaryPos[t]||(c.groupSummaryPos[t]="footer"),a=d[s.iColByName[c.groupField[t]]],!0===c.groupColumnShow[t]?(c.visibiltyOnNextGrouping[t]=!0,null!=a&&!0===a.hidden&&D.showCol.call(e(n),c.groupField[t])):(c.visibiltyOnNextGrouping[t]=e("#"+o.jqID(s.id+"_"+c.groupField[t])).is(":visible"),null!=a&&!0!==a.hidden&&D.hideCol.call(e(n),c.groupField[t]));for(c.summary=[],c.hideFirstGroupCol&&(c.formatDisplayField[0]=function(e){return e}),r=0,i=d.length;r<i;r++)a=d[r],c.hideFirstGroupCol&&(a.hidden||c.groupField[0]!==a.name||(a.formatter=function(){return""})),a.summaryType&&(l={nm:a.name,st:a.summaryType,v:"",sr:a.summaryRound,srt:a.summaryRoundType||"round"},a.summaryDivider&&(l.sd=a.summaryDivider,l.vd=""),c.summary.push(l))}else s.grouping=!1})},groupingPrepare:function(t,r){return this.each(function(){var i,a,o,l,n,s,d,c,u,p=this,f=p.p,h=f.groupingView,g=h.groups,m=h.counters,v=h.lastvalues,b=h.isInTheSameGroup,w=h.groupField.length,y=!1,x=D.groupingCalculations.handler,C=function(t,r){if(null==t&&h.useDefaultValuesOnGrouping){var i,a=void 0!==f.iColByName[r]?f.colModel[f.iColByName[r]]:f.additionalProperties[f.iPropByName[r]];null!=a&&null!=a.formatter&&(null!=a.formatoptions&&void 0!==a.formatoptions.defaultValue?t=a.formatoptions.defaultValue:"string"==typeof a.formatter&&void 0!==(i=e(p).jqGrid("getGridRes","formatter."+a.formatter+".defaultValue"))&&(t=i))}return t};for(i=0;i<w;i++)if(s=h.groupField[i],d=C(t[s],s),c=h.displayField[i],null==(u=null==c?null:C(t[c],c))&&(u=d),void 0!==d){for(o=[],a=0;a<=i;a++)o.push(t[h.groupField[a]]);for(l={idx:i,dataIndex:s,value:d,displayValue:u,startRow:r,cnt:1,keys:o,summary:[]},n={cnt:1,pos:g.length,summary:e.extend(!0,[],h.summary)},0===r?(g.push(l),v[i]=d,m[i]=n):"object"==typeof d||(e.isArray(b)&&e.isFunction(b[i])?b[i].call(p,v[i],d,i,h):v[i]===d)?y?(g.push(l),v[i]=d,m[i]=n):((n=m[i]).cnt+=1,g[n.pos].cnt=n.cnt):(g.push(l),v[i]=d,y=!0,m[i]=n),g[n.pos].summary=function(){var r,i,a;for(r=0;r<n.summary.length;r++)i=n.summary[r],a=e.isArray(i.st)?i.st[l.idx]:i.st,e.isFunction(a)?i.v=a.call(p,i.v,i.nm,t,l):(i.v=x.call(e(p),a,i.v,i.nm,i.sr,i.srt,t),"avg"===a.toLowerCase()&&i.sd&&(i.vd=x.call(e(p),a,i.vd,i.sd,i.sr,i.srt,t)));return n.summary}(),a=n.pos-1;a>=0;a--)if(g[a].idx<g[n.pos].idx){g[n.pos].parentGroupIndex=a,g[n.pos].parentGroup=g[a];break}}}),this},getGroupHeaderIndex:function(t,r){var i=this[0].p,a=r?e(r).closest("tr.jqgroup"):e("#"+o.jqID(t)),l=parseInt(a.data("jqgrouplevel"),10),n=i.id+"ghead_"+l+"_";return isNaN(l)||!a.hasClass("jqgroup")||t.length<=n.length?-1:parseInt(t.substring(n.length),10)},avJqGridGroupingToggle:function(){e(".avGridrowExpandAndCollapse").click(function(){jQuery("#"+this.dataset.gridid).jqGrid("groupingToggle",this.dataset.rowid,this)})},groupingToggle:function(t,r){return this.each(function(){var i,a,l,n=this,s=n.p,d=s.groupingView,c=d.minusicon,u=d.plusicon,p=r?e(r).closest("tr.jqgroup"):e("#"+o.jqID(t)),f=function(e){return e.find(">td>span.tree-wrap")},h=!0,g=!1,m=[],v=function(e){var t,r=e.length;for(t=0;t<r;t++)m.push(e[t])},b=parseInt(p.data("jqgrouplevel"),10);for(s.frozenColumns&&p.length>0&&(a=p[0].rowIndex,p=(p=e(n.rows[a])).add(n.grid.fbRows[a])),l=f(p),o.hasAllClasses(l,c)?(l.removeClass(c).addClass(u),g=!0):l.removeClass(u).addClass(c),p=p.next();p.length;p=p.next())if(p.hasClass("jqfoot")){if(i=parseInt(p.data("jqfootlevel"),10),g){if(i=parseInt(p.data("jqfootlevel"),10),(!d.showSummaryOnHide&&i===b||i>b)&&v(p),i<b)break}else if((i===b||d.showSummaryOnHide&&i===b+1)&&v(p),i<=b)break}else if(p.hasClass("jqgroup"))if(i=parseInt(p.data("jqgrouplevel"),10),g){if(i<=b)break;v(p)}else{if(i<=b)break;i===b+1&&(f(p).removeClass(c).addClass(u),v(p)),h=!1}else(g||h)&&v(p);e(m).css("display",g?"none":""),s.frozenColumns&&e(n).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:a,iRowEnd:p.length?p[0].rowIndex-1:-1}}}]),n.fixScrollOffsetAndhBoxPadding(),e(n).triggerHandler("jqGridGroupingClickGroup",[t,g]),e.isFunction(s.onClickGroup)&&s.onClickGroup.call(n,t,g)}),!1},groupingRender:function(t,r){function i(t,r,i,a,s){var d,u,p,m,v,b,w,y,x,C,j,D,q,R=f[t],S="",_=0,I=!0;if(0!==r&&0!==f[t].idx)for(d=t;d>=0;d--)if(f[d].idx===f[t].idx-r){R=f[d];break}for(u=R.cnt,j=void 0===s?a:0;j<g;j++){for(p="&#160;",C=h[j],y=0;y<R.summary.length;y++)if(x=R.summary[y],D=e.isArray(x.st)?x.st[i.idx]:x.st,q=e.isArray(C.summaryTpl)?C.summaryTpl[i.idx]:C.summaryTpl||"{0}",x.nm===C.name){"string"==typeof D&&"avg"===D.toLowerCase()&&(x.sd&&x.vd?x.v=x.v/x.vd:x.v&&u>0&&(x.v=x.v/u));try{x.groupCount=R.cnt,x.groupIndex=R.dataIndex,x.groupValue=R.value,b=l.formatter("",x.v,j,x)}catch(e){b=x.v}p=o.format(q,b),C.summaryFormat&&(p=C.summaryFormat.call(l,i,p,b,C,x));break}m=!1,v=!1,void 0!==s&&I&&(C.hidden||(p=s,I=!1,a>1&&(m=!0,_=a-1),v=C.align,C.align="rtl"===n.direction?"right":"left",c.iconColumnName=C.name)),w=!1,_>0&&!C.hidden&&"&#160;"===p?(w=!0,v&&(C.align=v),_--):(S+="<td role='gridcell' "+l.formatCol(j,1,"")+(m?"colspan='"+a+"'":"")+">"+p+"</td>",m=!1,v&&(C.align=v),w&&(C.hidden=!1,_--))}return S}var a="",l=this[0],n=l.p,s=0,d=[],c=n.groupingView,u=e.makeArray(c.groupSummary),p=c.groupField.length,f=c.groups,h=n.colModel,g=h.length,m=n.page,v="jqGridShowHideCol.groupingRender",b=function(e){return D.getGuiStyles.call(l,"gridRow",e)},w=b("jqgroup ui-row-"+n.direction),y=b("jqfoot ui-row-"+n.direction);return e.each(h,function(e,t){var r;for(r=0;r<p;r++)if(c.groupField[r]===t.name){d[r]=e;break}}),u.reverse(),e.each(f,function(v,b){var x,C,j,D,q,R,S,_,I=n.id+"ghead_"+b.idx,F=I+"_"+v,G=e.isFunction(c.groupCollapse)?c.groupCollapse.call(l,{group:b,rowid:F}):c.groupCollapse,k=1,O=0,N=p-1===b.idx,T=null!=b.parentGroup&&b.parentGroup.collapsed,E="<span style='cursor:pointer;margin-"+("rtl"===n.direction?"right:":"left:")+12*b.idx+"px;' class='"+c.commonIconClass+" "+(G?c.plusicon:c.minusicon)+" tree-wrap avGridrowExpandAndCollapse' data-gridId='"+e.jgrid.jqID(l.p.id)+"' data-rowId='"+F+"'></span>";if(c._locgr&&!(b.startRow+b.cnt>(m-1)*r&&b.startRow<m*r))return!0;T&&(G=!0),void 0!==G&&(b.collapsed=G),s++;try{e.isArray(c.formatDisplayField)&&e.isFunction(c.formatDisplayField[b.idx])?(b.displayValue=c.formatDisplayField[b.idx].call(l,b.displayValue,b.value,h[d[b.idx]],b.idx,c),x=b.displayValue):x=l.formatter(F,b.displayValue,d[b.idx],b.value)}catch(e){x=b.displayValue}if(a+="<tr id='"+F+"' data-jqgrouplevel='"+b.idx+"' "+(G&&T?"style='display:none;' ":"")+"role='row' class='"+w+" "+I+"'>","string"!=typeof(_=e.isFunction(c.groupText[b.idx])?c.groupText[b.idx].call(l,x,b.cnt,b.summary):o.template(c.groupText[b.idx],x,b.cnt,b.summary))&&"number"!=typeof _&&(_=x),"header"===c.groupSummaryPos[b.idx]?(k=1,"cb"!==h[0].name&&"cb"!==h[1].name||k++,"subgrid"!==h[0].name&&"subgrid"!==h[1].name||k++,a+=i(v,0,b,k,E+"<span class='cell-wrapper'>"+_+"</span>")):a+="<td role='gridcell' style='padding-left:"+12*b.idx+"px;' colspan='"+g+"'>"+E+_+"</td>",a+="</tr>",N){for(R=f[v+1],q=b.startRow,S=void 0!==R?R.startRow:f[v].startRow+f[v].cnt,c._locgr&&(O=(m-1)*r)>b.startRow&&(q=O),j=q;j<S&&t[j-O];j++)a+=t[j-O].join("");if("header"!==c.groupSummaryPos[b.idx]){if(void 0!==R){for(C=0;C<c.groupField.length&&R.dataIndex!==c.groupField[C];C++);s=c.groupField.length-C}for(D=0;D<s;D++)u[D]&&(a+="<tr data-jqfootlevel='"+(b.idx-D)+(G&&(b.idx-D>0||!c.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+y+"'>",a+=i(v,D,f[b.idx-D],0),a+="</tr>");s=C}}}),this.off(v).on(v,function(){var t,r,i,a,o=n.iColByName[c.iconColumnName];if(e.inArray("header",c.groupSummaryPos)>=0){for(a=0;a<h.length;a++)if(!h[a].hidden){i=a;break}if(void 0===i||o===i)return;for(t=0;t<l.rows.length;t++)r=l.rows[t],e(r).hasClass("jqgroup")&&(e(r.cells[i]).html(r.cells[o].innerHTML),e(r.cells[o]).html("&nbsp;"));c.iconColumnName=h[i].name}}),a},groupingGroupBy:function(t,r){return this.each(function(){var i,a,l=this,n=l.p,s=n.groupingView;for("string"==typeof t&&(t=[t]),n.grouping=!0,s._locgr=!1,void 0===s.visibiltyOnNextGrouping&&(s.visibiltyOnNextGrouping=[]),i=0;i<s.groupField.length;i++)a=n.colModel[n.iColByName[s.groupField[i]]],!s.groupColumnShow[i]&&s.visibiltyOnNextGrouping[i]&&null!=a&&!0===a.hidden&&D.showCol.call(e(l),s.groupField[i]);for(i=0;i<t.length;i++)s.visibiltyOnNextGrouping[i]=e(n.idSel+"_"+o.jqID(t[i])).is(":visible");n.groupingView=e.extend(n.groupingView,r||{}),s.groupField=t,e(l).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var r,i=this,a=i.p,o=i.tBodies[0],l=a.groupingView;if(void 0===t&&(t=!0),a.grouping=!1,!0===t){for(r=0;r<l.groupField.length;r++)!l.groupColumnShow[r]&&l.visibiltyOnNextGrouping[r]&&D.showCol.call(e(i),l.groupField);e("tr.jqgroup, tr.jqfoot",o).remove(),e("tr.jqgrow",o).filter(":hidden").show()}else e(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var l,n,s={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return""===t?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return""===t?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return s.sum()}};if(!s[e])throw"jqGrid Grouping No such method: "+e;return l=s[e](),null!=i&&("fixed"===a?l=l.toFixed(i):(n=Math.pow(10,i),l=Math.round(l*n)/n)),l}}}),e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var r,i=this,a=function(t,r){var a,l,n,s,d=e(r.xmlGrid.config,t)[0],c=e(r.xmlGrid.data,t)[0];if(_.xml2json){a=_.xml2json(d," "),a=e.parseJSON(a);for(n in a)a.hasOwnProperty(n)&&(l=a[n]);void 0!==l&&(c?(s=a.grid.datatype,a.grid.datatype="xmlstring",a.grid.datastr=t,e(i).jqGrid(l).jqGrid("setGridParam",{datatype:s})):e(i).jqGrid(l))}else(null!=o.defaults&&e.isFunction(o.defaults.fatalError)?o.defaults.fatalError:alert)("xml2json or parse are not present")},l=function(t,r){if(t&&"string"==typeof t){var a,o=e.parseJSON(t),l=o[r.jsonGrid.config],n=o[r.jsonGrid.data];n?(a=l.datatype,l.datatype="jsonstring",l.datastr=n,e(i).jqGrid(l).jqGrid("setGridParam",{datatype:a})):e(i).jqGrid(l)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",context:t,complete:function(t){!(t.status<300||304===t.status)||0===t.status&&4===t.readyState||(a(t.responseXML,this),e(i).triggerHandler("jqGridImportComplete",[t,this]),e.isFunction(this.importComplete)&&this.importComplete(t))}},t.ajaxOptions));break;case"xmlstring":t.impstring&&"string"==typeof t.impstring&&(r=e.parseXML(t.impstring))&&(a(r,t),e(i).triggerHandler("jqGridImportComplete",[r,t]),e.isFunction(t.importComplete)&&t.importComplete(r),t.impstring=null);break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",context:t,complete:function(t){try{!(t.status<300||304===t.status)||0===t.status&&4===t.readyState||(l(t.responseText,this),e(i).triggerHandler("jqGridImportComplete",[t,this]),e.isFunction(this.importComplete)&&this.importComplete(t))}catch(e){}}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(l(t.impstring,t),e(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var r=null;return this.each(function(){if(this.grid){var i,a=e.extend(!0,{},e(this).jqGrid("getGridParam"));if(a.rownumbers&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.multiselect&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.subGrid&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.knv=null,a.treeGrid)for(i in a.treeReader)a.treeReader.hasOwnProperty(i)&&(a.colNames.splice(a.colNames.length-1),a.colModel.splice(a.colModel.length-1));switch(t.exptype){case"xmlstring":r="<"+t.root+">"+_.json2xml(a,t.ident)+"</"+t.root+">";break;case"jsonstring":r="{"+_.toJson(a,t.root,t.ident,!1)+"}",void 0!==a.postData.filters&&(r=r.replace(/filters":"/,'filters":'),r=r.replace(/\}\]\}"/,"}]}"))}}}),r},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var r;this.grid&&"remote"===t.exptype&&((r=e.extend({},this.p.postData,t.exportOptions))[t.oper]=t.tag,window.location=t.url+(null!=t.url&&t.url.indexOf("?")>=0?"&":"?")+e.param(r))})}});var E=function(t){var r=e.makeArray(arguments).slice(1);return r.unshift(""),r.unshift("Inline"),r.unshift(t),o.feedback.apply(this,r)};o.inlineEdit=o.inlineEdit||{},o.extend({editRow:function(t,r,i,a,l,n,s,d,c,u){var p={},f=e.makeArray(arguments).slice(1);return"object"===e.type(f[0])?p=f[0]:(void 0!==r&&(p.keys=r),e.isFunction(i)&&(p.oneditfunc=i),e.isFunction(a)&&(p.successfunc=a),void 0!==l&&(p.url=l),null!=n&&(p.extraparam=n),e.isFunction(s)&&(p.aftersavefunc=s),e.isFunction(d)&&(p.errorfunc=d),e.isFunction(c)&&(p.afterrestorefunc=c),e.isFunction(u)&&(p.beforeEditRow=u)),this.each(function(){var r=this,i=e(r),a=r.p,l=0,n=null,s={},d={},c=a.colModel,u=a.prmNames;if(r.grid){var f=e.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},o.inlineEdit,a.inlineEditing||{},p),h=i.jqGrid("getInd",t,!0),g=f.focusField,m="object"==typeof g&&null!=g?e(g.target||g).closest("tr.jqgrow>td")[0]:null;if(!1!==h&&(f.extraparam[u.oper]===u.addoper||E.call(r,f,"beforeEditRow",f,t))&&"0"===(e(h).attr("editable")||"0")&&!e(h).hasClass("not-editable-row")){var v=o.detectRowEditing.call(r,t);if(null!=v&&"cellEditing"===v.mode){var b=v.savedRow,w=r.rows[b.id],y=O.call(r,"select");i.jqGrid("restoreCell",b.id,b.ic),e(w.cells[b.ic]).removeClass("edit-cell "+y),e(w).addClass(y).attr({"aria-selected":"true",tabindex:"0"})}if(o.enumEditableCells.call(r,h,e(h).hasClass("jqgrid-new-row")?"add":"edit",function(i){var c,u,p,f=i.cm,h=e(i.dataElement),g=i.dataWidth,m=f.name,v=f.edittype,b=i.iCol,w=f.editoptions||{},y=!0===r.p.treeGrid&&m===r.p.ExpandColumn,x=f.editrules;if(d[m]=i.editable,"hidden"!==i.editable){if(y)e("span:first",h).html("");else try{c=e.unformat.call(this,i.td,{rowId:t,colModel:f},b)}catch(e){c="textarea"===v?h.text():h.html()}if(s[m]=c,y?e("span:first",h).html(""):h.html(""),u=e.extend({},w,{id:t+"_"+m,name:m,rowId:t,mode:i.mode,cm:f,iCol:b}),("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))&&(c=""),p=o.createEl.call(r,v,u,c,!0,e.extend({},o.ajaxOptions,a.ajaxSelectOptions||{})),e(p).addClass("editable slds-input inline-edit-cell"),v||(v="text"),void 0!=x&&void 0!=x.required&&1==x.required){var C="",j=e(C="<table style='border-spacing: 0px; width:100% !important;'><tbody><tr><td style='border: 0px; color: red;font-size: 16px;font-weight: 600; width:1px !important;'>|</td><td style='border: 0px; ' id='secondTDForRequired'></td></tr></tbody></table>");j.find("td#secondTDForRequired").append(e(p)),y?e("span:first",h).append(j):h.append(j)}else y?e("span:first",h).append(p):h.append(p);g&&e(p).width(i.dataWidth),o.bindEv.call(r,p,u),"select"===v&&!0===w.multiple&&void 0===w.dataUrl&&o.msie&&e(p).width(e(p).width()),null===n&&(n=b),l++}}),l>0){if(s.id=t,a.savedRow.push(s),a.editingInfo[t]={mode:"inlineEditing",savedRow:s,editable:d},e(h).attr("editable","1"),g&&("number"==typeof g&&parseInt(g,10)<=c.length?n=g:"string"==typeof g?n=a.iColByName[g]:null!=m&&(n=m.cellIndex),setTimeout(function(){var t=i.jqGrid("getNumberOfFrozenColumns"),o=function(e){return a.frozenColumns&&t>0&&n<t?r.grid.fbRows[h.rowIndex].cells[e]:h.cells[e]},l=function(t){return e(t).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},s=function(){return l(a.frozenColumns&&t>0?r.grid.fbRows[h.rowIndex]:h).first()},d=l(o(n));d.length>0?d.first().focus():"number"==typeof f.defaultFocusField||"string"==typeof f.defaultFocusField?(0===(d=l(o("number"==typeof f.defaultFocusField?f.defaultFocusField:a.iColByName[f.defaultFocusField]))).length&&(d=s()),d.first().focus()):s().focus()},0)),!0===f.keys){var x=e(h);a.frozenColumns&&(x=x.add(r.grid.fbRows[h.rowIndex])),x.on("keydown",function(e){return 27===e.keyCode?(i.jqGrid("restoreRow",t,f.afterrestorefunc),!1):13===e.keyCode?"TEXTAREA"===e.target.tagName||(i.jqGrid("saveRow",t,f),!1):void 0})}F.call(r,f.oneditfunc,"jqGridInlineEditRow",t,f)}}}})},saveRow:function(t,r,i,a,l,n,s,d){var c,u=e.makeArray(arguments).slice(1),p={},f=this[0],h=e(f),g=null!=f?f.p:null,m=o.info_dialog,v=e.isFunction,b=null!=o.defaults&&v(o.defaults.fatalError)?o.defaults.fatalError:alert;if(f.grid&&null!=g){"object"===e.type(u[0])?p=u[0]:(v(r)&&(p.successfunc=r),void 0!==i&&(p.url=i),void 0!==a&&(p.extraparam=a),v(l)&&(p.aftersavefunc=l),v(n)&&(p.errorfunc=n),v(s)&&(p.afterrestorefunc=s),v(d)&&(p.beforeSaveRow=d));var w=function(e){return h.jqGrid("getGridRes",e)};p=e.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:w("defaults.savetext")||"Saving..."},o.inlineEdit,g.inlineEditing||{},p);var y,x,C,j,D,q,R,S,_={},I={},G={},k=h.jqGrid("getInd",t,!0),N=e(k),T=g.prmNames,A=w("errors.errcap"),B=w("edit.bClose"),M=function(t,r){try{var i=o.getRelativeRect.call(f,r);m.call(f,A,t,B,{top:i.top,left:i.left+e(f).closest(".ui-jqgrid").offset().left})}catch(e){b(t)}};if(!1!==k&&(c=p.extraparam[T.oper]===T.addoper?"add":"edit",E.call(f,p,"beforeSaveRow",p,t,c)&&(y=N.attr("editable"),p.url=p.url||g.editurl,R="clientArray"!==p.url,"1"===y))){if(q=e.jgrid.detectRowEditing.call(f,t),o.enumEditableCells.call(f,k,N.hasClass("jqgrid-new-row")?"add":"edit",function(t){var r=t.cm,i=r.formatter,a=r.editoptions||{},l=r.formatoptions||{},n={},s=o.getEditedValue.call(f,e(t.dataElement),r,n,t.editable);if("select"===r.edittype&&"select"!==r.formatter&&(I[r.name]=n.text),null!=(D=o.checkValues.call(f,s,t.iCol,void 0,void 0,e.extend(t,{oldValue:null!=q?q.savedRow[r.name]:null,newValue:s,oldRowData:null!=q?q.savedRow:null})))&&!1===D[0])return S=!0,M(D[1],t.td),!1;"date"===i&&!0!==l.sendFormatted&&(s=e.unformat.date.call(f,s,r)),R&&!0===a.NullIfEmpty&&""===s&&(s="null"),_[r.name]=s}),S)return;var z;T=g.prmNames,z=!1===g.keyName?T.id:g.keyName,_&&(_[T.oper]=T.editoper,void 0!==_[z]&&""!==_[z]||(_[z]=o.stripPref(g.idPrefix,t)),_=e.extend({},_,g.inlineData||{},p.extraparam));var P={options:p,rowid:t,tr:k,iRow:k.rowIndex,savedRow:q.savedRow,newData:_,mode:c};if(!E.call(f,p,"saveRowValidation",P))return void(P.errorText&&M(P.errorText,k));if(R)h.jqGrid("progressBar",{method:"show",loadtype:p.saveui,htmlcontent:p.savetext}),(G=e.extend({},_,G))[z]=o.stripPref(g.idPrefix,G[z]),g.autoEncodeOnEdit&&e.each(G,function(e,t){v(t)||(G[e]=o.oldEncodePostedData(t))}),k.id===g.idPrefix+G[z]||null==T.idold||G.hasOwnProperty(T.idold)||(G[T.idold]=o.stripPref(g.idPrefix,k.id)),e.ajax(e.extend({url:v(p.url)?p.url.call(f,G[z],c,G,p):p.url,data:o.serializeFeedback.call(f,v(p.serializeSaveData)?p.serializeSaveData:g.serializeRowData,"jqGridInlineSerializeSaveData",G),type:v(p.mtype)?p.mtype.call(f,c,p,G[z],G):p.mtype,complete:function(r,i){if(h.jqGrid("progressBar",{method:"hide",loadtype:p.saveui}),(r.status<300||304===r.status)&&(0!==r.status||4!==r.readyState)){var a,l,n;if(null!=(l=h.triggerHandler("jqGridInlineSuccessSaveRow",[r,t,p,c,G]))&&!0!==l||(l=[!0,_]),l[0]&&v(p.successfunc)&&(l=p.successfunc.call(f,r,t,p,c,G)),e.isArray(l)?(a=l[0],_=l[1]||_):a=l,!0===a){for(g.autoEncodeOnEdit&&e.each(_,function(e,t){_[e]=o.oldDecodePostedData(t)}),_=e.extend({},_,I),h.jqGrid("setRowData",t,_),N.attr("editable","0"),n=0;n<g.savedRow.length;n++)if(String(g.savedRow[n].id)===String(t)){C=n;break}C>=0&&(g.savedRow.splice(C,1),delete g.editingInfo[t]),F.call(f,p.aftersavefunc,"jqGridInlineAfterSaveRow",t,r,_,p),null!=l[2]?h.jqGrid("changeRowid",t,g.idPrefix+l[2]):k.id!==g.idPrefix+_[z]&&h.jqGrid("changeRowid",k.id,g.idPrefix+_[z]),N.removeClass("jqgrid-new-row").off("keydown")}else F.call(f,p.errorfunc,"jqGridInlineErrorSaveRow",t,r,i,null,p),!0===p.restoreAfterError&&h.jqGrid("restoreRow",t,p.afterrestorefunc)}},error:function(e,r,i){if(h.triggerHandler("jqGridInlineErrorSaveRow",[t,e,r,i,p]),v(p.errorfunc))p.errorfunc.call(f,t,e,r,i);else{var a=e.responseText||e.statusText;try{m.call(f,A,'<div class="'+O.call(f,"error")+'">'+a+"</div>",B,{buttonalign:"right"})}catch(e){b(a)}}!0===p.restoreAfterError&&h.jqGrid("restoreRow",t,p.afterrestorefunc)}},o.ajaxOptions,g.ajaxRowOptions,p.ajaxSaveOptions||{}));else{for(_=e.extend({},_,I),j=h.jqGrid("setRowData",t,_),N.attr("editable","0"),x=0;x<g.savedRow.length;x++)if(String(g.savedRow[x].id)===String(t)){C=x;break}C>=0&&(g.savedRow.splice(C,1),delete g.editingInfo[t]),F.call(f,p.aftersavefunc,"jqGridInlineAfterSaveRow",t,j,_,p),N.removeClass("jqgrid-new-row").off("keydown"),k.id!==g.idPrefix+_[z]&&h.jqGrid("changeRowid",k.id,g.idPrefix+_[z])}}}},restoreRow:function(t,r){var i=e.makeArray(arguments).slice(1),a={};return"object"===e.type(i[0])?a=i[0]:e.isFunction(r)&&(a.afterrestorefunc=r),this.each(function(){var r,i=this,l=e(i),n=i.p,s=-1,d={};if(i.grid){var c=e.extend(!0,{},o.inlineEdit,n.inlineEditing||{},a),u=l.jqGrid("getInd",t,!0);if(!1!==u&&E.call(i,c,"beforeCancelRow",c,t)){for(r=0;r<n.savedRow.length;r++)if(String(n.savedRow[r].id)===String(t)){s=r;break}if(s>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+o.jqID(u.id)).datepicker("hide")}catch(e){}e.each(n.colModel,function(){var t=this.name;n.savedRow[s].hasOwnProperty(t)&&(d[t]=n.savedRow[s][t],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(d[t]=e.unformat.date.call(i,d[t],this)))}),l.jqGrid("setRowData",t,d),e(u).attr("editable","0").off("keydown"),n.savedRow.splice(s,1),delete n.editingInfo[t],e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")&&setTimeout(function(){l.jqGrid("delRowData",t),l.jqGrid("showAddEditButtons",!1)},0)}F.call(i,c.afterrestorefunc,"jqGridInlineAfterRestoreRow",t)}}})},addRow:function(t){return this.each(function(){if(this.grid){var r=this,i=e(r),a=r.p,l=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},o.inlineEdit,a.inlineEditing||{},t||{});if(E.call(r,l,"beforeAddRow",l.addRowParams))if(l.rowID=e.isFunction(l.rowID)?l.rowID.call(r,l):null!=l.rowID?l.rowID:o.randId(),!0===l.useDefValues&&e(a.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var t=this.editoptions.defaultValue;l.initdata[this.name]=e.isFunction(t)?t.call(r,l):t}}),l.rowID=a.idPrefix+l.rowID,i.jqGrid("addRowData",l.rowID,l.initdata,l.position),e("#"+o.jqID(l.rowID),r).addClass("jqgrid-new-row"),l.useFormatter)e("#"+o.jqID(l.rowID)+" .ui-inline-edit",r).click();else{var n=a.prmNames,s=n.oper;l.addRowParams.extraparam[s]=n.addoper,i.jqGrid("editRow",l.rowID,l.addRowParams)}}})},addRowAfterBefore:function(t,r){return t=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var i=this,a=e.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):void 0;if(void 0===a&&(a=!0),a){t.rowID=e.isFunction(t.rowID)?t.rowID.call(i,t):null!=t.rowID?t.rowID:e.jgrid.randId(),!0===t.useDefValues&&e(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,a=e.isFunction(r)?r.call(i):r;t.initdata[this.name]=a}});for(var o=e(i).jqGrid("getDataIDs"),l=0;l<o.length;l++){var n=e(i).jqGrid("getInd",o[l],!0);if(!1===n)return success;if(1==e(n).attr("editable")&&!e(i).jqGrid("saveRow",o[l]))return}if(e(i).jqGrid("addRowData",t.rowID,t.initdata,t.position,r),t.rowID=i.p.idPrefix+t.rowID,e("#"+e.jgrid.jqID(t.rowID),"#"+e.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter)e("#"+e.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+e.jgrid.jqID(i.p.id)).click();else{var s=i.p.prmNames,d=s.oper;t.addRowParams.extraparam[d]=s.addoper,e(i).jqGrid("editRow",t.rowID,t.addRowParams)}}}})},inlineNav:function(t,r){return"object"==typeof t&&(r=t,t=void 0),this.each(function(){var i=this,a=e(i),l=i.p;if(this.grid&&null!=l){var n,s=t===l.toppager?l.idSel+"_top":l.idSel,d=t===l.toppager?l.id+"_top":l.id,c=O.call(i,"disabled"),u=e.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},a.jqGrid("getGridRes","nav"),o.nav||{},l.navOptions||{},o.inlineNav||{},l.inlineNavOptions||{},r||{}),p=function(){i.modalAlert()};if(void 0===t)if(l.pager){if(a.jqGrid("inlineNav",l.pager,u),!l.toppager)return;t=l.toppager,s=l.idSel+"_top",d=l.id+"_top"}else l.toppager&&(t=l.toppager,s=l.idSel+"_top",d=l.id+"_top");if(void 0!==t&&!((n=e(t)).length<=0)){if(n.find(".navtable").length<=0&&a.jqGrid("navGrid",t,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),l._inlinenav=!0,!0===u.addParams.useFormatter){var f,h,g,m=l.colModel;for(f=0;f<m.length;f++)if(m[f].formatter&&"actions"===m[f].formatter){m[f].formatoptions&&(h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},g=e.extend(h,m[f].formatoptions),u.addParams.addRowParams={keys:g.keys,oneditfunc:g.onEdit,successfunc:g.onSuccess,url:g.url,extraparam:g.extraparam,aftersavefunc:g.afterSave,errorfunc:g.onError,afterrestorefunc:g.afterRestore});break}}u.add&&a.jqGrid("navButtonAdd",t,{caption:u.addtext,title:u.addtitle,commonIconClass:u.commonIconClass,buttonicon:u.addicon,iconsOverText:u.iconsOverText,id:d+"_iladd",onClickButton:function(){for(var t=e(i).jqGrid("getDataIDs"),r=0;r<t.length;r++){var a=e(i).jqGrid("getInd",t[r],!0);if(!1===a)return success;if(1==e(a).attr("editable")&&!e(i).jqGrid("saveRow",t[r]))return}void 0===i.p.beforeAction&&(i.p.beforeAction=!0),e(i).jqGrid("addRow",u.addParams),!u.addParams.useFormatter&&i.p.beforeAction&&(e(s+"_ilsave").removeClass(c),e(s+"_ilcancel").removeClass(c),e(s+"_iledit").addClass(c))}}),u.edit&&a.jqGrid("navButtonAdd",t,{caption:u.edittext,title:u.edittitle,commonIconClass:u.commonIconClass,buttonicon:u.editicon,iconsOverText:u.iconsOverText,id:d+"_iledit",onClickButton:function(){var t=e(i).jqGrid("getGridParam","selrow");t?(void 0===i.p.beforeAction&&(i.p.beforeAction=!0),e(i).jqGrid("editRow",t,u.editParams),i.p.beforeAction&&(e(s+"_ilsave").removeClass(c),e(s+"_ilcancel").removeClass(c),e(s+"_iladd").addClass(c),e(s+"_iledit").addClass(c))):(e.jgrid.viewModal("#alertmod_"+d,{gbox:"#gbox_"+d,jqm:!0}),e("#jqg_alrt").focus())}}),u.save&&(a.jqGrid("navButtonAdd",t,{caption:u.savetext,title:u.savetitle,commonIconClass:u.commonIconClass,buttonicon:u.saveicon,iconsOverText:u.iconsOverText,id:d+"_ilsave",onClickButton:function(){if(!C(this,c)){var t=l.savedRow[0].id;if(t){var r=l.prmNames,n=r.oper,s=u.editParams;e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")?(u.addParams.addRowParams.extraparam[n]=r.addoper,s=u.addParams.addRowParams):(u.editParams.extraparam||(u.editParams.extraparam={}),u.editParams.extraparam[n]=r.editoper),a.jqGrid("saveRow",t,s)}else p()}}}),e(s+"_ilsave").addClass(c)),u.cancel&&(a.jqGrid("navButtonAdd",t,{caption:u.canceltext,title:u.canceltitle,commonIconClass:u.commonIconClass,buttonicon:u.cancelicon,iconsOverText:u.iconsOverText,id:d+"_ilcancel",onClickButton:function(){if(!C(this,c)){var t=l.savedRow[0].id,r=u.editParams;t?(e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")&&(r=u.addParams.addRowParams),a.jqGrid("restoreRow",t,r)):p()}}}),e(s+"_ilcancel").addClass(c)),!0===u.restoreAfterSelect&&a.on("jqGridSelectRow",function(e,t){if(l.savedRow.length>0&&!0===l._inlinenav){var r=l.savedRow[0].id;t!==r&&"number"!=typeof r&&a.jqGrid("restoreRow",r,u.editParams)}}),a.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){a.jqGrid("showAddEditButtons",!1)}),a.on("jqGridInlineEditRow",function(e,t){a.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(t){return this.each(function(){var r=this;if(r.grid){var i=r.p,a=i.idSel,o=O.call(r,"disabled"),l=a+"_ilsave,"+a+"_ilcancel"+(i.toppager?","+a+"_top_ilsave,"+a+"_top_ilcancel":""),n=a+"_iladd,"+a+"_iledit"+(i.toppager?","+a+"_top_iladd,"+a+"_top_iledit":"");e(t?n:l).addClass(o),e(t?l:n).removeClass(o)}})}});var A=null!=e.ui?e.ui.multiselect:null,B=function(t){if(null!=this.grid&&null!=this.grid.p){var r,i,a,o,l,n=this,s=this.grid.p,d=this.gh,c=this.selectedList,u=this.inGroup,p=c.find("li"),f=p.length-1,h=function(t,r,i){var a,o,l=c.find("li");for(void 0===r&&(r=i?l.length-1:0),a=r;i?a>=0:a<l.length;i?a--:a++)if((o=e(l[a]).data("optionLink"))&&t.call(l[a],parseInt(o.val(),10),a))return a},g=function(){(i=e.inArray(s.colModel[t].name,n.newColOrder))>=0&&n.newColOrder.splice(i,1),p=c.find("li"),r=0,h(function(i,a){if(i===t){for(f=a;r>=0&&r<s.colModel.length&&(s.colModel[r].hidden||s.colModel[r].hidedlg)&&null!=u&&u[r]===u[t];)r++;return n.newColOrder.splice(r,0,s.colModel[t].name),!0}(r=e.inArray(s.colModel[i].name,n.newColOrder,r))<0&&(r=e.inArray(s.colModel[i].name,n.newColOrder)),r++})};if(g(),d&&void 0!==d[u[t]]){for(o=d[u[t]],i=0;i<o.numberOfColumns;i++)if(r=s.iColByName[o.startColumnName]+i,!s.colModel[r].hidden&&!s.colModel[r].hidedlg){h(function(r){if(u[r]===u[t])return e(this).after(p[f]),g(),!0},f-1,!0),h(function(r){if(u[r]===u[t])return e(this).before(p[f]),g(),!0},f+1),h(function(e){if(u[e]===u[t]&&void 0!==u[e])return d[u[e]].startColumnName=s.colModel[e].name,!0});break}}else if(d){if(p=c.find("li"),(i=h(function(e){if(e===t)return!0}))+1>=p.length||i<0)return;if((l=e(p[i+1]).data("optionLink"))&&void 0!==(a=u[parseInt(l.val(),10)])&&(l=e(p[i-1]).data("optionLink"))&&u[parseInt(l.val(),10)]===a){var m=h(function(e){if(u[e]!==a)return!0},i+1);e(p[void 0===m||m>=p.length?p.length-1:m-1]).after(p[f]),g()}}}};if(o.msie&&8===o.msiever()&&(e.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),o._multiselect=!1,A){if(A.prototype._setSelected){var M=A.prototype._setSelected;A.prototype._setSelected=function(t,r){var i=M.call(this,t,r),a=this.element,o=parseInt(t.data("optionLink").val(),10);return r&&this.selectedList&&(B.call(this,o),this.selectedList.find("li").each(function(){e(this).data("optionLink")&&e(this).data("optionLink").remove().appendTo(a)})),i}}A.prototype.destroy&&(A.prototype.destroy=function(){var t=this;t.element.show(),t.container.remove(),void 0===e.Widget?e.widget.prototype.destroy.apply(t,arguments):e.Widget.prototype.destroy.apply(t,arguments)}),o._multiselect=!0}o.extend({sortableColumns:function(r){return this.each(function(){function i(){o.disableClick=!0}var a=this,o=a.p,l=c(o.id);if(o&&o.sortable&&e.isFunction(e.fn.sortable)){var n={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+l+"_cb,#jqgh_"+l+"_rn,#jqgh_"+l+"_subgrid),:hidden)",placeholder:{element:function(r){return e(t.createElement(r[0].nodeName)).addClass(r[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){a.grid.hDiv.scrollLeft=a.grid.bDiv.scrollLeft},update:function(t,r){var i=e(">th",e(r.item).parent()),l=o.id+"_",n=[];i.each(function(){var t=e(">div",this).get(0).id.replace(/^jqgh_/,"").replace(l,""),r=o.iColByName[t];void 0!==r&&n.push(r)}),e(a).jqGrid("remapColumns",n,!0,!0),e.isFunction(o.sortable.update)&&o.sortable.update(n),setTimeout(function(){o.disableClick=!1},50)}};if(o.sortable.options?e.extend(n,o.sortable.options):e.isFunction(o.sortable)&&(o.sortable={update:o.sortable}),n.start){var s=n.start;n.start=function(e,t){i(),s.call(this,e,t)}}else n.start=i;o.sortable.exclude&&(n.items+=":not("+o.sortable.exclude+")");var d=r.sortable(n),u=d.data("sortable")||d.data("uiSortable")||d.data("ui-sortable");null!=u&&(u.floating=!0)}})},columnChooser:function(t){function r(t,r){t&&("string"==typeof t?e.fn[t]&&e.fn[t].apply(r,e.makeArray(arguments).slice(2)):e.isFunction(t)&&t.apply(r,e.makeArray(arguments).slice(2)))}var i,a,l,n,s,d,u,p=this,f=p[0],h=f.p,g=h.colModel,m=g.length,v=h.colNames,b=function(e){return A&&A.prototype&&e.data(A.prototype.widgetFullName||A.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if(!e("#colchooser_"+c(h.id)).length){if(i=e('<div id="colchooser_'+h.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),a=e("select",i),t=e.extend({width:400,height:240,classname:null,done:function(e){e&&p.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(t){var r={};return r[t.bSubmit]=function(){t.apply_perm(),t.cleanup(!1)},r[t.bCancel]=function(){t.cleanup(!0)},e.extend(!0,{buttons:r,close:function(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+70,resize:function(){var e=b(a),t=e.container.closest(".ui-dialog-content");t.length>0&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},t.dialog_opts||{})},apply_perm:function(){var r,i,o=new Array(h.colModel.length),l={notSkipFrozen:void 0!==t.notSkipFrozen&&t.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(r=0;r<h.colModel.length;r++)o[r]=h.iColByName[d.newColOrder[r]];if(e("option",a).each(function(){e(this).is(":selected")?p.jqGrid("showCol",g[this.value].name,l):p.jqGrid("hideCol",g[this.value].name,l)}),t.done&&t.done.call(p,o),h.groupHeader&&("object"==typeof h.groupHeader||e.isFunction(h.groupHeader)))if(p.jqGrid("destroyGroupHeader",!1),h.groupHeader.groupHeaders=d.gh,null!=h.pivotOptions&&null!=h.pivotOptions.colHeaders&&h.pivotOptions.colHeaders.length>1)for(i=h.pivotOptions.colHeaders,r=0;r<i.length;r++)i[r]&&i[r].groupHeaders.length&&p.jqGrid("setGroupHeaders",i[r]);else p.jqGrid("setGroupHeaders",h.groupHeader);var n=h.autowidth||void 0!==h.widthOrg&&"auto"!==h.widthOrg&&"100%"!==h.widthOrg?h.width:h.tblwidth;n!==h.width&&p.jqGrid("setGridWidth",n,h.shrinkToFit)},cleanup:function(e){r(t.dlog,i,"destroy"),r(t.msel,a,"destroy"),i.remove(),e&&t.done&&t.done.call(p)},msel_opts:{}},p.jqGrid("getGridRes","col"),o.col,t||{}),e.ui&&A&&A.defaults){if(!o._multiselect)return void(null!=o.defaults&&e.isFunction(o.defaults.fatalError)?o.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");t.msel_opts=e.extend(A.defaults,t.msel_opts)}t.caption&&i.attr("title",t.caption),t.classname&&(i.addClass(t.classname),a.addClass(t.classname)),t.width&&(e(">div",i).css({width:t.width,margin:"0 auto"}),a.css("width",t.width)),t.height&&(e(">div",i).css("height",t.height),a.css("height",t.height-10)),a.empty();var w,y,x,C,j=null!=h.groupHeader?h.groupHeader.groupHeaders:0,D={};if(j)for(w=0;w<j.length;w++)for(C=j[w],y=0;y<C.numberOfColumns;y++)x=h.iColByName[C.startColumnName]+y,D[x]=e.isFunction(t.buildItemText)?t.buildItemText.call(p[0],{iCol:x,cm:g[x],cmName:g[x].name,colName:v[x],groupTitleText:C.titleText}):e.jgrid.stripHtml(C.titleText)+": "+e.jgrid.stripHtml(""===v[x]?g[x].name:v[x]);for(x=0;x<m;x++)void 0===D[x]&&(D[x]=e.isFunction(t.buildItemText)?t.buildItemText.call(p[0],{iCol:x,cm:g[x],cmName:g[x].name,colName:v[x],groupTitleText:null}):e.jgrid.stripHtml(v[x]));if(e.each(g,function(e){this.hidedlg||a.append("<option value='"+e+"'"+(h.headertitles||this.headerTitle?" title='"+o.stripHtml("string"==typeof this.headerTitle?this.headerTitle:D[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+D[e]+"</option>")}),l=e.isFunction(t.dlog_opts)?t.dlog_opts.call(p,t):t.dlog_opts,r(t.dlog,i,l),n=e.isFunction(t.msel_opts)?t.msel_opts.call(p,t):t.msel_opts,r(t.msel,a,n),(s=e("#colchooser_"+c(h.id))).css({margin:"auto"}),s.find(">div").css({width:"100%",height:"100%",margin:"auto"}),d=b(a)){if(d.grid=f,j){d.gh=e.extend(!0,[],j),d.inGroup=new Array(h.colModel.length);var q,R;for(q=0;q<j.length;q++)for(R=j[q],x=0;x<R.numberOfColumns;x++)d.inGroup[h.iColByName[R.startColumnName]+x]=q}d.newColOrder=e.map(g,function(e){return e.name}),d.container.css({width:"100%",height:"100%",margin:"auto"}),d.selectedContainer.css({width:100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.availableContainer.css({width:100-100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.selectedList.css("height","auto"),d.availableList.css("height","auto"),u=Math.max(d.selectedList.height(),d.availableList.height()),u=Math.min(u,e(window).height()),d.selectedList.css("height",u),d.availableList.css("height",u),null!=d.options&&d.options.sortable&&d.selectedList.on("sortupdate",function(r,i){B.call(d,parseInt(i.item.data("optionLink").val(),10)),i.item.css({width:"",height:""}),e.isFunction(t.sortUpdate)&&t.sortUpdate.call(f,r,i)}),e.isFunction(t.init)&&t.init.call(f,d)}}},sortableRows:function(t){return this.each(function(){var r=this,i=r.grid,a=r.p;i&&(a.treeGrid||e.fn.sortable&&((t=e.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},t||{})).start&&e.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&e.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(o,l){if(e(l.item).css("border-width","0"),e("td",l.item).each(function(e){void 0!=r.grid.cols[e]&&(this.style.width=i.cols[e].style.width)}),a.subGrid){var n=e(l.item).attr("id");try{e(r).jqGrid("collapseSubGridRow",n)}catch(e){}}t._start_&&t._start_.apply(this,[o,l])},t.update=function(i,o){e(o.item).css("border-width",""),!0===a.rownumbers&&e("td.jqgrid-rownum",r.rows).each(function(t){e(this).html(t+1+(parseInt(a.page,10)-1)*parseInt(a.rowNum,10))}),t._update_&&t._update_.apply(this,[i,o])},e(r).sortable(t)))})},gridDnD:function(t){return this.each(function(){function r(){var t=e.data(o,"dnd");e("tr.jqgrow:not(.ui-draggable)",o).draggable(e.isFunction(t.drag)?t.drag.call(e(o),t):t.drag)}var i,a,o=this;if(o.grid&&!o.p.treeGrid&&e.fn.draggable&&e.fn.droppable)if(void 0===e("#jqgrid_dnd")[0]&&e("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"!=typeof t||"updateDnD"!==t||!0!==o.p.jqgdnd){if((t=e.extend({drag:function(t){return e.extend({start:function(r,i){var a,l;if(o.p.subGrid){l=e(i.helper).attr("id");try{e(o).jqGrid("collapseSubGridRow",l)}catch(e){}}for(a=0;a<e.data(o,"dnd").connectWith.length;a++)0===e(e.data(o,"dnd").connectWith[a]).jqGrid("getGridParam","reccount")&&e(e.data(o,"dnd").connectWith[a]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),e("td",i.helper).each(function(e){this.style.width=o.grid.headers[e].width+"px"}),t.onstart&&e.isFunction(t.onstart)&&t.onstart.call(e(o),r,i)},stop:function(r,i){var a,l;for(i.helper.dropped&&!t.dragcopy&&(void 0===(l=e(i.helper).attr("id"))&&(l=e(this).attr("id")),e(o).jqGrid("delRowData",l)),a=0;a<e.data(o,"dnd").connectWith.length;a++)e(e.data(o,"dnd").connectWith[a]).jqGrid("delRowData","jqg_empty_row");t.onstop&&e.isFunction(t.onstop)&&t.onstop.call(e(o),r,i)}},t.drag_opts||{})},drop:function(t){return e.extend({accept:function(t){if(!e(t).hasClass("jqgrow"))return t;var r=e(t).closest("table.ui-jqgrid-btable");if(r.length>0&&void 0!==e.data(r[0],"dnd")){var i=e.data(r[0],"dnd").connectWith;return-1!==e.inArray("#"+c(this.id),i)}return!1},drop:function(r,i){if(e(i.draggable).hasClass("jqgrow")){var a=e(i.draggable).attr("id"),l=i.draggable.parent().parent().jqGrid("getRowData",a);if(!t.dropbyname){var n,s,d=0,u={},p=e("#"+c(this.id)).jqGrid("getGridParam","colModel");try{for(s in l)l.hasOwnProperty(s)&&("cb"!==(n=p[d].name)&&"rn"!==n&&"subgrid"!==n&&l.hasOwnProperty(s)&&p[d]&&(u[n]=l[s]),d++);l=u}catch(e){}}if(i.helper.dropped=!0,t.beforedrop&&e.isFunction(t.beforedrop)){var f=t.beforedrop.call(this,r,i,l,e("#"+c(o.p.id)),e(this));void 0!==f&&null!==f&&"object"==typeof f&&(l=f)}if(i.helper.dropped){var h;t.autoid&&(e.isFunction(t.autoid)?h=t.autoid.call(this,l):(h=Math.ceil(1e3*Math.random()),h=t.autoidprefix+h)),e("#"+c(this.id)).jqGrid("addRowData",h,l,t.droppos),l[o.p.localReader.id]=h}t.ondrop&&e.isFunction(t.ondrop)&&t.ondrop.call(this,r,i,l)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{})).connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=e.map(t.connectWith,function(t){return e.trim(t)}),e.data(o,"dnd",t),0===o.p.reccount||o.p.jqgdnd||r(),o.p.jqgdnd=!0,i=0;i<t.connectWith.length;i++)a=t.connectWith[i],e(a).droppable(e.isFunction(t.drop)?t.drop.call(e(o),t):t.drop)}else r()})},gridResize:function(t){return this.each(function(){var r,i=this,a=i.grid,o=i.p,l=o.gView+">.ui-jqgrid-bdiv",n=!1,s=o.height;if(a&&e.fn.resizable){if(t=e.extend({},t||{}),t.alsoResize?(t._alsoResize_=t.alsoResize,delete t.alsoResize):t._alsoResize_=!1,t.stop&&e.isFunction(t.stop)?(t._stop_=t.stop,delete t.stop):t._stop_=!1,t.stop=function(d,c){e(i).jqGrid("setGridWidth",c.size.width,t.shrinkToFit),e(o.gView+">.ui-jqgrid-titlebar").css("width",""),n?(e(r).each(function(){e(this).css("height","")}),"auto"!==s&&"100%"!==s||e(a.bDiv).css("height",s)):e(i).jqGrid("setGridParam",{height:e(l).height()}),i.fixScrollOffsetAndhBoxPadding&&i.fixScrollOffsetAndhBoxPadding(),t._stop_&&t._stop_.call(i,d,c)},r=l,"auto"!==s&&"100%"!==s||void 0!==t.handles||(t.handles="e,w"),t.handles){var d=e.map(String(t.handles).split(","),function(t){return e.trim(t)});2===d.length&&("e"===d[0]&&"w"===d[1]||"e"===d[1]&&"w"===d[1])&&(r=o.gView+">div:not(.frozen-div)",n=!0,o.pager&&(r+=","+o.pager))}t._alsoResize_?t.alsoResize=r+","+t._alsoResize_:t.alsoResize=r,delete t._alsoResize_,e(o.gBox).resizable(t)}})}}),r.prototype.calc=function(t,r,i,a,o){var l=this;if(void 0!==t)switch(l.result=l.result||0,t=parseFloat(t),l.aggregator){case"sum":l.result+=t;break;case"count":l.result++;break;case"avg":l.finilized?(l.count=l.count||0,l.result=(l.result*l.count+t)/(l.count+1),l.count++):(l.result+=t,l.count=l.count||0,l.count++);break;case"min":l.result=Math.min(l.result,t);break;case"max":l.result=Math.max(l.result,t);break;default:e.isFunction(l.aggregator)&&(l.result=l.aggregator.call(l.context,{previousResult:l.result,value:t,fieldName:r,item:i,iItem:a,items:o}))}},r.prototype.getResult=function(e,t,r){var i=this;(void 0!==i.result||r)&&(r&&void 0!==i.result&&(i.result=0,i.count=0),void 0===i.result||i.finilized||"avg"!==i.aggregator||(i.result=i.result/i.count,i.finilized=!0),e[t]=i.result)},i.prototype.compareVectorsEx=function(e,t){var r,i,a=this,o=a.fieldLength;for(r=0;r<o;r++)if(0!==(i=a.fieldCompare[r](e[r],t[r])))return{index:r,result:i};return{index:-1,result:0}},i.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},i.prototype.compareVectors=function(e,t){var r=this.compareVectorsEx(e,t);return(r.index>=0?this.fieldSortDirection[r.index]:1)>0?r.result:-r.result},i.prototype.getItem=function(e){return this.items[e]},i.prototype.getIndexLength=function(){return this.items.length},i.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},i.prototype.createDataIndex=function(t){var r,i,a,o,l,n,s,d,c,u=this,p=t.length,f=u.fieldLength,h=u.fieldNames,g=u.indexesOfSourceData,m=u.items;for(r=0;r<p;r++){for(s=t[r],i=new Array(f),o=0;o<f;o++)void 0!==(a=s[h[o]])&&("string"==typeof a&&u.trimByCollect&&(a=e.trim(a)),i[o]=a);if(d=0,(c=m.length-1)<0)m.push(i),g.push([r]);else if(0!==(l=u.compareVectors(i,m[c])))if(1===l||u.skipSort)m.push(i),g.push([r]);else if(1!==(l=u.compareVectors(m[0],i)))if(0!==l)for(;;){if(c-d<2){m.splice(c,0,i),g.splice(c,0,[r]);break}if(n=Math.floor((d+c)/2),0===(l=u.compareVectors(m[n],i))){g[n].push(r);break}1===l?c=n:d=n}else g[0].push(r);else m.unshift(i),g.unshift([r]);else g[c].push(r)}},o.extend({pivotSetup:function(t,a){var l,n,s,d,c,u,p,f,h,g,m,v,b,w,y,x,C,j,D,q,R,S,_,I,F,G,k,O,N,T=this[0],E=e.isArray,A={},B={groupField:[],groupSummary:[],groupSummaryPos:[]},M={grouping:!0,groupingView:B},z=e.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:t},a||{}),P=t.length,L=z.xDimension,V=z.yDimension,H=z.aggregates,W=z.totalText||z.totals||z.rowTotals||z.totalHeader,U=E(L)?L.length:0,Y=E(V)?V.length:0,X=E(H)?H.length:0,Q=Y-(1===X?1:0),J=[],Z=[],$=[],K=[],ee=["pivotInfos"],te=new Array(X),re=new Array(Y),ie=function(r,a,o){var l=new i(z.trimByCollect,z.caseSensitive,a,r);return e.isFunction(o)&&(l.compareVectorsEx=o),l.createDataIndex(t),l},ae=function(t,r,i,a,l){var n,s,d;switch(t){case 1:n=V[a].totalText||"{0} {1} {2}",s="y"+l+"t"+a;break;case 2:n=z.totalText||"{0}",s="t";break;default:n=X>1?r.label||"{0}":e.isFunction(V[a].label)?V[a].label:O.getItem(l)[a],s="y"+l}return d=e.extend({},r,{name:s+(X>1?"a"+i:""),label:e.isFunction(n)?n.call(T,2===t?{aggregate:r,iAggregate:i,pivotOptions:z}:1===t?{yIndex:O.getItem(l),aggregate:r,iAggregate:i,yLevel:a,pivotOptions:z}:{yData:O.getItem(l)[a],yIndex:O.getItem(l),yLevel:a,pivotOptions:z}):o.template.apply(T,2===t?[String(n),r.aggregator,r.member,i]:[String(n),r.aggregator,r.member,O.getItem(l)[a],a])}),delete d.member,delete d.aggregator,d},oe=function(e,t,r){var i,a;for(i=0;i<X;i++)void 0===(a=H[i]).template&&void 0===a.formatter&&z.defaultFormatting&&(a.template="count"===a.aggregator?"integer":"number"),$.push(ae(e,a,i,t,r))},le=function(t,r,i){var a,l,n,s;for(a=Q-1;a>=r;a--)if(Z[a]){for(l=0;l<=a;l++)(F=J[l].groupHeaders)[F.length-1].numberOfColumns+=X;for(n=(c=V[a]).totalHeader,s=c.headerOnTop,l=a+1;l<=Q-1;l++)J[l].groupHeaders.push({titleText:s&&l===a+1||!s&&l===Q-1?e.isFunction(n)?n.call(T,i,a):o.template.call(T,String(n||""),i[a],a):"",startColumnName:"y"+(t-1)+"t"+a+(1===X?"":"a0"),numberOfColumns:X})}},ne=function(e){var t=new r("count"===H[e].aggregator?"sum":H[e].aggregator,T,a);return t.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},t},se=function(e,t,r,i){var a,o,l,n=O.getIndexOfDifferences(t,r);if(null!==r)for(n=Math.max(n,0),a=Q-1;a>=n;a--)o="y"+e+"t"+a+(X>1?"a"+i:""),Z[a]&&void 0===_[o]&&((l=re[a][i]).getResult(_,o),_.pivotInfos[o]={colType:1,iA:i,a:H[i],level:a,iRows:l.groupInfo.iRows,rows:l.groupInfo.rows,ys:l.groupInfo.ys,iYs:l.groupInfo.iYs},t!==r&&(re[a][i]=ne(i)))};if(0===U||0===X)throw"xDimension or aggregates options are not set!";for(k=ie(L,z.skipSortByX,z.compareVectorsByX),O=ie(V,z.skipSortByY,z.compareVectorsByY),a.xIndex=k,a.yIndex=O,n=0;n<U;n++)u={name:"x"+n,label:null!=(d=L[n]).label?e.isFunction(d.label)?d.label.call(T,d,n,z):d.label:d.dataName,frozen:z.frozenStaticCols},n<U-1&&!d.skipGrouping&&!d.additionalProperty&&(B.groupField.push(u.name),B.groupSummary.push(z.groupSummary),B.groupSummaryPos.push(z.groupSummaryPos)),delete(u=e.extend(u,d)).dataName,delete u.footerText,d.additionalProperty?ee.push(u.name):($.push(u),M.sortname=u.name);for(U<2&&(M.grouping=!1),B.hideFirstGroupCol=!0,n=0;n<Y;n++)c=V[n],Z.push(!!(c.totals||c.rowTotals||c.totalText||c.totalHeader));for(I=O.getItem(0),oe(0,Y-1,0),N=O.getIndexLength(),j=1;j<N;j++){for(D=O.getItem(j),n=O.getIndexOfDifferences(D,I),s=Q-1;s>=n;s--)Z[s]&&oe(1,s,j-1);I=D,oe(0,Y-1,j)}for(n=Q-1;n>=0;n--)Z[n]&&oe(1,n,N-1);for(W&&oe(2),I=O.getItem(0),s=0;s<Q;s++)J.push({useColSpanStyle:z.useColSpanStyle,groupHeaders:[{titleText:e.isFunction(V[s].label)?V[s].label.call(T,{yData:I[s],yIndex:I,yLevel:s,pivotOptions:z}):I[s],startColumnName:1===X?"y0":"y0a0",numberOfColumns:X}]});for(j=1;j<N;j++){for(D=O.getItem(j),le(j,n=O.getIndexOfDifferences(D,I),I),s=Q-1;s>=n;s--)J[s].groupHeaders.push({titleText:e.isFunction(V[s].label)?V[s].label.call(T,{yData:D[s],yIndex:D,yLevel:s,pivotOptions:z}):D[s],startColumnName:"y"+j+(1===X?"":"a0"),numberOfColumns:X});for(s=0;s<n;s++)(F=J[s].groupHeaders)[F.length-1].numberOfColumns+=X;I=D}if(le(N,0,I),W)for(n=0;n<Q;n++)J[n].groupHeaders.push({titleText:n<Q-1?"":z.totalHeader||"",startColumnName:"t"+(1===X?"":"a0"),numberOfColumns:X});for(x=k.getIndexLength(),h=0;h<x;h++){for(g=k.getItem(h),_={pivotInfos:m={iX:h,x:g}},n=0;n<U;n++)_["x"+n]=g[n];if(C=k.getIndexesOfSourceData(h),W)for(s=0;s<X;s++)te[s]=ne(s);for(I=null,function(){var e,t;for(e=Q-1;e>=0;e--)if(Z[e])for(null==re[e]&&(re[e]=new Array(X)),t=0;t<X;t++)re[e][t]=ne(t)}(),j=0;j<N;j++){for(D=O.getItem(j),q=O.getIndexesOfSourceData(j),s=0;s<X;s++){for(null!==I&&se(j-1,D,I,s),R=[],n=0;n<q.length;n++)G=q[n],e.inArray(G,C)>=0&&R.push(G);if(R.length>0){for(v=new Array(R.length),b=new r((S=H[s]).aggregator,T,a),p=0;p<R.length;p++)n=R[p],l=t[n],v[p]=l,b.calc(l[S.member],S.member,l,n,t),W&&((w=te[s]).calc(l[S.member],S.member,l,n,t),y=w.groupInfo,e.inArray(n,y.iYs)<0&&(y.iYs.push(j),y.ys.push(D)),e.inArray(n,y.iRows)<0&&(y.iRows.push(n),y.rows.push(l))),function(r,i,a,o,l,n,s){var d,c,u;if(r!==i)for(d=Q-1;d>=0;d--)Z[d]&&((c=re[d][o]).calc(l[a.member],a.member,l,n,t),u=c.groupInfo,e.inArray(s,u.iYs)<0&&(u.iYs.push(s),u.ys.push(r)),e.inArray(n,u.iRows)<0&&(u.iRows.push(n),u.rows.push(l)))}(D,I,S,s,l,n,j);f="y"+j+(1===X?"":"a"+s),b.getResult(_,f),m[f]={colType:0,iY:j,y:D,iA:s,a:S,iRows:R,rows:v}}}I=D}if(null!==I)for(s=0;s<X;s++)se(N-1,I,I,s);if(W)for(s=0;s<X;s++)f="t"+(1===X?"":"a"+s),(w=te[s]).getResult(_,f),y=w.groupInfo,m[f]={colType:2,iA:s,a:H[s],iRows:y.iRows,rows:y.rows,iYs:y.iYs,ys:y.ys};K.push(_)}if(z.footerTotals||z.colTotals){for(P=K.length,n=0;n<U;n++)A["x"+n]=L[n].footerText||"";for(n=U;n<$.length;n++){for(f=$[n].name,b=new r(z.footerAggregator||"sum",T,a),p=0;p<P;p++)_=K[p],b.calc(_[f],f,_,p,K);b.getResult(A,f)}}return a.colHeaders=J,{colModel:$,additionalProperties:ee,options:a,rows:K,groupOptions:M,groupHeaders:J,summary:A}},jqPivot:function(t,r,i,a){return this.each(function(){function l(){var a,l=d.pivotSetup.call(s,t,r),c=l.groupHeaders,u=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(l.summary)>0,p=l.groupOptions.groupingView,f=o.from.call(n,l.rows);if(!r.skipSortByX)for(a=0;a<p.groupField.length;a++)f.orderBy(p.groupField[a],null!=i&&i.groupingView&&null!=i.groupingView.groupOrder&&"desc"===i.groupingView.groupOrder[a]?"d":"a","text","");if(r.data=t,d.call(s,e.extend(!0,{datastr:e.extend(f.select(),u?{userdata:l.summary}:{}),datatype:"jsonstring",footerrow:u,userDataOnFooter:u,colModel:l.colModel,additionalProperties:l.additionalProperties,pivotOptions:l.options,viewrecords:!0,sortname:r.xDimension[0].dataName},l.groupOptions,i||{})),c.length)for(a=0;a<c.length;a++)c[a]&&c[a].groupHeaders.length&&d.setGroupHeaders.call(s,c[a]);r.frozenStaticCols&&d.setFrozenColumns.call(s)}var n=this,s=e(n),d=e.fn.jqGrid;"string"==typeof t?e.ajax(e.extend({url:t,dataType:"json",success:function(e){t=o.getAccessor(e,a&&a.reader?a.reader:"rows"),l()}},a||{})):l()})}});var z=function(){var t=e.makeArray(arguments);return t[0]="subGrid"+t[0].charAt(0).toUpperCase()+t[0].substring(1),t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)},P=function(t,r){return this.each(function(){if(this.grid&&null!=t&&!0===this.p.subGrid){var i=e(this).jqGrid("getInd",t,!0);e(i).find(">td."+r).trigger("click")}})};o.extend({setSubGrid:function(){return this.each(function(){var t,r=this.p,i=e(this),a=r.subGridModel[0],l=function(e){return i.jqGrid("getIconRes",e)};if(r.subGridOptions=e.extend({commonIconClass:l("subgrid.common"),plusicon:l("subgrid.plus"),minusicon:l("subgrid.minus"),openicon:l("rtl"===r.direction?"subgrid.openRtl":"subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},r.subGridOptions||{}),r.colNames.unshift(""),r.colModel.unshift({name:"subgrid",width:o.cell_width?r.subGridWidth+r.cellLayout:r.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),a)for(a.align=e.extend([],a.align||[]),t=0;t<a.name.length;t++)a.align[t]=a.align[t]||"left"})},addSubGridCell:function(t,r,i,a){var l=this[0],n=l.p.subGridOptions,s=!e.isFunction(n.hasSubgrid)||n.hasSubgrid.call(l,{rowid:i,iRow:r,iCol:t,data:a});return null==l.p?"":"<td role='gridcell' class='"+D.getGuiStyles.call(this,"subgrid.tdStart",s?"ui-sgcollapsed sgcollapsed":"")+"' "+l.formatCol(t,r)+">"+(s?"<div class='"+D.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+o.mergeCssClasses(n.commonIconClass,n.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(t,r){return this.each(function(){var i,a,l,n=this,s=n.p,d=s.subGridModel[0],u=function(e,t){return D.getGuiStyles.call(n,"subgrid."+e,t||"")},p=u("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+s.direction),f=u("rowSubTable","ui-subtblcell"),h=u("row","ui-subgrid ui-row-"+s.direction),g=u("tdWithIcon","subgrid-cell"),m=u("tdData","subgrid-data"),v=function(t,r,i){var a=d.align[i],o=e("<td"+(a?" style='text-align:"+a+";'":"")+"></td>").html(r);t.append(o)},b=function(t,r){var i=s.xmlReader.subgrid;e(i.root+" "+i.row,t).each(function(){var t,a,o=e("<tr class='"+f+"'></tr>");if(!0===i.repeatitems)e(i.cell,this).each(function(t){v(o,e(this).text()||"&#160;",t)});else if(t=d.mapping||d.name)for(a=0;a<t.length;a++)v(o,e(t[a],this).text()||"&#160;",a);r.append(o)})},w=function(t,r){var i,a,l,n,c,u=s.jsonReader.subgrid,p=o.getAccessor(t,u.root);if(null!=p)for(a=0;a<p.length;a++){if(c=p[a],i=e("<tr class='"+f+"'></tr>"),!0===u.repeatitems)for(u.cell&&(c=c[u.cell]),l=0;l<c.length;l++)v(i,c[l]||"&#160;",l);else if((n=d.mapping||d.name).length)for(l=0;l<n.length;l++)v(i,c[n[l]]||"&#160;",l);r.append(i)}},y=function(t,r,i){var a,o,l=u("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===s.altRows&&e(n).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),f=e("<table"+(l?" style='width:1px' role='presentation' class='"+l+"'":"")+"><thead></thead><tbody></tbody></table>"),h=e("<tr></tr>");for(n.grid.endReq.call(n),o=0;o<d.name.length;o++)a=e("<th class='"+p+"'></th>").html(d.name[o]).width(d.width[o]),h.append(a);return h.appendTo(f[0].tHead),i(t,e(f[0].tBodies[0])),e("#"+c(s.id+"_"+r)).append(f),!1},x=function(t){var r,i,a=e(t).attr("id"),l={nd_:(new Date).getTime()};if(l[s.prmNames.subgridid]=a,!d)return!1;if(d.params)for(i=0;i<d.params.length;i++)void 0!==(r=s.iColByName[d.params[i]])&&(l[s.colModel[r].name]=e(t.cells[r]).text().replace(/\&#160\;/gi,""));if(!n.grid.hDiv.loading)switch(n.grid.beginReq.call(n),s.subgridtype||(s.subgridtype=s.datatype),e.isFunction(s.subgridtype)?s.subgridtype.call(n,l):s.subgridtype=s.subgridtype.toLowerCase(),s.subgridtype){case"xml":case"json":e.ajax(e.extend({type:s.mtype,url:e.isFunction(s.subGridUrl)?s.subGridUrl.call(n,l):s.subGridUrl,dataType:s.subgridtype,context:a,data:o.serializeFeedback.call(n,s.serializeSubGridData,"jqGridSerializeSubGridData",l),success:function(e){y(e,this,"xml"===s.subgridtype?b:w)},error:function(t,r,i){var a=void 0===s.loadSubgridError?s.loadError:s.loadSubgridError;n.grid.endReq.call(n),e.isFunction(a)&&a.call(n,t,r,i),s.subGridOptions.noEmptySubgridOnError||y(null,this,"xml"===s.subgridtype?b:w)}},o.ajaxOptions,s.ajaxSubgridOptions||{}))}return!1},C=1;if(n.grid){for(i=n.rows.length,void 0!==r&&r>0&&(C=r,i=r+1);C<i;)a=n.rows[C],e(a).hasClass("jqgrow")&&(l=e(a.cells[t])).hasClass("ui-sgcollapsed")&&(s.scroll&&l.off("click"),l.on("click",function(){var r,i=e(this).parent("tr")[0],a=i.nextSibling,l=i.id,d=s.id+"_"+l,c=function(e){return o.mergeCssClasses(s.subGridOptions.commonIconClass,s.subGridOptions[e])},u=1;if(e.each(s.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||u++}),e(this).hasClass("sgcollapsed")){if(!0===s.subGridOptions.reloadOnExpand||!1===s.subGridOptions.reloadOnExpand&&!e(a).hasClass("ui-subgrid")){if(r=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",!z.call(n,"beforeExpand",d,l))return;e(i).after("<tr role='row' class='"+h+"'>"+r+"<td class='"+g+"'><span class='"+c("openicon")+"'></span></td><td colspan='"+parseInt(s.colNames.length-u,10)+"' class='"+m+"'><div id='"+d+"' class='tablediv'></div></td></tr>"),e(n).triggerHandler("jqGridSubGridRowExpanded",[d,l]),e.isFunction(s.subGridRowExpanded)?s.subGridRowExpanded.call(n,d,l):x(i)}else e(a).show();e(this).html("<div class='"+D.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+c("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),s.subGridOptions.selectOnExpand&&e(n).jqGrid("setSelection",l)}else if(e(this).hasClass("sgexpanded")){if(!z.call(n,"beforeCollapse",d,l))return;!0===s.subGridOptions.reloadOnExpand?e(a).remove(".ui-subgrid"):e(a).hasClass("ui-subgrid")&&e(a).hide(),e(this).html("<div class='"+D.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+c("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),s.subGridOptions.selectOnCollapse&&e(n).jqGrid("setSelection",l)}return!1})),C++;!0===s.subGridOptions.expandOnLoad&&e(n.rows).filter(".jqgrow").each(function(t,r){e(r.cells[0]).click()}),n.subGridXml=function(e,t){return y(e,t,b)},n.subGridJson=function(e,t){return y(e,t,w)}}})},expandSubGridRow:function(e){return P.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return P.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return P.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(t,r){e(t).each(function(){var t,i,a,o,l,n,s,d,c=this,u=e(this),p=[],f=[],h=[],g=[],m=[];if(!c.grid){for(u.width("99%"),t=u.width(),i=e("tr td:first-child input[type=checkbox]:first",u),a=e("tr td:first-child input[type=radio]:first",u),l=!(o=i.length>0)&&a.length>0,n=o||l,e("th",u).each(function(){0===p.length&&n?(p.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),f.push("__selection__")):(p.push({name:e(this).attr("id")||e.trim(e.jgrid.stripHtml(e(this).html())).split(" ").join("_"),index:e(this).attr("id")||e.trim(e.jgrid.stripHtml(e(this).html())).split(" ").join("_"),width:e(this).width()||150}),f.push(e(this).html()))}),e("tbody > tr",u).each(function(){var t={},r=0;e("td",e(this)).each(function(){if(0===r&&n){var i=e("input",e(this)),a=i.attr("value");g.push(a||h.length),i.is(":checked")&&m.push(a),t[p[r].name]=i.attr("value")}else t[p[r].name]=e(this).html();r++}),r>0&&h.push(t)}),u.empty(),u.jqGrid(e.extend({datatype:"local",width:t,colNames:f,colModel:p,multiselect:o},r||{})),s=0;s<h.length;s++)d=null,g.length>0&&(d=g[s])&&d.replace&&(d=encodeURIComponent(d).replace(/[.\-%]/g,"_")),null===d&&(d=e.jgrid.randId()),u.jqGrid("addRowData",d,h[s]);for(s=0;s<m.length;s++)u.jqGrid("setSelection",m[s])}})};var L=function(){var t=e.makeArray(arguments);return t[0]="treeGrid"+t[0].charAt(0).toUpperCase()+t[0].substring(1),t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)},V=function(e,t){var r=t[e.treeReader.icon_field],i=e.treeIcons,a=i.plus+" tree-plus",o=i.minus+" tree-minus";return r&&"string"==typeof r&&2===(r=r.split(",")).length&&(o=r[0],a=r[1]),{expanded:o,collapsed:a,common:i.commonIconClass}};o.extend({setTreeNode:function(){return this.each(function(){var t=this,r=e(t),i=t.p;if(t.grid&&i.treeGrid){var a=i.treeReader.expanded_field,o=i.treeReader.leaf_field;r.off("jqGridBeforeSelectRow.setTreeNode"),r.on("jqGridBeforeSelectRow.setTreeNode",function(t,l,n){if(null!=n){var s=e(n.target),d=s.closest("tr.jqgrow>td"),c=d.parent(),u=function(){var e=i.data[i._index[h(i.idPrefix,l)]],t=e[a]?"collapse":"expand";e[o]||(D[t+"Row"].call(r,e,c),D[t+"Node"].call(r,e,c))};return s.is("div.treeclick")?u():i.ExpandColClick&&d.length>0&&s.closest("span.cell-wrapper",d).length>0&&u(),!0}})}})},setTreeGrid:function(){return this.each(function(){var t,r,i,a=this,o=a.p,l=[],n=["leaf_field","expanded_field","loaded"];if(o.treeGrid){o.treedatatype||e.extend(a.p,{treedatatype:o.datatype}),o.subGrid=!1,o.altRows=!1,o.pgbuttons=!1,o.pginput=!1,o.gridview=!0,null===o.rowTotal&&(o.rowNum=o.maxRowNum),o.rowList=[],o.treeIcons.plus="rtl"===o.direction?o.treeIcons.plusRtl:o.treeIcons.plusLtr,"nested"===o.treeGridModel?o.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.treeReader):"adjacency"===o.treeGridModel&&(o.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.treeReader));for(r in o.colModel)if(o.colModel.hasOwnProperty(r)){t=o.colModel[r].name;for(i in o.treeReader)o.treeReader.hasOwnProperty(i)&&o.treeReader[i]===t&&l.push(t)}e.each(o.treeReader,function(t){var r=String(this);r&&-1===e.inArray(r,l)&&(e.inArray(t,n)>=0?o.additionalProperties.push({name:r,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):o.additionalProperties.push(r))})}})},expandRow:function(t){this.each(function(){var r=this,i=e(r),a=r.p;if(r.grid&&a.treeGrid){var o=a.treeReader.expanded_field,l=t[a.localReader.id];if(L.call(r,"beforeExpandRow",{rowid:l,item:t})){var n=D.getNodeChildren.call(i,t);e(n).each(function(){var t=a.idPrefix+m(this,a.localReader.id);e(D.getGridRowById.call(i,t)).css("display",""),this[o]&&D.expandRow.call(i,this)}),L.call(r,"afterExpandRow",{rowid:l,item:t})}}})},collapseRow:function(t){this.each(function(){var r=this,i=e(r),a=r.p;if(r.grid&&a.treeGrid){var o=a.treeReader.expanded_field,l=t[a.localReader.id];if(L.call(r,"beforeCollapseRow",{rowid:l,item:t})){var n=D.getNodeChildren.call(i,t);e(n).each(function(){var t=a.idPrefix+m(this,a.localReader.id);e(D.getGridRowById.call(i,t)).css("display","none"),this[o]&&D.collapseRow.call(i,this)}),L.call(r,"afterCollapseRow",{rowid:l,item:t})}}})},getRootNodes:function(){var t=[];return this.each(function(){var r=this,i=r.p;if(r.grid&&i.treeGrid)switch(i.treeGridModel){case"nested":var a=i.treeReader.level_field;e(i.data).each(function(){parseInt(this[a],10)===parseInt(i.tree_root_level,10)&&t.push(this)});break;case"adjacency":var o=i.treeReader.parent_id_field;e(i.data).each(function(){null!==this[o]&&"null"!==String(this[o]).toLowerCase()||t.push(this)})}}),t},getNodeDepth:function(t){var r=null;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid)switch(a.treeGridModel){case"nested":var o=a.treeReader.level_field;r=parseInt(t[o],10)-parseInt(a.tree_root_level,10);break;case"adjacency":r=D.getNodeAncestors.call(e(i),t).length}}),r},getNodeParent:function(t){var r=this[0];if(!r||!r.grid||null==r.p||!r.p.treeGrid||null==t)return null;var i=r.p,a=i.treeReader,o=t[a.parent_id_field];if("nested"===i.treeGridModel){var l=null,n=a.left_field,s=a.right_field,d=a.level_field,c=parseInt(t[n],10),u=parseInt(t[s],10),p=parseInt(t[d],10);return e(i.data).each(function(){if(parseInt(this[d],10)===p-1&&parseInt(this[n],10)<c&&parseInt(this[s],10)>u)return l=this,!1}),l}if(null===o||"null"===o)return null;var f=i._index[o];return void 0!==f?i.data[f]:null},getNodeChildren:function(t){var r=[];return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid)switch(a.treeGridModel){case"nested":var o=a.treeReader.left_field,l=a.treeReader.right_field,n=a.treeReader.level_field,s=parseInt(t[o],10),d=parseInt(t[l],10),c=parseInt(t[n],10);e(a.data).each(function(){parseInt(this[n],10)===c+1&&parseInt(this[o],10)>s&&parseInt(this[l],10)<d&&r.push(this)});break;case"adjacency":var u=a.treeReader.parent_id_field,p=a.localReader.id;e(a.data).each(function(){String(this[u])===String(t[p])&&r.push(this)})}}),r},getFullTreeNode:function(t){var r=[];return this.each(function(){var i,a=this,o=a.p;if(a.grid&&o.treeGrid)switch(o.treeGridModel){case"nested":var l=o.treeReader.left_field,n=o.treeReader.right_field,s=o.treeReader.level_field,d=parseInt(t[l],10),c=parseInt(t[n],10),u=parseInt(t[s],10);e(o.data).each(function(){parseInt(this[s],10)>=u&&parseInt(this[l],10)>=d&&parseInt(this[l],10)<=c&&r.push(this)});break;case"adjacency":if(t){r.push(t);var p=o.treeReader.parent_id_field,f=o.localReader.id;e(o.data).each(function(){var e;for(i=r.length,e=0;e<i;e++)if(String(r[e][f])===String(this[p])){r.push(this);break}})}}}),r},getNodeAncestors:function(t){var r=[];return this.each(function(){var i=this,a=e(i),o=D.getNodeParent;if(i.grid&&i.p.treeGrid)for(var l=o.call(a,t);l;)r.push(l),l=o.call(a,l)}),r},isVisibleNode:function(t){var r=!0;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid){var o=D.getNodeAncestors.call(e(i),t),l=a.treeReader.expanded_field;e(o).each(function(){if(!(r=r&&this[l]))return!1})}}),r},isNodeLoaded:function(t){var r;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid){var o=a.treeReader.leaf_field,l=a.treeReader.loaded;r=void 0!==t&&(void 0!==t[l]?t[l]:!!(t[o]||D.getNodeChildren.call(e(i),t).length>0))}}),r},expandNode:function(t){return this.each(function(){var r,i,a,o=this,l=o.p;if(o.grid&&l.treeGrid){var n=l.treeReader;if(!t[n.expanded_field]){if(r=m(t,l.localReader.id),!L.call(o,"beforeExpandNode",{rowid:r,item:t}))return;i=e("#"+l.idPrefix+c(r),o.grid.bDiv)[0],t[n.expanded_field]=!0,a=V(l,t),e("div.treeclick",i).removeClass(a.collapsed).addClass(a.common).addClass(a.expanded),"local"===l.treedatatype||D.isNodeLoaded.call(e(o),l.data[l._index[r]])||o.grid.hDiv.loading||(l.treeANode=i.rowIndex,l.datatype=l.treedatatype,D.setGridParam.call(e(o),{postData:"nested"===l.treeGridModel?{nodeid:r,n_level:t[n.level_field],n_left:t[n.left_field],n_right:t[n.right_field]}:{nodeid:r,n_level:t[n.level_field],parentid:t[n.parent_id_field]}}),e(o).trigger("reloadGrid"),t[n.loaded]=!0,D.setGridParam.call(e(o),{postData:"nested"===l.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),L.call(o,"afterExpandNode",{rowid:r,item:t})}}})},collapseNode:function(t){return this.each(function(){var r,i=this,a=i.p;if(i.grid&&a.treeGrid){var o=a.treeReader.expanded_field;if(t[o]){var l=m(t,a.localReader.id);if(!L.call(i,"beforeCollapseNode",{rowid:l,item:t}))return;t[o]=!1,r=V(a,t),e("#"+a.idPrefix+c(l),i.grid.bDiv).find("div.treeclick").removeClass(r.expanded).addClass(r.common).addClass(r.collapsed),(!0===a.unloadNodeOnCollapse||e.isFunction(a.unloadNodeOnCollapse)&&a.unloadNodeOnCollapse.call(i,t))&&(t[a.treeReader.loaded]=!1,e(i).jqGrid("delTreeNode",l,!0)),L.call(i,"afterCollapseNode",{rowid:l,item:t})}}})},SortTree:function(t,r,i,a){return this.each(function(){var l=this,n=l.p,s=e(l);if(l.grid&&n.treeGrid){var d,u,p,f=[],h=D.getRootNodes.call(s),g=o.from.call(l,h);g.orderBy(t,r,i,a);var v=g.select();for(d=0,u=v.length;d<u;d++)p=v[d],f.push(p),D.collectChildrenSortTree.call(s,f,p,t,r,i,a);e.each(f,function(t){var r=m(this,n.localReader.id);e(l.rows[t]).after(s.find(">tbody>tr#"+c(r)))})}})},collectChildrenSortTree:function(t,r,i,a,l,n){return this.each(function(){var s=this,d=e(s);if(s.grid&&s.p.treeGrid){var c,u,p,f=D.getNodeChildren.call(d,r),h=o.from.call(s,f);h.orderBy(i,a,l,n);var g=h.select();for(c=0,u=g.length;c<u;c++)p=g[c],t.push(p),D.collectChildrenSortTree.call(d,t,p,i,a,l,n)}})},setTreeRow:function(t,r){var i=!1;return this.each(function(){var a=this;a.grid&&a.p.treeGrid&&(i=D.setRowData.call(e(a),t,r))}),i},delTreeNode:function(t,r){return this.each(function(){var i,a,l,n,s,d=this,c=d.p,u=c.localReader.id,p=e(d),f=c.treeReader.left_field,h=c.treeReader.right_field;if(d.grid&&c.treeGrid){var g=c._index[t];if(void 0!==g){a=(i=parseInt(c.data[g][h],10))-parseInt(c.data[g][f],10)+1;var m=D.getFullTreeNode.call(p,c.data[g]);if(m.length>0)for(s=0;s<m.length;s++)r&&t===m[s][u]||D.delRowData.call(p,m[s][u]);if("nested"===c.treeGridModel){if((l=o.from.call(d,c.data).greater(f,i,{stype:"integer"}).select()).length)for(n in l)l.hasOwnProperty(n)&&(l[n][f]=parseInt(l[n][f],10)-a);if((l=o.from.call(d,c.data).greater(h,i,{stype:"integer"}).select()).length)for(n in l)l.hasOwnProperty(n)&&(l[n][h]=parseInt(l[n][h],10)-a)}}}})},addChildNode:function(t,r,i,a){return this.each(function(){if(i){var l,n,s,d,c,u,p,f=this,h=f.p,g=e(f),m=D.getInd,v=h.treeIcons.minus+" tree-minus",b=r,w=h.treeReader.expanded_field,y=h.treeReader.leaf_field,x=h.treeReader.level_field,C=h.treeReader.parent_id_field,j=h.treeReader.left_field,q=h.treeReader.right_field,R=h.treeReader.loaded;void 0===a&&(a=!1),null==t&&(t=o.randId());var S=m.call(g,r);if(u=!1,void 0===r||null===r||""===r)r=null,b=null,l="last",d=h.tree_root_level;else{l="after",n=h._index[r],s=h.data[n],r=s[h.localReader.id],c=m.call(g,r),d=parseInt(s[x],10)+1;var _=D.getFullTreeNode.call(g,s);if(_.length){var I,F,G;for(I=0;I<_.length;I++)G=_[I][h.localReader.id],(F=m.call(g,G))>c&&(c=F,b=G)}s[y]&&(u=!0,s[w]=!0,e(f.rows[S]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(h.treeIcons.leaf+" tree-leaf").addClass(h.treeIcons.commonIconClass).addClass(v),h.data[n][y]=!1,s[R]=!0)}if(void 0===i[w]&&(i[w]=!1),void 0===i[R]&&(i[R]=!1),i[x]=d,void 0===i[y]&&(i[y]=!0),"adjacency"===h.treeGridModel&&(i[C]=r),"nested"===h.treeGridModel){var k,O,N;if(null!==r){if(p=parseInt(s[q],10),k=o.from.call(f,h.data),k=k.greaterOrEquals(q,p,{stype:"integer"}),(O=k.select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][j]=O[N][j]>p?parseInt(O[N][j],10)+2:O[N][j],O[N][q]=O[N][q]>=p?parseInt(O[N][q],10)+2:O[N][q]);i[j]=p,i[q]=p+1}else{if(p=parseInt(D.getCol.call(g,q,!1,"max"),10),(O=o.from.call(f,h.data).greater(j,p,{stype:"integer"}).select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][j]=parseInt(O[N][j],10)+2);if((O=o.from.call(f,h.data).greater(q,p,{stype:"integer"}).select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][q]=parseInt(O[N][q],10)+2);i[j]=p+1,i[q]=p+2}}(null===r||D.isNodeLoaded.call(g,s)||u)&&D.addRowData.call(g,t,i,l,b),s&&!s[w]&&a&&e(f.rows[S]).find("div.treeclick").click()}})}});var H="mousedown",W="mousemove",U="mouseup",Y=function(e){var t=e.originalEvent.targetTouches;return t?(t=t[0],{x:t.pageX,y:t.pageY}):{x:e.pageX,y:e.pageY}},X={drag:function(e){var t=e.data,r=t.e,i=t.dnr,a=t.ar,o=t.dnrAr,l=Y(e);return"move"===i.k?r.css({left:i.X+l.x-i.pX,top:i.Y+l.y-i.pY}):(r.css({width:Math.max(l.x-i.pX+i.W,0),height:Math.max(l.y-i.pY+i.H,0)}),o&&a.css({width:Math.max(l.x-o.pX+o.W,0),height:Math.max(l.y-o.pY+o.H,0)})),!1},stop:function(){e(t).off(W,X.drag).off(U,X.stop)}},Q=function(r,i,a,o){return r.each(function(){(i=i?e(i,r):r).on(H,{e:r,k:a},function(r){var i,a,l,n,s,d,c=r.data,u={},p=function(e,t){return parseInt(e.css(t),10)||!1},f=function(e){return p(a,e)},h=function(e){return p(n,e)},g=Y(r);if(!e(r.target).hasClass("ui-jqdialog-titlebar-close")&&!e(r.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(a=c.e,n=!!o&&e(o),"relative"!==a.css("position"))try{a.position(u)}catch(e){}if(l={X:u.left||f("left")||0,Y:u.top||f("top")||0,W:f("width")||a[0].scrollWidth||0,H:f("height")||a[0].scrollHeight||0,pX:g.x,pY:g.y,k:c.k},s=!(!n||"move"===c.k)&&{X:u.left||h("left")||0,Y:u.top||h("top")||0,W:n[0].offsetWidth||h("width")||0,H:n[0].offsetHeight||h("height")||0,pX:g.x,pY:g.y,k:c.k},(i=a.find("input.hasDatepicker")).length>0)try{i.datepicker("hide")}catch(e){}return d={e:a,dnr:l,ar:n,dnrAr:s},e(t).on(W,d,X.drag),e(t).on(U,d,X.stop),!1}})})};window.PointerEvent?(H+=".jqGrid pointerdown.jqGrid",W+=".jqGrid pointermove.jqGrid",U+=".jqGrid pointerup.jqGrid"):window.MSPointerEvent?(H+=".jqGrid mspointerdown.jqGrid",W+=".jqGrid mspointermove.jqGrid",U+=".jqGrid mspointerup"):(H+=".jqGrid touchstart.jqGrid",W+=".jqGrid touchmove.jqGrid",U+=".jqGrid touchend.jqGrid"),e.jqDnR=X,e.fn.jqDrag=function(e){return Q(this,e,"move")},e.fn.jqResize=function(e,t){return Q(this,e,"resize",t)};var J,Z=0,$=[],K=function(t){try{e(":input:visible",t.w).first().focus()}catch(e){}},ee=function(e){K(e)},te=function(t){var r=J[$[$.length-1]],i=!e(t.target).parents(".jqmID"+r.s)[0],a=e(t.target).offset(),o=void 0!==t.pageX?t.pageX:a.left,l=void 0!==t.pageY?t.pageY:a.top,n=function(){var t=!1;return e(".jqmID"+r.s).each(function(){var r=e(this),i=r.offset();if(i.top<=l&&l<=i.top+r.height()&&i.left<=o&&o<=i.left+r.width())return t=!0,!1}),t};return!("mousedown"===t.type||!n())||("mousedown"===t.type&&i&&(n()&&(i=!1),i&&!e(t.target).is(":input")&&K(r)),!i)},re=function(r){e(t)[r]("keypress keydown mousedown",te)},ie=function(t,r,i){return t.each(function(){var t=this._jqm;e(r).each(function(){this[i]||(this[i]=[],e(this).click(function(){var e,t,r,i=["jqmShow","jqmHide"];for(e=0;e<i.length;e++){t=i[e];for(r in this[t])this[t].hasOwnProperty(r)&&J[this[t][r]]&&J[this[t][r]].w[t](this)}return!1})),this[i].push(t)})})};e.fn.jqm=function(t){var r={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return J[this._jqm].c=e.extend({},J[this._jqm].c,t),J[this._jqm].c;Z++,this._jqm=Z,J[Z]={c:e.extend(r,e.jqm.params,t),a:!1,w:e(this).addClass("jqmID"+Z),s:Z},r.trigger&&e(this).jqmAddTrigger(r.trigger)})},e.fn.jqmAddClose=function(e){return ie(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return ie(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,r){var i,a,o,l,n,s=J[t],d=s.c,c=s.w.parent().offset(),u="."+d.closeClass,p=parseInt(s.w.css("z-index"),10);return p=p>0?p:3e3,i=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":p-1,opacity:d.overlay/100}),!s.a&&(s.t=r,s.a=!0,s.w.css("z-index",p),e(s.w[0].ownerDocument).data("ui-dialog-overlays")&&s.w.addClass("ui-dialog"),d.modal?($[0]||setTimeout(function(){re("bind")},1),$.push(t)):d.overlay>0?d.closeoverlay&&s.w.jqmAddClose(i):i=!1,s.o=!!i&&i.addClass(d.overlayClass).prependTo("body"),d.ajax?(a=d.target||s.w,o=d.ajax,a="string"==typeof a?e(a,s.w):e(a),o="@"===o.substr(0,1)?e(r).attr(o.substring(1)):o,a.html(d.ajaxText).load(o,function(){d.onLoad&&d.onLoad.call(this,s),u&&s.w.jqmAddClose(e(u,s.w)),ee(s)})):u&&s.w.jqmAddClose(e(u,s.w)),d.toTop&&s.o&&(c=s.w.parent().offset(),l=parseFloat(s.w.css("left")||0),n=parseFloat(s.w.css("top")||0),s.w.before('<span id="jqmP'+s.w[0]._jqm+'"></span>').insertAfter(s.o),s.w.css({top:c.top+n,left:c.left+l})),d.onShow?d.onShow(s):s.w.show(),ee(s),!1)},close:function(t){var r=J[t];return!!r.a&&(r.a=!1,$[0]&&($.pop(),$[0]||re("unbind")),r.c.toTop&&r.o&&e("#jqmP"+r.w[0]._jqm).after(r.w).remove(),r.c.onHide?r.c.onHide(r):(r.w.hide(),r.o&&r.o.remove()),!1)},params:{}},J=e.jqm.hash,e.fmatter=e.fmatter||{};var ae=e.fmatter,oe=function(e,t){var r=e.formatoptions||{};return r.hasOwnProperty(t)?r[t]:(e.editoptions||{})[t]},le=function(e){return String(e).replace(/\'/g,"&#39;")},ne=function(e){var t,r,i=e.colModel||e.cm,a=!1!==i.title?" title='"+le(e.colName||i.name)+"'":"",l=function(e){return oe(i,e)},n=l("checkedClass"),s=l("uncheckedClass"),d=l("value"),c="string"==typeof d?d.split(":")[0]||"Yes":"Yes",u="string"==typeof d?d.split(":")[1]||"No":"No",p=function(e){return"<i class='"+le(e)+"'"+a+"></i>"},f=l("disabled");return void 0===f&&(f=o.formatter.checkbox.disabled),!0===f&&D.isInCommonIconClass.call(this,"fa")?(t=p(n=n||"fa fa-check-square-o fa-lg"),r=p(s||"fa fa-square-o fa-lg")):!0===f&&D.isInCommonIconClass.call(this,"glyphicon")?(t=p(n=n||"glyphicon glyphicon-check"),r=p(s||"glyphicon glyphicon-unchecked")):(n="",t="<input type='checkbox' checked='checked'"+(a+=!0===f?" disabled='disabled'":"")+" />",r="<input type='checkbox'"+a+" />"),{checkedClasses:n,checked:t,unchecked:r,yes:c,no:u}},se={1:1,x:1,true:1,yes:1,y:1,on:1},de={0:1,false:1,no:1,n:1,off:1};e.extend(!0,o,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseInt(t,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseFloat(t)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,r=ne.call(this,e),i=String(t).toLowerCase();return se[i]||i===r.yes.toLowerCase()?t=!0:(de[i]||i===r.no.toLowerCase())&&(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(D.isInCommonIconClass.call(this,"fa")||D.isInCommonIconClass.call(this,"glyphicon"))?e(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(o.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),o.cmTemplate.booleanCheckboxFa=o.cmTemplate.booleanCheckbox,e.extend(ae,{isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(t){return!("string"!=typeof t&&this.isValue(t)||this.isValue(t)&&""!==(t=e.trim(t).replace(/&nbsp;/gi,"").replace(/&#160;/gi,"")))},NumberFormat:function(e,t){var r=ae.isNumber;if(r(e)||(e*=1),r(e)){var i,a=e<0,o=String(e),l=t.decimalSeparator||".";if(r(t.decimalPlaces)){var n=t.decimalPlaces,s=Math.pow(10,n);if(o=String(Math.round(e*s)/s),i=o.lastIndexOf("."),n>0)for(i<0?i=(o+=l).length-1:"."!==l&&(o=o.replace(".",l));o.length-1-i<n;)o+="0"}if(t.thousandsSeparator){var d=t.thousandsSeparator;i=(i=o.lastIndexOf(l))>-1?i:o.length;var c,u=void 0===t.decimalSeparator?"":o.substring(i),p=-1;for(c=i;c>0;c--)++p%3==0&&c!==i&&(!a||c>1)&&(u=d+u),u=o.charAt(c-1)+u;o=u}return o}return e}});var ce=function(t,r,i,a,o){var l=r;i=e.extend({},S.call(e(this),"formatter"),i);try{l=e.fn.fmatter[t].call(this,r,i,a,o)}catch(e){}return l};e.fn.fmatter=ce,ce.getCellBuilder=function(t,r,i){var a=null!=e.fn.fmatter[t]?e.fn.fmatter[t].getCellBuilder:null;return e.isFunction(a)?a.call(this,e.extend({},S.call(e(this),"formatter"),r),i):null};var ue=ce.defaultFormat=function(e,t){return ae.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},pe=function(e,t,r){if(void 0===e||ae.isEmpty(e)){var i=oe(r,"defaultValue");void 0===i&&(i=t.no),e=i}return e=String(e).toLowerCase(),se[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked};ce.email=function(e,t){return ae.isEmpty(e)?ue(e,t):"<a href='mailto:"+le(e)+"'>"+e+"</a>"},(ce.checkbox=function(t,r){var i,a=e.extend({},r.checkbox);void 0!==r.colModel&&void 0!==r.colModel.formatoptions&&(a=e.extend({},a,r.colModel.formatoptions)),i=!0===a.disabled?'disabled="disabled"':"",(e.fmatter.isEmpty(t)||void 0===t)&&(t=e.fn.fmatter.defaultFormat(t,a));var o=String(t);return'<input type="checkbox" '+((t=((t=String(t))+"").toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+t+'" offval="no" '+i+' title="'+o+'"/>'}).getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=ne.call(this,e),function(e){return pe(e,t,r)}},ce.checkbox.unformat=function(t,r,i){var a=ne.call(this,r),l=e(i);return(a.checkedClasses?o.hasAllClasses(l.children("i"),a.checkedClasses):l.children("input").is(":checked"))?a.yes:a.no},(ce.checkboxFontAwesome4=ce.checkbox).getCellBuilder=ce.checkbox.getCellBuilder,ce.checkboxFontAwesome4.unformat=ce.checkbox.unformat,ce.link=function(t,r){var i=r.colModel,a="",o={target:r.target};return null!=i&&(o=e.extend({},o,i.formatoptions||{})),o.target&&(a="target="+o.target),ae.isEmpty(t)?ue(t,o):"<a "+a+" href='"+le(t)+"'>"+t+"</a>"},(ce.showlink=function(t,r,i){var a,o,l,n=this,s=r.colModel,d={baseLinkUrl:r.baseLinkUrl,showAction:r.showAction,addParam:r.addParam||"",target:r.target,idName:r.idName,hrefDefaultValue:"#"},c="",u=function(a){return e.isFunction(a)?a.call(n,{cellValue:t,rowid:r.rowId,rowData:i,options:d}):a||""};return null!=s&&(d=e.extend({},d,s.formatoptions||{})),d.target&&(c="target="+u(d.target)),a=u(d.baseLinkUrl)+u(d.showAction),o=d.idName?encodeURIComponent(u(d.idName))+"="+encodeURIComponent(u(d.rowId)||r.rowId):"","object"==typeof(l=u(d.addParam))&&null!==l&&(l=(""!==o?"&":"")+e.param(l)),""==(a+=o||l?"?"+o+l:"")&&(a=u(d.hrefDefaultValue)),"string"==typeof t||ae.isNumber(t)||e.isFunction(d.cellValue)?"<a "+c+" href='"+le(a)+"'>"+(e.isFunction(d.cellValue)?u(d.cellValue):t)+"</a>":ue(t,d)}).getCellBuilder=function(t){var r={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName,hrefDefaultValue:"#"},i=t.colModel;return null!=i&&(r=e.extend({},r,i.formatoptions||{})),function(t,i,a){var o,l,n,s=this,d=i.rowId,c="",u=function(i){return e.isFunction(i)?i.call(s,{cellValue:t,rowid:d,rowData:a,options:r}):i||""};return r.target&&(c="target="+u(r.target)),o=u(r.baseLinkUrl)+u(r.showAction),l=r.idName?encodeURIComponent(u(r.idName))+"="+encodeURIComponent(u(d)||i.rowId):"","object"==typeof(n=u(r.addParam))&&null!==n&&(n=(""!==l?"&":"")+e.param(n)),""==(o+=l||n?"?"+l+n:"")&&(o=u(r.hrefDefaultValue)),"string"==typeof t||ae.isNumber(t)||e.isFunction(r.cellValue)?"<a "+c+" href='"+le(o)+"'>"+(e.isFunction(r.cellValue)?u(r.cellValue):t)+"</a>":ue(t,r)}},ce.showlink.pageFinalization=function(t){var r,i,a,o=e(this),l=this.p,n=l.colModel[t],s=this.rows,d=s.length;if(null!=n.formatoptions&&e.isFunction(n.formatoptions.onClick))for(r=0;r<d;r++)i=s[r],e(i).hasClass("jqgrow")&&(a=i.cells[t],n.autoResizable&&null!=a&&e(a.firstChild).hasClass(l.autoResizing.wrapperClassName)&&(a=a.firstChild),null!=a&&e(a.firstChild).on("click",function(r){var i=e(this).closest(".jqgrow");if(i.length>0)return n.formatoptions.onClick.call(o[0],{iCol:t,iRow:i[0].rowIndex,rowid:i.attr("id"),cm:n,cmName:n.name,cellValue:e(this).text(),a:this,event:r})}))};var fe=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},he=function(t,r,i){var a=r.colModel,o=e.extend({},r[i]);return null!=a&&(o=e.extend({},o,a.formatoptions||{})),ae.isEmpty(t)?fe(o.defaultValue,o):fe(ae.NumberFormat(t,o),o)};ce.integer=function(e,t){return he(e,t,"integer")},ce.number=function(e,t){return he(e,t,"number")},ce.currency=function(e,t){return he(e,t,"currency")};var ge=function(t,r){var i=t.colModel,a=e.extend({},t[r]);null!=i&&(a=e.extend({},a,i.formatoptions||{}));var o=ae.NumberFormat,l=a.defaultValue?fe(a.defaultValue,a):"";return function(e){return ae.isEmpty(e)?l:fe(o(e,a),a)}};ce.integer.getCellBuilder=function(e){return ge(e,"integer")},ce.number.getCellBuilder=function(e){return ge(e,"number")},ce.currency.getCellBuilder=function(e){return ge(e,"currency")},(ce.date=function(t,r,i,a){var l=r.colModel,n=e.extend({},r.date);return null!=l&&(n=e.extend({},n,l.formatoptions||{})),n.reformatAfterEdit||"edit"!==a?ae.isEmpty(t)?ue(t,n):o.parseDate.call(this,n.srcformat,t,n.newformat,n):ue(t,n)}).getCellBuilder=function(t,r){var i=e.extend({},t.date);null!=t.colModel&&(i=e.extend({},i,t.colModel.formatoptions||{}));var a=o.parseDate,l=i.srcformat,n=i.newformat;return i.reformatAfterEdit||"edit"!==r?function(e){return ae.isEmpty(e)?ue(e,i):a.call(this,l,e,n,i)}:function(e){return ue(e,i)}},(ce.select=function(t,r){var i,a=[],o=r.colModel,l=e.extend({},o.editoptions||{},o.formatoptions||{}),n=l.value,s=l.separator||":",d=l.delimiter||";";if(n){var c,u=!0===l.multiple,p=[];if(u&&(p=e.map(String(t).split(","),function(t){return e.trim(t)})),"string"==typeof n){var f,h,g=n.split(d);for(f=0;f<g.length;f++)if((c=g[f].split(s)).length>2&&(c[1]=e.map(c,function(e,t){if(t>0)return e}).join(s)),h=e.trim(c[0]),l.defaultValue===h&&(i=c[1]),u)e.inArray(h,p)>-1&&a.push(c[1]);else if(h===e.trim(t)){a=[c[1]];break}}else ae.isObject(n)&&(i=n[l.defaultValue],a=u?e.map(p,function(e){return n[e]}):[void 0===n[t]?"":n[t]])}return t=a.join(", "),""!==t?t:void 0!==l.defaultValue?i:ue(t,l)}).getCellBuilder=function(t){var r,i,a,o,l=t.colModel,n=ce.defaultFormat,s=e.extend({},l.editoptions||{},l.formatoptions||{}),d=s.value,c=s.separator||":",u=s.delimiter||";",p=void 0!==s.defaultValue,f=!0===s.multiple,h={};if("string"==typeof d)for(o=(a=d.split(u)).length-1;o>=0;o--)(i=a[o].split(c)).length>2&&(i[1]=e.map(i,function(e,t){if(t>0)return e}).join(c)),h[e.trim(i[0])]=i[1];else{if(!ae.isObject(d))return function(e){return e?String(e):n(e,s)};h=d}return p&&(r=h[s.defaultValue]),f?function(t){var i,a=[],o=e.map(String(t).split(","),function(t){return e.trim(t)});for(i=0;i<o.length;i++)t=o[i],h.hasOwnProperty(t)&&a.push(h[t]);return t=a.join(", "),""!==t?t:p?r:n(t,s)}:function(e){var t=h[String(e)];return""!==t&&void 0!==t?t:p?r:n(e,s)}},ce.rowactions=function(t,r){var i,a,l,n,s=e(this).closest("tr.jqgrow"),d=s.attr("id"),c=e(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),u=e("#"+o.jqID(c)),p=u[0],f=p.p,h=o.getRelativeRect.call(p,s).top,g=f.colModel[o.getCellIndex(this)],m=e.extend(!0,{extraparam:{}},o.actionsNav||{},f.actionsNavOptions||{},g.formatoptions||{});switch(void 0!==f.editOptions&&(m.editOptions=e.extend(!0,m.editOptions||{},f.editOptions)),void 0!==f.delOptions&&(m.delOptions=f.delOptions),s.hasClass("jqgrid-new-row")&&(m.extraparam[f.prmNames.oper]=f.prmNames.addoper),n={keys:m.keys,oneditfunc:m.onEdit,successfunc:m.onSuccess,url:m.url,extraparam:m.extraparam,aftersavefunc:m.afterSave,errorfunc:m.onError,afterrestorefunc:m.afterRestore,restoreAfterError:m.restoreAfterError,mtype:m.mtype},!f.multiselect&&d!==f.selrow||f.multiselect&&e.inArray(d,f.selarrrow)<0?u.jqGrid("setSelection",d,!0,t):o.fullBoolFeedback.call(p,"onSelectRow","jqGridSelectRow",d,!0,t),r){case"edit":u.jqGrid("editRow",d,n);break;case"save":u.jqGrid("saveRow",d,n);break;case"cancel":u.jqGrid("restoreRow",d,m.afterRestore);break;case"del":m.delOptions=m.delOptions||{},void 0===m.delOptions.top&&(m.delOptions.top=h),u.jqGrid("delGridRow",d,m.delOptions);break;case"formedit":m.editOptions=m.editOptions||{},void 0===m.editOptions.top&&(m.editOptions.top=h,m.editOptions.recreateForm=!0),u.jqGrid("editGridRow",d,m.editOptions);break;default:if(null!=m.custom&&m.custom.length>0)for(a=m.custom.length,i=0;i<a;i++)(l=m.custom[i]).action===r&&e.isFunction(l.onClick)&&l.onClick.call(p,{rowid:d,event:t,action:r,options:l})}return t.stopPropagation&&t.stopPropagation(),!1},(ce.actions=function(t,r,i,a){var l,n,s,d=r.rowId,c="",u=this,p=u.p,f=e(u),h={},g=S.call(f,"edit")||{},m=e.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:g.bSubmit||"",canceltitle:g.bCancel||""},S.call(f,"nav")||{},o.nav||{},p.navOptions||{},S.call(f,"actionsNav")||{},o.actionsNav||{},p.actionsNavOptions||{},r.colModel.formatoptions||{}),v=function(e){return o.mergeCssClasses(m.commonIconClass,m[e+"icon"])},b=f.jqGrid("getGuiStyles","states.hover"),w="onmouseover=\"jQuery(this).addClass('"+b+"');\" onmouseout=\"jQuery(this).removeClass('"+b+"');\"",y=[{action:"edit",actionName:"formedit",display:m.editformbutton},{action:"edit",display:!m.editformbutton&&m.editbutton},{action:"del",idPrefix:"Delete",display:m.delbutton},{action:"save",display:m.editformbutton||m.editbutton,hidden:!0},{action:"cancel",display:m.editformbutton||m.editbutton,hidden:!0}],x=null!=m.custom?m.custom.length-1:-1;if(void 0===d||ae.isEmpty(d))return"";if(e.isFunction(m.isDisplayButtons))try{h=m.isDisplayButtons.call(u,r,i,a)||{}}catch(e){}for(;x>=0;)y["first"===(n=m.custom[x--]).position?"unshift":"push"](n);for(l=0,x=y.length;l<x;l++)!1!==(s=e.extend({},y[l],h[y[l].action]||{})).display&&(c+=function(e){var t=e.action,r=e.actionName||t,i=void 0!==e.idPrefix?e.idPrefix:t.charAt(0).toUpperCase()+t.substring(1);return"<div title='"+le(m[t+"title"])+(e.hidden?"' style='display:none;":"")+"' class='"+le(f.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+t))+"' "+(null!==i?"id='j"+le(i+"Button_"+d):"")+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'"+r+"');\" "+(e.noHovering?"":w)+"><span class='"+le(v(t))+"'></span></div>"}(s));return"<div class='"+le(f.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+c+"</div>"}).pageFinalization=function(t){var r=e(this),i=this.p,a=i.colModel,o=a[t],l=function(l,n){var s,d,c,u=0,p=a.length;for(c=0;c<p&&!0===a[c].frozen;c++)u=c;null!=(s=r.jqGrid("getGridRowById",n))&&null!=s.cells&&(t=i.iColByName[o.name],d=e(s.cells[t]).children(".ui-jqgrid-actions"),o.frozen&&i.frozenColumns&&t<=u&&(d=d.add(e(r[0].grid.fbRows[s.rowIndex].cells[t]).children(".ui-jqgrid-actions"))),l?(d.find(">.ui-inline-edit,>.ui-inline-del").show(),d.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(d.find(">.ui-inline-edit,>.ui-inline-del").hide(),d.find(">.ui-inline-save,>.ui-inline-cancel").show()))},n=function(e,t){return l(!0,t),!1},s=function(e,t){return l(!1,t),!1};null!=o.formatoptions&&o.formatoptions.editformbutton||(r.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",n),r.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",n),r.off("jqGridInlineEditRow.jqGridFormatter",s),r.on("jqGridInlineEditRow.jqGridFormatter",s))},e.unformat=function(t,r,i,a){var l,n=r.colModel,s=n.formatter,d=this.p,c=n.formatoptions||{},u=n.unformat||ce[s]&&ce[s].unformat;if(t instanceof jQuery&&t.length>0&&(t=t[0]),d.treeGrid&&null!=t&&e(t.firstChild).hasClass("tree-wrap")&&(e(t.lastChild).hasClass("cell-wrapper")||e(t.lastChild).hasClass("cell-wrapperleaf"))&&(t=t.lastChild),n.autoResizable&&null!=t&&e(t.firstChild).hasClass(d.autoResizing.wrapperClassName)&&(t=t.firstChild),void 0!==u&&e.isFunction(u))l=u.call(this,e(t).text(),r,t);else if(void 0!==s&&"string"==typeof s){var p=e(this),f=function(e,t){return void 0!==c[t]?c[t]:S.call(p,"formatter."+e+"."+t)},h=function(e,t){var r=f(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(new RegExp(r,"g"),"")};switch(s){case"integer":l=h("integer",e(t).text());break;case"number":l=h("number",e(t).text()).replace(f("number","decimalSeparator"),".");break;case"currency":l=e(t).text();var g=f("currency","prefix"),m=f("currency","suffix");g&&g.length&&(l=l.substr(g.length)),m&&m.length&&(l=l.substr(0,l.length-m.length)),l=h("number",l).replace(f("number","decimalSeparator"),".");break;case"checkbox":l=ce.checkbox.unformat(t,r,t);break;case"select":l=e.unformat.select(t,r,i,a);break;case"actions":return"";default:l=e(t).text()}}return l=void 0!==l?l:!0===a?e(t).text():o.htmlDecode(e(t).html())},e.unformat.select=function(t,r,i,a){var o=[],l=e(t).text(),n=r.colModel;if(!0===a)return l;var s=e.extend({},n.editoptions||{},n.formatoptions||{}),d=void 0===s.separator?":":s.separator,c=void 0===s.delimiter?";":s.delimiter;if(s.value){var u,p=s.value,f=!0===s.multiple,h=[];if(f&&(h=l.split(","),h=e.map(h,function(t){return e.trim(t)})),"string"==typeof p){var g,m=p.split(c),v=0;for(g=0;g<m.length;g++)if((u=m[g].split(d)).length>2&&(u[1]=e.map(u,function(e,t){if(t>0)return e}).join(d)),f)e.inArray(e.trim(u[1]),h)>-1&&(o[v]=u[0],v++);else if(e.trim(u[1])===e.trim(l)){o[0]=u[0];break}}else(ae.isObject(p)||e.isArray(p))&&(f||(h[0]=l),o=e.map(h,function(t){var r;if(e.each(p,function(e,i){if(i===t)return r=e,!1}),void 0!==r)return r}));return o.join(", ")}return l||""},e.unformat.date=function(t,r){var i=e.extend(!0,{},S.call(e(this),"formatter.date"),o.formatter.date||{},r.formatoptions||{});return ae.isEmpty(t)?"":o.parseDate.call(this,i.newformat,t,i.srcformat,i)}}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(r){return t(r,e.document)}):"object"==typeof module&&module.exports?module.exports=function(e,r){return e||(e=window),void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(r,e.document),r}:t(jQuery,e.document)}("undefined"!=typeof window?window:this,function(e,t){function r(e,t,i){if(!(this instanceof r))return new r(e);this.aggregator=e,this.finilized=!1,this.context=t,this.pivotOptions=i}function i(t,r,i,a,o){var l,n,s=a.length,d=this;for(d.items=[],d.indexesOfSourceData=[],d.trimByCollect=t,d.caseSensitive=r,d.skipSort=i,d.fieldLength=s,d.fieldNames=new Array(s),d.fieldSortDirection=new Array(s),d.fieldCompare=new Array(s),l=0;l<s;l++){switch(n=a[l],d.fieldNames[l]=n[o||"dataName"],n.sorttype){case"integer":case"int":d.fieldCompare[l]=function(e,t){return e=Math.floor(Number(e)),t=Math.floor(Number(t)),e===t?0:e<t?-1:1};break;case"number":case"currency":case"float":d.fieldCompare[l]=function(e,t){return e=Number(e),t=Number(t),e===t?0:e<t?-1:1};break;default:d.fieldCompare[l]=e.isFunction(n.compare)?n.compare:function(e,t){var r=e,i=t;if(null==r&&(r=""),null==i&&(i=""),r=String(r),i=String(i),this.caseSensitive||(r=r.toUpperCase(),i=i.toUpperCase()),r===i){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(null===e)return-1;if(null===t)return 1}return r<i?-1:1}}d.fieldSortDirection[l]="desc"===n.sortorder?-1:1}}var a={name:"English (United States)",nameEnglish:"English (United States)",isRTL:!1,defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}",pgfirst:"First Page",pglast:"Last Page",pgnext:"Next Page",pgprev:"Previous Page",pgrecs:"Records per Page",showhide:"Toggle Expand Collapse Grid",savetext:"Saving..."},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:[{oper:"eq",text:"equal"},{oper:"ne",text:"not equal"},{oper:"lt",text:"less"},{oper:"le",text:"less or equal"},{oper:"gt",text:"greater"},{oper:"ge",text:"greater or equal"},{oper:"bw",text:"begins with"},{oper:"bn",text:"does not begin with"},{oper:"in",text:"is in"},{oper:"ni",text:"is not in"},{oper:"ew",text:"ends with"},{oper:"en",text:"does not end with"},{oper:"cn",text:"contains"},{oper:"nc",text:"does not contain"},{oper:"nu",text:"is null"},{oper:"nn",text:"is not null"}],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],addGroupTitle:"Add subgroup",deleteGroupTitle:"Delete group",addRuleTitle:"Add rule",deleteRuleTitle:"Delete rule",operandTitle:"Click to select search operation.",resetTitle:"Reset Search Value"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row",savetext:"",savetitle:"Save row",canceltext:"",canceltitle:"Cancel row editing"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:",",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:",",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(e){var t=["st","nd","rd","th"];return e<11||e>13?t[Math.min((e-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"n/j/Y",masks:{ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",YearMonth:"F, Y"}}}};e.jgrid=e.jgrid||{};var o=e.jgrid;o.locales=o.locales||{};var l=o.locales,n={GRID_BOX_DIV:0,GRID_OVERLAY_DIV:1,LOADING_DIV:2,DIALOG_ALERT_DIV:3,DIALOG_SEARCH_DIV:4,DIALOG_VIEW_DIV:5,DIALOG_EDIT_DIV:6,DIALOG_DELETE_DIV:7,GRID_VIEW_DIV:8,TITLE_BAR_DIV:9,UPPER_TOOLBAR_DIV:10,TOP_PAGER_DIV:11,HEADER_DIV:12,HEADER_BOX_DIV:13,HEADER_TABLE:14,HEADER_COLS_ROW:15,HEADER_COLS:16,HEADER_ROWS:47,HEADER_TH:48,HEADER_SORTABLE_DIV:49,HEADER_RESIZABLE_SPAN:50,HEADER_SELECT_ALL_ROWS_CHECKBOX:45,SEARCH_TOOLBAR:17,BODY_DIV:18,BODY_SCROLL_FULL_DIV:19,BODY_SCROLL_TOP_DIV:20,BODY_TABLE:21,GRID:21,BODY_COLS_ROW:22,BODY_COLS:23,BODY_DATA_ROWS:24,FOOTER_DIV:25,FOOTER_BOX_DIV:26,FOOTER_TABLE:27,FOOTER_DATA_ROWS:28,BOTTOM_TOOLBAR_DIV:29,FROZEN_HEADER_DIV:30,FROZEN_HEADER_TABLE:31,FROZEN_HEADER_COLS_ROW:32,FROZEN_HEADER_COLS:33,FROZEN_SEARCH_TOOLBAR:34,FROZEN_FOOTER_DIV:35,FROZEN_FOOTER_TABLE:36,FROZEN_FOOTER_DATA_ROWS:37,FROZEN_BODY_DIV:38,FROZEN_BODY_TABLE:39,FROZEN_BODY_COLS_ROW:40,FROZEN_BODY_COLS:41,FROZEN_BODY_DATA_ROWS:42,COLUMN_RESIZER_DIV:43,BOTTOM_PAGER_DIV:44,SEARCH_OPERATION_MENU_UL:46};(null==o.defaults||e.isEmptyObject(l)||void 0===l["en-US"])&&(void 0===l["en-US"]&&e.extend(!0,o,{locales:{"en-US":a}}),o.defaults=o.defaults||{},void 0===o.defaults.locale&&(o.defaults.locale="en-US")),o.defaults=o.defaults||{};var s=o.defaults;e.extend(!0,o,{version:"4.15.0-pre",productName:"free jqGrid",defaults:{},search:{},edit:{},view:{},del:{},nav:{},col:{},errors:{},formatter:{unused:""},icons:{jQueryUI:{common:"ui-icon",pager:{first:"ui-icon-seek-first",prev:"ui-icon-seek-prev",next:"ui-icon-seek-next",last:"ui-icon-seek-end"},sort:{asc:"ui-icon-triangle-1-n",desc:"ui-icon-triangle-1-s"},gridMinimize:{visible:"ui-icon-circle-triangle-n",hidden:"ui-icon-circle-triangle-s"},nav:{edit:"ui-icon-pencil",add:"ui-icon-plus",del:"ui-icon-trash",search:"ui-icon-search",refresh:"ui-icon-refresh",view:"ui-icon-document",save:"ui-icon-disk",cancel:"ui-icon-cancel",newbutton:"ui-icon-newwin"},actions:{edit:"ui-icon-pencil",del:"ui-icon-trash",save:"ui-icon-disk",cancel:"ui-icon-cancel"},form:{close:"ui-icon-closethick",prev:"ui-icon-triangle-1-w",next:"ui-icon-triangle-1-e",save:"ui-icon-disk",undo:"ui-icon-close",del:"ui-icon-scissors",cancel:"ui-icon-cancel",resizableLtr:"ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se"},search:{search:"ui-icon-search",reset:"ui-icon-arrowreturnthick-1-w",query:"ui-icon-comment"},subgrid:{plus:"ui-icon-plus",minus:"ui-icon-minus",openLtr:"ui-icon-caret-1-sw",openRtl:"ui-icon-caret-1-se"},grouping:{plus:"ui-icon-circlesmall-plus",minus:"ui-icon-circlesmall-minus"},treeGrid:{minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off",plusLtr:"ui-icon-triangle-1-e",plusRtl:"ui-icon-triangle-1-w"}},fontAwesome:{common:"fa",pager:{common:"fa-fw",first:"fa-step-backward",prev:"fa-backward",next:"fa-forward",last:"fa-step-forward"},sort:{common:"fa-lg",asc:"fa-sort-asc",desc:"fa-sort-desc"},gridMinimize:{visible:"fa-chevron-circle-up",hidden:"fa-chevron-circle-down"},nav:{common:"fa-lg fa-fw",edit:"fa-pencil",add:"fa-plus",del:"fa-trash-o",search:"fa-search",refresh:"fa-refresh",view:"fa-file-o",save:"fa-floppy-o",cancel:"fa-ban",newbutton:"fa-external-link"},actions:{common:"fa-fw",edit:"fa-pencil",del:"fa-trash-o",save:"fa-floppy-o",cancel:"fa-ban"},form:{close:"fa-times",prev:"fa-caret-left",next:"fa-caret-right",save:"fa-floppy-o",undo:"fa-undo",del:"fa-trash-o",cancel:"fa-ban",resizableLtr:"fa-rss fa-rotate-270"},search:{search:"fa-search",reset:"fa-undo",query:"fa-comments-o"},subgrid:{common:"fa-fw",plus:"fa-plus",minus:"fa-minus",openLtr:"fa-reply fa-rotate-180",openRtl:"fa-share fa-rotate-180"},grouping:{common:"fa-fw",plus:"fa-plus-square-o",minus:"fa-minus-square-o"},treeGrid:{common:"fa-fw",minus:"fa-lg fa-sort-desc",leaf:"fa-dot-circle-o",plusLtr:"fa-lg fa-caret-right",plusRtl:"fa-lg fa-caret-left"}},glyph:{common:"glyphicon",pager:{common:"",first:"glyphicon-step-backward",prev:"glyphicon-backward",next:"glyphicon-forward",last:"glyphicon-step-forward"},sort:{common:"",asc:"glyphicon-triangle-top",desc:"glyphicon-triangle-bottom"},gridMinimize:{visible:"glyphicon-circle-arrow-up",hidden:"glyphicon-circle-arrow-down"},nav:{common:"",edit:"glyphicon-edit",add:"glyphicon-plus",del:"glyphicon-trash",search:"glyphicon-search",refresh:"glyphicon-refresh",view:"glyphicon-file",save:"glyphicon-save",cancel:"glyphicon-ban-circle",newbutton:"glyphicon-new-window"},actions:{common:"",edit:"glyphicon-edit",del:"glyphicon-trash",save:"glyphicon-save",cancel:"glyphicon-ban-circle"},form:{close:"glyphicon-remove-circle",prev:"glyphicon-step-backward",next:"glyphicon-step-forward",save:"glyphicon-save",undo:"glyphicon-repeat",del:"glyphicon-trash",cancel:"glyphicon-ban-circle",resizableLtr:"glyphicon-import"},search:{search:"glyphicon-search",reset:"glyphicon-repeat",query:"glyphicon-cog"},subgrid:{common:"",plus:"glyphicon-zoom-in",minus:"glyphicon-zoom-out",openLtr:"glyphicon-indent-left",openRtl:"glyphicon-indent-left"},grouping:{common:"",plus:"glyphicon-expand",minus:"glyphicon-collapse-down"},treeGrid:{common:"",minus:"glyphicon-triangle-bottom",leaf:"glyphicon-record",plusLtr:"glyphicon-triangle-right",plusRtl:"glyphicon-triangle-left"}}},guiStyles:{jQueryUI:{gBox:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all",gView:"",overlay:"ui-widget-overlay",loading:"ui-state-default ui-state-active",hDiv:"ui-state-default ui-corner-top",hTable:"",colHeaders:"ui-state-default",states:{select:"ui-state-highlight",disabled:"ui-state-disabled ui-jqgrid-disablePointerEvents",hover:"ui-state-hover",error:"ui-state-error",active:"ui-state-active",textOfClickable:"ui-state-default"},dialog:{header:"ui-widget-header ui-dialog-titlebar ui-corner-all ui-helper-clearfix",window:"ui-jqgrid-jquery-ui ui-widget ui-widget-content ui-corner-all ui-front",document:"",subdocument:"",body:"",footer:"",content:"ui-widget-content",hr:"ui-widget-content",closeButton:"ui-corner-all",fmButton:"ui-state-default",dataField:"ui-widget-content ui-corner-all",viewCellLabel:"ui-widget-content",viewLabel:"",viewCellData:"ui-widget-content",viewData:"",leftCorner:"ui-corner-left",rightCorner:"ui-corner-right",defaultCorner:"ui-corner-all"},filterToolbar:{dataField:"ui-widget-content"},subgrid:{thSubgrid:"ui-state-default",rowSubTable:"ui-widget-content",row:"ui-widget-content",tdStart:"",tdWithIcon:"ui-widget-content",buttonDiv:"",button:"",tdData:"ui-widget-content",legacyTable:""},grid:"",gridRow:"ui-widget-content",rowNum:"ui-state-default",gridFooter:"",rowFooter:"ui-widget-content",gridTitle:"ui-widget-header ui-corner-top",gridError:"ui-state-error",gridErrorText:"",titleButton:"ui-corner-all",toolbarUpper:"ui-state-default",toolbarBottom:"ui-state-default",actionsDiv:"ui-widget-content",actionsButton:"ui-corner-all",pager:{pager:"ui-state-default",pagerButton:"ui-corner-all",pagerInput:"ui-widget-content",pagerSelect:"ui-widget-content"},navButton:"ui-corner-all",searchDialog:{operator:"ui-corner-all",label:"ui-corner-all",elem:"ui-corner-all",operationGroup:"",addRuleButton:"ui-corner-all",deleteRuleButton:"ui-corner-all",operationSelect:"ui-corner-all",addGroupButton:"ui-corner-all",deleteGroupButton:"ui-corner-all"},searchToolbar:{menu:"ui-menu-jqueryui",operButton:"ui-corner-all",clearButton:"ui-corner-all"},top:"ui-corner-top",bottom:"ui-corner-bottom",resizer:"ui-widget-header"},bootstrap:{gBox:"ui-jqgrid-bootstrap",gView:"panel-info",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-condensed table-bordered",colHeaders:"",states:{select:"success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-default",fmButton:"btn btn-default",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-default",actionsDiv:"",actionsButton:"btn btn-xs btn-default",toolbarUpper:"",toolbarBottom:"",pager:{pager:"panel-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-default",deleteRuleButton:"btn btn-xs btn-default",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-default",deleteGroupButton:"btn btn-xs btn-default"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-default",clearButton:"btn btn-xs btn-default"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"},bootstrapPrimary:{baseGuiStyle:"bootstrap",dialog:{closeButton:"btn btn-xs close",fmButton:"btn btn-primary"},searchDialog:{addRuleButton:"btn btn-xs btn-primary",deleteRuleButton:"btn btn-xs btn-primary",addGroupButton:"btn btn-xs btn-primary",deleteGroupButton:"btn btn-xs btn-primary"}},bootstrap4:{gBox:"ui-jqgrid-bootstrap",gView:"card",overlay:"modal-backdrop",loading:"alert alert-info",hDiv:"",hTable:"table table-hover table-sm table-bordered",colHeaders:"",states:{select:"table-success",disabled:"disabled ui-jqgrid-disablePointerEvents",hover:"active",error:"danger",active:"active",textOfClickable:""},dialog:{header:"modal-header",window:"modal ui-jqgrid-bootstrap",document:"modal-dialog",subdocument:"modal-content",body:"modal-body",footer:"modal-footer",content:"modal-content",hr:"hidden",closeButton:"btn btn-xs btn-secondary",fmButton:"btn btn-secondary",dataField:"form-control",viewCellLabel:"",viewLabel:"control-label",viewCellData:"",viewData:"form-control",leftCorner:"",rightCorner:"",defaultCorner:""},filterToolbar:{dataField:"form-control"},subgrid:{thSubgrid:"",rowSubTable:"",row:"",tdStart:"",tdWithIcon:"",buttonDiv:"",button:"btn btn-xs",tdData:"",legacyTable:"table table-condensed table-hover table-bordered"},grid:"table table-condensed table-hover table-bordered",gridRow:"",rowNum:"",gridFooter:"table table-hover table-condensed table-bordered",rowFooter:"",gridTitle:"",gridError:"alert alert-danger",gridErrorText:"sr-only",titleButton:"btn btn-xs btn-secondary",actionsDiv:"",actionsButton:"btn btn-xs btn-secondary",toolbarUpper:"",toolbarBottom:"",pager:{pager:"card-footer",pagerButton:"btn btn-xs",pagerInput:"form-control",pagerSelect:"form-control"},navButton:"btn btn-xs",searchDialog:{operator:"form-control",label:"form-control",elem:"form-control",operationGroup:"form-inline",addRuleButton:"btn btn-xs btn-secondary",deleteRuleButton:"btn btn-xs btn-secondary",operationSelect:"form-control",addGroupButton:"btn btn-xs btn-secondary",deleteGroupButton:"btn btn-xs btn-secondary"},searchToolbar:{menu:"dropdown-menu",operButton:"btn btn-xs btn-secondary",clearButton:"btn btn-xs btn-secondary"},top:"ui-jqgrid-bootstrap-corner-top",bottom:"ui-jqgrid-bootstrap-corner-bottom",resizer:"ui-jqgrid-bootstrap"}},htmlDecode:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#39;/g,"'").replace(/&#47;/g,"/").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#47;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldEncodePostedData:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},oldDecodePostedData:function(e){return e&&("&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},clearArray:function(e){for(;e.length>0;)e.pop()},format:function(t){var r=e.makeArray(arguments).slice(1);return null==t&&(t=""),t.replace(/\{(\d+)\}/g,function(e,t){return r[t]})},template:function(t){var r,i=e.makeArray(arguments).slice(1),a=i.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((\.*?)?\))?)?\}/g,function(t,o){var l,n;if(!isNaN(parseInt(o,10)))return i[parseInt(o,10)];for(r=0;r<a;r++)if(e.isArray(i[r]))for(n=(l=i[r]).length;n--;)if(o===l[n].nm)return l[n].v})},msie:"Microsoft Internet Explorer"===navigator.appName,msiever:function(){var e,t=-1;return"Microsoft Internet Explorer"===navigator.appName?null!=(e=/(MSIE) ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&3===e.length&&(t=parseFloat(e[2]||-1)):"Netscape"===navigator.appName&&null!=(e=/rv:([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent))&&2===e.length&&(t=parseFloat(e[1]||-1)),t},fixMaxHeightOfDiv:function(e){return"Microsoft Internet Explorer"===navigator.appName?Math.min(e,1533917):null!=/(Firefox)/.exec(navigator.userAgent)?Math.min(e,17895696):e},getRelativeRect:function(t){var r,i,a=t instanceof e&&t.length>0?t[0]:t,o=e(a).outerHeight(),l=e(this).closest(".ui-jqgrid")[0];return l?(r=null!=a.getBoundingClientRect?a.getBoundingClientRect():e(a).offset(),i=null!=l.getBoundingClientRect?l.getBoundingClientRect():e(l).offset(),{top:r.top+o-i.top,left:r.left-i.left}):{top:0,left:0}},getCellIndex:function(t){var r=e(t);return r.is("tr")?-1:(r=(r.is("td")||r.is("th")?r:r.closest("td,th"))[0],null==r?-1:o.msie?e.inArray(r,r.parentNode.cells):r.cellIndex)},stripHtml:function(e){return e=String(e),e?(e=e.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),e&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):""):e},stripPref:function(t,r){var i=e.type(t);return"string"!==i&&"number"!==i||(r=""!==(t=String(t))?String(r).replace(String(t),""):r),r},getRes:function(e,t){var r,i=t.split("."),a=i.length;if(null!=e){for(r=0;r<a;r++){if(!i[r])return null;if(void 0===(e=e[i[r]]))break;if("string"==typeof e)return e}return e}},parseDate:function(t,r,i,a){var n,s,d,c=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,u=0,p=0,f=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[\-+]\d{4})?)\b/g,h=/[^\-+\dA-Z]/g,g="string"==typeof r?r.match(/^\/Date\((([\-+])?[0-9]+)(([\-+])([0-9]{2})([0-9]{2}))?\)\/$/):null,m=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},v={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},b=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};if(void 0===(a=function(e,t){var r,i,a=["AmPm","dayNames","masks","monthNames","userLocalTime","parseRe","S","srcformat"],n=t||{},s=(o.formatter||{}).date||{},d=null==e||null==e.locale?{}:((l[e.locale]||{}).formatter||{}).date,c=a.length,u={};for(r=0;r<c;r++)void 0!==n[i=a[r]]?u[i]=n[i]:void 0!==s[i]?u[i]=s[i]:void 0!==d[i]&&(u[i]=d[i]);return u}(this.p,a)).parseRe&&(a.parseRe=/[#%\\\/:_;.,\t\s\-]/),a.masks.hasOwnProperty(t)&&(t=a.masks[t]),r&&null!=r)if(isNaN(r)||"u"!==String(t).toLowerCase())if(isNaN(r)||"u1000"!==String(t).toLowerCase())if(r.constructor===Date)u=r;else if(null!==g)u=new Date(parseInt(g[1],10)),g[3]&&(p=60*Number(g[5])+Number(g[6]),p*="-"===g[4]?1:-1,p-=u.getTimezoneOffset(),u.setTime(Number(Number(u)+60*p*1e3)));else{for("ISO8601Long"===a.srcformat&&"Z"===r.charAt(r.length-1)&&(p-=(new Date).getTimezoneOffset()),r=String(r).replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),t=t.replace(/\T/g,"#").replace(/\t/,"%").split(a.parseRe),s=0,d=Math.min(t.length,r.length);s<d;s++){switch(t[s]){case"M":-1!==(n=e.inArray(r[s],a.monthNames))&&n<12&&(r[s]=n+1,v.m=r[s]);break;case"F":-1!==(n=e.inArray(r[s],a.monthNames,12))&&n>11&&(r[s]=n+1-12,v.m=r[s]);break;case"n":v.m=parseInt(r[s],10);break;case"j":v.d=parseInt(r[s],10);break;case"g":v.h=parseInt(r[s],10);break;case"a":-1!==(n=e.inArray(r[s],a.AmPm))&&n<2&&r[s]===a.AmPm[n]&&(r[s]=n,v.h=b(r[s],v.h));break;case"A":-1!==(n=e.inArray(r[s],a.AmPm))&&n>1&&r[s]===a.AmPm[n]&&(r[s]=n-2,v.h=b(r[s],v.h))}void 0!==r[s]&&(v[t[s].toLowerCase()]=parseInt(r[s],10))}if(v.f&&(v.m=v.f),0===v.m&&0===v.y&&0===v.d)return"&#160;";v.m=parseInt(v.m,10)-1;var w=v.y;w>=70&&w<=99?v.y=1900+v.y:w>=0&&w<=69&&(v.y=2e3+v.y),u=new Date(v.y,v.m,v.d,v.h,v.i,v.s,v.u),0!==p&&u.setTime(Number(Number(u)+60*p*1e3))}else u=new Date(parseFloat(r));else u=new Date(1e3*parseFloat(r));else u=new Date(v.y,v.m,v.d,v.h,v.i,v.s,v.u);if(a.userLocalTime&&0===p&&0!=(p-=(new Date).getTimezoneOffset())&&u.setTime(Number(Number(u)+60*p*1e3)),void 0===i)return u;if(a.masks.hasOwnProperty(i)?i=a.masks[i]:i||(i="Y-m-d"),"u1000"===i.toLowerCase())return u.getTime();var y=u.getHours(),x=u.getMinutes(),C=u.getDate(),j=u.getMonth()+1,D=u.getTimezoneOffset(),q=u.getSeconds(),R=u.getMilliseconds(),S=u.getDay(),_=u.getFullYear(),I=(S+6)%7+1,F=(new Date(_,j-1,C)-new Date(_,0,1))/864e5,G=I<5?Math.floor((F+I-1)/7)+1:Math.floor((F+I-1)/7)||((new Date(_-1,0,1).getDay()+6)%7<4?53:52),k={d:m(C),D:a.dayNames[S],j:C,l:a.dayNames[S+7],N:I,S:a.S(C),w:S,z:F,W:G,F:a.monthNames[j-1+12],m:m(j),M:a.monthNames[j-1],n:j,t:"?",L:"?",o:"?",Y:_,y:String(_).substring(2),a:y<12?a.AmPm[0]:a.AmPm[1],A:y<12?a.AmPm[2]:a.AmPm[3],B:"?",g:y%12||12,G:y,h:m(y%12||12),H:m(y),i:m(x),s:m(q),u:R,e:"?",I:"?",O:(D>0?"-":"+")+m(100*Math.floor(Math.abs(D)/60)+Math.abs(D)%60,4),P:"?",T:(String(u).match(f)||[""]).pop().replace(h,""),Z:"?",c:"?",r:"?",U:Math.floor(u/1e3)};return i.replace(c,function(e){return k.hasOwnProperty(e)?k[e]:e.substring(1)})},parseDateToNumber:function(e,t){var r=o.parseDate.call(this,e,t);return r instanceof Date?r.getTime():0},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},getGridComponentId:function(e){var t=this;if(null==t.p||!t.p.id)return"";var r=t.p.id;switch(e){case n.GRID:return r;case n.GRID_BOX_DIV:return"gbox_"+r;case n.GRID_VIEW_DIV:return"gview_"+r;case n.DIALOG_ALERT_DIV:return"alertmod_"+r;case n.COLUMN_RESIZER_DIV:return"rs_m"+r;case n.HEADER_SELECT_ALL_ROWS_CHECKBOX:return"cb_"+r;case n.SEARCH_OPERATION_MENU_UL:return"sopt_menu";default:return""}},getGridComponentIdSelector:function(e){var t=o.getGridComponentId.call(this,e);return t?"#"+o.jqID(t):""},isHTMLElement:function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:null!=e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},getGridComponent:function(t,r){var i;if(r instanceof e||r.length>0)i=r[0];else{if(!o.isHTMLElement(r))return e();r=e(i=r)}switch(t){case n.BODY_TABLE:return r.hasClass("ui-jqgrid-bdiv")?r.children("div").children(".ui-jqgrid-btable"):e();case n.HEADER_TABLE:return r.hasClass("ui-jqgrid-hdiv")?r.children("div").children(".ui-jqgrid-htable"):e();case n.FOOTER_TABLE:return r.hasClass("ui-jqgrid-sdiv")?r.children("div").children(".ui-jqgrid-ftable"):e();case n.FROZEN_HEADER_TABLE:return r.hasClass("ui-jqgrid-hdiv")?r.children(".ui-jqgrid-htable"):e();case n.FROZEN_FOOTER_TABLE:return r.hasClass("ui-jqgrid-sdiv")?r.children(".ui-jqgrid-ftable"):e();case n.BODY_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.bDiv):e();case n.HEADER_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.hDiv):e();case n.FOOTER_DIV:return r.hasClass("ui-jqgrid-btable")&&null!=i.grid?e(i.grid.sDiv):e();default:return e()}},fixScrollOffsetAndhBoxPadding:function(){var t=this,r=t.grid;if(r){var i=t.p,a=r.bDiv,o=function(t){var r=e(t).children("div").first();r.css(r.hasClass("ui-jqgrid-hbox-rtl")?"padding-left":"padding-right",i.scrollOffset),t.scrollLeft=a.scrollLeft};e(a).width()>0&&(i.scrollOffset=a.offsetWidth-a.clientWidth,o(r.hDiv),r.sDiv&&o(r.sDiv))}},mergeCssClasses:function(){var t,r,i,a,o=e.makeArray(arguments),l={},n=[];for(t=0;t<o.length;t++)for(i=String(o[t]).replace(/[\t\r\n\f]/g," ").split(" "),r=0;r<i.length;r++)""===(a=i[r])||l.hasOwnProperty(a)||(l[a]=!0,n.push(a));return n.join(" ")},hasOneFromClasses:function(t,r){var i,a=e(t),o=String(r).replace(/[\t\r\n\f]/g," ").split(" "),l=o.length;for(i=0;i<l;i++)if(a.hasClass(o[i]))return!0;return!1},hasAllClasses:function(t,r){var i,a=e(t),o=String(r).replace(/[\t\r\n\f]/g," ").split(" "),l=o.length;for(i=0;i<l;i++)if(!a.hasClass(o[i]))return!1;return!0},detectRowEditing:function(e){return this.grid&&null!=this.p&&null!=this.p.editingInfo&&null!=this.p.editingInfo[e]?this.p.editingInfo[e]:null},getCell:function(t,r){var i,a,o=this.grid,l=this.p;return o&&l?((t instanceof e||t.length>0)&&(t=t[0]),("object"==typeof HTMLTableRowElement||"function"==typeof HTMLTableRowElement)&&t instanceof HTMLTableRowElement&&null!=t.cells?(a=e(t.cells[r]),i=o.fbRows,null!=i&&r<i[0].cells.length?a.add(i[t.rowIndex].cells[r]):a):e()):e()},getDataFieldOfCell:function(e,t){var r,i=this.p,a=o.getCell.call(this,e,t);return i.treeGrid&&a.children("div.tree-wrap").length>0&&(a=a.children("span.cell-wrapperleaf,span.cell-wrapper")),i.colModel[t].autoResizable?0===(r=a.children("span."+i.autoResizing.wrapperClassName)).length&&(r=a):r=a,r},enumEditableCells:function(t,r,i){var a=this,o=a.grid,l=a.rows,n=a.p;if(null==o||null==l||null==n||null==t||null==t.rowIndex||!t.id||!e.isFunction(i))return null;var s,d,c,u,p,f,g,m,v,b,w,y=n.colModel,x=y.length,C=t.rowIndex,j=o.fbRows,D=null!=j,q=D?j[C]:null;for(D&&(t=a.rows[C]),s=0;s<x&&(d=y[s],"cb"===(c=d.name)||"subgrid"===c||"rn"===c||(D&&!d.frozen&&(D=!1),v=(D?q:t).cells[s],(b=e(v)).hasClass("not-editable-cell")||(w=b.width(),!0===n.treeGrid&&c===n.ExpandColumn?(w-=b.children("div.tree-wrap").outerWidth(),b=b.children("span.cell-wrapperleaf,span.cell-wrapper").first()):w=0,p=h(n.idPrefix,t.id),u={rowid:t.id,id:p,iCol:s,iRow:C,cmName:c,cm:d,mode:r,td:v,tr:t,trFrozen:q,dataElement:b[0],dataWidth:w},"local"===n.datatype&&(g=null!=(f=n._index[p])?n.data[f]:void 0)&&(u.item=g),d.edittype||(d.edittype="text"),((n.editingInfo[t.id]||{}).editable||{}).hasOwnProperty(c)?m=n.editingInfo[t.id].editable[c]:(m=d.editable,m=e.isFunction(m)?m.call(a,u):m),!0!==m&&"hidden"!==m||(u.editable=m,!1!==i.call(a,u)))));s++);},getEditedValue:function(t,r,i,a){var l,n,d,c,u,p,f=r.formatoptions||{},h=r.editoptions||{},g=h.custom_value,m="[name="+o.jqID(r.name)+"]",v=this,b=e(v);if("hidden"===a||"readonly"===a)return e(v).jqGrid("getCell",t.closest("tr.jqgrow").attr("id"),r.name);switch(r.edittype){case"checkbox":n=["Yes","No"],"string"==typeof h.value&&(n=h.value.split(":")),l=t.find("input[type=checkbox]").is(":checked")?n[0]:n[1];break;case"text":case"password":case"textarea":case"button":l=(c=t.find("input"+m+",textarea"+m)).val(),"date"===c.prop("type")&&3===String(l).split("-").length&&(d=f.newformat||b.jqGrid("getGridRes","formatter.date.newformat"),l=o.parseDate.call(v,"Y-m-d",l,d));break;case"select":c=t.find("select option:selected"),h.multiple?(u=[],p=[],c.each(function(){u.push(e(this).val()),p.push(e(this).text())}),l=u.join(","),i.text=p.join(",")):(l=c.val(),i.text=c.text()),i.value=l;break;case"custom":try{if(!e.isFunction(g))throw"e1";if(void 0===(l=g.call(v,t.find(".customelement"),"get")))throw"e2"}catch(t){var w,y=o.info_dialog,x=function(e){b.jqGrid("getGridRes",e)};switch(String(t)){case"e1":w="function 'custom_value' "+x("edit.msg.nodefined");break;case"e2":break;default:w=t.message}y&&e.isFunction(y)?y.call(v,x("errors.errcap"),w,x("edit.bClose")):(e.isFunction(s.fatalError)?s.fatalError:alert)(w)}break;default:l=t.find("*"+m).text()}return l},guid:1,uidPref:"jqg",randId:function(e){return(e||o.uidPref)+o.guid++},getAccessor:function(t,r){var i,a,o=[];if(e.isFunction(r))return r(t);if(null!=t&&t.hasOwnProperty(r))return t[r];try{if("string"==typeof r&&(o=r.split(".")),a=o.length)for(i=t;null!=i&&a--;)i=i[o.shift()]}catch(e){}return i},getXmlData:function(t,r,i){var a="string"==typeof r?r.match(/^(.*)\[(\w+)\]$/):null;if(e.isFunction(r))return r(t);if(a&&a[2])return a[1]?e(a[1],t).attr(a[2]):e(t).attr(a[2]);if(void 0!==t){var o=e(t).find(r);return i?o:o.length>0?e(o).text():void 0}},cellWidth:function(){var t=e("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'></td></tr></table></div></div></div>"),r=t.appendTo("body").find("td").width();return t.remove(),Math.abs(r-5)>.1},isCellClassHidden:function(t){if(null==t||""===t)return!1;var r=e("<div class='ui-jqgrid' style='left:10000px'><div class='ui-jqgrid-view'><div class='ui-jqgrid-bdiv'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;' class='"+(t||"")+"'></td></tr></table></div></div></div>"),i=r.appendTo("body").find("td").is(":hidden");return r.remove(),i},cell_width:!0,ajaxOptions:{},from:function(t){var r=this;return new function(t,i){var a=this,l=t,n=!0,s=!1,d=null,c=/[\$,%]/g,u=null,p=null,f=0,h=!1,g="",m=[],v=Object.prototype.toString;if("object"!=typeof t||!t.push)throw"data provides is not an array";if(t.length>0&&"object"!=typeof t[0])throw"data items are not objects";return this._hasData=function(){return null!==l&&0!==l.length},this._getStr=function(e){var t=[];return s&&t.push("jQuery.trim("),t.push("String("+e+" || '')"),s&&t.push(")"),n||t.push(".toUpperCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(t){return s&&(t=e.trim(t)),t=t.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),n?t:t.toUpperCase()},this._funcLoop=function(t){var r=[];return e.each(l,function(e,i){r.push(t(i))}),r},this._append=function(e){var t;for(null===d?d="":d+=""===g?" && ":g,t=0;t<f;t++)d+="(";h&&(d+="!"),d+="("+e+")",h=!1,g="",f=0},this._setCommand=function(e,t){u=e,p=t},this._resetNegate=function(){h=!1},this._repeatCommand=function(e,t){return null===u?a:null!==e&&null!==t?u(e,t):null===p?u(e):u(p,e)},this._equals=function(e,t){return 0===a._compare(e,t,1)},this._compare=function(e,t,r){return void 0===r&&(r=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===v.call(e)&&"[object Date]"===v.call(t)?e<t?-r:e>t?r:0:(n||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-r:e>t?r:0)},this._performSort=function(){0!==m.length&&(l=a._doSort(l,0))},this._doSort=function(e,t){var r=m[t].by,i=m[t].dir,o=m[t].type,l=m[t].datefmt,n=m[t].sfunc;if(t===m.length-1)return a._getOrder(e,r,i,o,l,n);t++;var s,d,c,u=a._getGroup(e,r,i,o,l),p=[];for(s=0;s<u.length;s++)for(c=a._doSort(u[s].items,t),d=0;d<c.length;d++)p.push(c[d]);return p},this._getOrder=function(t,i,l,s,d,u){var p,f,h,g=[],m=[],v="a"===l?1:-1;void 0===s&&(s="text"),h="float"===s||"number"===s||"currency"===s||"numeric"===s?function(e){var t=parseFloat(String(e).replace(c,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:"int"===s||"integer"===s?function(e){return null!=e?parseFloat(String(e).replace(c,"")):Number.NEGATIVE_INFINITY}:"date"===s||"datetime"===s?function(e){return o.parseDateToNumber.call(r,d,e)}:e.isFunction(s)?s:function(t){return t=null!=t?e.trim(String(t)):"",n?t:t.toUpperCase()},e.each(t,function(e,t){void 0===(f=""!==i?o.getAccessor(t,i):t)&&(f=""),f=h.call(r,f,t),m.push({vSort:f,data:t,index:e})}),e.isFunction(u)?m.sort(function(e,t){return u.call(r,e.vSort,t.vSort,v,e.data,t.data)}):m.sort(function(e,t){return a._compare(e.vSort,t.vSort,v)});for(var b=0,w=t.length;b<w;)p=m[b].index,g.push(t[p]),b++;return g},this._getGroup=function(t,r,i,l,n){var s=[],d=null,c=null;return e.each(a._getOrder(t,r,i,l,n),function(e,t){var i=o.getAccessor(t,r);null==i&&(i=""),a._equals(c,i)||(c=i,null!==d&&s.push(d),d=a._group(r,i)),d.items.push(t)}),null!==d&&s.push(d),s},this.ignoreCase=function(){return n=!1,a},this.useCase=function(){return n=!0,a},this.trim=function(){return s=!0,a},this.noTrim=function(){return s=!1,a},this.execute=function(){var t=d,r=[];return null===t?a:(e.each(l,function(){var i=t.split(" && "),a=this,o=!1;e.each(i,function(e,t){var r=JSON.parse("["+t.slice(1,-1)+"]");switch(r[0].filterType.toLowerCase()){case"contains":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).toLowerCase().indexOf(r[0].searchText.toLowerCase(),0)>-1;break;case"startswith":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).substr(0,r[0].searchTextLength)==String(r[0].searchText);break;case"endswith":o=String(jQuery.jgrid.getAccessor(a,r[0].colName)).substr(String(jQuery.jgrid.getAccessor(a,r[0].colName)).length-r[0].searchTextLength,r[0].searchTextLength)==r[0].searchText;break;case"==":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))==parseFloat(r[0].searchText)}break;case"===":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))===parseFloat(r[0].searchText)}break;case"!==":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))!==parseFloat(r[0].searchText)}break;case"<":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))<parseFloat(r[0].searchText)}break;case">":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))>parseFloat(r[0].searchText)}break;case"<=":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))<=parseFloat(r[0].searchText)}break;case">=":switch(r[0].dataType){case"int":case"integer":parseInt(jQuery.jgrid.getAccessor(a,r[0].colName),10),parseInt(r[0].searchText),o=10;break;case"float":case"number":case"numeric":o=parseFloat(jQuery.jgrid.getAccessor(a,r[0].colName))>=parseFloat(r[0].searchText)}}if(!1===o)return!1}),o&&r.push(a)}),l=r,a)},this.data=function(){return l},this.select=function(t){if(a.execute(),e.isFunction(t)){var r=[];return e.each(l,function(e,i){r.push(t(i))}),r}return a._hasData()?(a._performSort(),l):[]},this.hasMatch=function(){return!!a._hasData()&&(a.execute(),l.length>0)},this.andNot=function(e,t,r){return h=!h,a.and(e,t,r)},this.orNot=function(e,t,r){return h=!h,a.or(e,t,r)},this.not=function(e,t,r){return a.andNot(e,t,r)},this.and=function(e,t,r){return g=" && ",void 0===e?a:a._repeatCommand(e,t,r)},this.or=function(e,t,r){return g=" || ",void 0===e?a:a._repeatCommand(e,t,r)},this.orBegin=function(){return f++,a},this.orEnd=function(){return null!==d&&(d+=")"),a},this.isNot=function(e){return h=!h,a.is(e)},this.is=function(e){return a._append("this."+e),a._resetNegate(),a},this._compareValues=function(e,t,i,l,n){var s=t;void 0===i&&(i=null);var d=i,u=void 0===n.stype?"text":n.stype;if(null!==i)switch(u){case"int":case"integer":d=String(d).replace(c,""),d=isNaN(Number(d))||""===d?"0":Number(d),s="parseInt("+s+"||0,10)",d=String(parseInt(d,10));break;case"boolean":s="normilizeBoolean("+s+")",d="normilizeBoolean("+String(d)+")";break;case"float":case"number":case"currency":case"numeric":d=String(d).replace(c,""),d=isNaN(Number(d))||""===d?"0":Number(d),s="parseFloat("+s+"||0)",d=String(d);break;case"date":case"datetime":d=String(o.parseDateToNumber.call(r,n.newfmt||"Y-m-d",d)),s='jQuery.jgrid.parseDateToNumber.call(self,"'+n.srcfmt+'",'+s+")";break;default:s=a._getStr(s),d=a._getStr('"'+a._toStr(d)+'"')}return a._append(s+" "+l+" "+d),a._setCommand(e,t),a._resetNegate(),a},this.equals=function(e,t,r){return a._compareValues(a.equals,e,t,"==",r)},this.notEquals=function(e,t,r){return a._compareValues(a.equals,e,t,"!==",r)},this.isNull=function(e,t,r){return a._compareValues(a.equals,e,null,"===",r)},this.greater=function(e,t,r){return a._compareValues(a.greater,e,t,">",r)},this.less=function(e,t,r){return a._compareValues(a.less,e,t,"<",r)},this.greaterOrEquals=function(e,t,r){return a._compareValues(a.greaterOrEquals,e,t,">=",r)},this.lessOrEquals=function(e,t,r){return a._compareValues(a.lessOrEquals,e,t,"<=",r)},this.startsWith=function(t,r){var i=null==r?t:r,o=s?e.trim(i.toString()).length:i.toString().length;return a._append(JSON.stringify({filterType:"startsWith",colName:t,searchText:a._toStr(r),searchTextLength:o})),a._setCommand(a.startsWith,t),a._resetNegate(),a},this.endsWith=function(t,r){var i=null==r?t:r,o=s?e.trim(i.toString()).length:i.toString().length;return a._append(JSON.stringify({filterType:"endsWith",colName:t,searchText:a._toStr(r),searchTextLength:o})),a._setCommand(a.endsWith,t),a._resetNegate(),a},this.contains=function(e,t){return a._append(JSON.stringify({filterType:"contains",colName:e,searchText:a._toStr(t)})),a._setCommand(a.contains,e),a._resetNegate(),a},this.groupBy=function(e,t,r,i){return a._hasData()?a._getGroup(l,e,t,r,i):null},this.orderBy=function(t,r,i,o,l){return r=null==r?"a":e.trim(r.toString().toLowerCase()),null==i&&(i="text"),null==o&&(o="Y-m-d"),null==l&&(l=!1),"desc"!==r&&"descending"!==r||(r="d"),"asc"!==r&&"ascending"!==r||(r="a"),m.push({by:t,dir:r,type:i,datefmt:o,sfunc:l}),a},this.inSet=function(e,t,i){var o=void 0===t?null:t,l=void 0===i.stype?"text":i.stype;return o=a._getStr('"'+a._toStr(o)+'"'),"text"!==l?a._compareValues(a.equals,e,t,"==",i):(a._append("jQuery.inArray("+a._getStr(e)+","+o+".split('"+(r.p.inFilterSeparator||",")+"')) >= 0"),a._setCommand(a.inSet,e),a._resetNegate(),a)},this.custom=function(e,t,r){return a._append("self.p.customSortOperations."+e+'.filter.call(self,{item:this,cmName:"'+t+'",iCol:self.p.iColByName["'+t+'"]>=0 ? self.p.iColByName["'+t+'"] : self.p.iPropByName["'+t+'"],isAddProp:self.p.iColByName["'+t+'"]<0,searchValue:"'+r+'"})'),a._setCommand(a.custom,t),a._resetNegate(),a},a}(t,null)},serializeFeedback:function(t,r,i){var a,o=this;return o instanceof e&&o.length>0&&(o=o[0]),"string"==typeof i?i:"string"==typeof(a=e(o).triggerHandler(r,i))?a:(null!=a&&"object"==typeof a||(a=i),e.isFunction(t)?t.call(o,a):a)},fullBoolFeedback:function(t,r){var i=this,a=e.makeArray(arguments).slice(2),o=e(i).triggerHandler(r,a);if(o=!1!==o&&"stop"!==o,e.isFunction(t)){var l=t.apply(i,a);!1!==l&&"stop"!==l||(o=!1)}return o},feedback:function(t,r,i,a){var l=this;if(l instanceof e&&l.length>0&&(l=l[0]),null==t||"string"!=typeof a||a.length<2)return null;var n="on"===a.substring(0,2)?"jqGrid"+r+a.charAt(2).toUpperCase()+a.substring(3):"jqGrid"+r+a.charAt(0).toUpperCase()+a.substring(1),s=e.makeArray(arguments).slice(4),d=t[a+i];return s.unshift(n),s.unshift(d),o.fullBoolFeedback.apply(l,s)},builderSortIcons:function(t){var r=this,i=r.p,a=e(r),l=a.jqGrid("getGuiStyles","states.disabled"),n=function(n){var s=i.colModel[t],d=null!=s&&e.isFunction(s.sortIconName)?s.sortIconName:i.sortIconName,c=e.isFunction(d)?d.call(r,{order:n,iCol:t,cm:s}):a.jqGrid("getIconRes","sort."+n);return o.mergeCssClasses("ui-grid-ico-sort","ui-icon-"+n,"horizontal"===i.viewsortcols[1]?"ui-i-"+n:"",l,c,"ui-sort-"+i.direction)};return"<span class='s-ico"+(i.sortIconsBeforeText?" jqgrid-icons-first":"")+"' style='display:none'><span class='"+n("asc")+"'></span><span class='"+n("desc")+"'></span></span>"},builderFmButon:function(t,r,i,a,l){var n=this.p,s=e(this),d=function(e){return s.jqGrid("getGuiStyles","dialog."+e)};return null==n?"":"<a id='"+t+"' class='"+o.mergeCssClasses("fm-button",d("fmButton"),d("right"===l?"rightCorner":"left"===l?"leftCorner":"defaultCorner"),"right"===a?"fm-button-icon-right":"left"===a?"fm-button-icon-left":"")+"' role='button' tabindex='0'>"+(i?"<span class='fm-button-icon "+(s.jqGrid("getIconRes",i)||i)+"'></span>":"")+(r?"<span class='fm-button-text'>"+r+"</span>":"")+"</a>"},convertOnSaveLocally:function(t,r,i,a,o,l){if(null==this.p)return t;if(e.isFunction(r.convertOnSave))return r.convertOnSave.call(this,{newValue:t,cm:r,oldValue:i,id:a,item:o,iCol:l});if("boolean"!=typeof i&&"number"!=typeof i)return t;if("boolean"!=typeof i||"checkbox"!==r.edittype&&"checkbox"!==r.formatter)"number"!=typeof i||isNaN(t)||("number"===r.formatter||"currency"===r.formatter?t=parseFloat(t):"integer"===r.formatter&&(t=parseInt(t,10)));else{var n=String(t).toLowerCase(),s=null!=r.editoptions&&"string"==typeof r.editoptions.value?r.editoptions.value.split(":"):["yes","no"];e.inArray(n,["1","true",s[0].toLowerCase()])>=0?t=!0:e.inArray(n,["0","false",s[1].toLowerCase()])>=0&&(t=!1)}return t},parseDataToHtml:function(t,r,i,a,l,n,s){var d,c,u,p,f,h,g,m,v,b=this,w=b.p,y=e(b),x=!1,C=[],j=[],D=!0!==w.altRows||y.jqGrid("isBootstrapGuiStyle")?"":w.altclass,q=!!w.grouping&&!0===w.groupingView.groupCollapse,R=parseInt(w.rowNum,10),S=e.fn.jqGrid,_=!0===w.treeGrid&&w.treeANode>-1?b.rows[w.treeANode].rowIndex+1:b.rows.length,I=b.formatCol;for(_<=1&&(w.rowIndexes={}),("local"===w.datatype&&!w.deselectAfterSort||w.multiPageSelection)&&(x=!0),n&&(R*=n+1),d=0;d<Math.min(t,R);d++){for(f=r[d],h=i[d],g=null!=a?a[d]:h,u=((1===l?0:l)+d)%2==1?D:"",x?w.multiselect?(p=-1!==e.inArray(f,w.selarrrow))&&null===w.selrow&&(w.selrow=f):p=f===w.selrow:p=!1,m=C.length,C.push(""),c=0;c<w.colModel.length;c++)switch(v=w.colModel[c].name){case"rn":C.push(function(e,t,r,i){var a=(parseInt(r,10)-1)*parseInt(i,10)+1+t;return"<td role='gridcell' class='"+S.getGuiStyles.call(y,"rowNum","jqgrid-rownum")+"' "+I(e,t,a,null,t,!0)+">"+a+"</td>"}(c,d,w.page,w.rowNum));break;case"cb":C.push(function(t,r,i,a,o){var l="&nbsp;",n=!0,s={rowid:t,iRow:i,iCol:r,data:o,checked:a};return e.isFunction(w.hasMultiselectCheckBox)&&(n=w.hasMultiselectCheckBox.call(b,s)),n&&(l=e.isFunction(w.checkboxHtml)?w.checkboxHtml.call(b,s):"<input type='checkbox' id='jqg_"+w.id+"_"+t+"' class='cbox' name='jqg_"+w.id+"_"+t+"'"+(a?" checked='checked' aria-checked='true'":" aria-checked='false'")+"/>"),"<td role='gridcell' "+I(r,i,"",null,t,!0)+"><span class='slds-checkbox'>"+l+"<label class='slds-checkbox__label' for='jqg_"+w.id+"_"+t+"'><span class='slds-checkbox_faux'></span></label></span></td>"}(f,c,d,p,h));break;case"subgrid":C.push(S.addSubGridCell.call(y,c,d+l,f,h));break;default:C.push(function(e,t,r,i,a,o){var l=b.formatter(e,t,r,a,"add",o);return"<td role='gridcell' "+I(r,i,l,a,e,o)+">"+l+"</td>"}(f,h[v],c,d+l,g,h))}w.grouping&&S.groupingPrepare&&!w.groupingView._locgr&&(S.groupingPrepare.call(y,h,d),e.isFunction(w.groupingView.groupCollapse)&&(q=w.groupingView.groupCollapse.call(b,{group:w.groupingView.groups[w.groupingView.groups.length-1],rowid:f,data:h}))),C[m]=b.constructTr(f,q,u,h,g,p),C.push("</tr>"),w.rowIndexes[f]=_,_++,w.grouping&&(j.push(C),C=[]),C.length>w.maxItemsToJoin&&(C=[C.join("")])}return w.grouping&&S.groupingRender&&(s&&(w.groupingView._locgr=!0),C=[S.groupingRender.call(y,j,R)],o.clearArray(j)),C},fillSelectOptions:function(r,i,a,o,l,n){var s,d,c,u,p,f,h,g,m=[],v=!1;if(i){if("function"==typeof i&&(i=i()),"string"==typeof i)for(d=i.split(o),s=0;s<d.length;s++)(c=d[s].split(a)).length>2&&(c[1]=e.map(c,function(e,t){if(t>0)return e}).join(a)),m.push({value:c[0],innerHtml:c[1],selectValue:e.trim(c[0]),selectText:e.trim(c[1]),selected:!1}),""===c[0]&&(v=!0);else if("object"==typeof i)for(h in i)i.hasOwnProperty(h)&&m.push({value:h,innerHtml:i[h],selectValue:e.trim(h),selectText:e.trim(i[h]),selected:!1}),""===h&&(v=!0);if("string"==typeof n){for(g=l?e.map(n.split(","),function(t){return e.trim(t)}):[e.trim(n)],n=e.trim(n),s=0;s<m.length;s++)p=m[s],l||p.selectValue!==n||(p.selected=!0,f=!0),l&&e.inArray(p.selectValue,g)>-1&&(p.selected=!0,f=!0);if(!f)for(s=0;s<m.length;s++)p=m[s],l||p.selectText!==n||(p.selected=!0),l&&e.inArray(p.selectText,g)>-1&&(p.selected=!0)}for(s=0;s<m.length;s++)p=m[s],(u=t.createElement("option")).value=p.value,u.innerHTML=p.innerHtml,p.selected&&(u.selected=!0),r.appendChild(u);return v}},getMethod:function(t){return this.getAccessor(e.fn.jqGrid,t)},extend:function(t){e.extend(e.fn.jqGrid,t),this.no_legacy_api||e.fn.extend(t)}});var d=o.clearArray,c=o.jqID,u=o.getGridComponentIdSelector,p=o.getGridComponentId,f=o.getGridComponent,h=o.stripPref,g=o.randId,m=o.getAccessor,v=o.convertOnSaveLocally,b=o.stripHtml,w=o.htmlEncode,y=o.htmlDecode,x=o.mergeCssClasses,C=o.hasOneFromClasses,j=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)};e.fn.jqGrid=function(r){var i,a=e.fn.jqGrid;if("string"==typeof r){if(!(i=a[r]))throw"jqGrid - No such method: "+r;return i.apply(this,e.makeArray(arguments).slice(1))}return this.each(function(){if(!this.grid){var i,v,y=this,D=e(y),q=e.isFunction,R=e.isArray,S=e.extend,_=e.inArray,I=e.trim,F=e.each,G=a.setSelection,k=a.getGridRes,O=q(s.fatalError)?s.fatalError:alert,N=r.locale||s.locale||"en-US",T=null!=l[N]&&"boolean"==typeof l[N].isRTL&&l[N].isRTL?"rtl":"ltr",E=r.iconSet||s.iconSet||("bootstrap"===(r.guiStyle||s.guiStyle)||"bootstrapPrimary"===(r.guiStyle||s.guiStyle)?"glyph":"jQueryUI"),A=r.guiStyle||s.guiStyle||"jQueryUI",B=function(e){return a.getIconRes.call(y,e)},M=function(e,t){return D.jqGrid("getGuiStyles",e,t)};null==r&&(r={datatype:"local"}),void 0!==r.datastr&&R(r.datastr)&&(v=r.datastr,r.datastr=[]),void 0!==r.data&&(i=r.data,r.data=[]),null!=o.formatter&&null!=o.formatter.unused||O("CRITICAL ERROR!!!\n\n\nOne uses probably\n\n\t$.extend($.jgrid.defaults, {...});\n\nto set default settings of jqGrid instead of the usage the DEEP version of jQuery.extend (with true as the first parameter):\n\n\t$.extend(true, $.jgrid.defaults, {...});\n\nOne other possible reason:\n\nyou included some OLD version of language file (grid.locale-en.js for example) AFTER jquery.jqGrid.min.js. For example all language files of jqGrid 4.7.0 uses non-deep call of jQuery.extend.\n\n\nSome options of jqGrid could still work, but another one will be broken."),void 0===r.datatype&&void 0!==r.dataType&&(r.datatype=r.dataType,delete r.dataType),void 0===r.mtype&&void 0!==r.type&&(r.mtype=r.type,delete r.type),y.p={iconSet:E};var z=S(!0,{height:"auto",page:1,rowNum:20,maxRowNum:1e4,autoresizeOnLoad:!1,columnsToReResizing:[],autoResizing:{wrapperClassName:"ui-jqgrid-cell-wrapper",minColWidth:33,maxColWidth:300,adjustGridWidth:!0,compact:!1,fixWidthOnShrink:!1},doubleClickSensitivity:250,minResizingWidth:10,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],additionalProperties:[],arrayReader:[],rowList:[],colNames:[],sortorder:"asc",threeStateSort:!1,sortname:"",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],editingInfo:{},shrinkToFit:!0,xmlReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,singleSelectClickMode:"toggle",selectOnContextMenu:!0,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:function(r,i,a){if("abort"!==i&&"abort"!==a){var o=r.getResponseHeader("Content-Type"),l=r.responseText||"",n=function(t){try{var r,i=e.parseJSON(t),a=[];for(r in i)i.hasOwnProperty(r)&&"StackTrace"!==r&&a.push(r+": "+i[r]);t=a.join("<br />")}catch(e){}return t};"text/html"===o?l=function(r){var i,a,o,l=t.createElement("div");for(o=/<body[^>]*>([\s\S]*)<\/body\s*>/gim.exec(r),l.innerHTML=null!=o&&2===o.length?o[1]:r,a=(i=l.getElementsByTagName("script")).length;a--;)i[a].parentNode.removeChild(i[a]);r=l.innerHTML;try{""===e.trim(e(r).text())&&(r="")}catch(e){}return r}(l):"application/json"===o?l=n(l):"text/plain"===o&&(l=n(l)),500!==r.status&&0!==r.status&&(l=(i||a)+(a&&a!==i?": "+a:"")+" "+r.status+" "+r.statusText+(""!==l?"<hr />":"")+l),D.jqGrid("displayErrorMessage",l||i||a)}},loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,forceClientSorting:!1,multiselect:!1,multikey:!1,editurl:"clientArray",search:!1,caption:"",hidegrid:!0,hiddengrid:!1,useUnformattedDataForCellAttr:!0,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",filters:"filters",nd:"nd",id:"id",idold:"idOld",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,iCol:-1,iRow:-1,nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,multiPageSelection:!1,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:16,multiselectWidth:16,multiselectPosition:"left",gridview:!0,rownumWidth:25,rownumbers:!1,pagerpos:"center",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,autoEncodeOnEdit:!1,remapColumns:[],cmNamesInputOrder:[],ajaxGridOptions:{},direction:T,toppager:!1,headertitles:!1,scrollTimeout:40,maxItemsToJoin:32768,data:[],lastSelectedData:[],quickEmpty:"quickest",_index:{},indexByColumnData:{},dataIndexById:{},iColByName:{},iPropByName:{},reservedColumnNames:["rn","cb","subgrid"],grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,useDefaultValuesOnGrouping:!0,summary:[],displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1,commonIconClass:B("grouping.common"),plusicon:B("grouping.plus"),minusicon:B("grouping.minus")},ignoreCase:!0,cmTemplate:{},idPrefix:"",iconSet:E,guiStyle:A,locale:N,multiSort:!1,showSortOrder:!0,sortOrderPosition:"afterSortIcons",multiSortOrder:"lastClickedFirstSorted",maxSortColumns:3,treeIcons:{commonIconClass:B("treeGrid.common"),plusLtr:B("treeGrid.plusLtr"),plusRtl:B("treeGrid.plusRtl"),minus:B("treeGrid.minus"),leaf:B("treeGrid.leaf")}},s,{navOptions:S(!0,{commonIconClass:B("nav.common"),editicon:B("nav.edit"),addicon:B("nav.add"),delicon:B("nav.del"),searchicon:B("nav.search"),refreshicon:B("nav.refresh"),viewicon:B("nav.view"),saveicon:B("nav.save"),cancelicon:B("nav.cancel"),buttonicon:B("nav.newbutton")},o.nav||{}),actionsNavOptions:S(!0,{commonIconClass:B("actions.common"),editicon:B("actions.edit"),delicon:B("actions.del"),saveicon:B("actions.save"),cancelicon:B("actions.cancel")},o.actionsNav||{}),formEditing:S(!0,{commonIconClass:B("form.common"),prevIcon:B("form.prev"),nextIcon:B("form.next"),saveicon:[!0,"left",B("form.save")],closeicon:[!0,"left",B("form.undo")]},o.edit||{}),searching:S(!0,{commonIconClass:B("search.common"),findDialogIcon:B("search.search"),resetDialogIcon:B("search.reset"),queryDialogIcon:B("search.query")},o.search||{}),formViewing:S(!0,{commonIconClass:B("form.common"),prevIcon:B("form.prev"),nextIcon:B("form.next"),closeicon:[!0,"left",B("form.cancel")]},o.view||{}),formDeleting:S(!0,{commonIconClass:B("form.common"),delicon:[!0,"left",B("form.del")],cancelicon:[!0,"left",B("form.cancel")]},o.del||{})},r||{}),P=function(e){return k.call(D,e)},L=function(e){var t=o.getRes(z,e);return void 0!==t?t:k.call(D,"defaults."+e)};if(z.recordpos=z.recordpos||("rtl"===z.direction?"left":"right"),z.autoResizing.widthOfVisiblePartOfSortIcon=void 0!==z.autoResizing.widthOfVisiblePartOfSortIcon?z.autoResizing.widthOfVisiblePartOfSortIcon:"fontAwesome"===z.iconSet?13:12,z.datatype=void 0!==z.datatype?z.datatype:void 0!==i||null==z.url?"local":null!=z.jsonReader&&"object"==typeof z.jsonReader?"json":"xml",z.jsonReader=z.jsonReader||{},z.url=z.url||"",z.cellsubmit=void 0!==z.cellsubmit?z.cellsubmit:void 0===z.cellurl?"clientArray":"remote",z.gridview=void 0!==z.gridview?z.gridview:null==z.afterInsertRow,void 0!==i&&(z.data=i,r.data=i),void 0!==v&&(z.datastr=v,r.datastr=v),"TABLE"===y.tagName.toUpperCase())if(""===y.id&&D.attr("id",g()),void 0!==t.documentMode&&t.documentMode<=5)O("Grid can not be used in this ('quirks') mode!");else{D.empty().attr("tabindex","0"),y.p=z,z.id=y.id,z.idSel="#"+c(y.id),z.gBoxId=p.call(y,n.GRID_BOX_DIV),z.gBox=u.call(y,n.GRID_BOX_DIV),z.gViewId=p.call(y,n.GRID_VIEW_DIV),z.gView=u.call(y,n.GRID_VIEW_DIV),z.rsId=p.call(y,n.COLUMN_RESIZER_DIV),z.rs=u.call(y,n.COLUMN_RESIZER_DIV),z.cbId=p.call(y,n.HEADER_SELECT_ALL_ROWS_CHECKBOX),z.cb=u.call(y,n.HEADER_SELECT_ALL_ROWS_CHECKBOX);var V=o.fixScrollOffsetAndhBoxPadding,H=function(e){var t,r={},i=e.length;for(t=0;t<i;t++)r[e[t].name]=t;return r},W=function(){var e,t,r={},i=z.colModel,a=i.length;for(e=0;e<a;e++)((t=i[e]).createColumnIndex||z.createColumnIndex&&!1!==t.createColumnIndex||"select"===t.stype&&(t.searchoptions||{}).generateValue||"select"===t.edittype&&(t.editoptions||{}).generateValue)&&(r[i[e].name]={});return r},U=function(e){var t,r,i={},a=e.length;for(t=0;t<a;t++)i["string"==typeof(r=e[t])?r:r.name]=t;return i},Y=function(){var t,r,i={};for(this.p.rowIndexes=i,r=0;r<this.rows.length;r++)t=this.rows[r],e(t).hasClass("jqgrow")&&(i[t.id]=t.rowIndex)},X=function(t){var r=e(this).data("pageX");r?(r=(r=String(r).split(";"))[r.length-1],e(this).data("pageX",r+";"+t.pageX)):e(this).data("pageX",t.pageX)},Q=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},J={headers:[],cols:[],footers:[],dragStart:function(r,i,a,l){var s=this,d=e(s.bDiv),c=d.closest(z.gBox).offset(),u=l.offset().left+("rtl"===z.direction?0:s.headers[r].width+(o.cell_width?0:Q(z.cellLayout,0))-2);s.resizing={idx:r,startX:u,sOL:u,moved:!1,delta:u-i.pageX},s.curGbox=e(z.rs),s.curGbox.prependTo("body"),s.curGbox.css({display:"block",left:u,top:a[1]+c.top+1,height:a[2]}),s.curGbox.css("height",a[2]-(s.curGbox.outerHeight()-s.curGbox.height())+"px"),s.curGbox.data("idx",r),s.curGbox.data("delta",u-i.pageX),X.call(this.curGbox,i),j.call(f(n.BODY_TABLE,d)[0],"resizeStart",i,r),t.onselectstart=function(){return!1},e(t).on("mousemove.jqGrid",function(e){if(J.resizing)return J.dragMove(e),!1}).on("mouseup.jqGrid"+z.id,function(){if(J.resizing)return J.dragEnd(),!1})},dragMove:function(t){var r=this,i=r.resizing;if(i){var a,o,l=t.pageX+i.delta-i.startX,n=r.headers,s=n[i.idx],d="ltr"===z.direction?s.width+l:s.width-l,c=((z.colModel[i.idx]||{}).autoResizing||{}).minColWidth||z.minResizingWidth;i.moved=!0,d>c&&(null==r.curGbox&&(r.curGbox=e(z.rs)),r.curGbox.css({left:i.sOL+l}),!0===z.forceFit?(a=n[i.idx+z.nv],(o="ltr"===z.direction?a.width-l:a.width+l)>z.autoResizing.minColWidth&&(s.newWidth=d,a.newWidth=o)):(r.newWidth="ltr"===z.direction?z.tblwidth+l:z.tblwidth-l,s.newWidth=d))}},resizeColumn:function(t,r,i){var o,l=this,s=l.headers,d=l.footers,c=s[t],u=c.newWidth||c.width,p=f(n.BODY_TABLE,l.bDiv),h=f(n.HEADER_TABLE,l.hDiv).children("thead").children("tr").first()[0].cells;u=parseInt(u,10),z.colModel[t].width=u,c.width=u,h[t].style.width=u+"px",l.cols[t].style.width=u+"px",l.fbRows&&(e(l.fbRows[0].cells[t]).css("width",u),e(f(n.FROZEN_HEADER_TABLE,l.fhDiv)[0].rows[0].cells[t]).css("width",u),z.footerrow&&e(f(n.FROZEN_FOOTER_TABLE,l.fsDiv)[0].rows[0].cells[t]).css("width",u)),d.length>0&&(d[t].style.width=u+"px"),!0!==i&&V.call(p[0]),!0===z.forceFit?(u=(o=s[t+z.nv]).newWidth||o.width,o.width=u,h[t+z.nv].style.width=u+"px",l.cols[t+z.nv].style.width=u+"px",d.length>0&&(d[t+z.nv].style.width=u+"px"),z.colModel[t+z.nv].width=u):(z.tblwidth=l.newWidth||z.tblwidth,!0!==i&&(l.hDiv.scrollLeft=l.bDiv.scrollLeft,z.footerrow&&(l.sDiv.scrollLeft=l.bDiv.scrollLeft))),z.autowidth||void 0!==z.widthOrg&&"auto"!==z.widthOrg&&"100%"!==z.widthOrg||!0===i||a.setGridWidth.call(p,l.newWidth+z.scrollOffset,!1),r||j.call(p[0],"resizeStop",u,t)},dragEnd:function(){var r=this;r.hDiv.style.cursor="default",r.resizing&&(null!==r.resizing&&!0===r.resizing.moved&&(e(r.headers[r.resizing.idx].el).removeData("autoResized"),r.resizeColumn(r.resizing.idx,!1)),e(z.rs).removeData("pageX"),r.resizing=!1,setTimeout(function(){e(z.rs).css("display","none").prependTo(z.gBox)},z.doubleClickSensitivity)),r.curGbox=null,t.onselectstart=function(){return!0},e(t).off("mousemove.jqGrid mouseup.jqGrid"+z.id)},populateVisible:function(){var t=this,r=e(t),i=t.grid,a=i.bDiv,o=e(a);i.timer&&clearTimeout(i.timer),i.timer=null;var l=o.height();if(l){var n,s;if(t.rows.length)try{n=t.rows[1],s=n?e(n).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(e){s=i.prevRowHeight}if(s){i.prevRowHeight=s;var d=z.rowNum;i.scrollTop=a.scrollTop;var c,u,p,f=i.scrollTop,h=Math.round(r.position().top)-f,g=h+r.height(),m=s*d;if(g<l&&h<=0&&(void 0===z.lastpage||(parseInt((g+f+m-1)/m,10)||0)<=z.lastpage)&&(u=parseInt((l-g+m-1)/m,10)||1,g>=0||u<2||!0===z.scroll?(c=(Math.round((g+f)/m)||0)+1,h=-1):h=1),h>0&&(c=(parseInt(f/m,10)||0)+1,u=(parseInt((f+l)/m,10)||0)+2-c,p=!0),u){if(z.lastpage&&(c>z.lastpage||1===z.lastpage||c===z.page&&c===z.lastpage))return;i.hDiv.loading?i.timer=setTimeout(function(){i.populateVisible.call(t)},z.scrollTimeout):(z.page=c,p&&(i.selectionPreserver.call(t),i.emptyRows.call(t,!1,!1)),i.populate.call(t,u))}}}},scrollGrid:function(){if(z.scroll){var e=this.scrollTop;void 0===J.scrollTop&&(J.scrollTop=0),e!==J.scrollTop&&(J.scrollTop=e,J.timer&&clearTimeout(J.timer),J.timer=setTimeout(function(){J.populateVisible.call(y)},z.scrollTimeout))}return J.hDiv.scrollLeft=this.scrollLeft,z.footerrow&&(J.sDiv.scrollLeft=this.scrollLeft),!1},selectionPreserver:function(){var t=this,r=e(t),i=z.selrow,a=z.selarrrow?e.makeArray(z.selarrrow):null,o=t.grid.bDiv,l=o.scrollLeft,n=function(){var e;if(z.selrow=null,!z.multiPageSelection){if(d(z.selarrrow),z.multiselect&&a&&a.length>0)for(e=0;e<a.length;e++)a[e]!==i&&G.call(r,a[e],!1,null);i&&G.call(r,i,!1,null)}o.scrollLeft=l,r.off(".selectionPreserver",n)};r.on("jqGridGridComplete.selectionPreserver",n)}};y.grid=J,j.call(y,"beforeInitGrid"),z.iColByName=H(z.colModel),z.iPropByName=U(z.additionalProperties),o.msie=o.msiever()>0;var Z,$=e("<div class='"+M("gView","ui-jqgrid-view")+"' role='grid' aria-multiselectable='"+!!z.multiselect+"'></div>"),K=o.msie;z.direction=I(z.direction.toLowerCase()),-1===_(z.direction,["ltr","rtl"])&&(z.direction="ltr"),Z=z.direction,e($).insertBefore(y),D.removeClass("scroll").appendTo($);var ee=e("<div class='"+M("gBox","ui-jqgrid")+"'></div>");e(ee).attr({id:z.gBoxId,dir:Z}).insertBefore($),e($).attr("id",z.gViewId).appendTo(ee),e("<div class='"+M("overlay","jqgrid-overlay")+"' id='lui_"+z.id+"'></div>").insertBefore($),e("<div class='"+M("loading","loading")+"' id='load_"+z.id+"'>"+L("loadtext")+"</div>").insertBefore($),D.attr({role:"presentation","aria-labelledby":"gbox_"+y.id});var te,re=["shiftKey","altKey","ctrlKey"],ie=function(e){return h(z.idPrefix,e)},ae=function(e,t,r,i,a,l){var n,s,d,c,u,p,f,h=z.colModel[e],g=r,m=h.classes,v=h.align?"text-align:"+h.align+";":"",w=function(e){return"string"==typeof e?e.replace(/\'/g,"&#39;"):e},x=" aria-describedby='"+z.id+"_"+h.name+"'";if(!0===h.hidden&&(v+="display:none;"),0===t)v+="width: "+J.headers[e].width+"px;";else if((q(h.cellattr)||"string"==typeof h.cellattr&&null!=o.cellattr&&q(o.cellattr[h.cellattr]))&&(n=q(h.cellattr)?h.cellattr:o.cellattr[h.cellattr],z.useUnformattedDataForCellAttr&&null!=l?g=l[h.name]:h.autoResizable&&(s="<span class='"+z.autoResizing.wrapperClassName+"'>",g=r.substring(s.length,r.length-"</span>".length)),"string"==typeof(c=n.call(y,a,g,i,h,l))))for(c=c.replace(/\n/g,"&#xA;");;){if(null===(u=/^\s*(\w+[\w|\-]*)\s*=\s*([\"|\'])(.*?)\2(.*)/.exec(c))||u.length<5)return!f&&h.title&&(f=g),x+" style='"+w(v)+"'"+(m?" class='"+w(m)+"'":"")+(f?" title='"+w(f)+"'":"");switch(p=u[3],c=u[4],u[1].toLowerCase()){case"class":m?m+=" "+p:m=p;break;case"title":f=p;break;case"style":v+=p;break;default:x+=" "+u[1]+"="+u[2]+p+u[2]}}return d=""!==v?"style='"+v+"'":"",d+=(void 0!==m?" class='"+m+"'":"")+(h.title&&g?" title='"+b(r).replace(/\'/g,"&apos;")+"'":""),d+=x},oe=function(e){return null==e||""===e?"&#160;":z.autoencode?w(e):String(e)},le=function(e){var t=z.treeReader,r=t.loaded,i=t.leaf_field,a=t.expanded_field,o=function(e){return!0===e||"true"===e||"1"===e};if("nested"===z.treeGridModel&&!e[i]){var l=parseInt(e[t.left_field],10),n=parseInt(e[t.right_field],10);e[i]=n===l+1}void 0!==e[r]&&(e[r]=o(e[r])),e[i]=o(e[i]),e[a]=o(e[a])},ne=function(e,t){var r,i;for(r in z.indexByColumnData)z.indexByColumnData.hasOwnProperty(r)&&(i=e[r],e.hasOwnProperty(r)&&void 0!==i&&""!==i&&(z.ignoreCase&&(i=String(i).toLowerCase()),void 0===z.indexByColumnData[r][i]&&(z.indexByColumnData[r][i]={}),z.indexByColumnData[r][i][t]=e[r],void 0===z.dataIndexById[t]&&(z.dataIndexById[t]={}),void 0===z.dataIndexById[t][r]&&(z.dataIndexById[t][r]={}),z.dataIndexById[t][r][i]=z.indexByColumnData[r][i]))},se=function(){var e,t,r,i,a,o,l,n,s,d,c,u,p=z.data,f=p.length,h=z.localReader,v=z.additionalProperties,b=h.cell,w=z.arrayReaderInfos;if("local"===z.datatype&&!0===h.repeatitems)for(i=!1===z.keyName?q(h.id)?h.id.call(y,p):h.id:z.keyName,isNaN(i)?q(i)||null!=z.arrayReaderInfos[i]&&(a=z.arrayReaderInfos[i].order):a=Number(i),e=0;e<f;e++){t=p[e],r=b?m(t,b)||t:t,d=R(r),l={};for(s in w)w.hasOwnProperty(s)&&(u=w[s],o=m(r,d?u.order:u.name),1===u.type&&null!=(c=v[u.index])&&q(c.convert)&&(o=c.convert(o,r)),void 0!==o&&(l[s]=o));void 0!==l[i]?n=void 0!==l[i]?l[i]:g():(void 0===(n=m(t,R(t)?a:i))&&(n=m(r,R(r)?a:i)),void 0===n&&(n=g())),n=String(n),l[h.id]=n,z.treeGrid&&le(l),S(p[e],l)}else if(z.treeGrid)for(e=0;e<f;e++)le(p[e])},de=function(){var e,t,r,i,a=z.data.length;for(e=!1===z.keyName||z.loadonce&&z.dataTypeOrg?z.localReader.id:z.keyName,z._index={},z.dataIndexById={},z.indexByColumnData=W(),t=0;t<a;t++)i=z.data[t],void 0===(r=m(i,e))&&(r=String(g()),void 0===i[e]&&(i[e]=r)),z._index[r]=t,ne.call(this,i,r)},ce=function(){var t,r,i=e.fn.fmatter;for(t=0;t<z.colModel.length;t++)"string"==typeof(r=z.colModel[t].formatter)&&null!=i&&q(i[r])&&q(i[r].pageFinalization)&&i[r].pageFinalization.call(this,t)},ue=function(t,r){var i,a,o,l=z.colModel,n=l.length;for(i=0;i<n;i++)(a=l[i]).cellBuilder=null,t||(o={colModel:a,gid:z.id,pos:i},void 0===a.formatter?a.cellBuilder=z.autoencode?function(e){return null==e||""===e?"&#160;":w(e)}:function(e){return null==e||""===e?"&#160;":String(e)}:"string"==typeof a.formatter&&null!=e.fn.fmatter&&q(e.fn.fmatter.getCellBuilder)?a.cellBuilder=e.fn.fmatter.getCellBuilder.call(y,a.formatter,o,r||"add"):q(a.getCellBuilder)&&(a.cellBuilder=a.getCellBuilder.call(y,o,r||"add")))},pe=function(r,i,l,n){var s=this,c=e(s),u=new Date,p=z.datatype,f="local"!==p&&z.loadonce||"xmlstring"===p||"jsonstring"===p,h=("xmlstring"===p||"xml"===p)&&e.isXMLDoc(r),v=z.localReader,b=m;if(r&&("xml"!==p||h)){switch(-1!==z.treeANode||z.scroll?i=i>1?i:1:(J.emptyRows.call(s,!1,!0),i=1),f&&(d(z.data),d(z.lastSelectedData),z._index={},z.grouping&&null!=z.groupingView&&(z.groupingView.groups=[],z.groupingView._locgr=!1),z.localReader.id="_id_"),z.reccount=0,p){case"xml":case"xmlstring":v=z.xmlReader,b=o.getXmlData;break;case"json":case"jsonp":case"jsonstring":v=z.jsonReader}var w,y,x,C,D,S,_,I,F,G,k,O,N,T={},E=z.colModel,A=E.length,B=z.arrayReaderInfos,M={},P=function(e){return function(t){var r=null!=t&&q(t.getAttribute)?t.getAttribute(e):null;return null!==r?r:void 0}},L=function(e){return function(){var t,r=M[e];if(null!=r)return t=r.childNodes,t.length>0?t[0].nodeValue:void 0}};z.page=Q(b(r,v.page),z.page),z.lastpage=Q(b(r,v.total),1),z.records=Q(b(r,v.records)),q(v.userdata)?z.userData=v.userdata.call(s,r)||{}:h?b(r,v.userdata,!0).each(function(){z.userData[this.getAttribute("name")]=e(this).text()}):z.userData=b(r,v.userdata)||{},ue();var V,H,W,U,X={},Z=z.additionalProperties,$=function(e,t){h&&"string"==typeof t&&(/^\w+$/.test(t)?X[e]=L(t):/^\[\w+\]$/.test(t)&&(X[e]=P(t.substring(1,t.length-1))))},K=function(e){var t=e.name,r=h?e.xmlmap||t:"local"===p&&!z.dataTypeOrg||"jsonstring"===p||"json"===p||"jsonp"===p?e.jsonmap||t:t;!1!==z.keyName&&!0===e.key&&(z.keyName=t),("string"==typeof r||q(r))&&(X[t]=r),q(r)||$(t,r)};for(w=0;w<A;w++)K(E[w]);for(A=Z.length,w=0;w<A;w++)"object"==typeof(W=Z[w])&&null!=W?K(W):$(W,W);if(D=!1===z.keyName?q(v.id)?v.id.call(s,r):v.id:z.keyName,isNaN(D)?q(D)||(B[D]&&(S=B[D].order),h&&("string"==typeof D&&/^\[\w+\]$/.test(D)?D=P(D.substring(1,D.length-1)):"string"==typeof D&&/^\w+$/.test(D)&&(D=L(D)))):S=Number(D),C=b(r,v.root,!0),v.row)if(1===C.length&&"string"==typeof v.row&&/^\w+$/.test(v.row)){for(U=[],k=(G=C[0].childNodes).length,F=0;F<k;F++)1===(O=G[F]).nodeType&&O.nodeName===v.row&&U.push(O);C=U}else C=b(C,v.row,!0);null==C&&R(r)&&(C=r),C||(C=[]),(x=C.length)>0&&z.page<=0&&(z.page=1);var ee=parseInt(z.rowNum,10);n&&(ee*=n+1);var te,re,ie=[],ae=[];for(U=[],w=0;w<x;w++){if(re=C[w],y=v.repeatitems&&v.cell?b(re,v.cell,!0)||re:re,V=v.repeatitems&&(h||R(y)),T={},M={},h&&!V&&null!=y)for(k=(G=y.childNodes).length,F=0;F<k;F++)1===(O=G[F]).nodeType&&(M[O.nodeName]=O);for(I in B)B.hasOwnProperty(I)&&(N=B[I],V?(H=y[N.order],h&&null!=H&&(H=H.textContent||H.text)):H=null!=X[I]&&"string"!=typeof X[I]?X[I].call(s,y,{cmName:I,iItem:w}):b(y,"string"==typeof X[I]?X[I]:N.name),1===N.type&&null!=(W=Z[N.index])&&q(W.convert)&&(H=W.convert(H,y)),void 0!==H&&(T[I]=H));if(void 0!==T[D]?te=void 0!==T[D]?T[D]:g():(void 0===(te=b(re,R(re)?S:D))&&(te=b(y,R(y)?S:D)),void 0===te&&(te=g())),void 0===T[D]&&(T[D]=te),te=String(te),_=z.idPrefix+te,z.treeGrid&&le(T),w<ee)ae.push(_),ie.push(y),U.push(T);else if(!f)break;(f||!0===z.treeGrid)&&(T._id_=te,z.data.push(T),ne(T,te),z._index[T._id_]=z.data.length-1)}if(f&&!0!==z.treeGrid){if(z.forceClientSorting)return;z.lastSelectedData=z.data.slice()}var oe=o.parseDataToHtml.call(s,x,ae,U,ie,i,n,f);ue(!0);var se=z.treeANode>-1?z.treeANode:0,de=e(s.tBodies[0]);if(!0===z.treeGrid&&se>0?e(s.rows[se]).after(oe.join("")):z.scroll?de.append(oe.join("")):null==s.firstElementChild||void 0!==t.documentMode&&t.documentMode<=9?(de.html(de.html()+oe.join("")),s.grid.cols=s.rows[0].cells):(s.firstElementChild.innerHTML+=oe.join(""),s.grid.cols=s.rows[0].cells),z.grouping&&Y.call(s),!0===z.subGrid)try{a.addSubGrid.call(c,z.iColByName.subgrid)}catch(e){}if(!1===z.gridview||q(z.afterInsertRow))for(w=0;w<Math.min(x,ee);w++)j.call(s,"afterInsertRow",ae[w],U[w],ie[w]);if(z.totaltime=new Date-u,w>0&&0===z.records&&(z.records=x),d(oe),!0===z.treeGrid)try{a.setTreeNode.call(c,se+1,w+se+1)}catch(e){}z.reccount=Math.min(x,ee),z.treeANode=-1,z.userDataOnFooter&&a.footerData.call(c,"set",z.userData,!0),f&&(z.records=x,z.lastpage=Math.ceil(x/ee)),l||s.updatepager(!1,!0),ce.call(s)}},fe=function(){function t(e){var r,i,a,o,l,n,d=0;if(null!=e.groups){for((i=e.groups.length&&"OR"===e.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<e.groups.length;r++){d>0&&i&&b.or();try{t(e.groups[r])}catch(e){O(e)}d++}i&&b.orEnd()}if(null!=e.rules)try{for((a=e.rules.length&&"OR"===e.groupOp.toString().toUpperCase())&&b.orBegin(),r=0;r<e.rules.length;r++)l=e.rules[r],o=e.groupOp.toString().toUpperCase(),v[l.op]&&l.field?(d>0&&o&&"OR"===o&&(b=b.or()),null!=(n=s[l.field])&&(n.reader,b=v[l.op](b,o)(l.field,l.data,s[l.field]))):null!=z.customSortOperations&&null!=z.customSortOperations[l.op]&&q(z.customSortOperations[l.op].filter)&&(b=b.custom(l.op,l.field,l.data)),d++;a&&b.orEnd()}catch(e){O(e)}}var r=e(this),i=z.multiSort?[]:"",l={},n=!1,s={},d=[],c=[],u=P("formatter.date.srcformat"),p=P("formatter.date.newformat");if(!R(z.data))return{};z.multiSort&&ye(i,l);var f,h,g=!!z.grouping&&z.groupingView,m=function(e,t,r){var a,o,l=e.index||e.name,m=e.sorttype||"text";if(s[e.name]={reader:z.dataTypeOrg?e.name:e.jsonmap||e.name,iCol:t,stype:m,srcfmt:"",newfmt:"",sfunc:e.sortfunc||null,isAddProp:!0===r},"date"!==m&&"datetime"!==m||(e.formatter&&"string"==typeof e.formatter&&"date"===e.formatter?(a=e.formatoptions&&e.formatoptions.srcformat?e.formatoptions.srcformat:u,o=e.formatoptions&&e.formatoptions.newformat?e.formatoptions.newformat:p):a=o=e.datefmt||"Y-m-d",s[e.name].srcfmt=a,s[e.name].newfmt=o),z.grouping)for(h=0,f=g.groupField.length;h<f;h++)e.name===g.groupField[h]&&(d[h]=s[l],c[h]=l);z.multiSort||n||e.index!==z.sortname&&e.name!==z.sortname||(i=e.name,n=!0)};if(F(z.colModel,function(e){m(this,e)}),F(z.additionalProperties,function(e){m("string"==typeof this?{name:this}:this,e,!0)}),z.treeGrid)return a.SortTree.call(r,i,z.sortorder,null!=s[i]&&s[i].stype?s[i].stype:"text",null!=s[i]&&s[i].srcfmt?s[i].srcfmt:""),!1;var v={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().inSet:e.andNot().inSet},in:function(e){return e.inSet},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},b=o.from.call(this,z.data);if(z.ignoreCase&&(b=b.ignoreCase()),!0===z.search){var w=z.postData[(z.searching||{}).sFilter||z.prmNames.filters];if(w)"string"==typeof w&&(w=e.parseJSON(w)),t(w);else try{var y=s[z.postData.searchField];b=v[z.postData.searchOper](b)(q(y.reader)?'jQuery.jgrid.getAccessor(this,jQuery("'+z.idSel+'")[0].p.colModel['+y.iCol+"].jsonmap)":"jQuery.jgrid.getAccessor(this,'"+y.reader+"')",z.postData.searchString,s[z.postData.searchField])}catch(e){}}if(z.grouping)for(h=0;h<f&&h<c.length&&h<d.length;h++)b.orderBy(c[h],g.groupOrder[h],d[h].stype,d[h].srcfmt);z.multiSort?F(i,function(){b.orderBy(this,l[this],s[this].stype,s[this].srcfmt,s[this].sfunc)}):i&&z.sortorder&&n&&b.orderBy(z.sortname,"DESC"===z.sortorder.toUpperCase()?"d":"a",s[i].stype,s[i].srcfmt,s[i].sfunc),z.lastSelectedData=b.select();var x=parseInt(z.rowNum,10),C=z.lastSelectedData.length,j=parseInt(z.page,10),D=Math.ceil(C/x),S={};if(z.grouping&&z.groupingView._locgr){z.groupingView.groups=[];var _,I,G;if(z.footerrow&&z.userDataOnFooter){for(I in z.userData)z.userData.hasOwnProperty(I)&&(z.userData[I]=0);G=!0}for(_=0;_<C;_++){if(G)for(I in z.userData)z.userData.hasOwnProperty(I)&&(z.userData[I]+=parseFloat(z.lastSelectedData[_][I]||0));a.groupingPrepare.call(r,z.lastSelectedData[_],_,x)}}b=null,s=null;var k=z.localReader;return S[k.total]=D,S[k.page]=j,S[k.records]=C,S[k.root]=z.lastSelectedData.slice((j-1)*x,j*x),S[k.userdata]=z.userData,S},he=function(r){var i,a=this,o=r.outerWidth();return o<=0&&(i=e(a).closest(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",e(t.body).append("<div id='testpg' class='"+M("gBox","ui-jqgrid")+"' style='font-size:"+i+";visibility:hidden;margin:0;padding:0;' ></div>"),e(r).clone().appendTo("#testpg"),o=e("#testpg>.ui-pg-table").width(),e("#testpg").remove()),o>0&&r.parent().width(o),o},ge=function(){var t=this;t.grid.hDiv.loading=!0,z.hiddengrid||a.progressBar.call(e(t),{method:"show",loadtype:z.loadui,htmlcontent:L("loadtext")})},me=function(){var t=this;t.grid.hDiv.loading=!1,a.progressBar.call(e(t),{method:"hide",loadtype:z.loadui})},ve=function(t){var r=this,i=e(r),l=r.grid;if(!l.hDiv.loading){var n,s,c=z.scroll&&!1===t,u={},p=z.prmNames;z.page<=0&&(z.page=Math.min(1,z.lastpage)),null!==p.search&&(u[p.search]=z.search),null!==p.nd&&(u[p.nd]=(new Date).getTime()),(isNaN(parseInt(z.rowNum,10))||parseInt(z.rowNum,10)<=0)&&(z.rowNum=z.maxRowNum),null!==p.rows&&(u[p.rows]=z.rowNum),null!==p.page&&(u[p.page]=z.page),null!==p.sort&&(u[p.sort]=z.sortname),null!==p.order&&(u[p.order]=z.sortorder),null!==z.rowTotal&&null!==p.totalrows&&(u[p.totalrows]=z.rowTotal);var f=q(z.loadComplete),h=f?z.loadComplete:null,g=0;if(t=t||1,t>1?null!==p.npage?(u[p.npage]=t,g=t-1,t=1):h=function(e){z.page++,l.hDiv.loading=!1,f&&z.loadComplete.call(r,e),ve.call(r,t-1)}:null!==p.npage&&delete z.postData[p.npage],z.grouping&&a.groupingSetup){a.groupingSetup.call(i);var m,v,b,w,x=z.groupingView,C="";for(m=0;m<x.groupField.length;m++){for(v=x.groupField[m],b=0;b<z.colModel.length;b++)(w=z.colModel[b]).name===v&&w.index&&(v=w.index);C+=v+" "+x.groupOrder[m]+", "}u[p.sort]=C+u[p.sort]}S(z.postData,u);var D=z.scroll?r.rows.length-1:1,R=function(){V.call(r),z.autowidth||void 0!==z.widthOrg&&"auto"!==z.widthOrg&&"100%"!==z.widthOrg||a.setGridWidth.call(i,z.tblwidth+z.scrollOffset,!1)},_=function(){var e;if(z.autoresizeOnLoad)a.autoResizeAllColumns.call(i),d(z.columnsToReResizing),z.autowidth&&a.setGridWidth.call(i,i.closest(".ui-jqgrid").parent().width(),!0);else{for(e=0;e<z.columnsToReResizing.length;e++)a.autoResizeColumn.call(i,z.columnsToReResizing[e]);d(z.columnsToReResizing)}},I=function(){j.call(r,"loadComplete",s),_(),i.triggerHandler("jqGridAfterLoadComplete",[s]),me.call(r),z.datatype="local",z.datastr=null,R()},F=function(e){i.triggerHandler("jqGridLoadComplete",[e]),h&&h.call(r,e),_(),i.triggerHandler("jqGridAfterLoadComplete",[e]),c&&l.populateVisible.call(r),1===t&&me.call(r),R()},G=function(){var e=fe.call(r);pe.call(r,e,D,t>1,g),F(e)};if(!j.call(r,"beforeRequest"))return;if(q(z.datatype))return void z.datatype.call(r,z.postData,"load_"+z.id,D,t,g);switch(n=z.datatype.toLowerCase(),e(J.eDiv).hide(),n){case"json":case"jsonp":case"xml":case"script":e.ajax(S({url:z.url,type:z.mtype,dataType:n,data:o.serializeFeedback.call(y,z.serializeGridData,"jqGridSerializeGridData",z.postData),success:function(i,a,o){z.jqXhr=null,e(J.eDiv).hide(),q(z.beforeProcessing)&&!1===z.beforeProcessing.call(r,i,a,o)?me.call(r):(pe.call(r,i,D,t>1,g),F(i),(z.loadonce||z.treeGrid)&&(z.dataTypeOrg=z.datatype,z.datatype="local",z.forceClientSorting&&G()))},error:function(e,i,a){z.jqXhr=null,q(z.loadError)&&z.loadError.call(r,e,i,a),1===t&&me.call(r)},beforeSend:function(e,t){var i=!0;if(q(z.loadBeforeSend)&&(i=z.loadBeforeSend.call(r,e,t)),void 0===i&&(i=!0),!1===i)return!1;z.jqXhr=e,ge.call(r)}},o.ajaxOptions,z.ajaxGridOptions));break;case"xmlstring":ge.call(r),s="string"==typeof z.datastr?e.parseXML(z.datastr):z.datastr,pe.call(r,s),I(),z.forceClientSorting&&G();break;case"jsonstring":ge.call(r),s=z.datastr&&"string"==typeof z.datastr?e.parseJSON(z.datastr):z.datastr,pe.call(r,s),I(),z.forceClientSorting&&G();break;case"local":case"clientside":ge.call(r),z.datatype="local",G()}}},be=function(t){var r=this.grid;e(z.cb,r.hDiv).prop("checked",t),z.frozenColumns&&e(z.cb,r.fhDiv).prop("checked",t)},we=function(t,r){var i,a,l,n,s,u,p=M("states.hover"),f=M("states.disabled"),h="<td class='ui-pg-button "+f+"'><span class='ui-separator'></span></td>",g="",m="<table style='table-layout:auto;white-space: pre;"+("left"===z.pagerpos?"margin-right:auto;":"right"===z.pagerpos?"margin-left:auto;":"margin-left:auto;margin-right:auto;")+"' class='ui-pg-table'><tbody><tr>",v="",b=function(e,t,r){return!!j.call(y,"onPaging",e,{newPage:t,currentPage:Q(z.page,1),lastPage:Q(z.lastpage,1),currentRowNum:Q(z.rowNum,10),newRowNum:r})&&(z.selrow=null,z.multiselect&&(z.multiPageSelection||d(z.selarrrow),be.call(y,!1)),d(z.savedRow),z.editingInfo={},!0)};if(r+="_"+t,i="pg_"+t,a=t+"_left",l=t+"_center",n=t+"_right",e("#"+c(t)).append("<div id='"+i+"' class='ui-pager-control' role='group'><table class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;'><tbody><tr><td id='"+a+"' class='ui-jqgrid-pg-left'"+(void 0!==z.pagerLeftWidth?" style='width:"+z.pagerLeftWidth+"px;'":"")+"></td><td id='"+l+"' class='ui-jqgrid-pg-center'"+(void 0!==z.pagerCenterWidth?" style='width:"+z.pagerCenterWidth+"px;'":"")+"></td><td id='"+n+"' class='ui-jqgrid-pg-right'"+(void 0!==z.pagerRightWidth?" style='width:"+z.pagerRightWidth+"px;'":"")+"></td></tr></tbody></table></div>").attr("dir","ltr"),i="#"+c(i),z.rowList.length>0){v="<td dir='"+Z+"'>";var w=L("pgrecs");v+="<select class='"+M("pager.pagerSelect","ui-pg-selbox")+"' "+(w?"title='"+w+"'":"")+">";var x;for(u=0;u<z.rowList.length;u++)1===(x=z.rowList[u].toString().split(":")).length&&(x[1]=x[0]),v+="<option value='"+x[0]+"'"+(Q(z.rowNum,0)===Q(x[0],0)?" selected='selected'":"")+">"+x[1]+"</option>";v+="</select></td>"}if("rtl"===Z&&(m+=v),!0===z.pginput&&(g="<td dir='"+Z+"'>"+o.format(L("pgtext")||"","<input aria-label='Page No.' class='"+M("pager.pagerInput","ui-pg-input")+"' type='text' size='2' maxlength='7' value='0'/>","<span id='sp_1_"+t+"'>0</span>")+"</td>"),t="#"+c(t),!0===z.pgbuttons){var D=["first","prev","next","last"],q=D.slice(),R=M("pager.pagerButton","ui-pg-button");for("rtl"===Z&&D.reverse(),u=0;u<D.length;u++)m+=function(e,t){var i=L("pg"+e);return"<td role='button' tabindex='0' id='"+e+r+"' class='"+R+"' "+(i?"title='"+i+"'":"")+"><span class='"+B("pager."+t)+"'></span></td>"}(D[u],q[u]),1===u&&(m+=""!==g?h+g+h:"")}else""!==g&&(m+=g);"ltr"===Z&&(m+=v),m+="</tr></tbody></table>",!0===z.viewrecords&&e("td"+t+"_"+z.recordpos,i).append("<span dir='"+Z+"' style='text-align:"+z.recordpos+"' class='ui-paging-info'></span>");var S=e("td"+t+"_"+z.pagerpos,i);S.append(m),s=he.call(this,S.children(".ui-pg-table")),z._nvtd=[],z._nvtd[0]=s?Math.floor((z.width-s)/2):Math.floor(z.width/3),z._nvtd[1]=0,m=null,e(".ui-pg-selbox",i).on("change",function(){var t=Q(this.value,10),r=Math.round(z.rowNum*(z.page-1)/t-.5)+1;return!!b("records",r,t)&&(z.page=r,z.rowNum=t,z.pager&&e(".ui-pg-selbox",z.pager).val(t),z.toppager&&e(".ui-pg-selbox",z.toppager).val(t),ve.call(y),!1)}),!0===z.pgbuttons&&(e(".ui-pg-button",i).hover(function(){C(this,f)?this.style.cursor="default":(e(this).addClass(p),this.style.cursor="pointer")},function(){C(this,f)||(e(this).removeClass(p),this.style.cursor="default")}),e("#first"+c(r)+", #prev"+c(r)+", #next"+c(r)+", #last"+c(r)).click(function(){if(C(this,f))return!1;var e=Q(z.page,1),t=e,i=this.id,a=Q(z.lastpage,1),o=!1,l=!0,n=!0,s=!0,d=!0;return 0===a||1===a?(e<=1&&(l=!1,n=!1),s=!1,d=!1):a>1&&e>=1?1===e?(l=!1,n=!1):e===a&&(s=!1,d=!1):a>1&&0===e&&(s=!1,d=!1,e=a-1),this.id==="first"+r&&l&&(i="first",t=1,o=!0),this.id==="prev"+r&&n&&(i="prev",t=e-1,o=!0),this.id==="next"+r&&s&&(i="next",t=e+1,o=!0),this.id==="last"+r&&d&&(i="last",t=a,o=!0),!!b(i,t,Q(z.rowNum,10))&&(z.page=t,o&&ve.call(y),!1)})),!0===z.pginput&&e("input.ui-pg-input",i).on("keypress.jqGrid",function(t){var r=t.charCode||t.keyCode||0,i=Q(e(this).val(),1);return 13===r?!!b("user",i,Q(z.rowNum,10))&&(e(this).val(i),z.page=e(this).val()>0?e(this).val():z.page,ve.call(y),!1):this}),S.children(".ui-pg-table").on("keydown.jqGrid",function(e){var t;13===e.which&&(t=S.find(":focus")).length>0&&t.trigger("click")})},ye=function(t,r,i){if(F((z.sortname+" "+z.sortorder).split(","),function(){var r=e.trim(this).split(" ");2===r.length&&t.push(r[0])}),null!=i){var a=e.inArray(i.index||i.name,t);""!==i.lso&&a<0?t.push(i.index||i.name):""===i.lso&&a>=0&&t.splice(a,1)}F(z.colModel,function(){var i,a=this.index||this.name;this.lso&&(i=this.lso.split("-"),e.inArray(a,t)<0&&t.push(a),r[a]=i[i.length-1])})},xe=function(t,r){var i,a="",l=z.colModel[t],n=M("states.disabled"),s=e(z.frozenColumns?r:y.grid.headers[t].el),d=s.find("span.s-ico"),c=d.children("span.ui-icon-asc"),u=d.children("span.ui-icon-desc"),p=c,f=u,h=[],g={};if(s.find("span.ui-grid-ico-sort").addClass(n),s.attr("aria-selected","false"),l.lso?(d.show(),"desc"===(i=(i=l.lso.split("-"))[i.length-1])&&(p=u,f=c),p.removeClass(n).css("display",""),z.showOneSortIcon&&f.hide(),s.attr("aria-selected","true")):z.viewsortcols[0]||d.hide(),ye(h,g,l),"string"==typeof z.sortname&&""!==z.sortname&&z.sortname.split(",").length<h.length){var m=function(t){F(z.colModel,function(){var r,i="#jqgh_"+o.jqID(z.id+"_"+this.name),a=e(i);if(this.lso&&(this.index||this.name)===t){if("function"==typeof h.indexOf)r=h.indexOf(t);else{for(r=0;r<h.length&&h[r]!==t;r++);r===h.length&&(r=-1)}r>=0&&(h.splice(r,1),this.lso="")}z.frozenColumns&&(a=a.add(e(J.fhDiv).find(i))),a.children(".s-ico")[this.lso?"show":"hide"]()})};if("lastClickedFirstSorted"===z.multiSortOrder&&h.length>1)for(h.unshift(h[h.length-1]),h.pop();h.length>z.maxSortColumns;)m(h[h.length-1]);else q(z.multiSortOrder)&&(h=z.multiSortOrder.call(y,{sortNames:h,cm:l,sortDirs:g,removeSorting:m})||h)}F(h,function(){a.length>0&&(a+=", "),a+=this+" "+g[this],z.sortorder=g[this]}),z.sortname=a.substring(0,a.length-z.sortorder.length-1),z.showSortOrder&&F(z.colModel,function(){if(this.sortable){var t=_(this.name,h),r="#jqgh_"+o.jqID(z.id+"_"+this.name),i=e(r);z.frozenColumns&&(i=i.add(e(J.fhDiv).find(r))),i.children(".ui-jqgrid-sort-order").html(t<0?"&nbsp;":q(z.formatSortOrder)?z.formatSortOrder.call(y,{cm:this,sortIndex:t}):t+1)}})},Ce=function(t,r,i,o,l,n){var s=this,u=s.grid,p=z.colModel[r],f=M("states.disabled");if(null!=p&&p.sortable&&!(z.savedRow.length>0)){if(z.lastsort===r&&""!==z.sortname?"asc"===z.sortorder?z.sortorder="desc":"desc"===z.sortorder?z.sortorder="asc":z.sortorder=p.firstsortorder||"asc":z.sortorder=p.firstsortorder||"asc",p.lso?"asc"===p.lso?p.lso+="-desc":"desc"===p.lso?p.lso+="-asc":"asc-desc"!==p.lso&&"desc-asc"!==p.lso||!z.threeStateSort&&!z.multiSort||(p.lso=""):p.lso=p.firstsortorder||"asc",i||(z.page=1),z.multiSort)xe(r,l);else{if(o){if(z.lastsort===r&&z.sortorder===o&&!i)return;z.sortorder=o}var h=u.headers,g=u.fhDiv,m=h[z.lastsort]?e(h[z.lastsort].el):e(),v=e(z.frozenColumns?l:h[r].el),b=v.find("span.s-ico"),w=b.children("span.ui-icon-"+z.sortorder),y=b.children("span.ui-icon-"+("asc"===z.sortorder?"desc":"asc"));p=z.colModel[z.lastsort],m.find("span.ui-grid-ico-sort").addClass(f),m.attr("aria-selected","false"),z.frozenColumns&&(g.find("span.ui-grid-ico-sort").addClass(f),g.find("th").attr("aria-selected","false")),z.viewsortcols[0]||(z.lastsort!==r?(z.frozenColumns&&g.find("span.s-ico").hide(),m.find("span.s-ico").hide(),b.show()):""===z.sortname&&b.show()),z.lastsort!==r&&"true"===m.data("autoResized")&&(null!=p&&null!=p.autoResizing&&p.autoResizing.compact||z.autoResizing.compact)&&z.columnsToReResizing.push(z.lastsort),p=z.colModel[r],b.css("display",""),""!==p.lso?(w.removeClass(f).css("display",""),z.showOneSortIcon&&y.removeClass(f).hide(),v.attr("aria-selected","true")):(v.attr("aria-selected","false"),z.threeStateSort&&(z.sortorder="",z.viewsortcols[0]||b.hide())),z.lastsort!==r&&"true"===v.data("autoResized")&&(null!=p&&null!=p.autoResizing&&p.autoResizing.compact||z.autoResizing.compact)&&z.columnsToReResizing.push(r),z.sortname=p.index||t}if(j.call(s,"onSortCol",z.sortname,r,z.sortorder,n||{})){if("local"===z.datatype?z.deselectAfterSort&&!z.multiPageSelection&&a.resetSelection.call(e(s)):z.multiPageSelection||(z.selrow=null,z.multiselect&&(be.call(s,!1),d(z.selarrrow))),d(z.savedRow),z.editingInfo={},z.scroll){var x=u.bDiv.scrollLeft;J.emptyRows.call(s,!0,!1),u.hDiv.scrollLeft=x}z.subGrid&&"local"===z.datatype&&e("td.sgexpanded","#"+c(z.id)).each(function(){e(this).trigger("click")}),ve.call(s),z.lastsort=r,z.sortname!==t&&r&&(z.lastsort=r)}else z.lastsort=r}},je=function(e){var t,r=e,i=e;for(t=e+1;t<z.colModel.length;t++)if(!0!==z.colModel[t].hidden){i=t;break}return i-r},De=function(e){return z.iColByName[(e.id||"").substring(z.id.length+1)]};-1===_(z.multikey,re)&&(z.multikey=!1),z.keyName=!1,z.sortorder=z.sortorder.toLowerCase(),o.cell_width=o.cellWidth();var qe,Re,Se=o.cmTemplate;for(qe=0;qe<z.colModel.length;qe++)te="string"==typeof(Re=z.colModel[qe]).template?null==Se||"object"!=typeof Se[Re.template]&&!q(Se[Re.template])?{}:Se[Re.template]:Re.template,q(te)&&(te=te.call(y,{cm:Re,iCol:qe})),Re=S(!0,{},z.cmTemplate,te||{},Re),!1===z.keyName&&!0===Re.key&&(z.keyName=Re.name),z.colModel[qe]=Re;for(z.indexByColumnData=W(),qe=0;qe<z.additionalProperties.length;qe++)Re=z.additionalProperties[qe],!1===z.keyName&&!0===Re.key&&(z.keyName=Re.name);if(0===z.colNames.length)for(qe=0;qe<z.colModel.length;qe++)z.colNames[qe]=void 0!==z.colModel[qe].label?z.colModel[qe].label:z.colModel[qe].name;if(z.colNames.length===z.colModel.length){if(!0===z.grouping&&(z.scroll=!1,z.rownumbers=!1,z.treeGrid=!1,z.gridview=!0),z.subGrid&&q(a.setSubGrid))try{a.setSubGrid.call(D)}catch(e){}if(z.multiselect&&("left"===z.multiselectPosition||"right"===z.multiselectPosition)){var _e="left"===z.multiselectPosition?"unshift":"push";z.colNames[_e]("<span class='slds-checkbox'><input id='"+z.cbId+"' class='cbox' type='checkbox' name='"+z.cbId+"' aria-checked='false'/><label class='slds-checkbox__label' for='"+z.cbId+"'><span class='slds-checkbox_faux'></span></label></span>"),z.colModel[_e]({name:"cb",width:o.cell_width?z.multiselectWidth+z.cellLayout:z.multiselectWidth,labelClasses:"jqgh_cbox",classes:"td_cbox",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})}if(z.rownumbers&&(z.colNames.unshift(""),z.colModel.unshift({name:"rn",width:o.cell_width?z.rownumWidth+z.cellLayout:z.rownumWidth,labelClasses:"jqgh_rn",sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0})),z.iColByName=H(z.colModel),z.xmlReader=S(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},z.xmlReader),z.jsonReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},z.jsonReader),z.localReader=S(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},z.localReader),z.scroll&&(z.pgbuttons=!1,z.pginput=!1,z.rowList=[]),!0===z.treeGrid){try{a.setTreeGrid.call(D)}catch(e){}"local"!==z.datatype&&(z.localReader={id:"_id_"}),z.iPropByName=U(z.additionalProperties)}if(function(){var e,t,r,i=z.remapColumns,a=z.colModel,o=a.length,l=[];for(e=0;e<o;e++)r=a[e].name,_(r,z.reservedColumnNames)<0&&l.push(r);if(null!=i)for(t=l.slice(),e=0;e<i.length;e++)l[e]=t[i[e]];z.cmNamesInputOrder=l}(),function(){var t,r,i,a,o,l=z.colModel,n=z.cmNamesInputOrder,s=z.additionalProperties,d=n.length;for(z.arrayReaderInfos={},r=z.arrayReaderInfos,o=0;o<d;o++)i=n[o],_(i,z.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(void 0!==(a=z.iColByName[i])?r[i]={name:i,index:a,order:o,type:0}:void 0!==(a=z.iPropByName[i])?r[i]={name:i,index:a,order:o,type:1}:i===(z.prmNames.rowidName||"rowid")&&(r[i]={index:a,type:2}));for(d=l.length,t=0;t<d;t++)i=l[t].name,_(i,z.reservedColumnNames)<0&&!r.hasOwnProperty(i)&&(r[i]={name:i,index:t,order:o,type:0},o++);for(d=s.length,t=0;t<d;t++)null==(i=s[t])||r.hasOwnProperty(i)||("object"==typeof i&&"string"===e.type(i.name)&&(i=i.name),r[i]={name:i,index:t,order:o,type:1},o++)}(),z.data.length&&(se.call(y),de.call(y)),!0===z.shrinkToFit&&!0===z.forceFit)for(qe=z.colModel.length-1;qe>=0;qe--)if(!0!==z.colModel[qe].hidden){z.colModel[qe].resizable=!1;break}var Ie,Fe,Ge,ke,Oe,Ne,Te,Ee,Ae=[],Be=[],Me=[],ze="<thead><tr class='ui-jqgrid-labels' role='row'>",Pe="<tbody><tr style='display:none;'>",Le=M("states.hover"),Ve=M("states.disabled");if(z.multiSort){Ae=z.sortname.split(",");var He;for(He=0;He<Ae.length;He++)Me=I(Ae[He]).split(" "),Ae[He]=I(Me[0]),Be[He]=Me[1]?I(Me[1]):z.sortorder||"asc"}for(qe=0;qe<z.colNames.length;qe++){switch(Re=z.colModel[qe],Oe=z.headertitles||Re.headerTitle?" title='"+b("string"==typeof Re.headerTitle?Re.headerTitle:z.colNames[qe])+"'":"",ze+="<th id='"+z.id+"_"+Re.name+"' class='"+M("colHeaders","ui-th-column ui-th-"+Z+" "+(Re.labelClasses||""))+"'"+Oe+">",Ie=Re.index||Re.name,Re.labelAlign){case"left":Ne="text-align:left;";break;case"right":Ne="text-align:right;";break;case"likeData":Ne=void 0===Re.align||"left"===Re.align?"text-align:left;":"right"===Re.align?"text-align:right;":"";break;default:Ne=""}ze+="<div id='jqgh_"+z.id+"_"+Re.name+"'"+(K?" class='ui-th-div-ie'":"")+(""===Ne?"":" style='"+Ne+"'")+" role='columnheader'>",Ee=Re.autoResizable&&"actions"!==Re.formatter?"<span class='"+z.autoResizing.wrapperClassName+"'>"+z.colNames[qe]+"</span>":z.colNames[qe],z.sortIconsBeforeText?(ze+=(z.builderSortIcons||o.builderSortIcons).call(y,qe),ze+=Ee):(ze+=Ee,ze+=(z.builderSortIcons||o.builderSortIcons).call(y,qe)),ze+="</div></th>",Pe+="<td></td>",Re.width=Re.width?parseInt(Re.width,10):150,"boolean"!=typeof Re.title&&(Re.title=!0),Re.lso="",Ie===z.sortname&&(z.lastsort=qe,Re.lso=z.sortorder||Re.firstsortorder||"asc"),z.multiSort&&-1!==(Me=_(Ie,Ae))&&(Re.lso=Be[Me])}ze+="</tr></thead>",Pe+="</tr></tbody>";var We=e("<table class='"+M("hTable","ui-jqgrid-htable")+"' style='width:1px' role='presentation' aria-labelledby='gbox_"+z.id+"'>"+ze+Pe+"</table>");if(e(We[0].tHead).children("tr").children("th").hover(function(){e(this).addClass(Le)},function(){e(this).removeClass(Le)}),z.multiselect&&e(z.cb,We).on("click",function(){var t,r,i=M("states.select"),a=[],o=z.iColByName.cb,l=function(t,r){e(t)[r?"addClass":"removeClass"](i).attr(r?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"}),void 0!==o&&e(t.cells[o]).children("span").children("input.cbox").prop("checked",r)},n=J.fbRows,s=Ve+" ui-subgrid jqgroup jqfoot jqgfirstrow jqgskipselect",c=z._index;if(d(z.selarrrow),this.checked){if(t=!0,z.selrow=y.rows.length>1?y.rows[y.rows.length-1].id:null,z.multiPageSelection&&("local"===z.datatype||z.treeGrid)&&null!=z.data&&z.data.length>0&&null!=c)for(r in c)c.hasOwnProperty(r)&&z.selarrrow.push(z.idPrefix+r)}else t=!1,z.selrow=null;var u=t?z.selarrrow:a;e(y.rows).each(function(r){C(this,s)||(l(this,t),e.inArray(this.id,u)<0&&u.push(this.id),n&&l(n[r],t))}),j.call(y,"onSelectAll",t?z.selarrrow:a,t)}),!0===z.autowidth){var Ue=Math.floor(e(ee).innerWidth());z.width=Ue>0?Ue:"nw"}isNaN(z.width)?isNaN(parseFloat(z.width))||(z.width=parseFloat(z.width)):z.width=Number(z.width),z.widthOrg=z.width,function(){var e,t,r,i,a=0,l=o.cell_width?0:Q(z.cellLayout,0),n=0,s=Q(z.scrollOffset,0),d=!1,c=0,u=o.isCellClassHidden;F(z.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),z.grouping&&z.autowidth){var e=_(this.name,z.groupingView.groupField);e>=0&&z.groupingView.groupColumnShow.length>e&&(this.hidden=!z.groupingView.groupColumnShow[e])}this.widthOrg=t=Q(this.width,0),!1!==this.hidden||u(this.classes)||(a+=t+l,this.fixed?c+=t+l:n++)}),isNaN(z.width)&&(z.width=a+(!1!==z.shrinkToFit||isNaN(z.height)?0:s)),J.width=z.width,z.tblwidth=a,!1===z.shrinkToFit&&!0===z.forceFit&&(z.forceFit=!1),!0===z.shrinkToFit&&n>0&&(r=J.width-l*n-c,isNaN(z.height)||(r-=s,d=!0),a=0,F(z.colModel,function(i){!1!==this.hidden||u(this.classes)||this.fixed||(t=Math.round(r*this.width/(z.tblwidth-l*n-c)),this.width=t,a+=t,e=i)}),i=0,d?J.width-c-(a+l*n)!==s&&(i=J.width-c-(a+l*n)-s):d||1===Math.abs(J.width-c-(a+l*n))||(i=J.width-c-(a+l*n)),z.colModel[e].width+=i,z.tblwidth=a+i+l*n+c,z.tblwidth>z.width&&(z.colModel[e].width-=z.tblwidth-parseInt(z.width,10),z.tblwidth=z.width))}(),e(ee).css("width",J.width+"px").append("<div class='"+M("resizer","ui-jqgrid-resize-mark")+"' id='"+z.rsId+"'>&#160;</div>"),e(z.rs).on("selectstart",function(){return!1}).click(X).dblclick(function(t){var r=e(this).data("idx"),i=e(this).data("pageX"),o=z.colModel[r];if(null==i||null==o)return!1;var l=String(i).split(";"),n=parseFloat(l[0]),s=parseFloat(l[1]);return!(2===l.length&&(Math.abs(n-s)>5||Math.abs(t.pageX-n)>5||Math.abs(t.pageX-s)>5)||(j.call(y,"resizeDblClick",r,o,t)&&o.autoResizable&&a.autoResizeColumn.call(D,r),j.call(y,"afterResizeDblClick",{iCol:r,cm:o,cmName:o.name}),1))}),e($).css("width",J.width+"px");var Ye="";z.footerrow&&(Ye+="<table role='presentation' style='width:1px' class='"+M("gridFooter","ui-jqgrid-ftable")+"'><tbody><tr role='row' class='"+M("rowFooter","footrow footrow-"+Z)+"'>");var Xe="<tr class='"+M("gridRow","jqgfirstrow ui-row-"+z.direction)+"' role='row' style='height:auto'>";if(z.disableClick=!1,e("th",We[0].tHead.rows[0]).each(function(r){var i=z.colModel[r],a=i.name,o=e(this),l=o.children("div"),n=l.children("span.s-ico"),s=z.showOneSortIcon;Fe=i.width,void 0===i.resizable&&(i.resizable=!0),i.resizable?(Ge=t.createElement("span"),e(Ge).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+Z).on("selectstart",function(){return!1}),o.addClass(z.resizeclass)):Ge="",o.css("width",Fe+"px").prepend(Ge),Ge=null;var d="";if(!0===i.hidden&&(o.css("display","none"),d="display:none;"),Xe+="<td role='gridcell' "+(i.classes?"class='"+i.classes+"' ":"")+"style='height:0;width:"+Fe+"px;"+d+"'></td>",J.headers[r]={width:Fe,el:this},"boolean"!=typeof(ke=i.sortable)&&(i.sortable=!0,ke=!0),"cb"!==a&&"subgrid"!==a&&"rn"!==a&&ke&&z.viewsortcols[2]&&l.addClass("ui-jqgrid-sortable"),ke)if(z.multiSort){var c="desc"===i.lso?"asc":"desc";z.viewsortcols[0]?(n.css("display",""),i.lso&&(n.children("span.ui-icon-"+i.lso).removeClass(Ve),s&&n.children("span.ui-icon-"+c).hide())):i.lso&&(n.css("display",""),n.children("span.ui-icon-"+i.lso).removeClass(Ve),s&&n.children("span.ui-icon-"+c).hide()),z.showSortOrder&&(Me=_(a,Ae),n["beforeSortIcons"===z.sortOrderPosition?"before":"after"]("<span class='ui-jqgrid-sort-order'>"+(Me<0?"&nbsp;":q(z.formatSortOrder)?z.formatSortOrder.call(y,{cm:this,sortIndex:Me}):Me+1)+"</span>"))}else{var u="desc"===z.sortorder?"asc":"desc";z.viewsortcols[0]?(n.css("display",""),r===z.lastsort&&(n.children("span.ui-icon-"+z.sortorder).removeClass(Ve),s&&n.children("span.ui-icon-"+u).hide())):r===z.lastsort&&""!==i.lso&&(n.css("display",""),n.children("span.ui-icon-"+z.sortorder).removeClass(Ve),s&&n.children("span.ui-icon-"+u).hide())}z.footerrow&&(Ye+="<td role='gridcell' "+ae(r,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(t){var r,i=e(this),a=i.closest(".ui-jqgrid-hdiv").hasClass("frozen-div");if(1===e(t.target).closest("th>span.ui-jqgrid-resize").length)return null!=(r=De(this))&&(!0===z.forceFit&&(z.nv=je(r)),J.dragStart(r,t,function(){var t=[i.position().left+i.outerWidth()];return"rtl"===z.direction&&(t[0]=z.width-t[0]),t[0]-=a?0:J.bDiv.scrollLeft,t.push(e(J.hDiv).position().top),t.push(e(J.bDiv).offset().top-e(J.hDiv).offset().top+e(J.bDiv).height()+(J.sDiv?e(J.sDiv).height():0)),t}(),i)),!1}).click(function(t){if(z.disableClick)return z.disableClick=!1,!1;var r,i,a="th.ui-th-column>div";z.viewsortcols[2]?a+=".ui-jqgrid-sortable":a+=">span.s-ico>span.ui-grid-ico-sort";var o=e(t.target).closest(a);if(1===o.length){z.viewsortcols[2]||(r=!0,i=o.hasClass("ui-icon-desc")?"desc":"asc");var l=De(this);return null!=l&&Ce.call(y,e("div",this)[0].id.substring(5+z.id.length+1),l,r,i,this,t),!1}}),z.sortable&&q(a.sortableColumns))try{a.sortableColumns.call(D,e(We[0].tHead.rows[0]))}catch(e){}z.footerrow&&(Ye+="</tr></tbody></table>"),Xe+="</tr>",D.html("<tbody>"+Xe+"</tbody>"),D.addClass(M("grid","ui-jqgrid-btable"+(!0===z.altRows&&D.jqGrid("isBootstrapGuiStyle")?" table-striped":"")));var Qe=!(!z.caption||!0!==z.hiddengrid),Je=e("<div class='ui-jqgrid-hbox"+("rtl"===Z?"-rtl":"")+"'></div>"),Ze=M("top"),$e=M("bottom");if(J.hDiv=t.createElement("div"),e(J.hDiv).css({width:J.width+"px"}).addClass(M("hDiv","ui-jqgrid-hdiv")).append(Je).scroll(function(){var t=e(this).next(".ui-jqgrid-bdiv")[0];return t&&(t.scrollLeft=this.scrollLeft),!1}),e(Je).append(We),We=null,Qe&&e(J.hDiv).hide(),z.rowNum=parseInt(z.rowNum,10),(isNaN(z.rowNum)||z.rowNum<=0)&&(z.rowNum=z.maxRowNum),z.pager){var Ke,et;"string"==typeof z.pager&&"#"!==z.pager.substr(0,1)?(et=z.pager,Ke=e("#"+c(z.pager))):!0===z.pager?(et=g(),(Ke=e("<div id='"+et+"'></div>")).appendTo("body"),z.pager="#"+c(et)):et=(Ke=e(z.pager)).attr("id"),Ke.length>0?(Ke.css({width:J.width+"px"}).addClass(M("pager.pager","ui-jqgrid-pager "+$e)).appendTo(ee),Qe&&Ke.hide(),we.call(y,et,""),z.pager="#"+c(et)):z.pager=""}!1===z.cellEdit&&!0===z.hoverrows&&D.on("mouseover.jqGrid",function(t){Te=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(Te).attr("class")&&e(Te).addClass(Le)}).on("mouseout.jqGrid",function(t){Te=e(t.target).closest("tr.jqgrow"),e(Te).removeClass(Le)});var tt,rt,it,at=function(t){var r,i,a;do{if((r=e(t).closest("td")).length>0){if(i=r.parent(),a=i.parent().parent(),i.is(".jqgrow")&&(a[0]===this||a.is("table.ui-jqgrid-btable")&&(a[0].id||"").replace("_frozen","")===this.id))break;t=r.parent()}}while(r.length>0);return r};D.before(J.hDiv).click(function(t){var r=M("states.select"),i=t.target,l=at.call(y,i),n=l.parent(),s=function(){z.multiselect&&u&&!z.multiboxonly&&p&&G.call(D,tt,!0,t);try{a.editCell.call(D,n[0].rowIndex,rt,!0)}catch(e){}};if(0!==n.length&&!C(n,Ve)){tt=n[0].id;var u=e(i).hasClass("cbox")&&e(i).is(":enabled")&&!C(i,Ve),p=j.call(y,"beforeSelectRow",tt,t),f=o.detectRowEditing.call(y,tt),h=null!=f&&"cellEditing"!==f.mode;if("A"!==i.tagName&&(!h||u))if(rt=l[0].cellIndex,it=l.html(),j.call(y,"onCellSelect",tt,rt,it,t),!0!==z.cellEdit||z.noCellSelection)if(p){if(z.multikey)t[z.multikey]?G.call(D,tt,!0,t):z.multiselect&&u&&(u=e("#jqg_"+c(z.id)+"_"+tt).is(":checked"),e("#jqg_"+c(z.id)+"_"+tt).prop("checked",!u));else if(z.multiselect&&z.multiboxonly)if(u)G.call(D,tt,!0,t);else{var g=z.frozenColumns?z.id+"_frozen":"";e(z.selarrrow).each(function(t,i){var o=a.getGridRowById.call(D,i);o&&e(o).removeClass(r),e("#jqg_"+c(z.id)+"_"+c(i)).prop("checked",!1),g&&(e("#"+c(i),"#"+c(g)).removeClass(r),e("#jqg_"+c(z.id)+"_"+c(i),"#"+c(g)).prop("checked",!1))}),d(z.selarrrow),G.call(D,tt,!0,t)}else{var m=z.selrow;G.call(D,tt,!0,t),"toggle"!==z.singleSelectClickMode||z.multiselect||m!==tt||(y.grid.fbRows&&(n=n.add(y.grid.fbRows[n[0].rowIndex]===n[0]?y.rows[n[0].rowIndex]:y.grid.fbRows[n[0].rowIndex])),n.removeClass(r).attr({"aria-selected":"false",tabindex:"-1"}),z.selrow=null)}z.cellEdit&&s()}else u&&e(i).prop("checked",!1);else s()}}).on("reloadGrid",function(t,r){var i=this,o=i.grid,l=e(this);if(!0===z.treeGrid&&(z.datatype=z.treedatatype),r=S({},s.reloadGridOptions||{},z.reloadGridOptions||{},r||{}),"local"===z.datatype&&z.dataTypeOrg&&z.loadonce&&r.fromServer&&(z.datatype=z.dataTypeOrg,delete z.dataTypeOrg),r.current&&o.selectionPreserver.call(i),"local"===z.datatype?(z.multiPageSelection||a.resetSelection.call(l),z.data.length&&(se.call(i),de.call(i))):z.treeGrid||z.multiPageSelection||(z.selrow=null,z.multiselect&&(d(z.selarrrow),be.call(i,!1)),d(z.savedRow),z.editingInfo={}),z.iRow=-1,z.iCol=-1,z.scroll&&J.emptyRows.call(i,!0,!1),r.page){var n=parseInt(r.page,10);n>z.lastpage&&(n=z.lastpage),n<1&&(n=1),z.page=n,o.prevRowHeight?o.bDiv.scrollTop=(n-1)*o.prevRowHeight*z.rowNum:o.bDiv.scrollTop=0}return o.prevRowHeight&&z.scroll&&void 0===r.page?(delete z.lastpage,o.populateVisible.call(i)):o.populate.call(i),!0===z._inlinenav&&l.jqGrid("showAddEditButtons",!1),!1}).dblclick(function(e){var t=at.call(y,e.target),r=t.parent();if(t.length>0&&!j.call(y,"ondblClickRow",r.attr("id"),r[0].rowIndex,t[0].cellIndex,e))return!1}).on("contextmenu",function(e){var t=at.call(y,e.target),r=t.parent(),i=r.attr("id");if(0!==t.length)return z.multiselect||z.selrow===i||!0!==z.selectOnContextMenu||G.call(D,i,!0,e),!!j.call(y,"onRightClickRow",i,r[0].rowIndex,t[0].cellIndex,e)&&void 0}),J.bDiv=t.createElement("div"),K&&"auto"===String(z.height).toLowerCase()&&(z.height="100%"),e(J.bDiv).append(e("<div style='position:relative;'></div>").append("<div></div>").append(y)).addClass("ui-jqgrid-bdiv").css({height:z.height+(isNaN(z.height)?"":"px"),width:J.width+"px"}).scroll(J.scrollGrid),z.maxHeight&&e(J.bDiv).css("max-height",z.maxHeight+(isNaN(z.maxHeight)?"":"px")),D.css({width:"1px"}),e.support.tbody||2===e(">tbody",y).length&&e(">tbody:gt(0)",y).remove(),z.multikey&&e(J.bDiv).on(o.msie?"selectstart":"mousedown",function(){return!1}),Qe&&e(J.bDiv).hide(),J.cDiv=t.createElement("div");var ot=B("gridMinimize.visible"),lt=B("gridMinimize.hidden"),nt=L("showhide"),st=!0===z.hidegrid?e("<a role='link' class='"+M("titleButton","ui-jqgrid-titlebar-close")+"'"+(nt?" title='"+nt+"'":"")+"/>").hover(function(){st.addClass(Le)},function(){st.removeClass(Le)}).append("<span class='"+ot+"'></span>"):"";if(e(J.cDiv).append("<span class='ui-jqgrid-title'>"+z.caption+"</span>").append(st).addClass(M("gridTitle","ui-jqgrid-titlebar ui-jqgrid-caption"+("rtl"===Z?"-rtl ":" ")+Ze)),e(J.cDiv).insertBefore(J.hDiv),z.toolbar[0]){J.uDiv=t.createElement("div"),"top"===z.toolbar[1]?e(J.uDiv).insertBefore(J.hDiv):"bottom"===z.toolbar[1]&&e(J.uDiv).insertAfter(J.hDiv);var dt=M("toolbarUpper","ui-userdata");"both"===z.toolbar[1]?(J.ubDiv=t.createElement("div"),e(J.uDiv).addClass(dt).attr("id","t_"+z.id).insertBefore(J.hDiv),e(J.ubDiv).addClass(M("toolbarBottom","ui-userdata")).attr("id","tb_"+z.id).insertAfter(J.hDiv),Qe&&e(J.ubDiv).hide()):e(J.uDiv).width(J.width).addClass(dt).attr("id","t_"+z.id),Qe&&e(J.uDiv).hide()}if("string"==typeof z.datatype&&(z.datatype=z.datatype.toLowerCase()),z.toppager?(z.toppager=z.id+"_toppager",J.topDiv=e("<div id='"+z.toppager+"'></div>")[0],e(J.topDiv).addClass(M("pager.pager","ui-jqgrid-toppager"+(z.caption?"":" "+Ze))).css({width:J.width+"px"}).insertBefore(J.hDiv),we.call(y,z.toppager,"_t"),z.toppager="#"+c(z.toppager)):""!==z.pager||z.scroll||(z.rowNum=z.maxRowNum),z.footerrow&&(J.sDiv=e("<div class='ui-jqgrid-sdiv'></div>")[0],Je=e("<div class='ui-jqgrid-hbox"+("rtl"===Z?"-rtl":"")+"'></div>"),e(J.sDiv).append(Je).width(J.width).insertAfter(J.hDiv),e(Je).append(Ye),J.footers=e(".ui-jqgrid-ftable",J.sDiv)[0].rows[0].cells,z.rownumbers&&(J.footers[0].className=M("rowNum","jqgrid-rownum")),Qe&&e(J.sDiv).hide()),Je=null,z.caption){var ct=z.datatype;!0===z.hidegrid&&(e(".ui-jqgrid-titlebar-close",J.cDiv).click(function(t){var r=".ui-jqgrid-bdiv,.ui-jqgrid-hdiv,.ui-jqgrid-pager,.ui-jqgrid-sdiv",i=this;!0===z.toolbar[0]&&("both"===z.toolbar[1]&&(r+=",#"+c(e(J.ubDiv).attr("id"))),r+=",#"+c(e(J.uDiv).attr("id")));var a=e(r,z.gView).length;return z.toppager&&(r+=","+z.toppager),"visible"===z.gridstate?e(r,z.gBox).slideUp("fast",function(){0==--a&&(e("span",i).removeClass(ot).addClass(lt),z.gridstate="hidden",e(z.gBox).hasClass("ui-resizable")&&e(".ui-resizable-handle",z.gBox).hide(),e(J.cDiv).addClass($e),Qe||j.call(y,"onHeaderClick",z.gridstate,t))}):"hidden"===z.gridstate&&(e(J.cDiv).removeClass($e),e(r,z.gBox).slideDown("fast",function(){0==--a&&(e("span",i).removeClass(lt).addClass(ot),Qe&&(z.datatype=ct,ve.call(y),Qe=!1),z.gridstate="visible",e(z.gBox).hasClass("ui-resizable")&&e(".ui-resizable-handle",z.gBox).show(),Qe||j.call(y,"onHeaderClick",z.gridstate,t))})),!1}),Qe&&(z.datatype="local",e(".ui-jqgrid-titlebar-close",J.cDiv).trigger("click")))}else e(J.cDiv).hide(),e(J.cDiv).nextAll("div:visible").first().addClass("ui-corner-top");e(J.hDiv).after(J.bDiv),J.eDiv=e("<div class='"+M("gridError","ui-jqgrid-errorbar ui-jqgrid-errorbar-"+Z)+"' style='display:none;'><span class='"+M("gridErrorText","ui-jqgrid-error")+"'></span></div>")[0],e(J.hDiv).after(J.eDiv),e(ee).click(X).dblclick(function(t){var r=e(z.rs),i=r.offset(),o=r.data("idx"),l=r.data("delta"),n=z.colModel[o],s=e(this).data("pageX")||r.data("pageX");if(null==s||null==n)return!1;var d=String(s).split(";"),c=parseFloat(d[0]),u=parseFloat(d[1]);return!(2===d.length&&(Math.abs(c-u)>5||Math.abs(t.pageX-c)>5||Math.abs(t.pageX-u)>5)||(j.call(y,"resizeDblClick",o,n)&&i.left-1<=t.pageX+l&&t.pageX+l<=i.left+r.outerWidth()+1&&n.autoResizable&&a.autoResizeColumn.call(D,o),j.call(y,"afterResizeDblClick",{iCol:o,cm:n,cmName:n.name}),1))}),z.pager||e(J.cDiv).nextAll("div:visible").filter(":last").addClass($e),e(".ui-jqgrid-labels",J.hDiv).on("selectstart",function(){return!1}),y.formatCol=ae,y.sortData=Ce,y.updatepager=function(t,r){var i,a,l,s,d,c,u,p,h=this,g=e(h),m=h.grid,v=z.pager||"",b=z.pager?"_"+z.pager.substr(1):"",w=m.bDiv,y=e.fmatter?e.fmatter.NumberFormat:null,x=z.toppager?"_"+z.toppager.substr(1):"",C=M("states.hover"),D=M("states.disabled");if((l=parseInt(z.page,10)-1)<0&&(l=0),l*=parseInt(z.rowNum,10),d=l+z.reccount,z.scroll){var q=e(f(n.BODY_TABLE,w)[0].rows).slice(1);l=d-q.length,z.reccount=q.length;var R=q.outerHeight()||m.prevRowHeight;if(R){var S=l*R,_=o.fixMaxHeightOfDiv.call(h,parseInt(z.records,10)*R);e(w).children("div").first().css({height:_+"px"}).children("div").first().css({height:S+"px",display:""}),0===w.scrollTop&&z.page>1&&(w.scrollTop=z.rowNum*(z.page-1)*R)}w.scrollLeft=m.hDiv.scrollLeft}if(v+=z.toppager?(v?",":"")+z.toppager:""){if(u=P("formatter.integer")||{},i=Q(z.page),a=Q(z.lastpage),e(".selbox",v).prop("disabled",!1),!0===z.pginput){var I=e(".ui-pg-input",v),F=String(z.page).length;I.val(z.page),I.each(function(){var t=parseInt(e(this).attr("size"),10);t>0&&t<F&&e(this).attr("size",F)}),p=z.toppager?"#sp_1"+b+",#sp_1"+x:"#sp_1"+b,e(p).html(e.fmatter?y(z.lastpage,u):z.lastpage).closest(".ui-pg-table").each(function(){he.call(h,e(this))})}z.viewrecords&&(0===z.reccount?e(".ui-paging-info",v).html(L("emptyrecords")):(s=l+1,c=z.records,e.fmatter&&(s=y(s,u),d=y(d,u),c=y(c,u)),e(".ui-paging-info",v).html(o.format(L("recordtext"),s,d,c)))),!0===z.pgbuttons&&(a<=0&&(i=0),i<=0&&(i=a=0),1===i||0===i?(e("#first"+b+", #prev"+b).addClass(D).removeClass(C),z.toppager&&e("#first_t"+x+", #prev_t"+x).addClass(D).removeClass(C)):(e("#first"+b+", #prev"+b).removeClass(D),z.toppager&&e("#first_t"+x+", #prev_t"+x).removeClass(D)),i===a||0===i?(e("#next"+b+", #last"+b).addClass(D).removeClass(C),z.toppager&&e("#next_t"+x+", #last_t"+x).addClass(D).removeClass(C)):(e("#next"+b+", #last"+b).removeClass(D),z.toppager&&e("#next_t"+x+", #last_t"+x).removeClass(D)))}!0===t&&!0===z.rownumbers&&e(">td.jqgrid-rownum",h.rows).each(function(t){e(this).html(l+1+t)}),r&&z.jqgdnd&&g.jqGrid("gridDnD","updateDnD"),j.call(h,"gridComplete"),g.triggerHandler("jqGridAfterGridComplete")},y.refreshIndex=de,y.addItemDataToColumnIndex=ne,y.removeItemDataFromColumnIndex=function(t){var r,i,a,o=z.dataIndexById[t];if(null!=o){for(r in o)if(o.hasOwnProperty(r)){i=o[r];for(a in i)i.hasOwnProperty(a)&&(delete z.indexByColumnData[r][a][t],e.isEmptyObject(z.indexByColumnData[r][a])&&delete z.indexByColumnData[r][a])}delete z.dataIndexById[t]}},y.generateValueFromColumnIndex=function(t,r,i){var a,o,l=e(this).jqGrid("getUniqueValueFromColumnIndex",t),n="";if(null!=l)for(i=i||";",r=r||":",a=0,o=l.length;a<o;a++)""!==n&&(n+=i||";"),n+=l[a]+(r||":")+l[a];return n},y.setHeadCheckBox=be,y.fixScrollOffsetAndhBoxPadding=V,y.constructTr=function(t,r,i,l,n,s){var d,c="-1",u="",p=r?"display:none;":"",f=this,h=M("gridRow","jqgrow ui-row-"+z.direction)+(i?" "+i:"")+(s?" "+M("states.select"):""),g=e(f).triggerHandler("jqGridRowAttr",[l,n,t]);if("object"!=typeof g&&(g=q(z.rowattr)?z.rowattr.call(f,l,n,t):"string"==typeof z.rowattr&&null!=o.rowattr&&q(o.rowattr[z.rowattr])?o.rowattr[z.rowattr].call(f,l,n,t):{}),null!=g&&!e.isEmptyObject(g)){g.hasOwnProperty("id")&&(t=g.id,delete g.id),g.hasOwnProperty("tabindex")&&(c=g.tabindex,delete g.tabindex),g.hasOwnProperty("style")&&(p+=g.style,delete g.style),g.hasOwnProperty("class")&&(h+=" "+g.class,delete g.class);try{delete g.role}catch(e){}for(d in g)g.hasOwnProperty(d)&&(u+=" "+d+"="+g[d])}if(z.treeGrid&&parseInt(l[z.treeReader.level_field],10)!==parseInt(z.tree_root_level,10)){var m=a.getNodeParent.call(e(this),l);!m||!m.hasOwnProperty(z.treeReader.expanded_field)||m[z.treeReader.expanded_field]||r||(p+="display:none;")}return"<tr role='row' id='"+t+"' tabindex='"+c+"' class='"+h+"'"+(""===p?"":" style='"+p+"'")+u+">"},y.formatter=function(t,r,i,a,o,l){var n,s=z.colModel[i];if(void 0!==s.formatter){var d={rowId:t=""!==String(z.idPrefix)?ie(t):t,colModel:s,gid:z.id,pos:i,rowData:l||a};n=q(s.cellBuilder)?s.cellBuilder.call(y,r,d,a,o):q(s.formatter)?s.formatter.call(y,r,d,a,o):e.fmatter?e.fn.fmatter.call(y,s.formatter,r,d,a,o):oe(r)}else n=oe(r);if(n=s.autoResizable&&"actions"!==s.formatter?"<span class='"+z.autoResizing.wrapperClassName+"'>"+n+"</span>":n,z.treeGrid&&"edit"!==o&&(null==z.ExpandColumn&&0===i||z.ExpandColumn===s.name)){null==l&&(l=z.data[z._index[t]]);var c=parseInt(l[z.treeReader.level_field]||0,10),u=0===parseInt(z.tree_root_level,10)?c:c-1,p=l[z.treeReader.leaf_field],f=l[z.treeReader.expanded_field],h=l[z.treeReader.icon_field],g=p?(null!=h&&""!==h?h:z.treeIcons.leaf)+" tree-leaf":f?z.treeIcons.minus+" tree-minus":z.treeIcons.plus+" tree-plus";if(!p&&h&&"string"==typeof h){var m=h.split(",");2===m.length&&(g=f?m[0]:m[1])}n="<div class='tree-wrap' style='width:"+18*(u+1)+"px;'><div class='"+x(z.treeIcons.commonIconClass,g,"treeclick")+"' style='"+(!0===z.ExpandColClick?"cursor:pointer;":"")+("rtl"===z.direction?"margin-right:":"margin-left:")+18*u+"px;'></div></div><span class='cell-wrapper"+(p?"leaf":"")+"'"+(z.ExpandColClick?" style='cursor:pointer;'":"")+">"+n+"</span>"}return n},S(J,{populate:ve,emptyRows:function(r,i){var a=this,o=J.bDiv,l=null!=J.fbDiv?J.fbDiv.children(".ui-jqgrid-btable")[0]:null,n=function(r){if(r){var i=r.rows,a=i[0];if(z.deepempty)i&&e(i).slice(1).remove();else if(z.quickEmpty)if("quickest"===z.quickEmpty)r.replaceChild(t.createElement("tbody"),r.tBodies[0]),r.firstChild.appendChild(a);else for(;i.length>1;)r.deleteRow(i.length-1);else e(r.firstChild).empty().append(a)}};e(a).off(".jqGridFormatter"),n(a),n(l),r&&z.scroll&&(e(o.firstChild).css({height:"auto"}),e(o.firstChild.firstChild).css({height:0,display:"none"}),0!==o.scrollTop&&(o.scrollTop=0)),!0===i&&z.treeGrid&&(d(z.data),d(z.lastSelectedData),z._index={},z.dataIndexById={},z.indexByColumnData={}),z.rowIndexes={},z.iRow=-1,z.iCol=-1},beginReq:ge,endReq:me}),y.addXmlData=pe,y.addJSONData=pe,y.rebuildRowIndexes=Y,y.grid.cols=y.rows[0].cells,j.call(y,"onInitGrid"),z.treeGrid&&"local"===z.datatype&&null!=z.data&&z.data.length>0&&(z.datatype="jsonstring",z.datastr=z.data,z.data=[]),ve.call(y),z.hiddengrid=!1}else O(P("errors.model"))}else O("Element is not a table!")}})};var D=e.fn.jqGrid;o.extend({getGridRes:function(t){var r=this[0];if(!r||!r.grid||!r.p)return null;var i=o.getRes(l[r.p.locale],t)||o.getRes(l["en-US"],t),a=o.getRes(o,t);return"object"!=typeof i||null===i||e.isArray(i)?void 0!==a?a:i:e.extend(!0,{},i,a||{})},getGuiStyles:function(t,r){var i=this instanceof e&&this.length>0?this[0]:this;if(!i||!i.grid||!i.p)return"";var a,l=i.p.guiStyle||o.defaults.guiStyle||"jQueryUI",n=o.getRes(o.guiStyles[l],t);return void 0===n&&"string"==typeof(a=o.getRes(o.guiStyles[l],"baseGuiStyle"))&&(n=o.getRes(o.guiStyles[a],t)),o.mergeCssClasses(n||"",r||"")},isBootstrapGuiStyle:function(){return e.inArray("ui-jqgrid-bootstrap",e(this).jqGrid("getGuiStyles","gBox").split(" "))>=0},displayErrorMessage:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(r&&r.grid&&r.p&&t){var i=e(r.grid.eDiv),a=i.children(".ui-jqgrid-error");a.html(t),i.show(),r.p.errorDisplayTimeout&&setTimeout(function(){a.empty(),i.hide()},r.p.errorDisplayTimeout)}},getIconRes:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(!r||!r.p)return"";var i=r.p,a=o.icons[i.iconSet],l=function(e,t){var r,i,a,l=t.split("."),n=l.length,s=[];if(null==(e="string"==typeof e?o.icons[e]:e))return"";for((r=e).common&&s.push(r.common),a=0;a<n&&(i=l[a]);a++){if(void 0===(r=r[i])){if("common"===i)break;return""}if("string"==typeof r){s.push(r);break}null!=r&&r.common&&s.push(r.common)}return o.mergeCssClasses.apply(this,s)};if(null==a)return"";var n=l(i.iconSet,t);return""===n&&null!=a.baseIconSet&&(n=l(a.baseIconSet,t)),n||""},isInCommonIconClass:function(t){var r=this instanceof e&&this.length>0?this[0]:this;if(!r||!r.p)return"";var i=r.p,a=o.icons[i.iconSet];if(null==a)return!1;var l=a.common;if(void 0===l){if(null==a.baseIconSet)return!1;if(null==(a=o.icons[a.baseIconSet]))return!1;l=a.common}return"string"==typeof l&&e.inArray(t,l.split(" "))>=0},getUniqueValueFromColumnIndex:function(e){var t=this[0];if(!t||!t.grid)return null;var r,i=[],a="",o=t.p.indexByColumnData[e];if(null!=o){for(a in o)if(o.hasOwnProperty(a)){for(r in o[a])if(o[a].hasOwnProperty(r)){a=String(o[a][r]);break}i.push(a)}t.p.ignoreCase?void 0===String.prototype.localeCompare?i.sort(function(e,t){var r=e.toLowerCase(),i=t.toLowerCase();return r===i?0:r>i?1:-1}):i.sort(function(e,t){return String(e).toLowerCase().localeCompare(String(t).toLowerCase())}):i.sort()}return i},generateDatalistFromColumnIndex:function(t){if(!this[0]||!this[0].grid)return null;var r,i,a=this.jqGrid("getUniqueValueFromColumnIndex",t),o=e("<datalist></datalist>");if(!(null!=a&&a.length>0))return e();for(r=0,i=a.length;r<i;r++)o.append(e("<option></option>").attr("value",a[r]));return o},getGridParam:function(e){var t=this[0];return t&&t.grid?e?void 0!==t.p[e]?t.p[e]:null:t.p:null},setGridParam:function(t,r){return this.each(function(){var i=this;if(null==r&&(r=!1),i.grid&&"object"==typeof t)if(!0===r){var a=e.extend({},i.p,t);i.p=a}else e.extend(!0,i.p,t)})},abortAjaxRequest:function(){return this.each(function(){var e=this;null!=e.p.jqXhr&&e.p.jqXhr.abort(),e.grid.endReq.call(e)})},getGridRowById:function(t){if(null==t)return null;var r,i=t.toString();return this.each(function(){var a,o,l=this.rows;if(null!=this.p.rowIndexes&&(o=l[this.p.rowIndexes[i]])&&o.id===i&&(r=o),!r)try{for(a=l.length;a--;)if(o=l[a],i===o.id){r=o;break}}catch(i){r=e(this.grid.bDiv).find("#"+c(t)),r=r.length>0?r[0]:null}}),r},getDataIDs:function(){var t=[];return this.each(function(){var r,i,a=this.rows,o=a.length;if(o&&o>0)for(r=0;r<o;r++)i=a[r],e(i).hasClass("jqgrow")&&t.push(i.id)}),t},setSelection:function(t,r,i){return this.each(function(){var a,l,n,s,d,c,u,p=this,f=e(p),h=p.p,g=D.getGuiStyles,m=D.getGridRowById,v=g.call(f,"states.select"),b=g.call(f,"states.disabled"),w=p.grid.fbRows,y=function(t,r){var i=r?"addClass":"removeClass",a=h.iColByName.cb,o=r?{"aria-selected":"true",tabindex:"0"}:{"aria-selected":"false",tabindex:"-1"},l=function(t){e(t)[i](v).attr(o),void 0!==a&&e(t.cells[a]).children("span").children("input.cbox").prop("checked",r)};l(t),w&&l(w[t.rowIndex])};void 0!==t&&(r=!1!==r,null!=i&&(u=e(i.target).closest("tr.jqgrow")).length>0&&(l=u[0],w&&(l=p.rows[l.rowIndex])),null==l&&(l=m.call(f,t)),!l||!l.className||l.className.indexOf(b)>-1||(!0===h.scrollrows&&null!=(n=m.call(f,t))&&(n=n.rowIndex)>=0&&function(t,r){var i=r.clientHeight,a=r.scrollTop,o=e(t).position().top,l=t.clientHeight;o+l>=i+a?r.scrollTop=o-(i+a)+l+a:o<i+a&&o<a&&(r.scrollTop=o)}(p.rows[n],p.grid.bDiv),h.multiselect?(p.setHeadCheckBox(!1),h.selrow=l.id,-1===(s=e.inArray(h.selrow,h.selarrrow))?(a=!0,h.selarrrow.push(h.selrow)):null!==o.detectRowEditing.call(p,l.id)?a=!0:(a=!1,h.selarrrow.splice(s,1),d=h.selarrrow[0],h.selrow=void 0===d?null:d),"ui-subgrid"!==l.className&&y(l,a),r&&j.call(p,"onSelectRow",l.id,a,i||{})):"ui-subgrid"!==l.className&&(h.selrow!==l.id?(null!==h.selrow&&(c=m.call(f,h.selrow))&&y(c,!1),y(l,!0),a=!0):a=!1,h.selrow=l.id,r&&j.call(p,"onSelectRow",l.id,a,i||{}))))})},resetSelection:function(t){return this.each(function(){var r,i=this,a=e(this),o=i.p,l=D.getGuiStyles,n=D.getGridRowById,s=l.call(a,"states.select"),c="edit-cell "+s,u="selected-row "+l.call(a,"states.hover"),p=o.iColByName.cb,f=void 0!==p,h=i.grid.fbRows,g=function(t){var r,i={"aria-selected":"false",tabindex:"-1"};e(t).removeClass(s).attr(i),f&&e(t.cells[p]).children("span").children("input.cbox").prop("checked",!1),h&&(r=h[t.rowIndex],e(r).removeClass(s).attr(i),f&&e(r.cells[p]).children("span").children("input.cbox").prop("checked",!1))};if(void 0!==t){if(r=n.call(a,t),g(r),f){i.setHeadCheckBox(!1);var m=e.inArray(t,o.selarrrow);-1!==m&&o.selarrrow.splice(m,1)}}else o.multiselect?(e(i.rows).each(function(){var t=e.inArray(this.id,o.selarrrow);-1!==t&&(g(this),o.selarrrow.splice(t,1))}),i.setHeadCheckBox(!1),o.multiPageSelection||d(o.selarrrow),o.selrow=null):o.selrow&&(r=n.call(a,o.selrow),g(r),o.selrow=null);!0===o.cellEdit&&parseInt(o.iCol,10)>=0&&parseInt(o.iRow,10)>=0&&(null!=(r=i.rows[o.iRow])&&(e(r.cells[o.iCol]).removeClass(c),e(r).removeClass(u)),h&&null!=(r=h[o.iRow])&&(e(r.cells[o.iCol]).removeClass(c),e(r).removeClass(u))),d(o.savedRow),o.editingInfo={}})},isCellEditing:function(t,r,i){var a=this[0],l=o.detectRowEditing.call(a,t);if(null!=l&&("inlineEditing"===l.mode||"cellEditing"===l.mode&&l.savedRow.ic===r)){r=isNaN(r)?a.p.iColByName[r]:parseInt(r,10);var n=null!=i&&i.id===t?i:D.getGridRowById.call(e(a),t),s=a.p.colModel[r],d=s.editable;if(e.isFunction(d)&&(d=d.call(a,{rowid:t,id:h(a.p.idPrefix,t),iCol:r,iRow:n.rowIndex,cmName:s.name,cm:s,mode:l.mode,td:n.cells[r],tr:n,dataElement:o.getDataFieldOfCell.call(a,n,r)[0]})),!0===d)return!0}return!1},getRowData:function(t,r){var i,a={};return"object"==typeof t&&(r=t,t=void 0),r=r||{},this.each(function(){var l,n,s,d,c,u,p,f=this,g=f.p,m=!1,v=1,b=f.rows;if(void 0===t)m=!0,i=[],v=b.length;else if(!(l=D.getGridRowById.call(e(f),t)))return a;for(n=0;n<v;n++)if(m&&(l=b[n]),e(l).hasClass("jqgrow")){for(o.detectRowEditing.call(f,t),d=e(l).find("td[role=gridcell]"),s=0;s<d.length;s++)if(c=g.colModel[s],u=c.name,e.inArray(u,g.reservedColumnNames)<0&&"actions"!==c.formatter&&(!r.skipHidden||!c.hidden))if(p=d[s],D.isCellEditing.call(e(f),t,s,l))a[u]=o.getEditedValue.call(f,o.getDataFieldOfCell.call(f,l,s),c,{},c.editable);else if(!0===g.treeGrid&&u===g.ExpandColumn)a[u]=y(e("span",p).first().html());else try{a[u]=e.unformat.call(f,p,{rowId:t,colModel:c},s)}catch(t){a[u]=y(e(p).html())}!r.includeId||!1!==g.keyName&&null!=a[g.keyName]||(a[g.prmNames.id]=h(g.idPrefix,l.id)),m&&(i.push(a),a={})}}),i||a},delRowData:function(t){var r,i,a,o=!1;return this.each(function(){var l=this,n=l.p;if(!(r=D.getGridRowById.call(e(l),t)))return!1;if(n.subGrid&&(a=e(r).next()).hasClass("ui-subgrid")&&a.remove(),e(r).remove(),n.records--,n.reccount--,l.updatepager(!0,!1),o=!0,n.multiselect&&-1!==(i=e.inArray(t,n.selarrrow))&&n.selarrrow.splice(i,1),n.multiselect&&n.selarrrow.length>0?n.selrow=n.selarrrow[n.selarrrow.length-1]:n.selrow===t&&(n.selrow=null),"local"===n.datatype){var s=h(n.idPrefix,t),d=n._index[s];void 0!==d&&(l.removeItemDataFromColumnIndex(s),n.data.splice(d,1),l.refreshIndex())}if(l.rebuildRowIndexes(),!0===n.altRows&&o&&!e(l).jqGrid("isBootstrapGuiStyle")){var c=n.altclass,u=l.grid.fbRows;e(l.rows).each(function(t){var r=e(this);u&&(r=r.add(u[this.rowIndex])),r[t%2==0?"addClass":"removeClass"](c)})}j.call(l,"afterDelRow",t)}),o},setRowData:function(t,r,i){var a=!0;return this.each(function(){var o,l=this,n=l.p,s=typeof i,d={};if(!l.grid)return!1;if(!(o=D.getGridRowById.call(e(l),t)))return!1;if(r)try{var c,u=h(n.idPrefix,t),p=n._index[u],f={},g=null!=p?n.data[p]:void 0;if(e(n.colModel).each(function(t){var i=this,a=i.name,o=m(r,a);void 0!==o&&("local"===n.datatype&&null!=g&&(o=v.call(l,o,i,g[a],u,g,t),e.isFunction(i.saveLocally)?i.saveLocally.call(l,{newValue:o,newItem:d,oldItem:g,id:u,cm:i,cmName:a,iCol:t}):d[a]=o),f[a]=o)}),e(n.colModel).each(function(i){var a,s=this,c=s.name,u=m(r,c),p=e(o.cells[i]);if(void 0!==u){"local"===n.datatype&&null!=g&&(u=d[c]),a=s.title?{title:u}:{},u=l.formatter(t,u,i,r,"edit",f),"select"===s.formatter&&(a=s.title?{title:b(u)}:{});var h=p;!0===n.treeGrid&&c===n.ExpandColumn&&(h=h.children("span.cell-wrapperleaf,span.cell-wrapper").first()),h.html(u),p.attr(a),n.frozenColumns&&(h=e(l.grid.fbRows[o.rowIndex].cells[i]),!0===n.treeGrid&&c===n.ExpandColumn&&(h=h.children("span.cell-wrapperleaf,span.cell-wrapper").first()),h.html(u).attr(a))}}),"local"===n.datatype){if(n.treeGrid)for(c in n.treeReader)n.treeReader.hasOwnProperty(c)&&delete d[n.treeReader[c]];void 0!==g&&(n.data[p]=e.extend(!0,g,d),l.removeItemDataFromColumnIndex(u),l.addItemDataToColumnIndex(n.data[p],u))}j.call(l,"afterSetRow",{rowid:t,inputData:r,iData:p,iRow:o.rowIndex,tr:o,localData:d,cssProp:i})}catch(e){a=!1}a&&("string"===s?e(o).addClass(i):null!==i&&"object"===s&&e(o).css(i))}),a},changeRowid:function(t,r){return this.each(function(){var i,a,l,n,s,d,c,u=this,p=e(u),f=u.p;if(u.grid&&f&&t!==r&&(n=p.jqGrid("getGridRowById",t))&&null==p.jqGrid("getGridRowById",r)){var h=o.stripPref(f.idPrefix,t),g=o.stripPref(f.idPrefix,r),m=!1===f.keyName?f.prmNames.id:f.keyName;for(f.iColByName[m]>=0&&p.jqGrid("setCell",t,m,g),"local"===f.datatype&&void 0!==f._index[h]&&(f._index[g]=f._index[h],i=f.data[f._index[h]],delete f._index[h],i.hasOwnProperty(m)&&(i[m]=g)),f.rowIndexes[r]=n.rowIndex,delete f.rowIndexes[t],(s=null==u.grid.fbRows?e(n):e(n).add(u.grid.fbRows[n.rowIndex])).attr("id",r),f.selrow===t&&(f.selrow=r),e.isArray(f.selarrrow)&&(a=e.inArray(t,f.selarrrow))>=0&&(f.selarrrow[a]=r),f.multiselect&&(l="jqg_"+f.id+"_"+r,s.find("input.cbox").attr("id",l).attr("name",l)),a=0;a<f.colModel.length;a++)"actions"===(d=f.colModel[a]).formatter?s.find(".ui-jqgrid-actions .ui-pg-div").each(function(){var t=this.id,r=t.length-h.length;r>0&&t.substr(r)===h&&e(this).attr("id",t.substr(0,r)+g)}):("showlink"===d.formatter||null!=d.unformat&&null!=d.formatter)&&(c=p.jqGrid("getCell",r,a),p.jqGrid("setCell",r,a,c,!1,!1,!0));j.call(u,"afterChangeRowid",{rowid:r,oldRowid:t,iRow:n.rowIndex,tr:n})}})},addRowData:function(t,r,i,a){e.inArray(i,["first","last","before","after","afterSelected","beforeSelected"])<0&&(i="last");var l,n,s,d,c,u,p,f,h,b,w,y=!1;return r&&(e.isArray(r)?(u=!0,p=t):(r=[r],u=!1),this.each(function(){var x,C,q=this,R=q.p,S=r.length,_=e(q),I=q.rows,F=0,G=D.getGridRowById,k=R.colModel,O=R.additionalProperties;for(u||(void 0!==t?t=String(t):(t=g(),!1!==R.keyName&&(p=R.keyName,void 0!==r[0][p]&&(t=r[0][p])))),f=R.altclass;F<S;){if(h=r[F],n=[],u)try{void 0===(t=h[p])&&(t=g())}catch(e){t=g()}for(w=o.stripPref(R.idPrefix,t),x={},d=0;d<k.length;d++)b=k[d],"rn"!==(l=b.name)&&"cb"!==l&&"subgrid"!==l&&(c=v.call(q,h[l],b,void 0,w,{},d),e.isFunction(b.saveLocally)?b.saveLocally.call(q,{newValue:c,newItem:x,oldItem:{},id:w,rowid:t,cm:b,cmName:l,iCol:d}):void 0!==c&&(x[l]=c));for(d=0;d<O.length;d++)"object"==typeof(l=O[d])&&l.hasOwnProperty("name")&&(l=l.name),void 0!==(c=m(h,l))&&(x[l]=c);if("local"===R.datatype&&(x[R.localReader.id]=w,R._index[w]=R.data.length,R.data.push(x),q.addItemDataToColumnIndex(x,w)),C=R.grouping,R.grouping=!1,n=o.parseDataToHtml.call(q,1,[t],[h]),R.grouping=C,n=n.join(""),0===I.length)e(q.tBodies[0]).append(n);else switch("afterSelected"!==i&&"beforeSelected"!==i||(void 0===a&&null!==R.selrow?(a=R.selrow,i="afterSelected"===i?"after":"before"):i="afterSelected"===i?"last":"first"),i){case"last":e(I[I.length-1]).after(n),s=I.length-1;break;case"first":e(I[0]).after(n),s=1;break;case"after":(s=G.call(_,a))&&(e(I[s.rowIndex+1]).hasClass("ui-subgrid")?(e(I[s.rowIndex+1]).after(n),s=s.rowIndex+2):(e(s).after(n),s=s.rowIndex+1));break;case"before":(s=G.call(_,a))&&(e(s).before(n),s=s.rowIndex-1)}!0===R.subGrid&&D.addSubGrid.call(_,R.iColByName.subgrid,s),R.records++,R.reccount++,0===R.lastpage&&(R.lastpage=1),j.call(q,"afterAddRow",{rowid:t,inputData:r,position:i,srcRowid:a,iRow:s,localData:x,iData:R.data.length-1}),F++}!0!==R.altRows||u||_.jqGrid("isBootstrapGuiStyle")||("last"===i?(I.length-1)%2==0&&e(I[I.length-1]).addClass(f):e(I).each(function(t){t%2==1?e(this).addClass(f):e(this).removeClass(f)})),q.rebuildRowIndexes(),q.updatepager(!0,!0),y=!0})),y},footerData:function(t,r,i){function a(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}var o=!1,l={};return null==t&&(t="get"),"boolean"!=typeof i&&(i=!0),t=t.toLowerCase(),this.each(function(){var n,s,d,c,u=this,p=u.p;if(!u.grid||!p.footerrow)return!1;if("set"===t&&a(r))return!1;o=!0;var f=e(u.grid.sDiv).children(".ui-jqgrid-hbox").children(".ui-jqgrid-ftable")[0];if(null==f||null==f.rows)return!1;var h=f.rows[0].cells,g=p.colModel,m=null==u.grid.fsDiv?{}:u.grid.fsDiv.children(".ui-jqgrid-ftable")[0].rows[0].cells;if("get"===t)for(c=0;c<g.length;c++)d=g[c].name,e.inArray(d,p.reservedColumnNames)<0&&(!1!==r?(n=e(h[c]).text(),e.trim(n)&&(l[d]=n)):l[d]=e(h[c]).html());else if("set"===t)for(d in r)c=p.iColByName[d],r.hasOwnProperty(d)&&void 0!==c&&(n=i?u.formatter("",r[d],c,r,"edit"):r[d],(s=e(h[c]).add(m[c])).html(n),g[c].title&&s.attr({title:b(n)}))}),"get"===t?l:o},resetColumnResizerHeight:function(){return this.each(function(){if(e.jgrid.msie){var t,r,i,a,o=this.grid.headers;for(i=0;i<o.length;i++)(a=(t=e(o[i].el)).height())&&(r=t.children(".ui-jqgrid-resize")).length>0&&Math.abs(a-r.height())>.5&&t.children(".ui-jqgrid-resize").height(a)}})},rotateColumnHeaders:function(t,r){return this.each(function(){var i,a,o,l,n,s,d,c,u,p,f,h,g=e(this),m=g.jqGrid("getGridParam");for(e.isArray(t)||(t=[t]),i=0;i<t.length;i++)l=t[i],(a=isNaN(l)?m.iColByName[l]:parseInt(l,10))>=0&&(s=(n=(o=e(this.grid.headers[a].el)).children("div")).children("span."+m.autoResizing.wrapperClassName),d=n.children("span.s-ico").outerWidth(!0),c=s.outerWidth(),f=parseFloat(o.css("padding-top")||0),h=parseFloat(o.css("padding-bottom")||0),u=parseFloat(o.css("padding-left")||0),p=parseFloat(o.css("padding-right")||0),m.showSortOrder&&(d+=.5*d),void 0!==r&&0!==r||(r=c+d+u+p),o.height(r),o.css({paddingTop:p+"px",paddingBottom:u+"px",paddingLeft:f+"px",paddingRight:h+"px"}),r=Math.max(o.parent().height(),r),n.css("min-width",r-u-p+"px").addClass("rotate").css({bottom:0}),m.colModel[a].rotated=!0);g.jqGrid("resetColumnResizerHeight"),m.frozenColumns&&setTimeout(function(){g.triggerHandler("jqGridResetFrozenHeights",{header:{resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:-1,iRowEnd:-1}}})},0)})},showHideCol:function(t,r,i){return this.each(function(){var a,l=this,n=e(l),s=l.grid,d=!1,c=l.p,u=o.cell_width?0:c.cellLayout;if(s){"string"==typeof t&&(t=[t]),r="none"!==r&&!1!==r?"":"none",i=i||{};var p=""===r,f=c.groupHeader,h=f&&("object"==typeof f||e.isFunction(f));if(h&&!i.skipSetGroupHeaders&&D.destroyGroupHeader.call(n,!1),e(c.colModel).each(function(o){var n=function(t){var i,a,l,n;for(i=0,a=t.length;i<a;i++)n=(l=t[i]).cells[o],(!e(l).hasClass("jqgroup")||null!=n&&1===n.colSpan)&&(0===i&&e(l).hasClass("jqgfirstrow")?(e(n).css("height","1px"),e(n).css("display",r),e(n).css("height","0")):e(n).css("display",r))};if(-1!==e.inArray(this.name,t)&&this.hidden===p){if(!0===c.frozenColumns&&!0===this.frozen&&!i.notSkipFrozen)return!0;n(e(s.hDiv).find(".ui-jqgrid-htable>thead>tr")),!0===c.frozenColumns&&null!=s.fhDiv&&n(e(s.fhDiv).find(".ui-jqgrid-htable>thead>tr")),n(l.rows),!0===c.frozenColumns&&null!=s.fbRows&&n(l.rows),c.footerrow&&(n(e(s.sDiv).find("tr.footrow")),!0===c.frozenColumns&&null!=s.fsDiv&&n(e(s.fsDiv).find("tr.footrow"))),a=parseInt(this.width,10),"none"===r?c.tblwidth-=a+u:c.tblwidth+=a+u,this.hidden=!p,d=!0,i.skipFeedback?(i.toReport=i.toReport||{},i.toReport[this.name]=p):j.call(l,"onShowHideCol",p,this.name,o,i)}}),!0===d){var g=c.autowidth||void 0!==c.widthOrg&&"auto"!==c.widthOrg&&"100%"!==c.widthOrg?c.width:c.tblwidth+parseInt(c.scrollOffset,10);i.skipSetGridWidth?i.newGridWidth=g:D.setGridWidth.call(n,g)}if(h&&!i.skipSetGroupHeaders)if(null!=c.pivotOptions&&null!=c.pivotOptions.colHeaders&&c.pivotOptions.colHeaders.length>1){var m,v=c.pivotOptions.colHeaders;for(m=0;m<v.length;m++)v[m]&&v[m].groupHeaders.length&&D.setGroupHeaders.call(n,v[m])}else D.setGroupHeaders.call(n,c.groupHeader)}})},hideCol:function(t,r){return this.each(function(){D.showHideCol.call(e(this),t,"none",r)})},showCol:function(t,r){return this.each(function(){D.showHideCol.call(e(this),t,"",r)})},remapColumns:function(t,r,i){function a(t){var r=t.length?f(t):e.extend({},t);e.each(d,function(e){t[e]=r[this]})}function o(t,r){(r?t.children(r):t.children()).each(function(){var t=this,r=f(t.cells);e.each(d,function(e){var i=r[this],a=t.cells[e];null!=i&&null!=a&&i.cellIndex!==e&&i.parentNode.insertBefore(i,a)})})}var l,n,s,d,c=this[0],u=c.p,p=c.grid,f=e.makeArray,h=!0===u.frozenColumns,g=this.jqGrid("getNumberOfFrozenColumns");if(null!=p&&null!=u){for(d=function(){var e,r=[],i=[],a=t.length;for(e=0;e<a;e++)h&&t[e]<g?r.push(t[e]):i.push(t[e]);return r.concat(i)}(),a(u.colModel),a(u.colNames),a(p.headers),s=e(p.hDiv).children("div").children("table.ui-jqgrid-htable").children("thead"),h&&null!=p.fhDiv&&(s=s.add(p.fhDiv.children("table.ui-jqgrid-htable").children("thead"))),o(s,i&&":not(.ui-jqgrid-labels)"),r&&(s=e(c.tBodies[0]),h&&null!=p.fbDiv&&(s=s.add(p.fbDiv.children("table.ui-jqgrid-btable").children("tbody").first())),o(s,"tr.jqgfirstrow,tr.jqgrow,tr.jqfoot")),u.footerrow&&(s=e(p.sDiv).children("div").children("table.ui-jqgrid-ftable").children("tbody").first(),h&&null!=p.fsDiv&&(s=s.add(p.fsDiv.children("table.ui-jqgrid-ftable").children("tbody").first())),o(s)),u.remapColumns&&(u.remapColumns.length?a(u.remapColumns):u.remapColumns=f(d)),u.lastsort=e.inArray(u.lastsort,d),u.iColByName={},l=0,n=u.colModel.length;l<n;l++)u.iColByName[u.colModel[l].name]=l;j.call(c,"onRemapColumns",d,r,i)}},remapColumnsByName:function(t,r,i){var a,o,l=this[0].p,n=[],s=t.slice(),d=e.inArray;for(l.subGrid&&d("subgrid",s)<0&&s.unshift("subgrid"),l.multiselect&&d("cb",s)<0&&s.unshift("cb"),l.rownumbers&&d("rn",s)<0&&s.unshift("rn"),a=0,o=s.length;a<o;a++)n.push(l.iColByName[s[a]]);return D.remapColumns.call(this,n,r,i),this},setGridWidth:function(t,r){return this.each(function(){var i,a,l,n,s=this,d=s.p,c=s.grid,u=0,p=0,f=!1,h=0,g=o.isCellClassHidden,m=t;if(c&&null!=d){s.fixScrollOffsetAndhBoxPadding();var v,b,w,y,x=d.colModel,C=d.scrollOffset,j=o.cell_width?0:d.cellLayout,D=c.headers,q=c.footers,R=c.bDiv,S=c.hDiv,_=c.sDiv,I=c.cols,F=e(S).find(">div>.ui-jqgrid-htable>thead>tr").first()[0].cells,G=function(t){c.width=d.width=t,e(d.gBox).css("width",t+"px"),e(d.gView).css("width",t+"px"),e(R).css("width",t+"px"),e(S).css("width",t+"px"),d.pager&&e(d.pager).css("width",t+"px"),d.toppager&&e(d.toppager).css("width",t+"px"),!0===d.toolbar[0]&&(e(c.uDiv).css("width",t+"px"),"both"===d.toolbar[1]&&e(c.ubDiv).css("width",t+"px")),d.footerrow&&e(_).css("width",t+"px")};if("boolean"!=typeof r&&(r=d.shrinkToFit),!isNaN(m)){if(m=parseInt(m,10),G(m),!1===r&&!0===d.forceFit&&(d.forceFit=!1),!0===r){if(e.each(x,function(){!1!==this.hidden||g(this.classes)||(i=this.widthOrg,u+=i+j,this.fixed?h+=this.width+j:p++)}),0===p)return;if(d.tblwidth=parseInt(u,10),l=m-j*p-h,isNaN(d.height)||(R.clientHeight<R.scrollHeight||1===s.rows.length)&&(f=!0,l-=C),(y=l/(d.tblwidth-j*p-h))<0)return;if(u=0,w=I.length>0,e.each(x,function(e){!1!==this.hidden||g(this.classes)||this.fixed||(i=Math.round(this.widthOrg*y),this.width=i,u+=i,D[e].width=i,F[e].style.width=i+"px",d.footerrow&&(q[e].style.width=i+"px"),w&&(I[e].style.width=i+"px"),a=e)}),!a)return;n=0,f?m-h-(u+j*p)!==C&&(n=m-h-(u+j*p)-C):1!==Math.abs(m-h-(u+j*p))&&(n=m-h-(u+j*p)),(v=x[a]).width+=n,d.tblwidth=parseInt(u+n+j*p+h,10),d.tblwidth>m&&(b=d.tblwidth-parseInt(m,10),d.tblwidth=m,v.width=v.width-b),i=v.width,D[a].width=i,F[a].style.width=i+"px",w&&(I[a].style.width=i+"px"),d.footerrow&&(q[a].style.width=i+"px"),d.tblwidth+(f?C:0)<d.width&&G(d.tblwidth+(f?C:0)),R.offsetWidth>R.clientWidth&&(d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg||G(R.offsetWidth))}d.tblwidth&&(d.tblwidth=parseInt(d.tblwidth,10),m=d.tblwidth,S.scrollLeft=R.scrollLeft,b=Math.abs(m-d.width),d.shrinkToFit&&!r&&b<3&&b>0&&(m<d.width&&G(m),R.offsetWidth>R.clientWidth&&(d.autowidth||void 0!==d.widthOrg&&"auto"!==d.widthOrg&&"100%"!==d.widthOrg||G(R.offsetWidth)))),s.fixScrollOffsetAndhBoxPadding();var k={resizeDiv:!0,resizedRows:{iRowStart:r?0:-1,iRowEnd:-1}};e(s).triggerHandler("jqGridResetFrozenHeights",[{header:k,resizeFooter:!0,body:k}])}}})},setGridHeight:function(t){return this.each(function(){var r=this,i=r.grid,a=r.p;if(i){var o=e(i.bDiv);o.css({height:t+(isNaN(t)?"":"px")}),!0===a.frozenColumns&&e(a.idSel+"_frozen").parent().height(o.height()-16),a.height=t,a.scroll&&i.populateVisible.call(r),r.fixScrollOffsetAndhBoxPadding(),e(r).triggerHandler("jqGridResetFrozenHeights")}})},setCaption:function(t){return this.each(function(){var r=this,i=r.grid.cDiv;r.p.caption=t,e("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",i).html(t),e(i).show(),e(i).nextAll("div").removeClass(D.getGuiStyles.call(r,"top")),e(this).triggerHandler("jqGridResetFrozenHeights")})},setLabel:function(t,r,i,a){return this.each(function(){var o,l,n=this,s=n.p;if(n.grid){if(isNaN(t)){if(void 0===(o=s.iColByName[t]))return}else o=parseInt(t,10);o>=0&&(l=e(n.grid.headers[o].el),s.frozenColumns&&(l=l.add(n.grid.fhDiv.find(".ui-jqgrid-htable tr.ui-jqgrid-labels th.ui-th-column").eq(o))),r&&(l.each(function(){var t=e("[id^=jqgh_]",this),i=t.children("span.ui-jqgrid-cell-wrapper");if(i.length>0)i.html(r);else{var a=e(".s-ico",this);t.empty().html(r)[s.sortIconsBeforeText?"prepend":"append"](a)}}),s.colNames[o]=r),i&&("string"==typeof i?l.addClass(i):l.css(i)),"object"==typeof a&&l.attr(a))}})},setCell:function(t,r,i,a,l,n){return this.each(function(){var s,d,c,u,p,f,g,m,b,w,x=this,C=x.p,j=-1,q=C.colModel,R={};if(x.grid&&(j=isNaN(r)?C.iColByName[r]:parseInt(r,10))>=0&&(p=D.getGridRowById.call(e(x),t))){if(f=o.getCell.call(x,p,j),""!==i||!0===n){if(c=q[j],"local"===C.datatype&&(b=h(C.idPrefix,t),void 0!==(w=C._index[b])&&(u=C.data[w])),null==u){for(d=0;d<p.cells.length;d++)if(d!==j&&(g=o.getDataFieldOfCell.call(x,p,d)).length>0){try{m=e.unformat.call(x,g,{rowId:t,colModel:q[d]},d)}catch(e){m=y(g[0].innerHTML)}R[q[d].name]=m}}else R=u;R[c.name]=i,s=x.formatter(t,i,j,R,"edit");var S=f;!0===C.treeGrid&&c.name===C.ExpandColumn&&(S=S.children("span.cell-wrapperleaf,span.cell-wrapper").first()),S.html(s),c.title&&f.attr({title:i}),null!=u&&(s=v.call(x,i,c,u[c.name],b,u,j),e.isFunction(c.saveLocally)?c.saveLocally.call(x,{newValue:s,newItem:u,oldItem:u,id:b,cm:c,cmName:c.name,iCol:j}):u[c.name]=s)}(a||l)&&(f=o.getCell.call(x,p,j),a&&f["string"==typeof a?"addClass":"css"](a),"object"==typeof l&&f.attr(l))}})},getCell:function(t,r){var i=!1;return this.each(function(){var a,l,n,s,d=this,c=d.p;if(d.grid&&(a=isNaN(r)?c.iColByName[r]:parseInt(r,10))>=0&&(l=D.getGridRowById.call(e(d),t))){n=o.getDataFieldOfCell.call(d,l,a).first(),s=c.colModel[a];try{i=D.isCellEditing.call(e(d),t,a,l)?o.getEditedValue.call(d,n,s,{},s.editable):e.unformat.call(d,n,{rowId:l.id,colModel:s},a)}catch(e){i=y(n.html())}}}),i},getCol:function(t,r,i){var a,l,n,s,d=[],c=0;return r="boolean"==typeof r&&r,void 0===i&&(i=!1),this.each(function(){var u,p,f=this,h=f.p;if(f.grid&&(u=isNaN(t)?h.iColByName[t]:parseInt(t,10))>=0){var g,m,v=f.rows,b=v.length,w=0,x=0,C=h.colModel[u];if(b&&b>0){for(;w<b;){if(g=v[w],e(g).hasClass("jqgrow")){p=o.getDataFieldOfCell.call(f,g,u).first(),m=g.id;try{a=D.isCellEditing.call(e(f),m,u,g)?o.getEditedValue.call(f,p,C,{},C.editable):e.unformat.call(f,p,{rowId:m,colModel:C},u)}catch(e){a=y(p.html())}void 0!=a&&""!=a.trim()||(a=0),i?(s=parseFloat(a),isNaN(s)||(c+=s,void 0===n&&(n=l=s),l=Math.min(l,s),n=Math.max(n,s),x++)):r?d.push({id:m,value:a}):d.push(a)}w++}if(i)switch(i.toLowerCase()){case"sum":d=c;break;case"avg":d=c/x;break;case"count":d=b-1;break;case"min":d=l;break;case"max":d=n}}}}),d},clearGridData:function(t){return this.each(function(){var r=this,i=r.p,a=r.rows,o=r.grid;o&&i&&a&&("boolean"!=typeof t&&(t=!1),e(r).off(".jqGridFormatter"),o.emptyRows.call(r,!1,!0),i.footerrow&&t&&e(".ui-jqgrid-ftable td",o.sDiv).html("&#160;"),i.selrow=null,d(i.selarrrow),d(i.savedRow),i.editingInfo={},d(i.data),d(i.lastSelectedData),i._index={},i.rowIndexes={},i.dataIndexById={},i.indexByColumnData={},i.records=0,i.page=1,i.lastpage=0,i.reccount=0,r.updatepager(!0,!1))})},getInd:function(t,r){var i=D.getGridRowById.call(e(this),t);return!!i&&(!0===r?i:i.rowIndex)},bindKeys:function(t){var r=e.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},t||{});return this.each(function(){var t=this,i=t.p,a=e(t);i.scrollrows=r.scrollingRows,a.on("keydown.jqGrid",function(l){var n=e(this).find("tr[tabindex=0]")[0],s=o.detectRowEditing.call(t,e(l.target).closest("tr.jqgrow").attr("id")),d=function(t){do{if(null===(n=n[t]))return}while(e(n).is(":hidden")||!e(n).hasClass("jqgrow"));D.setSelection.call(a,n.id,!0),l.preventDefault()},c=function(o,l){var n=r["on"+o+(l||"")];a.triggerHandler("jqGridKey"+o,[i.selrow]),e.isFunction(n)&&n.call(t,i.selrow)},u=function(t){if(i.treeGrid){var r=i.data[i._index[h(i.idPrefix,n.id)]][i.treeReader.expanded_field];"Right"===t&&(r=!r),r&&e(n).find("div.treeclick").trigger("click")}c(t,"Key")};if(n&&null===s)switch(l.keyCode){case 38:d("previousSibling");break;case 40:d("nextSibling");break;case 37:u("Left");break;case 39:u("Right");break;case 13:c("Enter");break;case 32:c("Space")}})})},unbindKeys:function(){return this.each(function(){e(this).off("keydown.jqGrid")})},getLocalRow:function(e){var t,r=!1;return this.each(function(){var i=this.p;void 0!==e&&null!=i&&null!=i._index&&null!=i.data&&(t=i._index[h(i.idPrefix,e)])>=0&&(r=i.data[t])}),r},progressBar:function(t){return t=e.extend({htmlcontent:"",method:"hide",loadtype:"disable"},t||{}),this.each(function(){var r="show"===t.method,i=c(this.p.id),a=e("#load_"+i);switch(""!==t.htmlcontent&&a.html(t.htmlcontent),t.loadtype){case"disable":break;case"enable":a.toggle(r);break;case"block":e("#lui_"+i).toggle(r),a.toggle(r)}})},setColWidth:function(t,r,i,a){return this.each(function(){var o,l=this,n=e(l),s=l.grid,d=l.p;if("string"==typeof t){if(void 0===(t=d.iColByName[t]))return}else if("number"!=typeof t)return;null!=(o=s.headers[t])&&(o.newWidth=r,s.newWidth=d.tblwidth+r-o.width,s.resizeColumn(t,!d.frozenColumns,a),!1===i||a||(l.fixScrollOffsetAndhBoxPadding(),D.setGridWidth.call(n,s.newWidth+d.scrollOffset,!1)))})},getAutoResizableWidth:function(t){var r=this;if(0===r.length)return-1;var i,a,l,n,s,d=(r=r[0]).rows,c=r.p,u=c.colModel[t],p=e(r.grid.headers[t].el),f=p.children("div"),h=parseFloat(p.css(u.rotated?"padding-top":"padding-left")||0),g=parseFloat(p.css(u.rotated?"padding-bottom":"padding-right")||0),m=f.children("span.s-ico"),v=f.children("."+c.autoResizing.wrapperClassName),b=u.rotated?v.outerHeight():v.outerWidth(),w=parseFloat(v.css(u.rotated?"height":"width")||0),y=0,x=0,C=null!=u.autoResizing&&void 0!==u.autoResizable.compact?u.autoResizable.compact:c.autoResizing.compact,j=c.autoResizing.wrapperClassName;if(null==u||!u.autoResizable||0===v.length||u.hidden||o.isCellClassHidden(u.classes)||u.fixed)return-1;for(C&&!m.is(":visible")&&"none"===m.css("display")||(x=u.rotated?m.outerHeight(!0):m.outerWidth(!0)+f.children(".ui-jqgrid-sort-order").outerWidth(!0),c.sortIconsBeforeText||(x-="rtl"===c.direction?parseFloat(m.css("padding-left")||0)+parseFloat(m.css("margin-left")||0):parseFloat(m.css("padding-right")||0)+parseFloat(m.css("margin-right")||0))),u.rotated?x=Math.max(x,b+h+g):x+=b+h+(w===b?h+g:0)+parseFloat(f.css("margin-left")||0)+parseFloat(f.css("margin-right")||0),l=0,d=r.rows;l<d.length;l++)a=(i=d[l]).cells[t],n=e(i.cells[t]),null!=a&&(e(i).hasClass("jqgrow")||e(i).hasClass("jqgroup")&&1===a.colSpan)?(s=e(a.firstChild)).hasClass(j)?x=Math.max(x,s.outerWidth()+y):c.treeGrid&&c.ExpandColumn===u.name&&(s=n.children(".cell-wrapper,.cell-wrapperleaf"),x=Math.max(x,s.outerWidth()+y+n.children(".tree-wrap").outerWidth())):e(i).hasClass("jqgfirstrow")&&(y=(o.cell_width?parseFloat(n.css("padding-left")||0)+parseFloat(n.css("padding-right")||0):0)+parseFloat(n.css("border-right")||0)+parseFloat(n.css("border-left")||0));return x=Math.max(x,null!=u.autoResizing&&void 0!==u.autoResizing.minColWidth?u.autoResizing.minColWidth:c.autoResizing.minColWidth),Math.min(x,null!=u.autoResizing&&void 0!==u.autoResizing.maxColWidth?u.autoResizing.maxColWidth:c.autoResizing.maxColWidth)},autoResizeColumn:function(t,r){return this.each(function(){var i,a=this,o=e(this),l=a.p,n=l.colModel[t],s=e(a.grid.headers[t].el),d=D.getAutoResizableWidth.call(o,t),c=(n.autoResizing||{}).resetWidthOrg;null==n||d<0||d===n.width||(D.setColWidth.call(o,t,d,l.autoResizing.adjustGridWidth&&!l.autoResizing.fixWidthOnShrink&&!r,r),l.autoResizing.fixWidthOnShrink&&l.shrinkToFit&&!r&&(n.fixed=!0,i=n.widthOrg,n.widthOrg=n.width,D.setGridWidth.call(o,l.width,!0),n.widthOrg=i,n.fixed=!1),(c||void 0===c&&l.autoResizing.resetWidthOrg)&&(n.widthOrg=n.width),s.data("autoResized","true"))})},autoResizeAllColumns:function(){return this.each(function(){var t,r,i=this,a=e(i),o=i.p,l=o.colModel,n=l.length,s=o.shrinkToFit,d=o.autoResizing.adjustGridWidth,c=o.autoResizing.fixWidthOnShrink,u=parseInt(o.widthOrg,10),p=i.grid,f=D.autoResizeColumn;for(o.shrinkToFit=!1,o.autoResizing.adjustGridWidth=!0,o.autoResizing.fixWidthOnShrink=!1,t=0;t<n;t++)(r=l[t]).autoResizable&&"actions"!==r.formatter&&f.call(a,t,!0);p.hDiv.scrollLeft=p.bDiv.scrollLeft,o.footerrow&&(p.sDiv.scrollLeft=p.bDiv.scrollLeft),i.fixScrollOffsetAndhBoxPadding(),isNaN(u)?d&&D.setGridWidth.call(a,p.newWidth+o.scrollOffset,!1):D.setGridWidth.call(a,u,!1),o.autoResizing.fixWidthOnShrink=c,o.autoResizing.adjustGridWidth=d,o.shrinkToFit=s})}});var q=function(t,r){var i=this.grid.fbRows;return e((null!=i&&i[0].cells.length>r?i[t.rowIndex]:t).cells[r])};o.extend({editCell:function(t,r,i){return this.each(function(){var a,l,n,s,d=this,c=e(d),u=d.p,p=d.rows;if(d.grid&&!0===u.cellEdit&&null!=p&&null!=p[t]&&(t=parseInt(t,10),r=parseInt(r,10),!isNaN(t)&&!isNaN(r))){var f,h=p[t],g=null!=h?h.id:null,m=e(h),v=parseInt(u.iCol,10),b=parseInt(u.iRow,10),w=e(p[b]),y=u.savedRow;if(null!=g){if(u.selrow=g,u.knv||c.jqGrid("GridNav"),y.length>0){if(!0===i&&t===b&&r===v)return;c.jqGrid("saveCell",y[0].id,y[0].ic)}else setTimeout(function(){e("#"+o.jqID(u.knv)).attr("tabindex","-1").focus()},1);if(s=u.colModel[r],"subgrid"!==(a=s.name)&&"cb"!==a&&"rn"!==a){n=q.call(d,h,r);var x=s.editable;e.isFunction(x)&&(x=x.call(d,{rowid:g,iCol:r,iRow:t,cmName:a,cm:s,mode:"cell"}));var C=c.jqGrid("getGuiStyles","states.select","edit-cell"),D=c.jqGrid("getGuiStyles","states.hover","selected-row");if(!0!==x||!0!==i||n.hasClass("not-editable-cell"))u.noCellSelection||(v>=0&&b>=0&&(q.call(d,w[0],v).removeClass(C),w.removeClass(D)),n.addClass(C),m.addClass(D)),l=n.html().replace(/&#160;/gi,""),j.call(d,"onSelectCell",g,a,l,t,r);else{u.noCellSelection||(v>=0&&b>=0&&(q.call(d,w[0],v).removeClass(C),w.removeClass(D)),n.addClass(C),m.addClass(D)),s.edittype||(s.edittype="text"),f=s.edittype;try{l=e.unformat.call(d,n,{rowId:g,colModel:s},r)}catch(e){l="textarea"===f?n.text():n.html()}if(u.autoEncodeOnEdit&&(l=o.oldDecodePostedData(l)),("&nbsp;"===l||"&#160;"===l||1===l.length&&160===l.charCodeAt(0))&&(l=""),e.isFunction(u.formatCell)){var R=u.formatCell.call(d,g,a,l,t,r);void 0!==R&&(l=R)}j.call(d,"beforeEditCell",g,a,l,t,r),y.push({id:t,ic:r,name:a,v:l}),u.editingInfo[g]={mode:"cellEditing",savedRow:y[y.length-1],editable:{}},u.editingInfo[g].editable[a]=x;var S=e.extend({},s.editoptions||{},{id:t+"_"+a,name:a,rowId:g,mode:"cell",cm:s,iCol:r}),_=o.createEl.call(d,f,S,l,!0,e.extend({},o.ajaxOptions,u.ajaxSelectOptions||{})),I=n,F=!0===u.treeGrid&&a===u.ExpandColumn;F&&(I=n.children("span.cell-wrapperleaf,span.cell-wrapper")),I.html("").append(_).attr("tabindex","0"),F&&e(_).width(n.width()-n.children("div.tree-wrap").outerWidth()),o.bindEv.call(d,_,S),setTimeout(function(){e(_).focus()},1),e("input, select, textarea",n).on("keydown",function(i){if(27===i.keyCode&&(e("input.hasDatepicker",n).length>0?e(".ui-datepicker").is(":hidden")?c.jqGrid("restoreCell",t,r):e("input.hasDatepicker",n).datepicker("hide"):c.jqGrid("restoreCell",t,r)),13===i.keyCode&&!i.shiftKey)return c.jqGrid("saveCell",t,r),!1;if(9===i.keyCode){if(d.grid.hDiv.loading)return!1;i.shiftKey?c.jqGrid("prevCell",t,r):c.jqGrid("nextCell",t,r)}i.stopPropagation()}),j.call(d,"afterEditCell",g,a,l,t,r)}u.iCol=r,u.iRow=t}}}})},saveCell:function(t,r){return this.each(function(){var i=this,a=e(i),l=i.p,n=i.grid,s=o.info_dialog,d=o.jqID;if(n&&!0===l.cellEdit){var c=a.jqGrid("getGridRes","errors"),u=c.errcap,p=a.jqGrid("getGridRes","edit").bClose,f=l.savedRow,h=f.length>=1?0:null;if(null!==h){var g,m=i.rows[t],v=m.id,b=e(m),w=l.colModel[r],y=w.name,x=q.call(i,m,r),C={},D=o.getEditedValue.call(i,x,w,C);if(D!==f[h].v){void 0!==(g=a.triggerHandler("jqGridBeforeSaveCell",[v,y,D,t,r]))&&(D=g),e.isFunction(l.beforeSaveCell)&&void 0!==(g=l.beforeSaveCell.call(i,v,y,D,t,r))&&(D=g);var R=o.checkValues.call(i,D,r,void 0,void 0,{oldValue:f[h].v,newValue:D,cmName:y,rowid:v,iCol:r,iRow:t,cm:w,tr:m,td:x,mode:"cell"}),S=w.formatoptions||{};if(null==R||!0===R||!0===R[0]){var _=a.triggerHandler("jqGridBeforeSubmitCell",[v,y,D,t,r])||{};if(e.isFunction(l.beforeSubmitCell)&&((_=l.beforeSubmitCell.call(i,v,y,D,t,r))||(_={})),e("input.hasDatepicker",x).length>0&&e("input.hasDatepicker",x).datepicker("hide"),"date"===w.formatter&&!0!==S.sendFormatted&&(D=e.unformat.date.call(i,D,w)),"remote"===l.cellsubmit)if(l.cellurl){var I={};I[y]=D;var F=l.prmNames,G=F.id,k=F.oper;I[G]=o.stripPref(l.idPrefix,v),I[k]=F.editoper,I=e.extend(_,I),l.autoEncodeOnEdit&&e.each(I,function(t,r){e.isFunction(r)||(I[t]=o.oldEncodePostedData(r))}),a.jqGrid("progressBar",{method:"show",loadtype:l.loadui,htmlcontent:a.jqGrid("getGridRes","defaults.savetext")||"Saving..."}),n.hDiv.loading=!0,e.ajax(e.extend({url:e.isFunction(l.cellurl)?l.cellurl.call(i,l.cellurl,t,r,v,D,y):l.cellurl,data:o.serializeFeedback.call(i,l.serializeCellData,"jqGridSerializeCellData",I),type:"POST",complete:function(o){if(n.endReq.call(i),(o.status<300||304===o.status)&&(0!==o.status||4!==o.readyState)){var d=a.triggerHandler("jqGridAfterSubmitCell",[i,o,I.id,y,D,t,r])||[!0,""];(!0===d||!0===d[0]&&e.isFunction(l.afterSubmitCell))&&(d=l.afterSubmitCell.call(i,o,I.id,y,D,t,r)),null==d||!0===d||!0===d[0]?(a.jqGrid("setCell",v,r,D,!1,!1,!0),x.addClass("dirty-cell"),b.addClass("edited"),j.call(i,"afterSaveCell",v,y,D,t,r),f.splice(0,1),delete l.editingInfo[v]):(s.call(i,u,d[1],p),a.jqGrid("restoreCell",t,r))}},error:function(o,n,d){a.triggerHandler("jqGridErrorCell",[o,n,d]),e.isFunction(l.errorCell)?(l.errorCell.call(i,o,n,d),a.jqGrid("restoreCell",t,r)):(s.call(i,u,o.status+" : "+o.statusText+"<br/>"+n,p),a.jqGrid("restoreCell",t,r))}},o.ajaxOptions,l.ajaxCellOptions||{}))}else try{s.call(i,u,c.nourl,p),a.jqGrid("restoreCell",t,r)}catch(e){}"clientArray"===l.cellsubmit&&(a.jqGrid("setCell",v,r,"select"===w.edittype&&"select"!==w.formatter?C.text:D,!1,!1,!0),x.addClass("dirty-cell"),b.addClass("edited"),j.call(i,"afterSaveCell",v,y,D,t,r),f.splice(0,1),delete l.editingInfo[v])}else try{setTimeout(function(){var t=o.getRelativeRect.call(i,x);s.call(i,u,D+" "+R[1],p,{top:t.top,left:t.left+e(i).closest(".ui-jqgrid").offset().left})},50),a.jqGrid("restoreCell",t,r)}catch(e){}}else a.jqGrid("restoreCell",t,r)}setTimeout(function(){e("#"+d(l.knv)).attr("tabindex","-1").focus()},0)}})},checkRequiredFieldValue:function(t,r){var i;return this.each(function(){var a,o=this,l=e("td:eq("+r+")",o.rows[t]),n=o.p.colModel[r],s=n.name,d=e.jgrid.jqID(s);switch(n.edittype){case"select":if(n.editoptions.multiple){var c=e("#"+t+"_"+d,o.rows[t]),u=[];(a=e(c).val())?a.join(","):a="",e("option:selected",c).each(function(t,r){u[t]=e(r).text()}),u.join(",")}else a=e("#"+t+"_"+d+" option:selected",o.rows[t]).val(),e("#"+t+"_"+d+" option:selected",o.rows[t]).text();n.formatter;break;case"checkbox":var p=["Yes","No"];n.editoptions&&(p=n.editoptions.value.split(":")),a=e("#"+t+"_"+d,o.rows[t]).is(":checked")?p[0]:p[1];break;case"password":case"text":case"textarea":case"button":a=e("#"+t+"_"+d,o.rows[t]).val();break;case"custom":try{if(!n.editoptions||!e.isFunction(n.editoptions.custom_value))throw"e1";if(void 0===(a=n.editoptions.custom_value.call(o,e(".customelement",l),"get")))throw"e2"}catch(t){"e1"===t&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"===t?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,t.message,e.jgrid.edit.bClose)}}var f;void 0!=a?(f=e.jgrid.checkValues.call(o,a,r),i=f[0]):i=void 0==a}),i},restoreCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=l.p,s=l.rows[t],d=s.id;if(l.grid&&!0===n.cellEdit){var c=n.savedRow,u=q.call(l,s,r);if(c.length>=1){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",u).datepicker("hide")}catch(e){}a=n.colModel[r],!0===n.treeGrid&&a.name===n.ExpandColumn?u.children("span.cell-wrapperleaf,span.cell-wrapper").empty():u.empty(),u.attr("tabindex","-1"),i=c[0].v,o=a.formatoptions||{},"date"===a.formatter&&!0!==o.sendFormatted&&(i=e.unformat.date.call(l,i,a)),e(l).jqGrid("setCell",d,r,i,!1,!1,!0),j.call(l,"afterRestoreCell",d,i,t,r),c.splice(0,1),delete n.editingInfo[d]}setTimeout(function(){e("#"+n.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=e(l),s=l.p,d=!1,c=l.rows;if(l.grid&&!0===s.cellEdit&&null!=c&&null!=c[t]){for(i=r+1;i<s.colModel.length;i++)if(o=s.colModel[i],a=o.editable,e.isFunction(a)&&(a=a.call(l,{rowid:c[t].id,iCol:i,iRow:t,cmName:o.name,cm:o,mode:"cell"})),!0===a){d=i;break}!1!==d?n.jqGrid("editCell",t,d,!0):s.savedRow.length>0&&n.jqGrid("saveCell",t,r)}})},prevCell:function(t,r){return this.each(function(){var i,a,o,l=this,n=e(l),s=l.p,d=!1,c=l.rows;if(l.grid&&!0===s.cellEdit&&null!=c&&null!=c[t]){for(i=r-1;i>=0;i--)if(o=s.colModel[i],a=o.editable,e.isFunction(a)&&(a=a.call(l,{rowid:c[t].id,iCol:i,iRow:t,cmName:o.name,cm:o,mode:"cell"})),!0===a){d=i;break}!1!==d?n.jqGrid("editCell",t,d,!0):s.savedRow.length>0&&n.jqGrid("saveCell",t,r)}})},GridNav:function(){return this.each(function(){function t(e,t,r){var i=o.rows[e];if("v"===r.substr(0,1)){var a=d.clientHeight,l=d.scrollTop,n=i.offsetTop+i.clientHeight,s=i.offsetTop;"vd"===r&&n>=l+a&&(d.scrollTop=d.scrollTop+i.clientHeight),"vu"===r&&s<l&&(d.scrollTop=d.scrollTop-i.clientHeight)}if("h"===r){var c=d.clientWidth,u=d.scrollLeft,p=i.cells[t],f=p.offsetLeft+p.clientWidth,h=p.offsetLeft;f>=c+parseInt(u,10)?d.scrollLeft=d.scrollLeft+p.clientWidth:h<u&&(d.scrollLeft=d.scrollLeft-p.clientWidth)}}function r(e,t){var r,i=0,a=n.colModel;if("lft"===t)for(i=e+1,r=e;r>=0;r--)if(!0!==a[r].hidden){i=r;break}if("rgt"===t)for(i=e-1,r=e;r<a.length;r++)if(!0!==a[r].hidden){i=r;break}return i}var i,a,o=this,l=e(o),n=o.p,s=o.grid;if(s&&!0===n.cellEdit){var d=s.bDiv;n.knv=n.id+"_kn";var c=e("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+n.knv+"'></div></div>");e(c).insertBefore(s.cDiv),e("#"+n.knv).focus().keydown(function(e){var s=parseInt(n.iRow,10),d=parseInt(n.iCol,10);switch(a=e.keyCode,"rtl"===n.direction&&(37===a?a=39:39===a&&(a=37)),a){case 38:s-1>0&&(t(s-1,d,"vu"),l.jqGrid("editCell",s-1,d,!1));break;case 40:s+1<=o.rows.length-1&&(t(s+1,d,"vd"),l.jqGrid("editCell",s+1,d,!1));break;case 37:d-1>=0&&(t(s,i=r(d-1,"lft"),"h"),l.jqGrid("editCell",s,i,!1));break;case 39:d+1<=n.colModel.length-1&&(t(s,i=r(d+1,"rgt"),"h"),l.jqGrid("editCell",s,i,!1));break;case 13:d>=0&&s>=0&&l.jqGrid("editCell",s,d,!0);break;default:return!0}return!1})}})},getChangedCells:function(t){var r=[];return t||(t="all"),this.each(function(){var i=this,a=i.p,l=o.htmlDecode,n=i.rows;i.grid&&!0===a.cellEdit&&e(n).each(function(o){var s={};if(e(this).hasClass("edited")){var d=this;e(this.cells).each(function(r){var c=a.colModel[r],u=c.name,p=q.call(i,d,r);if("cb"!==u&&"subgrid"!==u&&"rn"!==u&&("dirty"!==t||p.hasClass("dirty-cell")))try{s[u]=e.unformat.call(i,p[0],{rowId:n[o].id,colModel:c},r)}catch(e){s[u]=l(p.html())}}),s.id=this.id,r.push(s)}})}),r}});var R=D.getGuiStyles,S=D.getGridRes;o.jqModal=o.jqModal||{},e.extend(!0,o.jqModal,{toTop:!0}),e.extend(o,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(t,r){var i=!(!(r=e.extend({jqm:!0,gb:"",removemodal:!1},r||{})).gb||"string"!=typeof r.gb||"#gbox_"!==r.gb.substr(0,6))&&e("#"+r.gb.substr(6))[0],a=e(t);if(r.onClose){var o=i?r.onClose.call(i,t):r.onClose(t);if("boolean"==typeof o&&!o)return}if(e.fn.jqm&&!0===r.jqm)a.attr("aria-hidden","true").jqmHide();else{if(""!==r.gb)try{e(">.jqgrid-overlay",r.gb).first().hide()}catch(e){}a.hide().attr("aria-hidden","true")}r.removemodal&&a.remove()},createModal:function(r,i,a,l,n,s,d){var c=o.jqID,u=this.p;a=e.extend(!0,{resizingRightBottomIcon:D.getIconRes.call(this,"form.resizableLtr")},o.jqModal||{},null!=u?u.jqModal||{}:{},a);var p=t.createElement("div"),f="#"+c(r.themodal),h="rtl"===e(a.gbox).attr("dir"),g=!!r.resizeAlso&&"#"+c(r.resizeAlso);d=e.extend({},d||{}),p.className=R.call(this,"dialog.window","ui-jqdialog"),p.id=r.themodal,p.dir=h?"rtl":"ltr";var m=t.createElement("div");m.className=R.call(this,"dialog.document"),e(m).attr("role","document");var v=t.createElement("div");v.className=R.call(this,"dialog.subdocument"),m.appendChild(v),p.appendChild(m);var b=t.createElement("div");b.className=R.call(this,"dialog.header","ui-jqdialog-titlebar "+(h?"ui-jqdialog-titlebar-rtl":"ui-jqdialog-titlebar-ltr")),b.id=r.modalhead,e(b).append("<span class='ui-jqdialog-title'>"+a.caption+"</span>");var w=R.call(this,"states.hover"),y=e("<a aria-label='Close' class='"+R.call(this,"dialog.closeButton","ui-jqdialog-titlebar-close")+"'></a>").hover(function(){y.addClass(w)},function(){y.removeClass(w)}).append("<span class='"+D.getIconRes.call(this,"form.close")+"'></span>");e(b).append(y);var x=t.createElement("div");e(x).addClass(R.call(this,"dialog.content","ui-jqdialog-content")).attr("id",r.modalcontent),e(x).append(i),v.appendChild(x),e(v).prepend(b),!0===s?e("body").append(p):"string"==typeof s?e(s).append(p):e(p).insertBefore(l),e(p).css(d),void 0===a.jqModal&&(a.jqModal=!0);var C={};if(e.fn.jqm&&!0===a.jqModal?(0===a.left&&0===a.top&&a.overlay&&((a=e(n).offset()).left+=4,a.top+=4),C.top=a.top+"px",C.left=a.left):0===a.left&&0===a.top||(C.left=a.left,C.top=a.top+"px"),e("a.ui-jqdialog-titlebar-close",b).click(function(){var t=e(f).data("onClose")||a.onClose,r=e(f).data("gbox")||a.gbox;return o.hideModal(f,{gb:r,jqm:a.jqModal,onClose:t,removemodal:a.removemodal||!1}),!1}),0!==a.width&&a.width||(a.width=300),0!==a.height&&a.height||(a.height=200),!a.zIndex){var j=e(l).parents("*[role=dialog]").first().css("z-index");j?(a.zIndex=parseInt(j,10)+2,a.toTop=!0):a.zIndex=950}if(C.left&&(C.left+="px"),e(p).css(e.extend({width:isNaN(a.width)?"auto":a.width+"px",height:isNaN(a.height)?"auto":a.height+"px",zIndex:a.zIndex},C)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":r.modalhead,"aria-hidden":"true"}),void 0===a.drag&&(a.drag=!0),void 0===a.resize&&(a.resize=!0),a.drag)if(e.fn.jqDrag)e(b).css("cursor","move"),e(p).jqDrag(b);else try{e(p).draggable({handle:e("#"+c(b.id))})}catch(e){}if(a.resize)if(e.fn.jqResize)e(x).append("<div class='jqResize ui-resizable-handle ui-resizable-se "+a.resizingRightBottomIcon+"'></div>"),e(f).jqResize(".jqResize",g);else try{e(p).resizable({handles:"se, sw",alsoResize:g})}catch(e){}!0===a.closeOnEscape&&e(p).keydown(function(t){if(27===t.which){var r=e(f).data("onClose")||a.onClose;o.hideModal(f,{gb:a.gbox,jqm:a.jqModal,onClose:r,removemodal:a.removemodal||!1,formprop:!a.recreateForm||!1,form:a.form||""})}})},viewModal:function(t,r){if(r=e.extend(!0,{overlay:30,modal:!1,overlayClass:R.call(this,"overlay"),onShow:o.showModal,onHide:o.closeModal,gbox:"",jqm:!0,jqM:!0},o.jqModal||{},r||{}),e.fn.jqm&&!0===r.jqm)r.jqM?e(t).attr("aria-hidden","false").jqm(r).jqmShow():e(t).attr("aria-hidden","false").jqmShow();else{""!==r.gbox&&(e(">.jqgrid-overlay",r.gbox).first().show(),e(t).data("gbox",r.gbox)),e(t).show().attr("aria-hidden","false");try{e(":input:visible",t)[0].focus()}catch(e){}}},info_dialog:function(t,r,i,a){var l=this,n=l.p,s=e.extend(!0,{width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},o.jqModal||{},null!=n?n.jqModal||{}:{},{caption:"<b>"+t+"</b>"},a||{}),d=s.jqModal;e.fn.jqm&&!d&&(d=!1);var c,u="",p=R.call(l,"states.hover");if(s.buttons.length>0)for(c=0;c<s.buttons.length;c++)void 0===s.buttons[c].id&&(s.buttons[c].id="info_button_"+c),u+=o.builderFmButon.call(l,s.buttons[c].id,s.buttons[c].text);var f=isNaN(s.dataheight)?s.dataheight:s.dataheight+"px",h="text-align:"+s.align+";",g=e("#info_dialog"),m="<div id='info_id'>";m+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+h+"'>"+o.htmlDecode(r)+"</div>",(i||""!==u)&&(m+="<hr class='"+R.call(l,"dialog.hr")+"' style='margin:1px'/><div style='text-align:"+s.buttonalign+";padding:.8em 0 .5em 0;background-image:none;border-width: 1px 0 0 0;'>"+(i?o.builderFmButon.call(l,"closedialog",i):"")+u+"</div>"),m+="</div>";try{"false"===g.attr("aria-hidden")&&o.hideModal("#info_dialog",{jqm:d}),g.remove()}catch(e){}o.createModal.call(l,{themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",resizeAlso:"infocnt"},m,s,"","",!0),g=e("#info_dialog"),u&&e.each(s.buttons,function(){e("#"+o.jqID(this.id),"#info_id").on("click",{click:this.onClick},function(t){return e.isFunction(t.data.click)&&t.data.click.call(l,t,g),!1})}),e("#closedialog","#info_id").click(function(){return o.hideModal("#info_dialog",{jqm:d,onClose:g.data("onClose")||s.onClose,gb:g.data("gbox")||s.gbox}),!1}),e(".fm-button","#info_dialog").hover(function(){e(this).addClass(p)},function(){e(this).removeClass(p)}),e.isFunction(s.beforeOpen)&&s.beforeOpen(),o.viewModal.call(l,"#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:s.modal,jqm:d}),e.isFunction(s.afterOpen)&&s.afterOpen();try{g.focus()}catch(e){}},bindEv:function(t,r){var i=this;e.isFunction(r.dataInit)&&r.dataInit.call(i,t,r),r.dataEvents&&e.each(r.dataEvents,function(){void 0!==this.data?e(t).on(this.type,"object"==typeof this.data&&null!==this.data?e.extend(!0,{},r,this.data):this.data,this.fn):e(t).on(this.type,r,this.fn)})},createEl:function(r,i,a,l,n){function s(t,r,i){var a=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","generateValue","postData","selectFilled","rowId","column","mode","cm","iCol"];void 0!==i&&e.isArray(i)&&e.merge(a,i),e.each(r,function(r,i){-1===e.inArray(r,a)&&e(t).attr(r,i)}),r.hasOwnProperty("id")||e(t).attr("id",o.randId())}var d="",c=this,u=c.p,p=o.info_dialog,f=function(t){return S.call(e(c),t)},h=f("errors.errcap"),g=f("edit"),m=g.msg,v=g.bClose;if(null==i)return"";switch(r){case"textarea":d=t.createElement("textarea"),l?i.cols||e(d).css({width:"100%","box-sizing":"border-box"}):i.cols||(i.cols=19),i.rows||(i.rows=2),("&nbsp;"===a||"&#160;"===a||1===a.length&&160===a.charCodeAt(0))&&(a=""),d.value=a,s(d,i),e(d).attr({role:"textbox"});break;case"checkbox":if(d=t.createElement("input"),d.type="checkbox",i.value){var b=i.value.split(":");a===b[0]&&(d.checked=!0,d.defaultChecked=!0),d.value=b[0],e(d).data("offval",b[1])}else{var w=String(a).toLowerCase();w.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==w?(d.checked=!0,d.defaultChecked=!0,d.value=a):d.value="on",e(d).data("offval","off")}s(d,i,["value"]),e(d).attr({role:"checkbox","aria-checked":d.checked?"true":"false"});break;case"select":d=t.createElement("select");var y,x=[],C=null;!0===i.multiple||"multiple"===i.multiple?(y=!0,d.multiple="multiple",e(d).attr("aria-multiselectable","true"),x=a.split(","),x=e.map(x,function(t){return e.trim(t)})):(y=!1,x[0]=e.trim(a)),void 0===i.size&&(i.size=y?3:1);try{C=i.rowId}catch(e){}if(u&&u.idPrefix&&(C=o.stripPref(u.idPrefix,C)),void 0===i.dataUrl&&i.generateValue&&null!=u.indexByColumnData[i.cm.name]&&(i.value=c.generateValueFromColumnIndex(i.cm.name,i.separator,i.delimiter)),void 0!==i.dataUrl){var j=i.postData||n.postData,D={elem:d,options:i,cm:i.cm,mode:i.mode,rowid:C,iCol:i.iCol,ovm:x};s(d,i,j?["postData"]:void 0),e.ajax(e.extend({url:e.isFunction(i.dataUrl)?i.dataUrl.call(c,C,a,String(i.name),D):i.dataUrl,type:"GET",dataType:"html",data:e.isFunction(j)?j.call(c,C,a,String(i.name)):j,context:D,success:function(t,r,i){var a=this.ovm,l=this.elem,n=this.cm,s=this.iCol,d=e.extend({},this.options),u=this.rowid,p=this.mode,f=e.isFunction(d.buildSelect)?d.buildSelect.call(c,t,i,n,s):t;"string"==typeof f&&(f=e(e.trim(f)).html()),f&&(e(l).append(f),setTimeout(function(){var t;e("option",l).each(function(r){0===r&&l.multiple&&(this.selected=!1),e.inArray(e.trim(e(this).val()),a)>-1&&(this.selected=!0,t=!0)}),t||e("option",l).each(function(){e.inArray(e.trim(e(this).text()),a)>-1&&(this.selected=!0)}),o.fullBoolFeedback.call(c,d.selectFilled,"jqGridSelectFilled",{elem:l,options:d,cm:n,rowid:u,mode:p,cmName:null!=n?n.name:d.name,iCol:s})},0))}},n||{}))}else i.value&&(o.fillSelectOptions(d,i.value,void 0===i.separator?":":i.separator,void 0===i.delimiter?";":i.delimiter,y,a),s(d,i,["value"]),o.fullBoolFeedback.call(c,i.selectFilled,"jqGridSelectFilled",{elem:d,options:i,cm:i.cm,rowid:C,mode:i.mode,cmName:null!=i.cm?i.cm.name:i.name,iCol:i.iCol}));break;case"text":case"password":case"button":var q;q="button"===r?"button":"textbox",(d=t.createElement("input")).type=r,s(d,i),d.value=a,"button"!==r&&(l?i.size||e(d).css({width:"100%","box-sizing":"border-box"}):i.size||(i.size=20)),e(d).attr("role",q);break;case"image":case"file":(d=t.createElement("input")).type=r,s(d,i);break;case"custom":d=t.createElement("span");try{if(!e.isFunction(i.custom_element))throw"editoptions.custom_element is not a function";var R=i.custom_element.call(c,a,i);if(!(R instanceof jQuery||o.isHTMLElement(R)||"string"==typeof R))throw"editoptions.custom_element returns value of a wrong type";R=e(R).addClass("customelement").attr({id:i.id,name:i.name}),e(d).empty().append(R)}catch(e){"e1"===e&&p.call(c,h,"function 'custom_element' "+m.nodefined,v),"e2"===e?p.call(c,h,"function 'custom_element' "+m.novalue,v):p.call(c,h,"string"==typeof e?e:e.message,v)}}return d},checkDate:function(e,t){var r,i={};if(e=e.toLowerCase(),r=-1!==e.indexOf("/")?"/":-1!==e.indexOf("-")?"-":-1!==e.indexOf(".")?".":"/",e=e.split(r),3!==(t=t.split(r)).length)return!1;var a,o,l,n=-1,s=-1,d=-1;for(o=0;o<e.length;o++)l=isNaN(t[o])?0:parseInt(t[o],10),i[e[o]]=l,-1!==(a=e[o]).indexOf("y")&&(n=o),-1!==a.indexOf("m")&&(d=o),-1!==a.indexOf("d")&&(s=o);a="y"===e[n]||"yyyy"===e[n]?4:"yy"===e[n]?2:-1;var c,u=[0,31,29,31,30,31,30,31,31,30,31,30,31];return-1!==n&&(c=i[e[n]].toString(),2===a&&1===c.length&&(a=1),!(c.length!==a||0===i[e[n]]&&"00"!==t[n]||-1===d||(c=i[e[d]].toString()).length<1||i[e[d]]<1||i[e[d]]>12||-1===s||(c=i[e[s]].toString()).length<1||i[e[s]]<1||i[e[s]]>31||2===i[e[d]]&&i[e[s]]>function(e){return e%4!=0||e%100==0&&e%400!=0?28:29}(i[e[n]])||i[e[s]]>u[i[e[d]]]))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(e){var t,r=/^(\d{1,2}):(\d{2})([apAP][Mm])?$/;if(!o.isEmpty(e)){if(!(t=e.match(r)))return!1;if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}return!0},checkValues:function(t,r,i,a,l){var n,s,d,c,u,p=this,f=p.p,h=f.colModel,g=o.isEmpty,m=S.call(e(p),"edit.msg"),v=function(t){var r=n[t];return e.isFunction(r)?r.call(p,l):r},b=S.call(e(p),"formatter.date.masks");if(void 0===i){if("string"==typeof r&&(r=f.iColByName[r]),void 0===r||r<0)return[!0,"",""];c=h[r],n=c.editrules,null!=c.formoptions&&(s=c.formoptions.label)}else n=i,s=void 0===a?"_":a,c=h[r];if(n){if(s||(s=null!=f.colNames?f.colNames[r]:c.label),!0===v("required")&&g(t))return[!1,s+": "+m.required,""];var w=!1!==v("required");if(!0===v("number")&&(!1!==w||!g(t))&&isNaN(t))return[!1,s+": "+m.number,""];if(void 0!==n.minValue&&!isNaN(n.minValue)&&parseFloat(t)<parseFloat(n.minValue))return[!1,s+": "+m.minValue+" "+n.minValue,""];if(void 0!==n.maxValue&&!isNaN(n.maxValue)&&parseFloat(t)>parseFloat(n.maxValue))return[!1,s+": "+m.maxValue+" "+n.maxValue,""];if(!0===v("email")&&!(!1===w&&g(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(t)))return[!1,s+": "+m.email,""];if(!0===v("integer")&&(!1!==w||!g(t))){if(isNaN(t))return[!1,s+": "+m.integer,""];if(t%1!=0||-1!==t.indexOf("."))return[!1,s+": "+m.integer,""]}if(!0===v("date")&&!(!1===w&&g(t)||(c.formatoptions&&c.formatoptions.newformat?(d=c.formatoptions.newformat,b.hasOwnProperty(d)&&(d=b[d])):d=h[r].datefmt||"Y-m-d",o.checkDate(d,t))))return[!1,s+": "+m.date+" - "+d,""];if(!0===v("time")&&!(!1===w&&g(t)||o.checkTime(t)))return[!1,s+": "+m.date+" - hh:mm (am/pm)",""];if(!0===v("url")&&!(!1===w&&g(t)||/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(t)))return[!1,s+": "+m.url,""];if(!0===n.custom){if(!1!==w||!g(t))return e.isFunction(n.custom_func)?(u=n.custom_func.call(p,t,s,r),e.isArray(u)?u:[!1,m.customarray,""]):[!1,m.customfcheck,""]}else if(e.isFunction(n.custom)&&(!1!==w||!g(t)))return u=n.custom.call(p,l),e.isArray(u)?u:[!1,m.customarray,""]}return[!0,"",""]}}),o.extend({getColProp:function(e){var t,r={},i=this[0];return null!=i&&i.grid&&void 0!==(t=i.p.iColByName[e])?i.p.colModel[t]:r},setColProp:function(t,r){return this.each(function(){var i,a=this,o=a.p;a.grid&&null!=o&&r&&void 0!==(i=o.iColByName[t])&&e.extend(!0,o.colModel[i],r)})},sortGrid:function(e,t,r){return this.each(function(){var i,a,o,l=this,n=l.grid,s=l.p,d=s.colModel,c=d.length,u=!1;if(n)for(e||(e=s.sortname),"boolean"!=typeof t&&(t=!1),a=0;a<c;a++)if((i=d[a]).index===e||i.name===e){!0===s.frozenColumns&&!0===i.frozen&&(u=n.fhDiv.find("#"+s.id+"_"+e)),u&&0!==u.length||(u=n.headers[a].el),("boolean"!=typeof(o=i.sortable)||o)&&l.sortData("jqgh_"+s.id+"_"+e,a,t,r,u);break}})},clearBeforeUnload:function(){return this.each(function(){var r,i=this,a=i.p,l=i.grid,n=o.clearArray,s=Object.prototype.hasOwnProperty;e.isFunction(l.emptyRows)&&l.emptyRows.call(i,!0,!0),e(t).off("mousemove.jqGrid mouseup.jqGrid"+a.id),e(i).off();var d,c=l.headers.length;for(d=0;d<c;d++)l.headers[d].el=null;for(r in l)l.hasOwnProperty(r)&&(l.propOrMethod=null);var u=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(c=u.length,d=0;d<c;d++)s.call(i,u[d])&&(i[u[d]]=null);i._index={},n(a.data),n(a.lastSelectedData),n(a.selarrrow),n(a.savedRow),a.editingInfo={}})},GridDestroy:function(){return this.each(function(){var t=this,r=t.p;if(t.grid&&null!=r){r.pager&&e(r.pager).remove();try{e("#alertmod_"+c(r.id)).remove(),e(t).jqGrid("clearBeforeUnload"),e(r.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var t=this,r=e(t),i=t.p,a=e.fn.jqGrid;t.grid&&(r.removeClass(a.getGuiStyles.call(r,"grid","ui-jqgrid-btable")),i.pager&&(i.pager.substr(1,e.jgrid.uidPref.length)===e.jgrid.uidPref?e(i.pager).remove():e(i.pager).empty().removeClass(a.getGuiStyles.call(r,"pager.pager","ui-jqgrid-pager "+a.getGuiStyles.call(r,"bottom"))).removeAttr("style").removeAttr("dir")),r.jqGrid("clearBeforeUnload"),r.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),r.empty(),r.insertBefore(i.gBox).show(),e(i.pager).insertBefore(i.gBox).show(),e(i.gBox).remove())})},setGridState:function(t){return this.each(function(){var r=this,i=r.p,a=r.grid,o=a.cDiv,l=e(a.uDiv),n=e(a.ubDiv);if(a&&null!=i){var s=function(e){return D.getIconRes.call(r,"gridMinimize."+e)},d=s("visible"),c=s("hidden");"hidden"===t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",i.gView).slideUp("fast"),i.pager&&e(i.pager).slideUp("fast"),i.toppager&&e(i.toppager).slideUp("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideUp("fast"),l.slideUp("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",o).removeClass(d).addClass(c),i.gridstate="hidden"):"visible"===t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",i.gView).slideDown("fast"),i.pager&&e(i.pager).slideDown("fast"),i.toppager&&e(i.toppager).slideDown("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideDown("fast"),l.slideDown("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",o).removeClass(c).addClass(d),i.gridstate="visible")}})},filterToolbar:function(r){return this.each(function(){var i=this,a=i.grid,l=e(i),n=i.p,s=o.info_dialog,d=o.htmlEncode;if(!this.ftoolbar){var u,p=e.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:n.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},o.search,n.searching||{},r||{}),f=n.colModel,h=function(e){return S.call(l,e)},g=h("errors.errcap"),m=h("edit.bClose"),v=h("edit.msg"),b=R.call(i,"states.hover"),w=R.call(i,"states.select"),y=R.call(i,"filterToolbar.dataField"),x={},C=function(e){var t="gs_";switch(p.idMode){case"compatibility":t+=n.idPrefix;break;case"new":t+=n.id+"_"}return t+e},j=function(e){return"#"+c(C(e))},D=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},q=function(t){var r,i,a,o,l,s,d=n.postData[p.sFilter],c={},u=n.iColByName;if(t)for(i=0;i<f.length;i++)!1!==(l=f[i]).search&&(s=l.searchoptions||{},c[l.name]={op:s.sopt?s.sopt[0]:"select"===l.stype||"checkbox"===l.stype?"eq":p.defaultSearch,data:void 0!==s.defaultValue?s.defaultValue:""});if(!d||!n.search)return c;if("string"==typeof d)try{d=e.parseJSON(d)}catch(e){d={}}else d=d||{};if(a=d.rules||{},null==d||null!=d.groupOp&&null!=p.groupOp&&d.groupOp.toUpperCase()!==p.groupOp.toUpperCase()||null==a||0===a.length||null!=d.groups&&d.groups.length>0)return c;for(i=0;i<a.length;i++)for(l=f[u[(o=a[i]).field]],r=0;r<f.length;r++)if(((l=f[r]).index||l.name)===o.field&&!1!==l.search){if((s=l.searchoptions||{}).sopt){if(e.inArray(o.op,s.sopt)<0)continue}else if("select"===l.stype||"checkbox"===l.stype){if("eq"!==o.op)continue}else if(o.op!==p.defaultSearch)continue;c[l.name]={op:o.op,data:o.data}}return c},_=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},I=function(){var t={},r=0,o={};e.each(f,function(){var l,s,d=this,c=d.index||d.name,u=d.searchoptions||{},f=e(j(d.name),!0===d.frozen&&!0===n.frozenColumns?a.fhDiv:a.hDiv),g=function(e,t){var r=d.formatoptions||{};return void 0!==r[e]?r[e]:h("formatter."+(t||d.formatter)+"."+e)},m=function(e){var t=g("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(s=p.searchOperators?f.parent().prev().children("a").data("soper")||p.defaultSearch:u.sopt?u.sopt[0]:"select"===d.stype||"checkbox"===d.stype?"eq":p.defaultSearch,"custom"===d.stype&&e.isFunction(u.custom_value)&&f.length>0&&"SPAN"===f[0].nodeName.toUpperCase())l=u.custom_value.call(i,f.children(".customelement").first(),"get");else if("select"===d.stype)l=f.prop("multiple")?null==(l=f.val())||0===l.length?"":l.join(n.inFilterSeparator||","):f.val();else if("checkbox"===d.stype){var v=D(u);switch(f.data("state")){case-1:l="";break;case 0:l=v.off;break;default:l=v.on}}else switch(l=e.trim(f.val()),d.formatter){case"integer":""!==(l=m(l).replace(g("decimalSeparator","number"),"."))&&(l=String(parseInt(l,10)));break;case"number":""!==(l=m(l).replace(g("decimalSeparator"),"."))&&"0"===String(l).charAt(0)&&(l=String(parseFloat(l)));break;case"currency":var b=g("prefix"),w=g("suffix");b&&b.length&&(l=l.substr(b.length)),w&&w.length&&(l=l.substr(0,l.length-w.length)),""!==(l=m(l).replace(g("decimalSeparator"),"."))&&(l=String(parseFloat(l)))}if(l||"nu"===s||"nn"===s||e.inArray(s,n.customUnaryOperations)>=0)t[c]=l,o[c]=s,r++;else if(t.hasOwnProperty(c)&&delete t[c],!p.stringResult&&!p.searchOperators&&"local"!==n.datatype)try{null!=n.postData&&n.postData.hasOwnProperty(c)&&delete n.postData[c]}catch(e){}});var s=r>0;if(p.stringResult||p.searchOperators||"local"===n.datatype){var d='{"groupOp":"'+p.groupOp+'","rules":[',c=0;e.each(t,function(e,t){c>0&&(d+=","),d+='{"field":"'+e+'",',d+='"op":"'+o[e]+'",',d+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',c++}),d+="]}",n.postData[p.sFilter]=d,e.each([p.sField,p.sValue,p.sOper],function(e,t){n.postData.hasOwnProperty(t)&&delete n.postData[t]})}else e.extend(n.postData,t);var u;n.searchurl&&(u=n.url,l.jqGrid("setGridParam",{url:n.searchurl}));var g="stop"===l.triggerHandler("jqGridToolbarBeforeSearch");!g&&e.isFunction(p.beforeSearch)&&(g=p.beforeSearch.call(i)),g||l.jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[e.extend({page:1},p.reloadGridSearchOptions||{})]),u&&l.jqGrid("setGridParam",{url:u}),l.triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(p.afterSearch)&&p.afterSearch.call(i)},F=h("search.odata")||[],G=n.customSortOperations,k=function(t,r,a){e("#sopt_menu").remove(),r=parseInt(r,10),a=parseInt(a,10)+18;var o,s=0,c=[],u=e(t).data("soper"),h=e(t).data("colname"),g=e(".ui-jqgrid-view").css("font-size")||"11px",m="<ul id='sopt_menu' class='"+R.call(i,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+g+";left:"+r+"px;top:"+a+"px;'>";if(void 0!==(s=n.iColByName[h])){var v,y,x,C,j,D=f[s],q=e.extend({},D.searchoptions);for(q.sopt||(q.sopt=[],q.sopt[0]="select"===D.stype||"checkbox"===D.stype?"eq":p.defaultSearch),e.each(F,function(){c.push(this.oper)}),null!=G&&e.each(G,function(e){c.push(e)}),s=0;s<q.sopt.length;s++)x=q.sopt[s],-1!==(o=e.inArray(x,c))&&(void 0!==(v=F[o])?(C=p.operands[x],j=v.text):null!=G&&(C=(y=G[x]).operand,j=y.text),m+='<li class="ui-menu-item '+(u===x?w:"")+'" role="presentation"><a class="ui-corner-all g-menu-item" tabindex="0" role="menuitem" value="'+d(x)+'" data-oper="'+d(C)+'"><table><tr><td style="width:25px">'+d(C)+"</td><td>"+d(j)+"</td></tr></table></a></li>");m+="</ul>",e("body").append(m),e("#sopt_menu").addClass("ui-menu ui-widget ui-widget-content ui-corner-all"),e("#sopt_menu > li > a").hover(function(){e(this).addClass(b)},function(){e(this).removeClass(b)}).click(function(){var r=e(this).attr("value"),i=e(this).data("oper");if(l.triggerHandler("jqGridToolbarSelectOper",[r,i,t]),e("#sopt_menu").hide(),e(t).data("soper",r).text(i),!0===p.autosearch){var a=e(t).parent().next().children()[0];(e(a).val()||"nu"===r||"nn"===r||e.inArray(r,n.customUnaryOperations)>=0)&&I()}})}},O=[],N=e("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});p.loadFilterDefaults&&(x=q()||{}),e.each(f,function(r){var a,d,c,f,w,j,D,q=this,S=q.searchoptions||{},k=q.editoptions||{},T=e("<th></th>",{class:R.call(i,"colHeaders","ui-th-column ui-th-"+n.direction+" "+(p.applyLabelClasses?q.labelClasses||"":"")),role:"gridcell","aria-describedby":n.id+"_"+q.name}),E=e("<div></div>"),A=e("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),B=A.children("tbody").children("tr").children("td"),M=B.eq(0),z=B.eq(1),P=B.eq(2);if(!0===this.hidden&&T.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),a=e.extend({mode:"filter",name:q.name,cm:q,iCol:r,id:C(q.name)},S),this.search){if(p.searchOperators){for(f=n.search&&null!=x[this.name]?x[this.name].op:a.sopt?a.sopt[0]:"select"===q.stype||"checkbox"===q.stype?"eq":p.defaultSearch,w=0;w<F.length;w++)if(F[w].oper===f){c=p.operands[f]||"";break}if(void 0===c&&null!=G){var L;for(L in G)if(G.hasOwnProperty(L)&&L===f){c=G[L].operand;break}}void 0===c&&(c="="),M.append("<a title='"+(null!=a.searchtitle?a.searchtitle:h("search.operandTitle"))+"' data-soper='"+f+"' class='"+R.call(i,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+c+"</a>")}if(M.data("colindex",r),null!=a.sopt&&1!==a.sopt.length||M.hide(),n.search&&null!=x[this.name]&&(a.defaultValue=x[this.name].data),void 0===a.clearSearch&&(a.clearSearch="text"===this.stype),a.clearSearch){var V=e.isFunction(p.resetTitle)?p.resetTitle.call(i,{options:p,cm:q,cmName:q.name,iCol:r}):(h("search.resetTitle")||"Clear Search Value")+" "+o.stripHtml(n.colNames[r]);V=o.htmlEncode(V),P.append("<a title='"+V+"' aria-label='"+V+"' class='"+R.call(i,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+p.resetIcon+"</span></a>")}else P.hide();switch(E.append(A),this.stype){case"checkbox":var H=void 0!==a.defaultValue?a.defaultValue:"-1";D=e("<input role='search' type='checkbox' class='"+y+"' name='"+(q.index||q.name)+"' id='"+C(q.name)+"' aria-labelledby='jqgh_"+n.id+"_"+q.name+"' data-state='"+H+"'/>"),"-1"===H?D.prop("indeterminate",!0):"1"===H&&D.prop("checked",!0),D.click(function(){var t=e(this);switch(t.data("state")){case-1:_(t,1);break;case 0:_(t,-1);break;default:_(t,0)}!0===p.autosearch&&I()}),z.append(D),a.attr&&D.attr(a.attr),O.push({elem:D[0],options:a});break;case"select":if(d=this.surl||a.dataUrl)e.ajax(e.extend({url:d,context:{$tdInput:z,options:a,cm:q,iCol:r},dataType:"html",success:function(r,l,n){var s,d,c,u=this.cm,f=this.iCol,h=this.options,g=this.$tdInput;void 0!==h.buildSelect?(s=h.buildSelect.call(i,r,n,u,f))&&g.append(s):g.append(r),(c=g.children("select")).attr({name:u.index||u.name,id:C(u.name)}),h.attr&&c.attr(h.attr),c.addClass(y),c.css({width:"100%"}),0===c.find("option[value='']").length&&"string"==typeof a.noFilterText&&((d=t.createElement("option")).value="",d.innerHTML=a.noFilterText,c.prepend(d),null!=e(c[0].options[c[0].selectedIndex]).attr("selected")||c[0].multiple||(c[0].selectedIndex=0)),c[0].multiple&&0===c.find("option[selected]").length&&-1!==c[0].selectedIndex&&(c[0].options[c[0].selectedIndex].selected=!1),void 0!==h.defaultValue&&c.val(h.defaultValue),o.bindEv.call(i,c[0],h),o.fullBoolFeedback.call(i,h.selectFilled,"jqGridSelectFilled",{elem:c[0],options:h,cm:u,cmName:u.name,iCol:f,mode:"filter"}),!0===p.autosearch&&c.change(function(){return I(),!1})}},o.ajaxOptions,n.ajaxSelectOptions||{}));else{var W,U,Y;if(q.searchoptions?(W=void 0===S.value?k.value||"":S.value,U=void 0===S.separator?k.separator||":":S.separator,Y=void 0===S.delimiter?k.delimiter||";":S.delimiter):q.editoptions&&(W=void 0===k.value?"":k.value,U=void 0===k.separator?":":k.separator,Y=void 0===k.delimiter?";":k.delimiter),S.generateValue&&null!=n.indexByColumnData[q.name]&&(W=i.generateValueFromColumnIndex(q.name,U,Y)),W){if((j=t.createElement("select")).style.width="100%",D=e(j).attr({name:q.index||q.name,role:"search",id:C(q.name),"aria-describedby":n.id+"_"+q.name}),a.attr&&D.attr(a.attr),!o.fillSelectOptions(j,W,U,Y,null!=a.attr&&a.attr.multiple)&&"string"==typeof a.noFilterText){var X=t.createElement("option");X.value="",X.innerHTML=a.noFilterText,X.selected=!0,D.prepend(X)}void 0!==a.defaultValue&&D.val(a.defaultValue),D.addClass(y),O.push({elem:j,options:a}),z.append(j),o.fullBoolFeedback.call(i,a.selectFilled,"jqGridSelectFilled",{elem:j,options:q.searchoptions||k,cm:q,cmName:q.name,iCol:r,mode:"filter"}),!0===p.autosearch&&D.change(function(){return I(),!1})}}break;case"text":if(D=e("<input role='search' placeholder='Type search term' type='text' class='slds-input' name='"+(q.index||q.name)+"' id='"+C(q.name)+"' aria-labelledby='jqgh_"+n.id+"_"+q.name+"' value='"+(void 0!==a.defaultValue?a.defaultValue:"")+"'/>"),z.append(D),q.createColumnIndex&&a.generateDatalist){var Q="dl_"+C(q.name),J=l.jqGrid("generateDatalistFromColumnIndex",q.name);null!=J&&J.length>0&&(D.attr("list",Q),z.append(J.attr("id",Q)))}a.attr&&D.attr(a.attr),O.push({elem:D[0],options:a}),!0===p.autosearch&&(p.searchOnEnter?D.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(I(),!1):this}):D.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:u&&clearTimeout(u),u=setTimeout(function(){I()},p.autosearchDelay)}}));break;case"custom":z.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(q.index||q.name)+"' id='"+C(q.name)+"'/>");try{if(!e.isFunction(a.custom_element))throw"e1";var Z=a.custom_element.call(i,void 0!==a.defaultValue?a.defaultValue:"",a);if(!Z)throw"e2";Z=e(Z).addClass("customelement"),E.find("span[name='"+(q.index||q.name)+"']").append(Z)}catch(e){"e1"===e&&s.call(i,g,"function 'custom_element' "+v.nodefined,m),"e2"===e?s.call(i,g,"function 'custom_element' "+v.novalue,m):s.call(i,g,"string"==typeof e?e:e.message,m)}}}T.append(E),T.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){e(this).addClass(b)},function(){e(this).removeClass(b)}),N.append(T),p.searchOperators||M.hide()}),e(a.hDiv).find(">div>.ui-jqgrid-htable>thead").append(N),e.each(O,function(){o.bindEv.call(i,this.elem,this.options)}),p.searchOperators&&(e(".soptclass",N).click(function(t){var r=e(this).offset(),i=r.left,a=r.top;k(this,i,a),t.stopPropagation()}),e("body").on("click",function(t){"soptclass"!==t.target.className&&e("#sopt_menu").hide()})),e(".clearsearchclass",N).click(function(){var t,r,i=e(this).closest(".ui-search-clear"),a=i.siblings(".ui-search-oper"),o=a.children("a"),l=o.data("soper"),s=parseInt(a.data("colindex"),10),d=i.siblings(".ui-search-input"),c=f[s],u=e.extend({},c.searchoptions||{}),h=u.defaultValue||"";switch(c.stype){case"select":h?d.find("select").val(h):d.find("select")[0].selectedIndex=0;break;case"checkbox":_(d.find("input[type=checkbox]"),-1);break;default:d.find("input").val(h)}("nu"===l||"nn"===l||e.inArray(l,n.customUnaryOperations)>=0)&&(t=u.sopt?u.sopt[0]:"select"===c.stype||"checkbox"===c.stype?"eq":p.defaultSearch,r=null!=G&&null!=G[t]?G[t].operand:p.operands[t]||"",o.data("soper",t).text(r)),!0===p.autosearch&&I()}),i.ftoolbar=!0,i.triggerToolbar=I,i.clearToolbar=function(t){var r,o={},s=0;t="boolean"!=typeof t||t,e.each(f,function(){var t,l,d=this,c=e(j(d.name),!0===d.frozen&&!0===n.frozenColumns?a.fhDiv:a.hDiv),u=d.searchoptions||{};switch(void 0!==u.defaultValue&&(t=u.defaultValue),r=d.index||d.name,d.stype){case"checkbox":_(c,-1);break;case"select":if(l=!(c.length>0&&c[0].multiple),c.find("option").each(function(r){if(this.selected=0===r&&l,e(this).val()===t)return this.selected=!0,!1}),void 0!==t)o[r]=t,s++;else try{delete n.postData[r]}catch(e){}break;case"text":if(c.val(t||""),void 0!==t)o[r]=t,s++;else try{delete n.postData[r]}catch(e){}break;case"custom":e.isFunction(u.custom_value)&&c.length>0&&"SPAN"===c[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),u.custom_value.call(i,c.children(".customelement").first(),"set",t))}});var d=s>0;if(n.resetsearch=!0,p.stringResult||p.searchOperators||"local"===n.datatype){var c='{"groupOp":"'+p.groupOp+'","rules":[',u=0;e.each(o,function(e,t){u>0&&(c+=","),c+='{"field":"'+e+'",',c+='"op":"eq",',c+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',u++}),c+="]}",n.postData[p.sFilter]=c,e.each([p.sField,p.sValue,p.sOper],function(e,t){n.postData.hasOwnProperty(t)&&delete n.postData[t]})}else e.extend(n.postData,o);var h;n.searchurl&&(h=n.url,l.jqGrid("setGridParam",{url:n.searchurl}));var g="stop"===l.triggerHandler("jqGridToolbarBeforeClear");!g&&e.isFunction(p.beforeClear)&&(g=p.beforeClear.call(i)),g||t&&l.jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[e.extend({page:1},p.reloadGridResetOptions||{})]),h&&l.jqGrid("setGridParam",{url:h}),l.triggerHandler("jqGridToolbarAfterClear"),e.isFunction(p.afterClear)&&p.afterClear.call(i)},i.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",a.hDiv),r=!0===n.frozenColumns&&e("tr.ui-search-toolbar",a.fhDiv);"none"===t.css("display")?(t.show(),r&&r.show()):(t.hide(),r&&r.hide()),!0===n.frozenColumns&&(l.jqGrid("destroyFrozenColumns"),l.jqGrid("setFrozenColumns"))},!0===n.frozenColumns&&(l.jqGrid("destroyFrozenColumns"),l.jqGrid("setFrozenColumns")),l.on("jqGridRefreshFilterValues.filterToolbar"+(p.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var t,r,a,o,l,s,d,c=q(!0)||{};if(p.stringResult||p.searchOperators||"local"===n.datatype||!n.search){for(t in c)if(c.hasOwnProperty(t)&&(r=c[t],a=e(j(t)),s=a.closest("th.ui-th-column"),a.length>0&&s.length>0)){if(d=(n.colModel[s[0].cellIndex]||{}).searchoptions||{},"SELECT"===a[0].tagName.toUpperCase()&&a[0].multiple)a.val(r.data.split(n.inFilterSeparator||","));else if(a.is("input[type=checkbox]")){var u=D(d);_(a,r.data===u.on?1:r.data===u.off?0:-1)}else if(a.find(".customelement").length>0&&e.isFunction(d.custom_value)){var f=d.custom_value.call(i,a.find(".customelement").first(),"get");""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),void 0===f&&(f=""),r.data!==f&&String(r.data)!==String(f)&&d.custom_value.call(i,a.find(".customelement").first(),"set",r.data)}else""===r.data&&void 0!==d.defaultValue&&(r.data=d.defaultValue),e.trim(a.val())!==String(r.data)&&a.val(r.data);(o=a.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",r.op),o.text(p.operands[r.op]||(n.customSortOperations[r.op]||{}).operand)}for(l=0;l<n.colModel.length;l++)t=n.colModel[l].name,c.hasOwnProperty(t)||e(j(t)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){var t=this;t.ftoolbar&&(t.triggerToolbar=null,t.clearToolbar=null,t.toggleToolbar=null,t.ftoolbar=!1,e(t.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===t.p.frozenColumns&&e(t).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var r,i,a,o,l,n=this,s=n.grid,d=n.p.colModel,c=e("table.ui-jqgrid-htable thead",s.hDiv);if(s){e(n).off(".setGroupHeaders");var u=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),p=s.headers;for(r=0,i=p.length;r<i;r++){l=d[r].hidden?"none":"",a=e(p[r].el).width(p[r].width).css("display",l);try{a.removeAttr("rowSpan")}catch(e){a.attr("rowSpan",1)}u.append(a),(o=a.children("span.ui-jqgrid-resize")).length>0&&(o[0].style.height=""),a.children("div")[0].style.top=""}e(c).children("tr.ui-jqgrid-labels").remove(),e(c).prepend(u),!0===t&&e(n).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var r,i,a,l,n,s,d,c,u,p,f,h,g,m,v=this,b=0,w=v.p,y=w.colModel,x=y.length,C=v.grid.headers,j=e("table.ui-jqgrid-htable",v.grid.hDiv),D=o.isCellClassHidden,q=j.children("thead").children("tr.ui-jqgrid-labels"),S=q.last().addClass("jqg-second-row-header"),_=j.children("thead"),I=j.find(".jqg-first-row-header");for(void 0===I[0]?I=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):I.empty(),e(v).prepend(_),a=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),r=0;r<x;r++)if(n=C[r].el,s=e(n),i=y[r],d={height:"0",width:C[r].width+"px",display:i.hidden?"none":""},e("<th>",{role:"gridcell"}).css(d).addClass("ui-first-th-"+w.direction+(t.applyLabelClasses?" "+(i.labelClasses||""):"")).appendTo(I),n.style.width="",m=R.call(v,"colHeaders","ui-th-column-header ui-th-"+w.direction+" "+(t.applyLabelClasses?i.labelClasses||"":"")),u=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0}(i.name,t.groupHeaders)){for(p=u.numberOfColumns,f=u.titleText,h=0,c=0;c<p&&r+c<x;c++)y[r+c].hidden||D(y[r+c].classes)||h++;l=e("<th>").addClass(m).html(f||"&nbsp;"),h>0&&l.attr("colspan",String(h)),w.headertitles&&l.attr("title",l.text()),0===h&&l.hide(),s.before(l),a.append(n),b=p-1}else 0===b?t.useColSpanStyle?s.attr("rowspan",q.length+1):(e("<th>").addClass(m).css({display:i.hidden?"none":"","border-top":"0 none"}).insertBefore(s),a.append(n)):(a.append(n),b--);(g=e(v).children("thead")).prepend(I),a.insertAfter(S),j.prepend(g),e(v).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,r=(e=e[0]).p.colModel,i=r.length,a=-1;for(t=0;t<i&&!0===r[t].frozen;t++)a=t;return a+1},setFrozenColumns:function(t){return t=t||{},this.each(function(){var r=this,i=e(r),a=r.p,o=r.grid;if(o&&null!=a&&!0!==a.frozenColumns){var l,n,s=a.colModel,d=s.length,u=-1,p=!1,f=[],h=c(a.id),g=R.call(r,"states.hover"),m=R.call(r,"states.disabled");if(!0!==a.subGrid&&!0!==a.treeGrid&&!a.scroll){for(l=0;l<d&&!0===s[l].frozen;l++)p=!0,u=l,f.push("#jqgh_"+h+"_"+c(s[l].name));if(a.sortable){n=e(o.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{n.sortable("destroy")}catch(e){}i.jqGrid("setGridParam",{sortable:{options:{items:f.length>0?">th:not(:has("+f.join(",")+"),:hidden)":">th:not(:hidden)"}}}),i.jqGrid("sortableColumns",n)}if(u>=0&&p){var v=a.caption?e(o.cDiv).outerHeight():0,b=e(".ui-jqgrid-htable",a.gView).height();a.toppager&&(v+=e(o.topDiv).outerHeight()),!0===a.toolbar[0]&&"bottom"!==a.toolbar[1]&&(v+=e(o.uDiv).outerHeight()),o.fhDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===a.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+v+"px;height:"+b+"px;' class='"+R.call(r,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),o.fbDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===a.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),e(a.gView).append(o.fhDiv);var w=e(".ui-jqgrid-htable",a.gView).clone(!0),y=w[0].tHead.rows;if(a.groupHeader){e(y[0].cells).filter(":gt("+u+")").remove(),e(y).filter(".jqg-third-row-header").each(function(){e(this).children("th[id]").each(function(){var t,i=e(this).attr("id");i&&i.substr(0,r.id.length+1)===r.id+"_"&&(t=i.substr(r.id.length+1),a.iColByName[t]>u&&e(this).remove())})});var x,C,j=-1,D=-1;e(y).filter(".jqg-second-row-header").children("th").each(function(){if(x=parseInt(e(this).attr("colspan")||1,10),C=parseInt(e(this).attr("rowspan")||1,10),C>1?(j++,D++):x&&(j+=x,D++),j===u)return!1}),j!==u&&(D=u),e(y).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){e(this).children(":gt("+D+")").remove()})}else e(y).each(function(){e(this).children(":gt("+u+")").remove()});if(e(w).width(1),e(o.fhDiv).append(w).scroll(function(){this.scrollLeft=0}),a.footerrow){var q=e(".ui-jqgrid-bdiv",a.gView).height();o.fsDiv=e("<div style='position:absolute;"+("rtl"===a.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+parseInt(q,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),e(a.gView).append(o.fsDiv);var S=e(".ui-jqgrid-ftable",a.gView).clone(!0);e("tr",S).each(function(){e("td:gt("+u+")",this).remove()}),e(S).width(1),e(o.fsDiv).append(S)}i.on("jqGridSortCol.setFrozenColumns",function(t,r,i){var l=e("tr.ui-jqgrid-labels:last th:eq("+a.lastsort+")",o.fhDiv),n=e("tr.ui-jqgrid-labels:last th:eq("+i+")",o.fhDiv);e("span.ui-grid-ico-sort",l).addClass(m),e(l).attr("aria-selected","false"),e("span.ui-icon-"+a.sortorder,n).removeClass(m),e(n).attr("aria-selected","true"),a.viewsortcols[0]||a.lastsort!==i&&(e("span.s-ico",l).hide(),e("span.s-ico",n).show())}),e(a.gView).append(o.fbDiv),e(o.bDiv).scroll(function(){e(o.fbDiv).scrollTop(e(this).scrollTop())}),e(o.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(i){o.bDiv.scrollTop+=e.isFunction(t.mouseWheel)?t.mouseWheel.call(r,i):"mousewheel"===i.type?-i.originalEvent.wheelDelta/10:6*i.originalEvent.detail}),!0===a.hoverrows&&e(a.idSel).off("mouseover.jqGrid mouseout.jqGrid");var _=function(e,t){var r=e.height();Math.abs(r-t)>=1&&t>0&&(e.height(t),r=e.height(),Math.abs(t-r)>=1&&e.height(t+Math.round(t-r)))},I=function(e,t){var r=e.width();Math.abs(r-t)>=1&&(e.width(t),r=e.width(),Math.abs(t-r)>=1&&e.width(t+Math.round(t-r)))},F=function(t,r,i,o){var n,s,d,c,u,p,f,h,g,m,v,b,w=e(r).position().top;if(null!=t&&t.length>0){if(t[0].scrollTop=r.scrollTop,t.css("rtl"===a.direction?{top:w,right:0}:{top:w,left:0}),d=t.children("table").children("thead").children("tr"),0===(c=e(r).children("div").children("table").children("thead").children("tr")).length&&t.children("table").length>0&&(d=e(t.children("table")[0].rows),c=e(e(r).children("div").children("table")[0].rows)),s=Math.min(d.length,c.length),m=s>0?e(d[0]).position().top:0,v=s>0?e(c[0]).position().top:0,i>=0)for(o>=0&&(s=Math.min(o+1,s)),n=i;n<s;n++)if("none"!==(u=e(c[n])).css("display")&&u.is(":visible")){if(w=u.position().top,p=e(d[n]),f=p.position().top,h=u.height(),null!=a.groupHeader&&a.groupHeader.useColSpanStyle)for(b=u[0].cells,l=0;l<b.length;l++)null!=(g=b[l])&&"TH"===g.nodeName.toUpperCase()&&(h=Math.max(h,e(g).height()));_(p,h+(w-v)+(m-f))}_(t,r.clientHeight)}},G={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},k={header:G,resizeFooter:!0,body:G};i.on("jqGridAfterGridComplete.setFrozenColumns",function(){e(a.idSel+"_frozen").remove(),e(o.fbDiv).height(o.hDiv.clientHeight);var t=e(this).clone(!0),r=t[0].rows,l=i[0].rows;if(e(r).filter("tr[role=row]").each(function(){e(this.cells).filter("td[role=gridcell]:gt("+u+")").remove()}),o.fbRows=r,t.width(1).attr("id",a.id+"_frozen"),t.appendTo(o.fbDiv),!0===a.hoverrows){var n=function(t,r,i){e(t)[r](g),e(i[t.rowIndex])[r](g)};e(r).filter(".jqgrow").hover(function(){n(this,"addClass",l)},function(){n(this,"removeClass",l)}),e(l).filter(".jqgrow").hover(function(){n(this,"addClass",r)},function(){n(this,"removeClass",r)})}F(o.fhDiv,o.hDiv,0,-1),F(o.fbDiv,o.bDiv,0,-1),o.sDiv&&F(o.fsDiv,o.sDiv,0,-1)});var O=function(t){e(o.fbDiv).scrollTop(e(o.bDiv).scrollTop()),t.header.resizeDiv&&F(o.fhDiv,o.hDiv,t.header.resizedRows.iRowStart,t.header.resizedRows.iRowEnd),t.body.resizeDiv&&F(o.fbDiv,o.bDiv,t.body.resizedRows.iRowStart,t.body.resizedRows.iRowEnd),t.resizeFooter&&o.sDiv&&t.resizeFooter&&F(o.fsDiv,o.sDiv,0,-1);var r=o.fhDiv[0].clientWidth;t.header.resizeDiv&&null!=o.fhDiv&&o.fhDiv.length>=1&&_(e(o.fhDiv),o.hDiv.clientHeight),t.body.resizeDiv&&null!=o.fbDiv&&o.fbDiv.length>0&&I(e(o.fbDiv),r),t.resizeFooter&&null!=o.fsDiv&&o.fsDiv.length>=0&&I(e(o.fsDiv),r)};e(a.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){O(k)},50)}),i.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var r=i.jqGrid("getInd",t);O({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:r}}})}),i.on("jqGridResizeStop.setFrozenColumns",function(){O(k)}),i.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){O(t||k)}),o.hDiv.loading||setTimeout(function(){i.triggerHandler("jqGridAfterGridComplete")},0),a.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var t=this,r=e(t),i=t.grid,a=t.p,o=c(a.id);if(i&&!0===a.frozenColumns){if(e(i.fhDiv).remove(),e(i.fbDiv).off(".setFrozenColumns"),e(i.fbDiv).remove(),i.fhDiv=null,i.fbDiv=null,i.fbRows=null,a.footerrow&&(e(i.fsDiv).remove(),i.fsDiv=null),r.off(".setFrozenColumns"),!0===a.hoverrows){var l,n=R.call(t,"states.hover");r.on("mouseover.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(l).attr("class")&&e(l).addClass(n)}).on("mouseout.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),e(l).removeClass(n)})}if(a.frozenColumns=!1,a.sortable){var s=e(i.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");s.sortable("destroy"),r.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+o+"_cb,#jqgh_"+o+"_rn,#jqgh_"+o+"_subgrid),:hidden)"}}}),r.jqGrid("sortableColumns",s)}}})}}),e.fn.jqFilter=function(t){if("string"==typeof t){var r=e.fn.jqFilter[t];if(!r)throw"jqFilter - No such method: "+t;var i=e.makeArray(arguments).slice(1);return r.apply(this,i)}var a=e.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},o.filter,t||{});return this.each(function(){if(!this.filter){this.p=a,null!==a.filter&&void 0!==a.filter||(a.filter={groupOp:a.groupOps[0].op,rules:[],groups:[]});var t,r,i=a.columns.length,l=/msie/i.test(navigator.userAgent)&&!window.opera,n=e.isFunction,s=null!=o.defaults&&n(o.defaults.fatalError)?o.defaults.fatalError:alert,d=function(){return e("#"+o.jqID(a.id))[0]||null},c=function(t,r){return e(d()).jqGrid("getGuiStyles",t,r||"")},u=function(t){return e(d()).jqGrid("getGridRes","search."+t)},p=function(e){var t=d(),r=t.p.iColByName[e];return void 0!==r?{cm:t.p.colModel[r],iCol:r}:(r=t.p.iPropByName[e],void 0!==r?{cm:t.p.additionalProperties[r],iCol:r,isAddProp:!0}:{cm:null,iCol:-1})},f=c("states.error"),h=c("dialog.content");if(a.initFilter=e.extend(!0,{},a.filter),i){for(t=0;t<i;t++)(r=a.columns[t]).stype?r.inputtype=r.stype:r.inputtype||(r.inputtype="text"),r.sorttype?r.searchtype=r.sorttype:r.searchtype||(r.searchtype="string"),void 0===r.hidden&&(r.hidden=!1),r.label||(r.label=r.name),r.cmName=r.name,r.index&&(r.name=r.index),r.hasOwnProperty("searchoptions")||(r.searchoptions={}),r.hasOwnProperty("searchrules")||(r.searchrules={});a.showQuery&&e(this).append("<table class='queryresult "+h+"' style='display:block;max-width:440px;border:0px none;' dir='"+a.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var g=function(e,t){var r=[!0,""],i=d();if(n(t.searchrules))r=t.searchrules.call(i,e,t);else if(o&&o.checkValues)try{r=o.checkValues.call(i,e,-1,t.searchrules,t.label)}catch(e){}r&&r.length&&!1===r[0]&&(a.error=!r[0],a.errmsg=r[1])};this.onchange=function(){return a.error=!1,a.errmsg="",!!n(a.onChange)&&a.onChange.call(d(),a,this)},this.reDraw=function(){e("table.group:first",this).remove();var t=this.createTableForGroup(a.filter,null);e(this).append(t),n(a.afterRedraw)&&a.afterRedraw.call(d(),a,this)},this.createTableForGroup=function(t,r){var i,o=this,l=e("<table class='"+c("searchDialog.operationGroup","group")+"' style='border:0px none;'><tbody></tbody></table>"),n="left";"rtl"===a.direction&&(n="right",l.attr("dir","rtl")),null===r&&l.append("<tr class='error' style='display:none;'><th colspan='5' class='"+f+"' align='"+n+"'></th></tr>");var s=e("<tr></tr>");l.append(s);var d=e("<th colspan='5' align='"+n+"'></th>");if(s.append(d),!0===a.ruleButtons){var p=e("<select class='"+c("searchDialog.operationSelect","opsel")+"'></select>");d.append(p);var h,g="";for(i=0;i<a.groupOps.length;i++)h=t.groupOp===o.p.groupOps[i].op?" selected='selected'":"",g+="<option value='"+o.p.groupOps[i].op+"'"+h+">"+o.p.groupOps[i].text+"</option>";p.append(g).on("change",function(){t.groupOp=e(p).val(),o.onchange()})}var m="<span></span>";if(a.groupButton&&(m=e("<input type='button' value='+ {}' title='"+u("addGroupTitle")+"' class='"+c("searchDialog.addGroupButton","add-group")+"'/>")).on("click",function(){return void 0===t.groups&&(t.groups=[]),t.groups.push({groupOp:a.groupOps[0].op,rules:[],groups:[]}),o.reDraw(),o.onchange(),!1}),d.append(m),!0===a.ruleButtons){var v,b=e("<input type='button' value='+' title='"+u("addRuleTitle")+"' class='"+c("searchDialog.addRuleButton","add-rule ui-add")+"'/>");b.on("click",function(){var r,a;for(void 0===t.rules&&(t.rules=[]),i=0;i<o.p.columns.length;i++)if(r=void 0===o.p.columns[i].search||o.p.columns[i].search,a=!0===o.p.columns[i].hidden,!0===o.p.columns[i].searchoptions.searchhidden&&r||r&&!a){v=o.p.columns[i];break}var l;return l=v.searchoptions.sopt?v.searchoptions.sopt:o.p.sopt?o.p.sopt:-1!==e.inArray(v.searchtype,o.p.strarr)?o.p.stropts:o.p.numopts,t.rules.push({field:v.name,op:l[0],data:""}),o.reDraw(),!1}),d.append(b)}if(null!==r){var w=e("<input type='button' value='-' title='"+u("deleteGroupTitle")+"' class='"+c("searchDialog.deleteGroupButton","delete-group")+"'/>");d.append(w),w.on("click",function(){for(i=0;i<r.groups.length;i++)if(r.groups[i]===t){r.groups.splice(i,1);break}return o.reDraw(),o.onchange(),!1})}if(void 0!==t.groups){var y,x,C;for(i=0;i<t.groups.length;i++)y=e("<tr></tr>"),l.append(y),x=e("<td class='first'></td>"),y.append(x),(C=e("<td colspan='4'></td>")).append(this.createTableForGroup(t.groups[i],t)),y.append(C)}if(void 0===t.groupOp&&(t.groupOp=o.p.groupOps[0].op),void 0!==t.rules)for(i=0;i<t.rules.length;i++)l.append(this.createTableRowForRule(t.rules[i],t));return l},this.createTableRowForRule=function(t,r){var i,s,f,h,g=this,m=d(),v=e("<tr></tr>"),b="";v.append("<td class='first'></td>");var w=e("<td class='columns'></td>");v.append(w);var y,x=e("<select class='"+c("searchDialog.label","selectLabel")+"'></select>"),C=[];w.append(x),x.on("change",function(){t.field=e(x).val();var r,i,a=e(this).parents("tr:first");for(i=0;i<g.p.columns.length;i++)if(g.p.columns[i].name===t.field){r=g.p.columns[i];break}if(r){var d=e.extend({},r.editoptions||{});delete d.readonly,delete d.disabled;var u=e.extend({},d||{},r.searchoptions||{},p(r.cmName),{id:o.randId(),name:r.name,mode:"search"});u.column=r,l&&"text"===r.inputtype&&(u.size||(u.size=10));var h=o.createEl.call(m,r.inputtype,e.extend({},u,u.attr||{}),"",!0,g.p.ajaxSelectOptions||{},!0);e(h).addClass(c("searchDialog.elem","input-elm")),s=u.sopt?u.sopt:g.p.sopt?g.p.sopt:-1!==e.inArray(r.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts;var v,b,w,j="",D=0;for(C=[],e.each(g.p.ops,function(){C.push(this.oper)}),g.p.cops&&e.each(g.p.cops,function(e){C.push(e)}),i=0;i<s.length;i++)b=s[i],-1!==(y=e.inArray(s[i],C))&&(w=void 0!==(v=g.p.ops[y])?v.text:g.p.cops[b].text,0===D&&(t.op=b),j+="<option value='"+b+"'>"+w+"</option>",D++);if(e(".selectopts",a).empty().append(j),e(".selectopts",a)[0].selectedIndex=0,o.msie&&o.msiever()<9){var q=parseInt(e("select.selectopts",a)[0].offsetWidth,10)+1;e(".selectopts",a).width(q),e(".selectopts",a).css("width","auto")}if(e(".data",a).empty().append(h),f.createColumnIndex&&u.generateDatalist){var R="dl_"+h.id,S=e(m).jqGrid("generateDatalistFromColumnIndex",f.name);null!=S&&S.length>0&&(e(h).attr("list",R),e(".data",a).append(S.attr("id",R)))}o.bindEv.call(m,h,u),e(".input-elm",a).on("change",u,function(r){var i=r.target,a=r.data.column;t.data=a&&"custom"===a.inputtype&&n(a.searchoptions.custom_value)?a.searchoptions.custom_value.call(m,e(this).find(".customelement").first(),"get"):i.value,e(i).is("input[type=checkbox]")&&!e(i).is(":checked")&&(t.data=e(i).data("offval")),g.onchange()}),setTimeout(function(){t.data=e(h).val(),g.onchange()},0)}});var j,D,q=0;for(i=0;i<g.p.columns.length;i++)j=void 0===g.p.columns[i].search||g.p.columns[i].search,D=!0===g.p.columns[i].hidden,(!0===g.p.columns[i].searchoptions.searchhidden&&j||j&&!D)&&(h="",t.field===g.p.columns[i].name&&(h=" selected='selected'",q=i),b+="<option value='"+g.p.columns[i].name+"'"+h+">"+g.p.columns[i].label+"</option>");x.append(b);var R=e("<td class='operators'></td>");v.append(R),f=a.columns[q],l&&"text"===f.inputtype&&(f.searchoptions.size||(f.searchoptions.size=10));var S=e.extend({},f.editoptions||{});delete S.readonly,delete S.disabled;var _=e.extend({},S,f.searchoptions||{},p(f.cmName),{id:o.randId(),name:f.name});_.column=f;var I=o.createEl.call(m,f.inputtype,e.extend({},_,_.attr||{}),t.data,!0,g.p.ajaxSelectOptions||{},!0);("nu"===t.op||"nn"===t.op||e.inArray(t.op,m.p.customUnaryOperations)>=0)&&(e(I).attr("readonly","true"),e(I).attr("disabled","true"));var F=e("<select class='"+c("searchDialog.operator","selectopts")+"'></select>");R.append(F),F.on("change",function(){t.op=e(F).val();var r=e(this).parents("tr:first"),i=e(".input-elm",r)[0];"nu"===t.op||"nn"===t.op||e.inArray(t.op,m.p.customUnaryOperations)>=0?(t.data="","SELECT"!==i.tagName.toUpperCase()&&(i.value=""),i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):("SELECT"===i.tagName.toUpperCase()&&(t.data=i.value),i.removeAttribute("readonly"),i.removeAttribute("disabled")),g.onchange()}),s=f.searchoptions.sopt?f.searchoptions.sopt:g.p.sopt?g.p.sopt:-1!==e.inArray(f.searchtype,g.p.strarr)?g.p.stropts:g.p.numopts,b="";var G,k;for(e.each(g.p.ops,function(){C.push(this.oper)}),g.p.cops&&e.each(g.p.cops,function(e){C.push(e)}),i=0;i<s.length;i++)k=s[i],-1!==(y=e.inArray(s[i],C))&&(G=g.p.ops[y],b+="<option value='"+k+"'"+(h=t.op===k?" selected='selected'":"")+">"+(void 0!==G?G.text:g.p.cops[k].text)+"</option>");F.append(b);var O=e("<td class='data'></td>");if(v.append(O),O.append(I),f.createColumnIndex&&f.searchoptions.generateDatalist){var N="dl_"+I.id,T=e(m).jqGrid("generateDatalistFromColumnIndex",f.name);null!=T&&T.length>0&&(e(I).attr("list",N),O.append(T.attr("id",N)))}o.bindEv.call(m,I,f.searchoptions),e(I).addClass(c("searchDialog.elem","input-elm")).on("change",function(){t.data="custom"===f.inputtype?f.searchoptions.custom_value.call(m,e(this).find(".customelement").first(),"get"):e(this).val(),e(this).is("input[type=checkbox]")&&!e(this).is(":checked")&&(t.data=e(this).data("offval")),e.isArray(t.data)&&(t.data=t.data.join(a.inFilterSeparator||",")),g.onchange()});var E=e("<td></td>");if(v.append(E),!0===a.ruleButtons){var A=e("<input type='button' value='-' title='"+u("deleteRuleTitle")+"' class='"+c("searchDialog.deleteRuleButton","delete-rule ui-del")+"'/>");E.append(A),A.on("click",function(){for(i=0;i<r.rules.length;i++)if(r.rules[i]===t){r.rules.splice(i,1);break}return g.reDraw(),g.onchange(),!1})}return v},this.getStringForGroup=function(e){var t,r="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){r.length>1&&(r+=" "+e.groupOp+" ");try{r+=this.getStringForGroup(e.groups[t])}catch(e){s(e)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)r.length>1&&(r+=" "+e.groupOp+" "),r+=this.getStringForRule(e.rules[t])}catch(e){s(e)}return r+=")","()"===r?"":r},this.getStringForRule=function(t){var r,i,o,l="",s="",c=t.data,u=["int","integer","float","number","currency"];for(r=0;r<a.ops.length;r++)if(a.ops[r].oper===t.op){l=a.operands.hasOwnProperty(t.op)?a.operands[t.op]:"",s=a.ops[r].oper;break}if(""===s&&null!=a.cops)for(o in a.cops)if(a.cops.hasOwnProperty(o)&&(s=o,l=a.cops[o].operand,n(a.cops[o].buildQueryValue)))return a.cops[o].buildQueryValue.call(a,{cmName:t.field,searchValue:c,operand:l});for(r=0;r<a.columns.length;r++)if(a.columns[r].name===t.field){i=a.columns[r];break}return null==i?"":("bw"!==s&&"bn"!==s||(c+="%"),"ew"!==s&&"en"!==s||(c="%"+c),"cn"!==s&&"nc"!==s||(c="%"+c+"%"),"in"!==s&&"ni"!==s||(c=" ("+c+")"),a.errorcheck&&g(t.data,i),-1!==e.inArray(i.searchtype,u)||"nn"===s||"nu"===s||e.inArray(s,d().p.customUnaryOperations)>=0?t.field+" "+l+" "+c:t.field+" "+l+' "'+c+'"')},this.resetFilter=function(){a.filter=e.extend(!0,{},a.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){e("th."+f,this).html(""),e("tr.error",this).hide()},this.showError=function(){e("th."+f,this).html(a.errmsg),e("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(a.filter)},this.toString=function(){function e(e){if(r.p.errorcheck){var t,i;for(t=0;t<r.p.columns.length;t++)if(r.p.columns[t].name===e.field){i=r.p.columns[t];break}i&&g(e.data,i)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(r){var i,a="(";if(void 0!==r.groups)for(i=0;i<r.groups.length;i++)a.length>1&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=t(r.groups[i]);if(void 0!==r.rules)for(i=0;i<r.rules.length;i++)a.length>1&&("OR"===r.groupOp?a+=" || ":a+=" && "),a+=e(r.rules[i]);return a+=")","()"===a?"":a}var r=this;return t(a.filter)},this.reDraw(),a.showQuery&&this.onchange(),this.filter=!0}}})},e.extend(e.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){"string"==typeof t&&(t=e.parseJSON(t)),this.each(function(){this.p.filter=t,this.reDraw(),this.onchange()})}});var _={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var r=this.removeWhite(e),i=this.toObj(r),a=this.toJson(i,e.nodeName,"\t");return"{\n"+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var r,i=function(e,t,r){var a,o,l,n,s="";if(e instanceof Array)if(0===e.length)s+=r+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(a=0,o=e.length;a<o;a+=1)s+=r+i(e[a],t,r+"\t")+"\n";else if("object"==typeof e){l=!1,s+=r+"<"+t;for(n in e)e.hasOwnProperty(n)&&("@"===n.charAt(0)?s+=" "+n.substr(1)+'="'+e[n].toString()+'"':l=!0);if(s+=l?">":"/>",l){for(n in e)e.hasOwnProperty(n)&&("#text"===n?s+=e[n]:"#cdata"===n?s+="<![CDATA["+e[n]+"]]>":"@"!==n.charAt(0)&&(s+=i(e[n],n,r+"\t")));s+=("\n"===s.charAt(s.length-1)?r:"")+"</"+t+">"}}else"function"==typeof e?s+=r+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),'""'===e.toString()||0===e.toString().length?s+=r+"<"+t+">__EMPTY_STRING_</"+t+">":s+=r+"<"+t+">"+e.toString()+"</"+t+">");return s},a="";for(r in e)e.hasOwnProperty(r)&&(a+=i(e[r],r,""));return t?a.replace(/\t/g,t):a.replace(/\t|\n/g,"")},toObj:function(t){var r,i,a={},o=/function/i,l=0,n=0,s=!1;if(1===t.nodeType){if(t.attributes.length)for(r=0;r<t.attributes.length;r+=1)a["@"+t.attributes[r].nodeName]=(t.attributes[r].nodeValue||"").toString();if(t.firstChild){for(i=t.firstChild;i;i=i.nextSibling)1===i.nodeType?s=!0:3===i.nodeType&&i.nodeValue.match(/[^ \f\n\r\t\v]/)?l+=1:4===i.nodeType&&(n+=1);if(s)if(l<2&&n<2)for(this.removeWhite(t),i=t.firstChild;i;i=i.nextSibling)3===i.nodeType?a["#text"]=this.escape(i.nodeValue):4===i.nodeType?o.test(i.nodeValue)?a[i.nodeName]=[a[i.nodeName],i.nodeValue]:a["#cdata"]=this.escape(i.nodeValue):a[i.nodeName]?a[i.nodeName]instanceof Array?a[i.nodeName][a[i.nodeName].length]=this.toObj(i):a[i.nodeName]=[a[i.nodeName],this.toObj(i)]:a[i.nodeName]=this.toObj(i);else t.attributes.length?a["#text"]=this.escape(this.innerXml(t)):a=this.escape(this.innerXml(t));else if(l)t.attributes.length?a["#text"]=this.escape(this.innerXml(t)):"__EMPTY_ARRAY_"===(a=this.escape(this.innerXml(t)))?a="[]":"__EMPTY_STRING_"===a&&(a="");else if(n)if(n>1)a=this.escape(this.innerXml(t));else for(i=t.firstChild;i;i=i.nextSibling){if(o.test(t.firstChild.nodeValue)){a=t.firstChild.nodeValue;break}a["#cdata"]=this.escape(i.nodeValue)}}t.attributes.length||t.firstChild||(a=null)}else 9===t.nodeType?a=this.toObj(t.documentElement):(null!=e.jgrid&&null!=e.jgrid.defaults&&e.isFunction(e.jgrid.defaults.fatalError)?e.jgrid.defaults.fatalError:alert)("unhandled node type: "+t.nodeType);return a},toJson:function(e,t,r,i){void 0===i&&(i=!0);var a,o,l,n=t?'"'+t+'"':"",s="\t",d="\n",c=[],u=[];if(i||(s="",d=""),"[]"===e)n+=t?":[]":"[]";else if(e instanceof Array){for(o=0,a=e.length;o<a;o+=1)c[o]=this.toJson(e[o],"",r+s,i);n+=(t?":[":"[")+(c.length>1?d+r+s+c.join(","+d+r+s)+d+r:c.join(""))+"]"}else if(null===e)n+=(t&&":")+"null";else if("object"==typeof e){for(l in e)e.hasOwnProperty(l)&&(u[u.length]=this.toJson(e[l],l,r+s,i));n+=(t?":{":"{")+(u.length>1?d+r+s+u.join(","+d+r+s)+d+r:u.join(""))+"}"}else n+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return n},innerXml:function(e){var t,r="",i=function(e){var t,r,a="";if(1===e.nodeType){for(a+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)a+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){for(a+=">",r=e.firstChild;r;r=r.nextSibling)a+=i(r);a+="</"+e.nodeName+">"}else a+="/>"}else 3===e.nodeType?a+=e.nodeValue:4===e.nodeType&&(a+="<![CDATA["+e.nodeValue+"]]>");return a};if(e.hasOwnProperty("innerHTML"))r=e.innerHTML;else for(t=e.firstChild;t;t=t.nextSibling)r+=i(t);return r},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();for(var t,r=e.firstChild;r;)3===r.nodeType?r.nodeValue.match(/[^ \f\n\r\t\v]/)?r=r.nextSibling:(t=r.nextSibling,e.removeChild(r),r=t):1===r.nodeType?(this.removeWhite(r),r=r.nextSibling):r=r.nextSibling;return e}};window.xmlJsonClass=_;var I=o.feedback,F=o.fullBoolFeedback,G=o.builderFmButon,k=function(e,t,r){var i;!0===t[0]&&(i="<span class='"+x("fm-button-icon",r,t[2])+"'></span>","right"===t[1]?e.addClass("fm-button-icon-right").append(i):e.addClass("fm-button-icon-left").prepend(i))},O=function(e){return R.call(this,"states."+e)},N=function(t){t.find("tr[data-rowpos]").each(function(){var t=0;e(this).children("td").each(function(){"hidden"!==e(this).css("visibility")&&t++}),t||e(this).hide()})},T=function(e){return"&nbsp;"===e||"&#160;"===e||1===e.length&&160===e.charCodeAt(0)};o.extend({searchGrid:function(t){return this.each(function(){function r(t){v("beforeShow",t)&&(e(p).data("onClose",n.onClose),o.viewModal.call(i,p,{gbox:f,jqm:n.jqModal,overlay:n.overlay,modal:n.modal,overlayClass:n.overlayClass,toTop:n.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),v("afterShow",t))}var i=this,a=e(i),l=i.p;if(i.grid&&null!=l){var n=e.extend(!0,{drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:l.prmNames.filters,loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,removemodal:!0,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE",in:"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"IS NOT NULL"}},D.getGridRes.call(a,"search"),o.search||{},l.searching||{},t||{}),s="fbox_"+l.id,d=n.commonIconClass,u={themodal:"searchmod"+s,modalhead:"searchhd"+s,modalcontent:"searchcnt"+s,resizeAlso:s},p="#"+c(u.themodal),f=l.gBox,h=l.gView,g=e.each,m=l.postData[n.sFilter],v=function(){var t=e.makeArray(arguments);return t.unshift("Search"),t.unshift("Filter"),t.unshift(n),I.apply(i,t)},b=function(){o.hideModal(p,{gb:f,jqm:n.jqModal,onClose:n.onClose,removemodal:n.removemodal})};if("string"==typeof m&&(m=""!==e.trim(m)?e.parseJSON(m):void 0),e(p).remove(),void 0!==e(p)[0])r(e("#fbox_"+c(l.id)));else{var w=e("<div><div id='"+s+"' class='"+R.call(i,"dialog.body","searchFilter")+"' style='overflow:auto'></div></div>").insertBefore(h);"rtl"===l.direction&&w.attr("dir","rtl");var y,C,j="",q="",S=!1,_=-1,k=e.extend([],l.colModel),N=G.call(i,s+"_search",n.Find,x(d,n.findDialogIcon),"right"),T=G.call(i,s+"_reset",n.Reset,x(d,n.resetDialogIcon),"left");if(n.showQuery&&(j=G.call(i,s+"_query","Query",x(d,n.queryDialogIcon),"left")+"&#160;"),n.searchForAdditionalProperties&&g(l.additionalProperties,function(){var e="string"==typeof this?{name:this}:this;e.label||(e.label=e.name),e.isAddProp=!0,k.push(e)}),n.columns.length?(k=n.columns,_=0,y=k[0].index||k[0].name):g(k,function(e,t){if(t.label||(t.label=t.isAddProp?t.name:l.colNames[e]),!S){var r=void 0===t.search||t.search,i=!0===t.hidden;(t.searchoptions&&!0===t.searchoptions.searchhidden&&r||r&&!i)&&(S=!0,y=t.index||t.name,_=e)}}),!m&&y||!1===n.multipleSearch){var E="eq";_>=0&&k[_].searchoptions&&k[_].searchoptions.sopt?E=k[_].searchoptions.sopt[0]:n.sopt&&n.sopt.length&&(E=n.sopt[0]),m={groupOp:"AND",rules:[{field:y,op:E,data:""}]}}S=!1,n.tmplNames&&n.tmplNames.length&&(S=!0,q=n.tmplLabel,q+="<select class='ui-template'>",q+="<option value='default'>Default</option>",g(n.tmplNames,function(e,t){q+="<option value='"+e+"'>"+t+"</option>"}),q+="</select>"),C="<div class='"+R.call(i,"dialog.footer")+"'><table class='EditTable' style='border:0px none;margin-top:5px' id='"+s+"_2'><tbody><tr><td colspan='2'><hr class='"+R.call(i,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='EditButton EditButton-"+l.direction+"'  style='float:"+("rtl"===l.direction?"right":"left")+";'>"+T+q+"</td><td class='EditButton EditButton-"+l.direction+"'>"+j+N+"</td></tr></tbody></table></div>",s=c(s),n.gbox=f,n.height="auto",e(s="#"+s).jqFilter({columns:k,filter:n.loadDefaults?m:null,showQuery:n.showQuery,errorcheck:n.errorcheck,sopt:n.sopt,groupButton:n.multipleGroup,ruleButtons:n.multipleSearch,afterRedraw:n.afterRedraw,ops:n.odata,cops:l.customSortOperations,operands:n.operands,ajaxSelectOptions:l.ajaxSelectOptions,groupOps:n.groupOps,onChange:function(t,r){t.showQuery&&e(".query",r).text(r.toUserFriendlyString()),F.call(i,n.afterChange,"jqGridFilterAfterChange",e(s),n,t,r)},direction:l.direction,id:l.id}),w.append(C),S&&n.tmplFilters&&n.tmplFilters.length&&e(".ui-template",w).on("change",function(){var t=e(this).val();return"default"===t?e(s).jqFilter("addFilter",m):e(s).jqFilter("addFilter",n.tmplFilters[parseInt(t,10)]),!1}),!0===n.multipleGroup&&(n.multipleSearch=!0),v("onInitialize",e(s)),n.layer?o.createModal.call(i,u,w,n,h,e(f)[0],"#"+c(n.layer),{position:"relative"}):o.createModal.call(i,u,w,n,h,e(f)[0]),(n.searchOnEnter||n.closeOnEscape)&&e(p).keydown(function(t){var r=e(t.target);return!n.searchOnEnter||13!==t.which||r.hasClass("add-group")||r.hasClass("add-rule")||r.hasClass("delete-group")||r.hasClass("delete-rule")||r.hasClass("fm-button")&&r.is("[id$=_query]")?n.closeOnEscape&&27===t.which?(e("#"+c(u.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0:(e(s+"_search").click(),!1)}),j&&e(s+"_query").on("click",function(){return e(".queryresult",w).toggle(),!1}),void 0===n.stringResult&&(n.stringResult=n.multipleSearch),e(s+"_search").on("click",function(){var t,r={},o="",d=e(s),c=d.find(".input-elm");if(c.filter(":focus")&&(c=c.filter(":focus")),c.change(),t=d.jqFilter("filterData"),n.errorcheck&&(d[0].hideError(),n.showQuery||d.jqFilter("toSQLString"),d[0].p.error))return d[0].showError(),!1;if(n.stringResult||"local"===l.datatype){try{o=JSON.stringify(t)}catch(e){}"string"==typeof o&&(r[n.sFilter]=o,g([n.sField,n.sValue,n.sOper],function(){r[this]=""}))}else n.multipleSearch?(r[n.sFilter]=t,g([n.sField,n.sValue,n.sOper],function(){r[this]=""})):(r[n.sField]=t.rules[0].field,r[n.sValue]=t.rules[0].data,r[n.sOper]=t.rules[0].op,r[n.sFilter]="");return e.extend(l.postData,r),F.call(i,n.onSearch,"jqGridFilterSearch",l.filters)&&(l.search=!0,a.trigger("reloadGrid",[e.extend({page:1},n.reloadGridSearchOptions||{})])),n.closeAfterSearch&&b(),!1}),e(s+"_reset").on("click",function(){var t={},r=e(s);return l.search=!1,l.resetsearch=!0,!1===n.multipleSearch?t[n.sField]=t[n.sValue]=t[n.sOper]="":t[n.sFilter]="",r[0].resetFilter(),S&&e(".ui-template",w).val("default"),e.extend(l.postData,t),F.call(i,n.onReset,"jqGridFilterReset")&&a.trigger("reloadGrid",[e.extend({page:1},n.reloadGridResetOptions||{})]),n.closeAfterReset&&b(),!1}),r(e(s));var A=O.call(i,"hover");e(".fm-button:not(."+O.call(i,"disabled").split(" ").join(".")+")",w).hover(function(){e(this).addClass(A)},function(){e(this).removeClass(A)})}}})},editGridRow:function(t,r){return this.each(function(){function i(){return e(E+" > tbody > tr > td .FormElement").each(function(){var t,r,i,a,l,n=e(".customelement",this),s=this.name;if(n.length){if(s=n.attr("name"),void 0!==(r=L[s])&&(t=P[r],i=t.editoptions||{},e.isFunction(i.custom_value))){try{if(m[s]=i.custom_value.call(f,e("#"+c(s),E),"get"),void 0===m[s])throw"e1"}catch(e){"e1"===e?o.info_dialog.call(f,Y,"function 'custom_value' "+q.msg.novalue,q.bClose):o.info_dialog.call(f,Y,e.message,q.bClose)}return!0}}else switch(l=e(this)[0].type){case"checkbox":m[s]=e(this).is(":checked")?e(this).val():e(this).data("offval");break;case"select-one":m[s]=e("option:selected",this).val();break;case"select-multiple":m[s]=e(this).val(),m[s]=m[s]?m[s].join(","):"";var d=[];e("option:selected",this).each(function(t,r){d[t]=e(r).text()});break;case"date":m[s]=e(this).val(),3===String(m[s]).split("-").length&&void 0!==(r=L[s])&&(a=((t=P[r]).formatoptions||{}).newformat||y.call(h,"formatter.date.newformat"),m[s]=o.parseDate.call(h[0],"Y-m-d",m[s],a));break;default:void 0!==l&&e.inArray(l,q.skipPostTypes)<0&&(m[s]=e(this).val())}}),!0}function a(t,r){var i,a,l,n,s,d=0;(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData={},q._savedData[w+"_id"]=t);var u=g.colModel;if("_empty"===t)return e(u).each(function(){i=this.name,l=e.extend({},this.editoptions||{}),(a=e("#"+c(i),r))&&a.length&&null!==a[0]&&(n="","custom"===this.edittype&&e.isFunction(l.custom_value)?l.custom_value.call(f,a,"set",n):l.defaultValue?(n=e.isFunction(l.defaultValue)?l.defaultValue.call(f):l.defaultValue,"checkbox"===a[0].type?(s=n.toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==s?(a[0].checked=!0,a[0].defaultChecked=!0,a[0].value=n):(a[0].checked=!1,a[0].defaultChecked=!1):a.val(n)):"checkbox"===a[0].type?(a[0].checked=!1,a[0].defaultChecked=!1,n=e(a).data("offval")):a[0].type&&"select"===a[0].type.substr(0,6)?a[0].selectedIndex=0:a.val(n),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=n))}),void e("#id_g",r).val(t);var p=D.getInd.call(h,t,!0);p&&(e(p.cells).filter("td[role=gridcell]").each(function(a){var l;if("cb"!==(i=u[a].name)&&"subgrid"!==i&&"rn"!==i&&!0===u[a].editable){try{l=e.unformat.call(f,e(this),{rowId:t,colModel:u[a]},a)}catch(t){l="textarea"===u[a].edittype?e(this).text():e(this).html()}switch(g.autoEncodeOnEdit&&(l=o.oldDecodePostedData(l)),(!0===q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[i]=l),i="#"+c(i),u[a].edittype){case"password":case"text":case"button":case"image":case"textarea":T(l)&&(l=""),e(i,r).val(l);break;case"select":var n=l.split(",");n=e.map(n,function(t){return e.trim(t)}),e(i+" option",r).each(function(){var t,r=this,i=e(r),o=e.trim(i.val());if(u[a].editoptions.multiple||n[0]!==o?u[a].editoptions.multiple&&(t=e.inArray(o,n))>-1?(n.splice(t,1),r.selected=!0):r.selected=!1:(n.splice(0,1),r.selected=!0),0===n.length)return!1}),n.length>0&&e(i+" option",r).each(function(){var t,r=this,i=e(r),o=e.trim(i.text());if(u[a].editoptions.multiple||e.trim(l)!==o&&n[0]!==o?u[a].editoptions.multiple&&(t=e.inArray(o,n))>-1&&(n.splice(t,1),r.selected=!0):(n.splice(0,1),r.selected=!0),0===n.length)return!1});break;case"checkbox":l=String(l),u[a].editoptions&&u[a].editoptions.value?l=u[a].editoptions.value.split(":")[0]===l:(l=l.toLowerCase(),l=l.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==l),e(i,r).prop({checked:l,defaultChecked:l});break;case"custom":try{if(!u[a].editoptions||!e.isFunction(u[a].editoptions.custom_value))throw"e1";u[a].editoptions.custom_value.call(f,e(i,r),"set",l)}catch(e){"e1"===e?o.info_dialog.call(f,Y,"function 'custom_value' "+q.msg.nodefined,q.bClose):o.info_dialog.call(f,Y,e.message,q.bClose)}}d++}}),d>0&&e("#id_g",E).val(t))}function l(){var t=q.url||g.editurl;e.each(P,function(r,i){var a=i.name,o=m[a];"date"!==i.formatter||null!=i.formatoptions&&!0===i.formatoptions.sendFormatted||(m[a]=e.unformat.date.call(f,o,i)),"clientArray"!==t&&i.editoptions&&!0===i.editoptions.NullIfEmpty&&m.hasOwnProperty(a)&&""===o&&(m[a]="null")})}function n(){var r,i,n,s,d,c,u,p,v=[!0,"",""],y=v,x={},C=g.prmNames,R=D.getInd.call(h,t),_=!1===R?null:f.rows[R],I=h.triggerHandler("jqGridAddEditBeforeCheckValues",[m,e(S),b]);I&&"object"==typeof I&&(m=I),R=!1===R?-1:R,e.isFunction(q.beforeCheckValues)&&(I=q.beforeCheckValues.call(f,m,e(S),b))&&"object"==typeof I&&(m=I);for(n in m)if(m.hasOwnProperty(n)&&(p=g.iColByName[n],null!=(y=o.checkValues.call(f,m[n],n,void 0,void 0,{oldValue:"_empty"===t?null:D.getCell.call(h,t,p),newValue:m[n],cmName:n,rowid:t,cm:P[p],iCol:p,iRow:R,tr:_,td:null==_?null:_.cells[p],mode:"_empty"===t?"addForm":"editForm"}))&&!0!==y||(y=v),!1===y[0]))break;if(l(),y[0]&&(void 0===(x=h.triggerHandler("jqGridAddEditClickSubmit",[q,m,b]))&&e.isFunction(q.onclickSubmit)&&(x=q.onclickSubmit.call(f,q,m,b)||{}),null!=(y=h.triggerHandler("jqGridAddEditBeforeSubmit",[m,e(S),b]))&&!0!==y||(y=v),y[0]&&e.isFunction(q.beforeSubmit)&&(null!=(y=q.beforeSubmit.call(f,m,e(S),b))&&!0!==y||(y=v))),y[0]&&!q.processing){if(q.processing=!0,e("#sData",A).addClass($),c=q.url||g.editurl,i=C.oper,r="clientArray"===c&&!1!==g.keyName?g.keyName:C.id,m[i]="_empty"===e.trim(m[w+"_id"])?C.addoper:C.editoper,m[i]!==C.addoper?m[r]=m[w+"_id"]:void 0===m[r]&&(m[r]=m[w+"_id"]),delete m[w+"_id"],m=e.extend(m,q.editData,x),!0===g.treeGrid){if(m[i]===C.addoper){s=g.selrow;var F="adjacency"===g.treeGridModel?g.treeReader.parent_id_field:"parent_id";m[F]=s}for(d in g.treeReader)if(g.treeReader.hasOwnProperty(d)&&(u=g.treeReader[d],m.hasOwnProperty(u))){if(m[i]===C.addoper&&"parent_id_field"===d)continue;delete m[u]}}m[r]=o.stripPref(g.idPrefix,m[r]),g.autoEncodeOnEdit&&e.each(m,function(t,r){e.isFunction(r)||(m[t]=o.oldEncodePostedData(r))});var G=e.extend({url:e.isFunction(c)?c.call(f,m[r],b,m,q):c,type:e.isFunction(q.mtype)?q.mtype.call(f,b,q,m[r],m):q.mtype,data:o.serializeFeedback.call(f,e.isFunction(q.serializeEditData)?q.serializeEditData:g.serializeEditData,"jqGridAddEditSerializeEditData",m),complete:function(t,l){if(h.jqGrid("progressBar",{method:"hide",loadtype:q.saveui}),e("#sData",A).removeClass($),m[r]=e("#id_g",E).val(),t.status>=300&&304!==t.status||0===t.status&&4===t.readyState?(y[0]=!1,y[1]=h.triggerHandler("jqGridAddEditErrorTextFormat",[t,b]),e.isFunction(q.errorTextFormat)?y[1]=q.errorTextFormat.call(f,t,b):y[1]=l+" Status: '"+t.statusText+"'. Error code: "+t.status):(null!=(y=h.triggerHandler("jqGridAddEditAfterSubmit",[t,m,b]))&&!0!==y||(y=v),y[0]&&e.isFunction(q.afterSubmit)&&(null!=(y=q.afterSubmit.call(f,t,m,b))&&!0!==y||(y=v))),!1===y[0])e("#FormError>td",E).html(y[1]),e("#FormError",E).show();else{g.autoEncodeOnEdit&&e.each(m,function(e,t){m[e]=o.oldDecodePostedData(t)});var n=[e.extend({},q.reloadGridOptions||{})];if(m[i]===C.addoper?(y[2]||(y[2]=o.randId()),null==m[r]||"_empty"===m[r]||m[i]===C.addoper?m[r]=y[2]:y[2]=m[r],q.reloadAfterSubmit?h.trigger("reloadGrid",n):!0===g.treeGrid?D.addChildNode.call(h,y[2],s,m):D.addRowData.call(h,y[2],m,q.addedrow),q.closeAfterAdd?(!0!==g.treeGrid&&j.call(h,y[2]),U()):q.clearAfterAdd&&a("_empty",S)):(q.reloadAfterSubmit?(h.trigger("reloadGrid",n),q.closeAfterEdit||setTimeout(function(){j.call(h,m[r])},1e3)):!0===g.treeGrid?D.setTreeRow.call(h,m[r],m):D.setRowData.call(h,m[r],m),q.closeAfterEdit&&U()),e.isFunction(q.afterComplete)){var d=t;setTimeout(function(){h.triggerHandler("jqGridAddEditAfterComplete",[d,m,e(S),b]),q.afterComplete.call(f,d,m,e(S),b),d=null},50)}if((q.checkOnSubmit||q.checkOnUpdate)&&(e(S).data("disabled",!1),"_empty"!==q._savedData[w+"_id"])){var c;for(c in q._savedData)q._savedData.hasOwnProperty(c)&&m[c]&&(q._savedData[c]=m[c])}}q.processing=!1;try{e(S).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()}catch(e){}}},o.ajaxOptions,q.ajaxEditOptions);if(G.url||q.useDataProxy||(e.isFunction(g.dataProxy)?q.useDataProxy=!0:(y[0]=!1,y[1]+=" "+o.errors.nourl)),y[0])if(h.jqGrid("progressBar",{method:"show",loadtype:q.saveui,htmlcontent:q.savetext}),q.useDataProxy){var k=g.dataProxy.call(f,G,"set_"+w);void 0===k&&(k=[!0,""]),!1===k[0]?(y[0]=!1,y[1]=k[1]||"Error deleting the selected row!"):(G.data.oper===C.addoper&&q.closeAfterAdd&&U(),G.data.oper===C.editoper&&q.closeAfterEdit&&U())}else"clientArray"===G.url?(q.reloadAfterSubmit=!1,m=G.data,G.complete({status:200,statusText:""},"")):e.ajax(G)}!1===y[0]&&(e("#FormError>td",E).html(y[1]),e("#FormError",E).show())}function s(e,t){var r,i=!1;for(r in e)if(e.hasOwnProperty(r)&&String(e[r])!==String(t[r])){i=!0;break}return i}function d(){var t=!0;return e("#FormError",E).hide(),q.checkOnUpdate&&(m={},i(),(v=s(m,q._savedData))&&(e(S).data("disabled",!0),e(".confirm",M).show(),t=!1)),t}function u(t,r){var i=r[1].length-1;0===t?e("#pData",A).addClass(J):void 0!==r[1][t-1]&&C(e("#"+c(r[1][t-1])),J)?e("#pData",A).addClass(J):e("#pData",A).removeClass(J),t===i?e("#nData",A).addClass(J):void 0!==r[1][t+1]&&C(e("#"+c(r[1][t+1])),J)?e("#nData",A).addClass(J):e("#nData",A).removeClass(J)}function p(){var t=D.getDataIDs.call(h),r=e("#id_g",E).val();return[e.inArray(r,t),t]}var f=this,h=e(f),g=f.p;if(f.grid&&null!=g&&t){var m,v,b,w=g.id,y=D.getGridRes,j=D.setSelection,q=e.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:R.call(this,"overlay"),removemodal:!0,skipPostTypes:["image","file"],saveui:"enable",savetext:y.call(h,"defaults.savetext")||"Saving..."},y.call(h,"edit"),o.edit,g.formEditing||{},r||{}),S="FrmGrid_"+w,_=S,F="TblGrid_"+w,E="#"+c(F),A=E+"_2",B={themodal:"editmod"+w,modalhead:"edithd"+w,modalcontent:"editcnt"+w,resizeAlso:S},M="#"+c(B.themodal),z=g.gBox,P=g.colModel,L=g.iColByName,V=1,H=0,W=q.commonIconClass,U=function(){o.hideModal(M,{gb:z,jqm:q.jqModal,onClose:q.onClose,removemodal:q.removemodal})},Y=y.call(h,"errors.errcap"),X=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("AddEdit"),t.unshift(q),I.apply(f,t)},Q=O.call(f,"hover"),J=O.call(f,"disabled"),Z=O.call(f,"select"),$=O.call(f,"active"),K=O.call(f,"error");e(M).remove(),S="#"+c(S),"new"===t?(t="_empty",b="add",q.caption=q.addCaption):(q.caption=q.editCaption,b="edit");var ee=!0;!q.checkOnUpdate||!0!==q.jqModal&&void 0!==q.jqModal||q.modal||(ee=!1);var te=isNaN(q.dataheight)?q.dataheight:q.dataheight+"px",re=isNaN(q.datawidth)?q.datawidth:q.datawidth+"px",ie=e("<form name='FormPost' id='"+_+"' class='FormGrid' onSubmit='return false;' style='width:"+re+";overflow:auto;position:relative;height:"+te+";'></form>").data("disabled",!1),ae=e("<table id='"+F+"' class='EditTable'><tbody></tbody></table>");e(P).each(function(){var e=this.formoptions;V=Math.max(V,e?e.colpos||0:0),H=Math.max(H,e?e.rowpos||0:0)}),e(ie).append(ae);var oe=e("<tr id='FormError' style='display:none'><td class='"+K+"' colspan='"+2*V+"'>&#160;</td></tr>");if(oe[0].rp=0,e(ae).append(oe),oe=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*V+"'>"+(q.topinfo||"&#160;")+"</td></tr>"),oe[0].rp=0,e(ae).append(oe),X("beforeInitData",ie,b)){!function(){var r=o.detectRowEditing.call(f,t);if(null!=r)if("inlineEditing"===r.mode)D.restoreRow.call(h,t);else{var i=r.savedRow,a=f.rows[i.id];D.restoreCell.call(h,i.id,i.ic),e(a.cells[i.ic]).removeClass("edit-cell "+Z),e(a).addClass(Z).attr({"aria-selected":"true",tabindex:"0"})}}();var le="rtl"===g.direction,ne=le?"nData":"pData",se=le?"pData":"nData";!function(t,r,i){var a,l=0,n=[],s=!1,d=e(r),u="";for(a=1;a<=i;a++)u+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>";if("_empty"!==t&&(s=D.getInd.call(h,t)),e(P).each(function(r){var a,p,m,v,b,w=this,y=w.name,x=w.editable,C=!1,j=!1,D="_empty"===t?"addForm":"editForm";switch(e.isFunction(x)&&(x=x.call(f,{rowid:t,iCol:r,iRow:s,cmName:y,cm:w,mode:D})),p=!(w.editrules&&!0===w.editrules.edithidden||!0!==w.hidden&&"hidden"!==x),String(x).toLowerCase()){case"hidden":x=!0;break;case"disabled":x=!0,C=!0;break;case"readonly":x=!0,j=!0}if("cb"!==y&&"subgrid"!==y&&!0===x&&"rn"!==y){if(!1===s)v="";else{a=e(f.rows[s].cells[r]);try{v=e.unformat.call(f,a,{rowId:t,colModel:w},r)}catch(e){v=w.edittype&&"textarea"===w.edittype?a.text():a.html()}T(v)&&(v="")}var _=e.extend({},w.editoptions||{},{id:y,name:y,rowId:t,mode:D,cm:w,iCol:r}),I=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},w.formoptions||{}),F=parseInt(I.rowpos,10)||l+1,G=parseInt(2*(parseInt(I.colpos,10)||1),10);if("_empty"===t&&_.defaultValue&&(v=e.isFunction(_.defaultValue)?_.defaultValue.call(f):_.defaultValue),w.edittype||(w.edittype="text"),g.autoEncodeOnEdit&&(v=o.oldDecodePostedData(v)),b=o.createEl.call(f,w.edittype,_,v,!1,e.extend({},o.ajaxOptions,g.ajaxSelectOptions||{})),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[y]=v),e(b).addClass("FormElement"),e.inArray(w.edittype,["text","textarea","checkbox","password","select"])>-1&&e(b).addClass(R.call(f,"dialog.dataField")),m=d.find("tr[data-rowpos="+F+"]"),I.rowabove){var k=e("<tr><td class='contentinfo' colspan='"+2*i+"'>"+I.rowcontent+"</td></tr>");d.append(k),k[0].rp=F}0===m.length&&(m=e("<tr data-rowpos='"+F+"'></tr>").addClass("FormData").attr("id","tr_"+y),e(m).append(u),d.append(m),m[0].rp=F);var O=e("td:eq("+(G-2)+")",m[0]),N=e("td:eq("+(G-1)+")",m[0]);O.html(void 0===I.label?g.colNames[r]:I.label||"&#160;");var E=N[T(N.html())?"html":"append"](I.elmprefix);if(E.append(b).append(I.elmsuffix),"INPUT"===b.tagName.toUpperCase()&&w.createColumnIndex&&_.generateDatalist){var A=h.jqGrid("generateDatalistFromColumnIndex",w.name);null!=A&&A.length>0&&(e(b).attr("list","dl_"+b.id),E.append(A.attr("id","dl_"+b.id)))}C?(O.addClass(J),N.addClass(J),e(b).prop("readonly",!0),e(b).prop("disabled",!0)):j&&e(b).prop("readonly",!0),"custom"===w.edittype&&e.isFunction(_.custom_value)&&_.custom_value.call(f,e("#"+c(y),S),"set",v),o.bindEv.call(f,b,_),p&&O.add(N).css("visibility","hidden"),n[l]=r,l++}}),N(d),l>0){var p=e("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*i-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+w+"_id' value='"+t+"'/></td></tr>");p[0].rp=l+999,d.append(p),(q.checkOnSubmit||q.checkOnUpdate)&&(q._savedData[w+"_id"]=t)}}(t,ae,V);var de=G.call(f,ne,"",x(W,q.prevIcon),"","left"),ce=G.call(f,se,"",x(W,q.nextIcon),"","right"),ue=G.call(f,"sData",q.bSubmit),pe=G.call(f,"cData",q.bCancel),fe="<div class='"+R.call(f,"dialog.footer")+"'><table class='EditTable' id='"+F+"_2'><tbody><tr><td colspan='2'><hr class='"+R.call(f,"dialog.hr")+"' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton navButton-"+g.direction+"'>"+(le?ce+de:de+ce)+"</td><td class='EditButton EditButton-"+g.direction+"'>"+ue+"&#160;"+pe+"</td></tr>";if(fe+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+(q.bottominfo||"&#160;")+"</td></tr>",fe+="</tbody></table></div>",H>0){var he=[];e.each(e(ae)[0].rows,function(e,t){he[e]=t}),he.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(he,function(t,r){e("tbody",ae).append(r)})}q.gbox=z;var ge=!1;!0===q.closeOnEscape&&(q.closeOnEscape=!1,ge=!0);var me=e("<div></div>").append(e("<div class='"+R.call(f,"dialog.body")+"'></div>").append(ie)).append(fe);if(o.createModal.call(f,B,me,q,g.gView,e(z)[0]),q.topinfo&&e(".tinfo",E).show(),q.bottominfo&&e(".binfo",A).show(),me=null,fe=null,e(M).keydown(function(t){var r,i,a=(t.target.tagName||"").toUpperCase();if(!0===e(S).data("disabled"))return!1;if(13===t.which&&"TEXTAREA"!==a){if(r=e(A).find(":focus"),i=r.attr("id"),r.length>0&&e.inArray(i,["pData","nData","cData"])>=0)return r.trigger("click"),!1;if(!0===q.savekey[0]&&13===q.savekey[1])return e("#sData",A).trigger("click"),!1}if(!0===q.savekey[0]&&t.which===q.savekey[1]&&"TEXTAREA"!==a)return e("#sData",A).trigger("click"),!1;if(27===t.which)return!!d()&&(ge&&U(),!1);if(!0===q.navkeys[0]){if("_empty"===e("#id_g",E).val())return!0;if(t.which===q.navkeys[1])return e("#pData",A).trigger("click"),!1;if(t.which===q.navkeys[2])return e("#nData",A).trigger("click"),!1}}),q.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span",M).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close",M).off("click").click(function(){return!!d()&&(U(),!1)})),k(e("#sData",A),q.saveicon,W),k(e("#cData",A),q.closeicon,W),q.checkOnSubmit||q.checkOnUpdate){ue=G.call(f,"sNew",q.bYes),ce=G.call(f,"nNew",q.bNo),pe=G.call(f,"cNew",q.bExit);var ve=q.zIndex||999;ve++,e("<div class='"+q.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ve+";display:none;'>&#160;</div><div class='"+R.call(f,"dialog.content","confirm ui-jqconfirm")+"' style='z-index:"+(ve+1)+"'>"+q.saveData+"<br/><br/>"+ue+ce+pe+"</div>").insertAfter(S),e("#sNew",M).click(function(){return n(),e(S).data("disabled",!1),e(".confirm",M).hide(),!1}),e("#nNew",M).click(function(){return e(".confirm",M).hide(),e(S).data("disabled",!1),setTimeout(function(){e(S).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)").first().focus()},0),!1}),e("#cNew",M).click(function(){return e(".confirm",M).hide(),e(S).data("disabled",!1),U(),!1})}X("onInitializeForm",e(S),b),"_empty"!==t&&q.viewPagerButtons?e("#pData,#nData",A).show():e("#pData,#nData",A).hide(),X("beforeShowForm",e(S),b),e(M).data("onClose",q.onClose),o.viewModal.call(f,M,{gbox:z,jqm:q.jqModal,overlay:q.overlay,modal:q.modal,overlayClass:q.overlayClass,toTop:q.toTop,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),ee||e("."+c(q.overlayClass)).click(function(){return!!d()&&(U(),!1)}),e(".fm-button",M).hover(function(){e(this).addClass(Q)},function(){e(this).removeClass(Q)}),e("#sData",A).click(function(){return m={},e("#FormError",E).hide(),i(),"_empty"===m[w+"_id"]?n():!0===q.checkOnSubmit&&(v=s(m,q._savedData))?(e(S).data("disabled",!0),e(".confirm",M).show()):n(),!1}),e("#cData",A).click(function(){return!!d()&&(U(),!1)}),e("#nData",A).click(function(){if(!d())return!1;e("#FormError",E).hide();var t=p();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(!X("onclickPgButtons","next",e(S),t[1][t[0]]))return!1;a(t[1][t[0]+1],S),j.call(h,t[1][t[0]+1]),X("afterclickPgButtons","next",e(S),t[1][t[0]+1]),u(t[0]+1,t)}return!1}),e("#pData",A).click(function(){if(!d())return!1;e("#FormError",E).hide();var t=p();if(-1!==t[0]&&t[1][t[0]-1]){if(!X("onclickPgButtons","prev",e(S),t[1][t[0]]))return!1;if(C(e("#"+c(t[1][t[0]-1])),J))return!1;a(t[1][t[0]-1],S),j.call(h,t[1][t[0]-1]),X("afterclickPgButtons","prev",e(S),t[1][t[0]-1]),u(t[0]-1,t)}return!1}),X("afterShowForm",e(S),b);var be=p();u(be[0],be)}}})},viewGridRow:function(t,r){return this.each(function(){function i(){!0!==f.closeOnEscape&&!0!==f.navkeys[0]||setTimeout(function(){e("#cData").focus()},0)}function a(t){var r,i,a=0,l=D.getInd.call(d,t,!0);l&&(e("td",l).each(function(t){i=S[t],"cb"!==(r=i.name)&&"subgrid"!==r&&"rn"!==r&&(r=c("v_"+r),e("#"+r+" span",g).html(o.getDataFieldOfCell.call(s,l,t).html()),a++)}),a>0&&e("#id_g",g).val(t))}function l(t,r){var i=r[1].length-1;0===t?e("#pData",m).addClass(M):void 0!==r[1][t-1]&&C(e("#"+c(r[1][t-1])),M)?e("#pData",m).addClass(M):e("#pData",m).removeClass(M),t===i?e("#nData",m).addClass(M):void 0!==r[1][t+1]&&C(e("#"+c(r[1][t+1])),M)?e("#nData",m).addClass(M):e("#nData",m).removeClass(M)}function n(){var t=D.getDataIDs.call(d),r=e("#id_g",g).val();return[e.inArray(r,t),t]}var s=this,d=e(s),u=s.p;if(s.grid&&null!=u&&t){var p=u.id,f=e.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",drag:!0,resize:!0,closeOnEscape:!1,labelswidth:"",navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,removemodal:!0},D.getGridRes.call(d,"view"),o.view||{},u.formViewing||{},r||{}),h="#ViewGrid_"+c(p),g="#ViewTbl_"+c(p),m=g+"_2",v="ViewGrid_"+p,b="ViewTbl_"+p,w=f.commonIconClass,y={themodal:"viewmod"+p,modalhead:"viewhd"+p,modalcontent:"viewcnt"+p,resizeAlso:v},j="#"+c(y.themodal),q=u.gBox,S=u.colModel,_=1,F=0,E=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("View"),t.unshift(f),I.apply(s,t)},A=function(){o.hideModal(j,{gb:q,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})},B=O.call(s,"hover"),M=O.call(s,"disabled"),z=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",P=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",L=e("<div class='"+R.call(s,"dialog.body")+"'><form name='FormPost' id='"+v+"' class='FormGrid' style='width:"+P+";overflow:auto;position:relative;height:"+z+";'></form></div>"),V=L.children("form.FormGrid"),H=e("<table id='"+b+"' class='EditTable'><tbody></tbody></table>");if(e(j).remove(),e(S).each(function(){var e=this.formoptions;_=Math.max(_,e?e.colpos||0:0),F=Math.max(F,e?e.rowpos||0:0)}),V.append(H),E("beforeInitData",V)){!function(t,r,i){var a,l,n,c,p,h,g,m,v=0,b=[],w=D.getInd.call(d,t),y=R.call(s,"dialog.viewData"),x=e(r),C=R.call(s,"dialog.viewLabel"),j=String(f.labelswidth)+(!f.labelswidth||isNaN(f.labelswidth)?"":"px"),q="<td class='"+R.call(s,"dialog.viewCellLabel","CaptionTD form-view-label")+(j?"' style='width:"+j+";":"")+"'>&#160;</td><td class='"+R.call(s,"dialog.viewCellData","DataTD form-view-data")+"'>&#160;</td>",_="",I=["integer","number","currency"],F=0,G=0;for(p=0;p<i;p++)_+=q;if(e(S).each(function(){var t=this;(l=(!t.editrules||!0!==t.editrules.edithidden)&&!0===t.hidden)||"right"!==t.align||(t.formatter&&-1!==e.inArray(t.formatter,I)?F=Math.max(F,parseInt(t.width,10)):G=Math.max(G,parseInt(t.width,10)))}),h=0!==F?F:0!==G?G:0,e(S).each(function(t){var r=this;if(a=r.name,g=!1,l=(!r.editrules||!0!==r.editrules.edithidden)&&!0===r.hidden,m="boolean"!=typeof r.viewable||r.viewable,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&m){c=!1===w?"":o.getDataFieldOfCell.call(s,s.rows[w],t).html(),g="right"===r.align&&0!==h;var d=e.extend({},{rowabove:!1,rowcontent:""},r.formoptions||{}),p=parseInt(d.rowpos,10)||v+1,f=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var j=e("<tr><td class='contentinfo' colspan='"+2*i+"'>"+d.rowcontent+"</td></tr>");x.append(j),j[0].rp=p}0===(n=x.find("tr[data-rowpos="+p+"]")).length&&((n=e("<tr data-rowpos='"+p+"'></tr>").addClass("FormData").attr("id","trv_"+a)).append(_),x.append(n),n[0].rp=p);var D=void 0===d.label?u.colNames[t]:d.label,q=e("td:eq("+(f-1)+")",n[0]),R=e("td:eq("+(f-2)+")",n[0]);R.html("<label for='"+a+"'"+(C?" class='"+C+"'>":">")+(D||"&nbsp;")+"</label>"),q[T(q.html())?"html":"append"]("<span id='"+a+"'"+(y?" class='"+y+"'>":">")+(c||"&nbsp;")+"</span>").attr("id","v_"+a),g&&e("td:eq("+(f-1)+") span",n[0]).css({"text-align":"right",width:h+"px"}),l&&R.add(q).css("visibility","hidden"),b[v]=t,v++}}),N(x),v>0){var k=e("<tr class='FormData' style='display:none'><td class='CaptionTD'>&#160;</td><td colspan='"+(2*i-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");k[0].rp=v+99,x.append(k)}}(t,H,_);var W="rtl"===u.direction,U=W?"nData":"pData",Y=W?"pData":"nData",X=G.call(s,U,"",x(w,f.prevIcon),"","left"),Q=G.call(s,Y,"",x(w,f.nextIcon),"","right"),J=G.call(s,"cData",f.bClose);if(F>0){var Z=[];e.each(e(H)[0].rows,function(e,t){Z[e]=t}),Z.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(Z,function(t,r){e("tbody",H).append(r)})}f.gbox=q;var $=e("<div></div>").append(L).append("<div class='"+R.call(s,"dialog.footer")+"'><table border='0' class='EditTable' id='"+b+"_2'><tbody><tr id='Act_Buttons'><td class='navButton navButton-"+u.direction+"' width='"+(f.labelswidth||"auto")+"'>"+(W?Q+X:X+Q)+"</td><td class='EditButton EditButton-"+u.direction+"'>"+J+"</td></tr></tbody></table></div>");o.createModal.call(s,y,$,f,u.gView,e(u.gView)[0]),f.viewPagerButtons||e("#pData, #nData",m).hide(),$=null,e(j).keydown(function(t){var r,i;if(!0===e(h).data("disabled"))return!1;if(13===t.which&&(r=e(m).find(":focus"),i=r.attr("id"),r.length>0&&e.inArray(i,["pData","nData","cData"])>=0))return r.trigger("click"),!1;if(27===t.which)return f.closeOnEscape&&A(),!1;if(!0===f.navkeys[0]){if(t.which===f.navkeys[1])return e("#pData",m).trigger("click"),!1;if(t.which===f.navkeys[2])return e("#nData",m).trigger("click"),!1}}),k(e("#cData",m),f.closeicon,w),E("beforeShowForm",e(h)),o.viewModal.call(s,j,{gbox:q,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal,onHide:function(e){e.w.remove(),e.o&&e.o.remove()}}),e(".fm-button:not(."+M.split(" ").join(".")+")",m).hover(function(){e(this).addClass(B)},function(){e(this).removeClass(B)}),i(),e("#cData",m).click(function(){return A(),!1}),e("#nData",m).click(function(){e("#FormError",g).hide();var t=n();if(t[0]=parseInt(t[0],10),-1!==t[0]&&t[1][t[0]+1]){if(!E("onclickPgButtons","next",e(h),t[1][t[0]]))return!1;a(t[1][t[0]+1]),D.setSelection.call(d,t[1][t[0]+1]),E("afterclickPgButtons","next",e(h),t[1][t[0]+1]),l(t[0]+1,t)}return i(),!1}),e("#pData",m).click(function(){e("#FormError",g).hide();var t=n();if(-1!==t[0]&&t[1][t[0]-1]){if(!E("onclickPgButtons","prev",e(h),t[1][t[0]]))return!1;a(t[1][t[0]-1]),D.setSelection.call(d,t[1][t[0]-1]),E("afterclickPgButtons","prev",e(h),t[1][t[0]-1]),l(t[0]-1,t)}return i(),!1});var K=n();l(K[0],K)}}})},delGridRow:function(t,r){return this.each(function(){var i=this,a=i.p,l=e(i);if(i.grid&&null!=a&&t){var n,s,d,u,p=a.id,f=e.extend(!0,{top:0,left:0,width:240,removemodal:!0,height:"auto",dataheight:"auto",datawidth:"auto",drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,closeOnEscape:!1,delData:{},onClose:null,ajaxDelOptions:{},processing:!0,serializeDelData:null,useDataProxy:!1},D.getGridRes.call(l,"del"),o.del||{},a.formDeleting||{},r||{}),h="DelTbl_"+p,g="#DelTbl_"+c(p),m={themodal:"delmod"+p,modalhead:"delhd"+p,modalcontent:"delcnt"+p,resizeAlso:h},v="#"+c(m.themodal),b=a.gBox,w=f.commonIconClass,y=function(){var t=e.makeArray(arguments);return t.unshift(""),t.unshift("Delete"),t.unshift(f),I.apply(i,t)},x=O.call(i,"hover"),C=O.call(i,"active"),j=O.call(i,"error");if(e.isArray(t)||(t=[String(t)]),void 0!==e(v)[0]){if(!y("beforeInitData",e(g)))return;e("#DelData>td",g).text(t.join()).data("rowids",t),e("#DelError",g).hide(),!0===f.processing&&(f.processing=!1,e("#dData",g).removeClass(C)),y("beforeShowForm",e(g)),o.viewModal.call(i,v,{gbox:b,jqm:f.jqModal,jqM:!1,overlay:f.overlay,toTop:f.toTop,modal:f.modal}),y("afterShowForm",e(g))}else{var q=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px",S=isNaN(f.datawidth)?f.datawidth:f.datawidth+"px",_="<div class='"+R.call(i,"dialog.body")+"'><div id='"+h+"' class='formdata' style='width:"+S+";overflow:auto;position:relative;height:"+q+";'>";_+="<table class='DelTable'><tbody>",_+="<tr id='DelError' style='display:none'><td class='"+j+"'></td></tr>",_+="<tr id='DelData' style='display:none'><td >"+t.join()+"</td></tr>",_+="<tr><td class='delmsg'>"+f.msg+"</td></tr>",_+="</tbody></table></div></div>";var F=G.call(i,"dData",f.bSubmit),N=G.call(i,"eData",f.bCancel);if(_+="<div class='"+R.call(i,"dialog.footer")+"'><table class='EditTable' id='"+h+"_2'><tbody><tr><td><hr class='"+R.call(i,"dialog.hr")+"' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton EditButton-"+a.direction+"'>"+F+"&#160;"+N+"</td></tr></tbody></table></div>",f.gbox=b,o.createModal.call(i,m,_,f,a.gView,e(a.gView)[0]),e("#DelData>td",g).data("rowids",t),!y("beforeInitData",e(_)))return;e(".fm-button",g+"_2").hover(function(){e(this).addClass(x)},function(){e(this).removeClass(x)}),k(e("#dData",g+"_2"),f.delicon,w),k(e("#eData",g+"_2"),f.cancelicon,w),e("#dData",g+"_2").click(function(){var t,r=[!0,""],c=e("#DelData>td",g),h=c.text(),m=c.data("rowids"),w={};if(e.isFunction(f.onclickSubmit)&&(w=f.onclickSubmit.call(i,f,h)||{}),e.isFunction(f.beforeSubmit)&&(r=f.beforeSubmit.call(i,h)||r),r[0]&&!f.processing){if(f.processing=!0,d=a.prmNames,n=e.extend({},f.delData,w),u=d.oper,n[u]=d.deloper,s=d.id,!(h=m.slice()).length)return!1;for(t in h)h.hasOwnProperty(t)&&(h[t]=o.stripPref(a.idPrefix,h[t]));n[s]=h.join(),e(this).addClass(C);var x=f.url||a.editurl,j=e.extend({url:e.isFunction(x)?x.call(i,n[s],n,f):x,type:f.mtype,data:e.isFunction(f.serializeDelData)?f.serializeDelData.call(i,n):n,complete:function(t,s){var d;if(e("#dData",g+"_2").removeClass(C),t.status>=300&&304!==t.status||0===t.status&&4===t.readyState?(r[0]=!1,e.isFunction(f.errorTextFormat)?r[1]=f.errorTextFormat.call(i,t):r[1]=s+" Status: '"+t.statusText+"'. Error code: "+t.status):e.isFunction(f.afterSubmit)&&(r=f.afterSubmit.call(i,t,n)||[!0]),!1===r[0])e("#DelError>td",g).html(r[1]),e("#DelError",g).show();else{if("local"===a.datatype||!0===a.treeGrid||!f.reloadAfterSubmit)if(!0===a.treeGrid)try{D.delTreeNode.call(l,m[0])}catch(e){}else for(m=m.slice(),d=0;d<m.length;d++)D.delRowData.call(l,m[d]);f.reloadAfterSubmit&&l.trigger("reloadGrid",[e.extend({},f.reloadGridOptions||{})]),setTimeout(function(){y("afterComplete",t,h,e(g))},50)}f.processing=!1,r[0]&&o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})}},o.ajaxOptions,f.ajaxDelOptions);if(j.url||f.useDataProxy||(e.isFunction(a.dataProxy)?f.useDataProxy=!0:(r[0]=!1,r[1]+=" "+o.errors.nourl)),r[0])if(f.useDataProxy){var q=a.dataProxy.call(i,j,"del_"+p);void 0===q&&(q=[!0,""]),!1===q[0]?(r[0]=!1,r[1]=q[1]||"Error deleting the selected row!"):o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal})}else"clientArray"===j.url?(n=j.data,j.complete({status:200,statusText:""},"")):e.ajax(j)}return!1===r[0]&&(e("#DelError>td",g).html(r[1]),e("#DelError",g).show()),!1}),e("#eData",g+"_2").click(function(){return o.hideModal(v,{gb:b,jqm:f.jqModal,onClose:f.onClose,removemodal:f.removemodal}),!1}),y("beforeShowForm",e(g)),o.viewModal.call(i,v,{gbox:b,jqm:f.jqModal,overlay:f.overlay,toTop:f.toTop,modal:f.modal}),y("afterShowForm",e(g))}!0===f.closeOnEscape&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+c(m.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(r,i,a,l,n,s,d){return"object"==typeof r&&(d=s,s=n,n=l,l=a,a=i,i=r,r=void 0),l=l||{},a=a||{},d=d||{},n=n||{},s=s||{},this.each(function(){var u=this,p=u.p,f=e(u);if(u.grid&&null!=p&&!(u.nav&&e(r).find(".navtable").length>0)){var h=p.id,g=e.extend({edit:!0,add:!0,del:!0,search:!0,refresh:!0,refreshstate:"firstpage",view:!1,closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,hideEmptyPagerParts:!0,alertwidth:200,alertheight:"auto",alerttop:null,removemodal:!0,alertleft:null,alertzIndex:null,iconsOverText:!1},D.getGridRes.call(f,"nav"),o.nav||{},p.navOptions||{},i||{});g.position=g.position||("rtl"===p.direction?"right":"left");var m,v,b,w=p.idSel,y=p.gBox,j=g.commonIconClass,q={themodal:"alertmod_"+h,modalhead:"alerthd_"+h,modalcontent:"alertcnt_"+h},S=function(){var r=t.documentElement,i=window,a=1024,l=768,n=f.closest(".ui-jqgrid").offset();void 0===e("#"+c(q.themodal))[0]&&(g.alerttop||g.alertleft||(void 0!==i.innerWidth?(a=i.innerWidth,l=i.innerHeight):null!=r&&void 0!==r.clientWidth&&0!==r.clientWidth&&(a=r.clientWidth,l=r.clientHeight),a=a/2-parseInt(g.alertwidth,10)/2-n.left,l=l/2-25-n.top),o.createModal.call(u,q,"<div class='"+R.call(u,"dialog.body")+"'><div>"+g.alerttext+"</div></div>",{gbox:y,jqModal:g.jqModal,drag:!0,resize:!0,caption:g.alertcap,top:null!=g.alerttop?g.alerttop:l,left:null!=g.alertleft?g.alertleft:a,width:g.alertwidth,height:g.alertheight,closeOnEscape:g.closeOnEscape,zIndex:g.alertzIndex,removemodal:g.removemodal},p.gView,e(y)[0],!1)),o.viewModal.call(u,"#"+c(q.themodal),{gbox:y,toTop:g.alertToTop,jqm:g.jqModal});var s=e("#"+c(q.modalhead)).find(".ui-jqdialog-titlebar-close");s.attr({tabindex:"0",href:"#",role:"button"}),setTimeout(function(){s.focus()},50)},_=O.call(u,"hover"),I=O.call(u,"disabled"),F=R.call(u,"navButton","ui-pg-button");if(u.grid){u.modalAlert=S,void 0===r&&(p.pager?(r=p.pager,p.toppager&&(g.cloneToTop=!0)):p.toppager&&(r=p.toppager));var G,k,N,T,E,A,B,M=1,z=["left","center","right"],P="<div class='"+R.call(u,"navButton","ui-pg-button "+O.call(u,"disabled"))+"'><span class='ui-separator'></span></div>",L=function(){C(this,I)||e(this).addClass(_)},V=function(){e(this).removeClass(_)},H=function(t,r,i){if(!C(this,I)){var a=p.selrow;a?e.isFunction(t)?t.call(u,a,i):D[r].call(f,a,i):S()}return!1},W=function(t,r,i){var a=e("<div class='"+F+"' tabindex='0' role='button'></div>"),o=g[t+"icon"],l=e.trim(g[t+"text"]);return a.append("<div class='ui-pg-div'><span class='"+(g.iconsOverText?x("ui-pg-button-icon-over-text",j,o):x(j,o))+"'></span>"+(l?"<span class='ui-pg-button-text"+(g.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l+"</span>":"")+"</div>"),e(b).append(a),a.attr({title:g[t+"title"]||"",id:r||t+"_"+T}).click(i).hover(L,V),a};for(g.cloneToTop&&p.toppager&&(M=2),G=0;G<M;G++){if(b=e("<div class='ui-pg-table navtable' role='toolbar' style='float:"+("rtl"===p.direction?"right":"left")+";table-layout:auto;'></div>"),0===G?(T=h,(N=r)===p.toppager&&(T+="_top",M=1)):(N=p.toppager,T=h+"_top"),g.add&&W("add",l.id,function(){return C(this,I)||(e.isFunction(g.addfunc)?g.addfunc.call(u,l):D.editGridRow.call(f,"new",l)),!1}),g.edit&&W("edit",a.id,function(){return H.call(this,g.editfunc,"editGridRow",a)}),g.view&&W("view",d.id,function(){return H.call(this,g.viewfunc,"viewGridRow",d)}),g.del&&W("del",n.id,function(){var t;return C(this,I)||(p.multiselect?0===(t=p.selarrrow).length&&(t=null):t=p.selrow,t?e.isFunction(g.delfunc)?g.delfunc.call(u,t,n):D.delGridRow.call(f,t,n):S()),!1}),(g.add||g.edit||g.del||g.view)&&e(b).append(P),g.search&&(k=W("search",s.id,function(){return C(this,I)||(e.isFunction(g.searchfunc)?g.searchfunc.call(u,s):D.searchGrid.call(f,s)),!1}),s.showOnLoad&&!0===s.showOnLoad&&e(k,b).click()),g.refresh&&W("refresh","",function(){if(!C(this,I)){e.isFunction(g.beforeRefresh)&&g.beforeRefresh.call(u),p.search=!1,p.resetsearch=!0;try{if("currentfilter"!==g.refreshstate){p.postData.filters="";try{e("#fbox_"+w).jqFilter("resetFilter")}catch(e){}e.isFunction(u.clearToolbar)&&u.clearToolbar(!1)}}catch(e){}switch(g.refreshstate){case"firstpage":f.trigger("reloadGrid",[e.extend({},g.reloadGridOptions||{},{page:1})]);break;case"current":case"currentfilter":f.trigger("reloadGrid",[e.extend({},g.reloadGridOptions||{},{current:!0})])}e.isFunction(g.afterRefresh)&&g.afterRefresh.call(u)}return!1}),v=e(".ui-jqgrid>.ui-jqgrid-view").css("font-size")||"11px",e("body").append("<div id='testpg2' class='"+R.call(u,"gBox","ui-jqgrid")+"' style='font-size:"+v+";visibility:hidden;' ></div>"),m=e(b).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(N+"_"+g.position,N).append(b),g.hideEmptyPagerParts)for(E=0;E<z.length;E++)z[E]!==g.position&&(0===(B=e(N+"_"+z[E],N)).length||0===B[0].childNodes.length?B.hide():1===B[0].childNodes.length&&(A=B[0].firstChild,!e(A).is("table.ui-pg-table")||0!==A.rows&&0!==A.rows[0].cells.length||B.hide()));p._nvtd&&(m>p._nvtd[0]&&(e(N+"_"+g.position,N).width(m),p._nvtd[0]=m),p._nvtd[1]=m),u.nav=!0,b.on("keydown.jqGrid",function(t){var r;if(13===t.which&&(r=e(this).find(".ui-pg-button").filter(":focus")).length>0){var i=r[0].id,a=i.substr(0,e(this).closest(".ui-jqgrid-toppager").length>0?i.length-h.length-5:i.length-h.length-1)+"mod"+p.id,o=e(".ui-jqdialog").filter(":visible").map(function(){return this.id});if(e.inArray(a,o)<0)return r.trigger("click"),!1}})}f.triggerHandler("jqGridResetFrozenHeights")}}})},navButtonAdd:function(t,r){return"object"==typeof t&&(r=t,t=void 0),this.each(function(){var i=this,a=i.p;if(i.grid){var l=e.extend({caption:"newButton",title:"",onClickButton:null,position:"last",iconsOverText:!1},D.getGridRes.call(e(i),"nav"),o.nav||{},a.navOptions||{},r||{}),n=l.id,s=O.call(i,"hover"),d=O.call(i,"disabled"),u=R.call(i,"navButton","ui-pg-button");if(void 0===t)if(a.pager){if(D.navButtonAdd.call(e(i),a.pager,l),!a.toppager)return;t=a.toppager,n&&(n+="_top")}else a.toppager&&(t=a.toppager);"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+c(t));var p=e(".navtable",t),f=l.commonIconClass;if(p.length>0){if(n&&p.find("#"+c(n)).length>0)return;var h=e("<div tabindex='0' role='button'></div>");"NONE"===l.buttonicon.toString().toUpperCase()?e(h).addClass(u).append("<div class='ui-pg-div'>"+(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>"):e(h).addClass(u).append("<div class='ui-pg-div'><span class='"+(l.iconsOverText?x("ui-pg-button-icon-over-text",f,l.buttonicon):x(f,l.buttonicon))+"'></span>"+(l.caption?"<span class='ui-pg-button-text"+(l.iconsOverText?" ui-pg-button-icon-over-text":"")+"'>"+l.caption+"</span>":"")+"</div>"),n&&e(h).attr("id",n),"first"===l.position&&p.children("div.ui-pg-button").length>0?p.children("div.ui-pg-button").first().before(h):p.append(h),e(h,p).attr("title",l.title||"").click(function(t){return C(this,d)||e.isFunction(l.onClickButton)&&l.onClickButton.call(i,l,t),!1}).hover(function(){C(this,d)||e(this).addClass(s)},function(){e(this).removeClass(s)}),e(i).triggerHandler("jqGridResetFrozenHeights")}}})},navSeparatorAdd:function(t,r){return r=e.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},r||{}),this.each(function(){if(this.grid){var i=this,a=i.p,o=R.call(i,"navButton","ui-pg-button "+O.call(i,"disabled"));if(void 0===t)if(a.pager){if(D.navSeparatorAdd.call(e(i),a.pager,r),!a.toppager)return;t=a.toppager}else a.toppager&&(t=a.toppager);"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+c(t));var l=e(".navtable",t);if(l.length>0){var n="<div class='"+o+"'><span class='"+r.sepclass+"'></span>"+r.sepcontent+"</div>";"first"===r.position?0===l.children("div.ui-pg-button").length?l.append(n):l.children("div.ui-pg-button").first().before(n):l.append(n)}}})},GridToForm:function(t,r){return this.each(function(){var i,a,o,l,n=this;if(n.grid){var s=D.getRowData.call(e(n),t);if(s)for(i in s)if(s.hasOwnProperty(i))if((a=e("[name="+c(i)+"]",r)).is("input:radio")||a.is("input:checkbox"))for(o=0;o<a.length;o++)(l=e(a[o])).prop("checked",l.val()===String(s[i]));else a.val(T(s[i])?"":s[i])}})},FormToGrid:function(t,r,i,a){return this.each(function(){var o=this;if(o.grid){i||(i="set"),a||(a="first");var l=e(r).serializeArray(),n={};e.each(l,function(e,t){n[t.name]=t.value}),"add"===i?D.addRowData.call(e(o),t,n,a):"set"===i&&D.setRowData.call(e(o),t,n)}})}}),o.extend({groupingSetup:function(){return this.each(function(){var t,r,i,a,l,n=this,s=n.p,d=s.colModel,c=s.groupingView;if(null===c||"object"!=typeof c&&!e.isFunction(c))s.grouping=!1;else if(c.groupField.length){for(void 0===c.visibiltyOnNextGrouping&&(c.visibiltyOnNextGrouping=[]),c.lastvalues=[],c._locgr||(c.groups=[]),c.counters=[],t=0;t<c.groupField.length;t++)c.groupOrder[t]||(c.groupOrder[t]="asc"),c.groupText[t]||(c.groupText[t]="{0}"),"boolean"!=typeof c.groupColumnShow[t]&&(c.groupColumnShow[t]=!0),"boolean"!=typeof c.groupSummary[t]&&(c.groupSummary[t]=!1),c.groupSummaryPos[t]||(c.groupSummaryPos[t]="footer"),a=d[s.iColByName[c.groupField[t]]],!0===c.groupColumnShow[t]?(c.visibiltyOnNextGrouping[t]=!0,null!=a&&!0===a.hidden&&D.showCol.call(e(n),c.groupField[t])):(c.visibiltyOnNextGrouping[t]=e("#"+o.jqID(s.id+"_"+c.groupField[t])).is(":visible"),null!=a&&!0!==a.hidden&&D.hideCol.call(e(n),c.groupField[t]));for(c.summary=[],c.hideFirstGroupCol&&(c.formatDisplayField[0]=function(e){return e}),r=0,i=d.length;r<i;r++)a=d[r],c.hideFirstGroupCol&&(a.hidden||c.groupField[0]!==a.name||(a.formatter=function(){return""})),a.summaryType&&(l={nm:a.name,st:a.summaryType,v:"",sr:a.summaryRound,srt:a.summaryRoundType||"round"},a.summaryDivider&&(l.sd=a.summaryDivider,l.vd=""),c.summary.push(l))}else s.grouping=!1})},groupingPrepare:function(t,r){return this.each(function(){var i,a,o,l,n,s,d,c,u,p=this,f=p.p,h=f.groupingView,g=h.groups,m=h.counters,v=h.lastvalues,b=h.isInTheSameGroup,w=h.groupField.length,y=!1,x=D.groupingCalculations.handler,C=function(t,r){if(null==t&&h.useDefaultValuesOnGrouping){var i,a=void 0!==f.iColByName[r]?f.colModel[f.iColByName[r]]:f.additionalProperties[f.iPropByName[r]];null!=a&&null!=a.formatter&&(null!=a.formatoptions&&void 0!==a.formatoptions.defaultValue?t=a.formatoptions.defaultValue:"string"==typeof a.formatter&&void 0!==(i=e(p).jqGrid("getGridRes","formatter."+a.formatter+".defaultValue"))&&(t=i))}return t};for(i=0;i<w;i++)if(s=h.groupField[i],d=C(t[s],s),c=h.displayField[i],null==(u=null==c?null:C(t[c],c))&&(u=d),void 0!==d){for(o=[],a=0;a<=i;a++)o.push(t[h.groupField[a]]);for(l={idx:i,dataIndex:s,value:d,displayValue:u,startRow:r,cnt:1,keys:o,summary:[]},n={cnt:1,pos:g.length,summary:e.extend(!0,[],h.summary)},0===r?(g.push(l),v[i]=d,m[i]=n):"object"==typeof d||(e.isArray(b)&&e.isFunction(b[i])?b[i].call(p,v[i],d,i,h):v[i]===d)?y?(g.push(l),v[i]=d,m[i]=n):((n=m[i]).cnt+=1,g[n.pos].cnt=n.cnt):(g.push(l),v[i]=d,y=!0,m[i]=n),g[n.pos].summary=function(){var r,i,a;for(r=0;r<n.summary.length;r++)i=n.summary[r],a=e.isArray(i.st)?i.st[l.idx]:i.st,e.isFunction(a)?i.v=a.call(p,i.v,i.nm,t,l):(i.v=x.call(e(p),a,i.v,i.nm,i.sr,i.srt,t),"avg"===a.toLowerCase()&&i.sd&&(i.vd=x.call(e(p),a,i.vd,i.sd,i.sr,i.srt,t)));return n.summary}(),a=n.pos-1;a>=0;a--)if(g[a].idx<g[n.pos].idx){g[n.pos].parentGroupIndex=a,g[n.pos].parentGroup=g[a];break}}}),this},getGroupHeaderIndex:function(t,r){var i=this[0].p,a=r?e(r).closest("tr.jqgroup"):e("#"+o.jqID(t)),l=parseInt(a.data("jqgrouplevel"),10),n=i.id+"ghead_"+l+"_";return isNaN(l)||!a.hasClass("jqgroup")||t.length<=n.length?-1:parseInt(t.substring(n.length),10)},avJqGridGroupingToggle:function(){e(".avGridrowExpandAndCollapse").click(function(){jQuery("#"+this.dataset.gridid).jqGrid("groupingToggle",this.dataset.rowid,this)})},groupingToggle:function(t,r){return this.each(function(){var i,a,l,n=this,s=n.p,d=s.groupingView,c=d.minusicon,u=d.plusicon,p=r?e(r).closest("tr.jqgroup"):e("#"+o.jqID(t)),f=function(e){return e.find(">td>span.tree-wrap")},h=!0,g=!1,m=[],v=function(e){var t,r=e.length;for(t=0;t<r;t++)m.push(e[t])},b=parseInt(p.data("jqgrouplevel"),10);for(s.frozenColumns&&p.length>0&&(a=p[0].rowIndex,p=(p=e(n.rows[a])).add(n.grid.fbRows[a])),l=f(p),o.hasAllClasses(l,c)?(l.removeClass(c).addClass(u),g=!0):l.removeClass(u).addClass(c),p=p.next();p.length;p=p.next())if(p.hasClass("jqfoot")){if(i=parseInt(p.data("jqfootlevel"),10),g){if(i=parseInt(p.data("jqfootlevel"),10),(!d.showSummaryOnHide&&i===b||i>b)&&v(p),i<b)break}else if((i===b||d.showSummaryOnHide&&i===b+1)&&v(p),i<=b)break}else if(p.hasClass("jqgroup"))if(i=parseInt(p.data("jqgrouplevel"),10),g){if(i<=b)break;v(p)}else{if(i<=b)break;i===b+1&&(f(p).removeClass(c).addClass(u),v(p)),h=!1}else(g||h)&&v(p);e(m).css("display",g?"none":""),s.frozenColumns&&e(n).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:a,iRowEnd:p.length?p[0].rowIndex-1:-1}}}]),n.fixScrollOffsetAndhBoxPadding(),e(n).triggerHandler("jqGridGroupingClickGroup",[t,g]),e.isFunction(s.onClickGroup)&&s.onClickGroup.call(n,t,g)}),!1},groupingRender:function(t,r){function i(t,r,i,a,s){var d,u,p,m,v,b,w,y,x,C,j,D,q,R=f[t],S="",_=0,I=!0;if(0!==r&&0!==f[t].idx)for(d=t;d>=0;d--)if(f[d].idx===f[t].idx-r){R=f[d];break}for(u=R.cnt,j=void 0===s?a:0;j<g;j++){for(p="&#160;",C=h[j],y=0;y<R.summary.length;y++)if(x=R.summary[y],D=e.isArray(x.st)?x.st[i.idx]:x.st,q=e.isArray(C.summaryTpl)?C.summaryTpl[i.idx]:C.summaryTpl||"{0}",x.nm===C.name){"string"==typeof D&&"avg"===D.toLowerCase()&&(x.sd&&x.vd?x.v=x.v/x.vd:x.v&&u>0&&(x.v=x.v/u));try{x.groupCount=R.cnt,x.groupIndex=R.dataIndex,x.groupValue=R.value,b=l.formatter("",x.v,j,x)}catch(e){b=x.v}p=o.format(q,b),C.summaryFormat&&(p=C.summaryFormat.call(l,i,p,b,C,x));break}m=!1,v=!1,void 0!==s&&I&&(C.hidden||(p=s,I=!1,a>1&&(m=!0,_=a-1),v=C.align,C.align="rtl"===n.direction?"right":"left",c.iconColumnName=C.name)),w=!1,_>0&&!C.hidden&&"&#160;"===p?(w=!0,v&&(C.align=v),_--):(S+="<td role='gridcell' "+l.formatCol(j,1,"")+(m?"colspan='"+a+"'":"")+">"+p+"</td>",m=!1,v&&(C.align=v),w&&(C.hidden=!1,_--))}return S}var a="",l=this[0],n=l.p,s=0,d=[],c=n.groupingView,u=e.makeArray(c.groupSummary),p=c.groupField.length,f=c.groups,h=n.colModel,g=h.length,m=n.page,v="jqGridShowHideCol.groupingRender",b=function(e){return D.getGuiStyles.call(l,"gridRow",e)},w=b("jqgroup ui-row-"+n.direction),y=b("jqfoot ui-row-"+n.direction);return e.each(h,function(e,t){var r;for(r=0;r<p;r++)if(c.groupField[r]===t.name){d[r]=e;break}}),u.reverse(),e.each(f,function(v,b){var x,C,j,D,q,R,S,_,I=n.id+"ghead_"+b.idx,F=I+"_"+v,G=e.isFunction(c.groupCollapse)?c.groupCollapse.call(l,{group:b,rowid:F}):c.groupCollapse,k=1,O=0,N=p-1===b.idx,T=null!=b.parentGroup&&b.parentGroup.collapsed,E="<span style='cursor:pointer;margin-"+("rtl"===n.direction?"right:":"left:")+12*b.idx+"px;' class='"+c.commonIconClass+" "+(G?c.plusicon:c.minusicon)+" tree-wrap avGridrowExpandAndCollapse' data-gridId='"+e.jgrid.jqID(l.p.id)+"' data-rowId='"+F+"'></span>";if(c._locgr&&!(b.startRow+b.cnt>(m-1)*r&&b.startRow<m*r))return!0;T&&(G=!0),void 0!==G&&(b.collapsed=G),s++;try{e.isArray(c.formatDisplayField)&&e.isFunction(c.formatDisplayField[b.idx])?(b.displayValue=c.formatDisplayField[b.idx].call(l,b.displayValue,b.value,h[d[b.idx]],b.idx,c),x=b.displayValue):x=l.formatter(F,b.displayValue,d[b.idx],b.value)}catch(e){x=b.displayValue}if(a+="<tr id='"+F+"' data-jqgrouplevel='"+b.idx+"' "+(G&&T?"style='display:none;' ":"")+"role='row' class='"+w+" "+I+"'>","string"!=typeof(_=e.isFunction(c.groupText[b.idx])?c.groupText[b.idx].call(l,x,b.cnt,b.summary):o.template(c.groupText[b.idx],x,b.cnt,b.summary))&&"number"!=typeof _&&(_=x),"header"===c.groupSummaryPos[b.idx]?(k=1,"cb"!==h[0].name&&"cb"!==h[1].name||k++,"subgrid"!==h[0].name&&"subgrid"!==h[1].name||k++,a+=i(v,0,b,k,E+"<span class='cell-wrapper'>"+_+"</span>")):a+="<td role='gridcell' style='padding-left:"+12*b.idx+"px;' colspan='"+g+"'>"+E+_+"</td>",a+="</tr>",N){for(R=f[v+1],q=b.startRow,S=void 0!==R?R.startRow:f[v].startRow+f[v].cnt,c._locgr&&(O=(m-1)*r)>b.startRow&&(q=O),j=q;j<S&&t[j-O];j++)a+=t[j-O].join("");if("header"!==c.groupSummaryPos[b.idx]){if(void 0!==R){for(C=0;C<c.groupField.length&&R.dataIndex!==c.groupField[C];C++);s=c.groupField.length-C}for(D=0;D<s;D++)u[D]&&(a+="<tr data-jqfootlevel='"+(b.idx-D)+(G&&(b.idx-D>0||!c.showSummaryOnHide)?"' style='display:none;'":"'")+" role='row' class='"+y+"'>",a+=i(v,D,f[b.idx-D],0),a+="</tr>");s=C}}}),this.off(v).on(v,function(){var t,r,i,a,o=n.iColByName[c.iconColumnName];if(e.inArray("header",c.groupSummaryPos)>=0){for(a=0;a<h.length;a++)if(!h[a].hidden){i=a;break}if(void 0===i||o===i)return;for(t=0;t<l.rows.length;t++)r=l.rows[t],e(r).hasClass("jqgroup")&&(e(r.cells[i]).html(r.cells[o].innerHTML),e(r.cells[o]).html("&nbsp;"));c.iconColumnName=h[i].name}}),a},groupingGroupBy:function(t,r){return this.each(function(){var i,a,l=this,n=l.p,s=n.groupingView;for("string"==typeof t&&(t=[t]),n.grouping=!0,s._locgr=!1,void 0===s.visibiltyOnNextGrouping&&(s.visibiltyOnNextGrouping=[]),i=0;i<s.groupField.length;i++)a=n.colModel[n.iColByName[s.groupField[i]]],!s.groupColumnShow[i]&&s.visibiltyOnNextGrouping[i]&&null!=a&&!0===a.hidden&&D.showCol.call(e(l),s.groupField[i]);for(i=0;i<t.length;i++)s.visibiltyOnNextGrouping[i]=e(n.idSel+"_"+o.jqID(t[i])).is(":visible");n.groupingView=e.extend(n.groupingView,r||{}),s.groupField=t,e(l).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var r,i=this,a=i.p,o=i.tBodies[0],l=a.groupingView;if(void 0===t&&(t=!0),a.grouping=!1,!0===t){for(r=0;r<l.groupField.length;r++)!l.groupColumnShow[r]&&l.visibiltyOnNextGrouping[r]&&D.showCol.call(e(i),l.groupField);e("tr.jqgroup, tr.jqfoot",o).remove(),e("tr.jqgrow",o).filter(":hidden").show()}else e(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,r,i,a,o){var l,n,s={sum:function(){return parseFloat(t||0)+parseFloat(o[r]||0)},min:function(){return""===t?parseFloat(o[r]||0):Math.min(parseFloat(t),parseFloat(o[r]||0))},max:function(){return""===t?parseFloat(o[r]||0):Math.max(parseFloat(t),parseFloat(o[r]||0))},count:function(){return""===t&&(t=0),o.hasOwnProperty(r)?t+1:0},avg:function(){return s.sum()}};if(!s[e])throw"jqGrid Grouping No such method: "+e;return l=s[e](),null!=i&&("fixed"===a?l=l.toFixed(i):(n=Math.pow(10,i),l=Math.round(l*n)/n)),l}}}),e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var r,i=this,a=function(t,r){var a,l,n,s,d=e(r.xmlGrid.config,t)[0],c=e(r.xmlGrid.data,t)[0];if(_.xml2json){a=_.xml2json(d," "),a=e.parseJSON(a);for(n in a)a.hasOwnProperty(n)&&(l=a[n]);void 0!==l&&(c?(s=a.grid.datatype,a.grid.datatype="xmlstring",a.grid.datastr=t,e(i).jqGrid(l).jqGrid("setGridParam",{datatype:s})):e(i).jqGrid(l))}else(null!=o.defaults&&e.isFunction(o.defaults.fatalError)?o.defaults.fatalError:alert)("xml2json or parse are not present")},l=function(t,r){if(t&&"string"==typeof t){var a,o=e.parseJSON(t),l=o[r.jsonGrid.config],n=o[r.jsonGrid.data];n?(a=l.datatype,l.datatype="jsonstring",l.datastr=n,e(i).jqGrid(l).jqGrid("setGridParam",{datatype:a})):e(i).jqGrid(l)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",context:t,complete:function(t){!(t.status<300||304===t.status)||0===t.status&&4===t.readyState||(a(t.responseXML,this),e(i).triggerHandler("jqGridImportComplete",[t,this]),e.isFunction(this.importComplete)&&this.importComplete(t))}},t.ajaxOptions));break;case"xmlstring":t.impstring&&"string"==typeof t.impstring&&(r=e.parseXML(t.impstring))&&(a(r,t),e(i).triggerHandler("jqGridImportComplete",[r,t]),e.isFunction(t.importComplete)&&t.importComplete(r),t.impstring=null);break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",context:t,complete:function(t){try{!(t.status<300||304===t.status)||0===t.status&&4===t.readyState||(l(t.responseText,this),e(i).triggerHandler("jqGridImportComplete",[t,this]),e.isFunction(this.importComplete)&&this.importComplete(t))}catch(e){}}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(l(t.impstring,t),e(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var r=null;return this.each(function(){if(this.grid){var i,a=e.extend(!0,{},e(this).jqGrid("getGridParam"));if(a.rownumbers&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.multiselect&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.subGrid&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.knv=null,a.treeGrid)for(i in a.treeReader)a.treeReader.hasOwnProperty(i)&&(a.colNames.splice(a.colNames.length-1),a.colModel.splice(a.colModel.length-1));switch(t.exptype){case"xmlstring":r="<"+t.root+">"+_.json2xml(a,t.ident)+"</"+t.root+">";break;case"jsonstring":r="{"+_.toJson(a,t.root,t.ident,!1)+"}",void 0!==a.postData.filters&&(r=r.replace(/filters":"/,'filters":'),r=r.replace(/\}\]\}"/,"}]}"))}}}),r},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){var r;this.grid&&"remote"===t.exptype&&((r=e.extend({},this.p.postData,t.exportOptions))[t.oper]=t.tag,window.location=t.url+(null!=t.url&&t.url.indexOf("?")>=0?"&":"?")+e.param(r))})}});var E=function(t){var r=e.makeArray(arguments).slice(1);return r.unshift(""),r.unshift("Inline"),r.unshift(t),o.feedback.apply(this,r)};o.inlineEdit=o.inlineEdit||{},o.extend({editRow:function(t,r,i,a,l,n,s,d,c,u){var p={},f=e.makeArray(arguments).slice(1);return"object"===e.type(f[0])?p=f[0]:(void 0!==r&&(p.keys=r),e.isFunction(i)&&(p.oneditfunc=i),e.isFunction(a)&&(p.successfunc=a),void 0!==l&&(p.url=l),null!=n&&(p.extraparam=n),e.isFunction(s)&&(p.aftersavefunc=s),e.isFunction(d)&&(p.errorfunc=d),e.isFunction(c)&&(p.afterrestorefunc=c),e.isFunction(u)&&(p.beforeEditRow=u)),this.each(function(){var r=this,i=e(r),a=r.p,l=0,n=null,s={},d={},c=a.colModel,u=a.prmNames;if(r.grid){var f=e.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeEditRow:null,focusField:!0},o.inlineEdit,a.inlineEditing||{},p),h=i.jqGrid("getInd",t,!0),g=f.focusField,m="object"==typeof g&&null!=g?e(g.target||g).closest("tr.jqgrow>td")[0]:null;if(!1!==h&&(f.extraparam[u.oper]===u.addoper||E.call(r,f,"beforeEditRow",f,t))&&"0"===(e(h).attr("editable")||"0")&&!e(h).hasClass("not-editable-row")){var v=o.detectRowEditing.call(r,t);if(null!=v&&"cellEditing"===v.mode){var b=v.savedRow,w=r.rows[b.id],y=O.call(r,"select");i.jqGrid("restoreCell",b.id,b.ic),e(w.cells[b.ic]).removeClass("edit-cell "+y),e(w).addClass(y).attr({"aria-selected":"true",tabindex:"0"})}if(o.enumEditableCells.call(r,h,e(h).hasClass("jqgrid-new-row")?"add":"edit",function(i){var c,u,p,f=i.cm,h=e(i.dataElement),g=i.dataWidth,m=f.name,v=f.edittype,b=i.iCol,w=f.editoptions||{},y=!0===r.p.treeGrid&&m===r.p.ExpandColumn,x=f.editrules;if(d[m]=i.editable,"hidden"!==i.editable){if(y)e("span:first",h).html("");else try{c=e.unformat.call(this,i.td,{rowId:t,colModel:f},b)}catch(e){c="textarea"===v?h.text():h.html()}if(s[m]=c,y?e("span:first",h).html(""):h.html(""),u=e.extend({},w,{id:t+"_"+m,name:m,rowId:t,mode:i.mode,cm:f,iCol:b}),("&nbsp;"===c||"&#160;"===c||1===c.length&&160===c.charCodeAt(0))&&(c=""),p=o.createEl.call(r,v,u,c,!0,e.extend({},o.ajaxOptions,a.ajaxSelectOptions||{})),e(p).addClass("editable slds-input inline-edit-cell"),v||(v="text"),void 0!=x&&void 0!=x.required&&1==x.required){var C="",j=e(C="<table style='border-spacing: 0px; width:100% !important;'><tbody><tr><td style='border: 0px; color: red;font-size: 16px;font-weight: 600; width:1px !important;'>|</td><td style='border: 0px; ' id='secondTDForRequired'></td></tr></tbody></table>");j.find("td#secondTDForRequired").append(e(p)),y?e("span:first",h).append(j):h.append(j)}else y?e("span:first",h).append(p):h.append(p);g&&e(p).width(i.dataWidth),o.bindEv.call(r,p,u),"select"===v&&!0===w.multiple&&void 0===w.dataUrl&&o.msie&&e(p).width(e(p).width()),null===n&&(n=b),l++}}),l>0){if(s.id=t,a.savedRow.push(s),a.editingInfo[t]={mode:"inlineEditing",savedRow:s,editable:d},e(h).attr("editable","1"),g&&("number"==typeof g&&parseInt(g,10)<=c.length?n=g:"string"==typeof g?n=a.iColByName[g]:null!=m&&(n=m.cellIndex),setTimeout(function(){var t=i.jqGrid("getNumberOfFrozenColumns"),o=function(e){return a.frozenColumns&&t>0&&n<t?r.grid.fbRows[h.rowIndex].cells[e]:h.cells[e]},l=function(t){return e(t).find("input,textarea,select,button,object,*[tabindex]").filter(":input:visible:not(:disabled)")},s=function(){return l(a.frozenColumns&&t>0?r.grid.fbRows[h.rowIndex]:h).first()},d=l(o(n));d.length>0?d.first().focus():"number"==typeof f.defaultFocusField||"string"==typeof f.defaultFocusField?(0===(d=l(o("number"==typeof f.defaultFocusField?f.defaultFocusField:a.iColByName[f.defaultFocusField]))).length&&(d=s()),d.first().focus()):s().focus()},0)),!0===f.keys){var x=e(h);a.frozenColumns&&(x=x.add(r.grid.fbRows[h.rowIndex])),x.on("keydown",function(e){return 27===e.keyCode?(i.jqGrid("restoreRow",t,f.afterrestorefunc),!1):13===e.keyCode?"TEXTAREA"===e.target.tagName||(i.jqGrid("saveRow",t,f),!1):void 0})}F.call(r,f.oneditfunc,"jqGridInlineEditRow",t,f)}}}})},saveRow:function(t,r,i,a,l,n,s,d){var c,u=e.makeArray(arguments).slice(1),p={},f=this[0],h=e(f),g=null!=f?f.p:null,m=o.info_dialog,v=e.isFunction,b=null!=o.defaults&&v(o.defaults.fatalError)?o.defaults.fatalError:alert;if(f.grid&&null!=g){"object"===e.type(u[0])?p=u[0]:(v(r)&&(p.successfunc=r),void 0!==i&&(p.url=i),void 0!==a&&(p.extraparam=a),v(l)&&(p.aftersavefunc=l),v(n)&&(p.errorfunc=n),v(s)&&(p.afterrestorefunc=s),v(d)&&(p.beforeSaveRow=d));var w=function(e){return h.jqGrid("getGridRes",e)};p=e.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,beforeSaveRow:null,ajaxSaveOptions:{},serializeSaveData:null,mtype:"POST",saveui:"enable",savetext:w("defaults.savetext")||"Saving..."},o.inlineEdit,g.inlineEditing||{},p);var y,x,C,j,D,q,R,S,_={},I={},G={},k=h.jqGrid("getInd",t,!0),N=e(k),T=g.prmNames,A=w("errors.errcap"),B=w("edit.bClose"),M=function(t,r){try{var i=o.getRelativeRect.call(f,r);m.call(f,A,t,B,{top:i.top,left:i.left+e(f).closest(".ui-jqgrid").offset().left})}catch(e){b(t)}};if(!1!==k&&(c=p.extraparam[T.oper]===T.addoper?"add":"edit",E.call(f,p,"beforeSaveRow",p,t,c)&&(y=N.attr("editable"),p.url=p.url||g.editurl,R="clientArray"!==p.url,"1"===y))){if(q=e.jgrid.detectRowEditing.call(f,t),o.enumEditableCells.call(f,k,N.hasClass("jqgrid-new-row")?"add":"edit",function(t){var r=t.cm,i=r.formatter,a=r.editoptions||{},l=r.formatoptions||{},n={},s=o.getEditedValue.call(f,e(t.dataElement),r,n,t.editable);if("select"===r.edittype&&"select"!==r.formatter&&(I[r.name]=n.text),null!=(D=o.checkValues.call(f,s,t.iCol,void 0,void 0,e.extend(t,{oldValue:null!=q?q.savedRow[r.name]:null,newValue:s,oldRowData:null!=q?q.savedRow:null})))&&!1===D[0])return S=!0,M(D[1],t.td),!1;"date"===i&&!0!==l.sendFormatted&&(s=e.unformat.date.call(f,s,r)),R&&!0===a.NullIfEmpty&&""===s&&(s="null"),_[r.name]=s}),S)return;var z;T=g.prmNames,z=!1===g.keyName?T.id:g.keyName,_&&(_[T.oper]=T.editoper,void 0!==_[z]&&""!==_[z]||(_[z]=o.stripPref(g.idPrefix,t)),_=e.extend({},_,g.inlineData||{},p.extraparam));var P={options:p,rowid:t,tr:k,iRow:k.rowIndex,savedRow:q.savedRow,newData:_,mode:c};if(!E.call(f,p,"saveRowValidation",P))return void(P.errorText&&M(P.errorText,k));if(R)h.jqGrid("progressBar",{method:"show",loadtype:p.saveui,htmlcontent:p.savetext}),(G=e.extend({},_,G))[z]=o.stripPref(g.idPrefix,G[z]),g.autoEncodeOnEdit&&e.each(G,function(e,t){v(t)||(G[e]=o.oldEncodePostedData(t))}),k.id===g.idPrefix+G[z]||null==T.idold||G.hasOwnProperty(T.idold)||(G[T.idold]=o.stripPref(g.idPrefix,k.id)),e.ajax(e.extend({url:v(p.url)?p.url.call(f,G[z],c,G,p):p.url,data:o.serializeFeedback.call(f,v(p.serializeSaveData)?p.serializeSaveData:g.serializeRowData,"jqGridInlineSerializeSaveData",G),type:v(p.mtype)?p.mtype.call(f,c,p,G[z],G):p.mtype,complete:function(r,i){if(h.jqGrid("progressBar",{method:"hide",loadtype:p.saveui}),(r.status<300||304===r.status)&&(0!==r.status||4!==r.readyState)){var a,l,n;if(null!=(l=h.triggerHandler("jqGridInlineSuccessSaveRow",[r,t,p,c,G]))&&!0!==l||(l=[!0,_]),l[0]&&v(p.successfunc)&&(l=p.successfunc.call(f,r,t,p,c,G)),e.isArray(l)?(a=l[0],_=l[1]||_):a=l,!0===a){for(g.autoEncodeOnEdit&&e.each(_,function(e,t){_[e]=o.oldDecodePostedData(t)}),_=e.extend({},_,I),h.jqGrid("setRowData",t,_),N.attr("editable","0"),n=0;n<g.savedRow.length;n++)if(String(g.savedRow[n].id)===String(t)){C=n;break}C>=0&&(g.savedRow.splice(C,1),delete g.editingInfo[t]),F.call(f,p.aftersavefunc,"jqGridInlineAfterSaveRow",t,r,_,p),null!=l[2]?h.jqGrid("changeRowid",t,g.idPrefix+l[2]):k.id!==g.idPrefix+_[z]&&h.jqGrid("changeRowid",k.id,g.idPrefix+_[z]),N.removeClass("jqgrid-new-row").off("keydown")}else F.call(f,p.errorfunc,"jqGridInlineErrorSaveRow",t,r,i,null,p),!0===p.restoreAfterError&&h.jqGrid("restoreRow",t,p.afterrestorefunc)}},error:function(e,r,i){if(h.triggerHandler("jqGridInlineErrorSaveRow",[t,e,r,i,p]),v(p.errorfunc))p.errorfunc.call(f,t,e,r,i);else{var a=e.responseText||e.statusText;try{m.call(f,A,'<div class="'+O.call(f,"error")+'">'+a+"</div>",B,{buttonalign:"right"})}catch(e){b(a)}}!0===p.restoreAfterError&&h.jqGrid("restoreRow",t,p.afterrestorefunc)}},o.ajaxOptions,g.ajaxRowOptions,p.ajaxSaveOptions||{}));else{for(_=e.extend({},_,I),j=h.jqGrid("setRowData",t,_),N.attr("editable","0"),x=0;x<g.savedRow.length;x++)if(String(g.savedRow[x].id)===String(t)){C=x;break}C>=0&&(g.savedRow.splice(C,1),delete g.editingInfo[t]),F.call(f,p.aftersavefunc,"jqGridInlineAfterSaveRow",t,j,_,p),N.removeClass("jqgrid-new-row").off("keydown"),k.id!==g.idPrefix+_[z]&&h.jqGrid("changeRowid",k.id,g.idPrefix+_[z])}}}},restoreRow:function(t,r){var i=e.makeArray(arguments).slice(1),a={};return"object"===e.type(i[0])?a=i[0]:e.isFunction(r)&&(a.afterrestorefunc=r),this.each(function(){var r,i=this,l=e(i),n=i.p,s=-1,d={};if(i.grid){var c=e.extend(!0,{},o.inlineEdit,n.inlineEditing||{},a),u=l.jqGrid("getInd",t,!0);if(!1!==u&&E.call(i,c,"beforeCancelRow",c,t)){for(r=0;r<n.savedRow.length;r++)if(String(n.savedRow[r].id)===String(t)){s=r;break}if(s>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+o.jqID(u.id)).datepicker("hide")}catch(e){}e.each(n.colModel,function(){var t=this.name;n.savedRow[s].hasOwnProperty(t)&&(d[t]=n.savedRow[s][t],!this.formatter||"date"!==this.formatter||null!=this.formatoptions&&!0===this.formatoptions.sendFormatted||(d[t]=e.unformat.date.call(i,d[t],this)))}),l.jqGrid("setRowData",t,d),e(u).attr("editable","0").off("keydown"),n.savedRow.splice(s,1),delete n.editingInfo[t],e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")&&setTimeout(function(){l.jqGrid("delRowData",t),l.jqGrid("showAddEditButtons",!1)},0)}F.call(i,c.afterrestorefunc,"jqGridInlineAfterRestoreRow",t)}}})},addRow:function(t){return this.each(function(){if(this.grid){var r=this,i=e(r),a=r.p,l=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,beforeAddRow:null,addRowParams:{extraparam:{}}},o.inlineEdit,a.inlineEditing||{},t||{});if(E.call(r,l,"beforeAddRow",l.addRowParams))if(l.rowID=e.isFunction(l.rowID)?l.rowID.call(r,l):null!=l.rowID?l.rowID:o.randId(),!0===l.useDefValues&&e(a.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var t=this.editoptions.defaultValue;l.initdata[this.name]=e.isFunction(t)?t.call(r,l):t}}),l.rowID=a.idPrefix+l.rowID,i.jqGrid("addRowData",l.rowID,l.initdata,l.position),e("#"+o.jqID(l.rowID),r).addClass("jqgrid-new-row"),l.useFormatter)e("#"+o.jqID(l.rowID)+" .ui-inline-edit",r).click();else{var n=a.prmNames,s=n.oper;l.addRowParams.extraparam[s]=n.addoper,i.jqGrid("editRow",l.rowID,l.addRowParams)}}})},addRowAfterBefore:function(t,r){return t=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var i=this,a=e.isFunction(t.beforeAddRow)?t.beforeAddRow.call(i,t.addRowParams):void 0;if(void 0===a&&(a=!0),a){t.rowID=e.isFunction(t.rowID)?t.rowID.call(i,t):null!=t.rowID?t.rowID:e.jgrid.randId(),!0===t.useDefValues&&e(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,a=e.isFunction(r)?r.call(i):r;t.initdata[this.name]=a}});for(var o=e(i).jqGrid("getDataIDs"),l=0;l<o.length;l++){var n=e(i).jqGrid("getInd",o[l],!0);if(!1===n)return success;if(1==e(n).attr("editable")&&!e(i).jqGrid("saveRow",o[l]))return}if(e(i).jqGrid("addRowData",t.rowID,t.initdata,t.position,r),t.rowID=i.p.idPrefix+t.rowID,e("#"+e.jgrid.jqID(t.rowID),"#"+e.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter)e("#"+e.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+e.jgrid.jqID(i.p.id)).click();else{var s=i.p.prmNames,d=s.oper;t.addRowParams.extraparam[d]=s.addoper,e(i).jqGrid("editRow",t.rowID,t.addRowParams)}}}})},inlineNav:function(t,r){return"object"==typeof t&&(r=t,t=void 0),this.each(function(){var i=this,a=e(i),l=i.p;if(this.grid&&null!=l){var n,s=t===l.toppager?l.idSel+"_top":l.idSel,d=t===l.toppager?l.id+"_top":l.id,c=O.call(i,"disabled"),u=e.extend(!0,{edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",commonIconClass:"ui-icon",iconsOverText:!1,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},a.jqGrid("getGridRes","nav"),o.nav||{},l.navOptions||{},o.inlineNav||{},l.inlineNavOptions||{},r||{}),p=function(){i.modalAlert()};if(void 0===t)if(l.pager){if(a.jqGrid("inlineNav",l.pager,u),!l.toppager)return;t=l.toppager,s=l.idSel+"_top",d=l.id+"_top"}else l.toppager&&(t=l.toppager,s=l.idSel+"_top",d=l.id+"_top");if(void 0!==t&&!((n=e(t)).length<=0)){if(n.find(".navtable").length<=0&&a.jqGrid("navGrid",t,{add:!1,edit:!1,del:!1,search:!1,refresh:!1,view:!1}),l._inlinenav=!0,!0===u.addParams.useFormatter){var f,h,g,m=l.colModel;for(f=0;f<m.length;f++)if(m[f].formatter&&"actions"===m[f].formatter){m[f].formatoptions&&(h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},g=e.extend(h,m[f].formatoptions),u.addParams.addRowParams={keys:g.keys,oneditfunc:g.onEdit,successfunc:g.onSuccess,url:g.url,extraparam:g.extraparam,aftersavefunc:g.afterSave,errorfunc:g.onError,afterrestorefunc:g.afterRestore});break}}u.add&&a.jqGrid("navButtonAdd",t,{caption:u.addtext,title:u.addtitle,commonIconClass:u.commonIconClass,buttonicon:u.addicon,iconsOverText:u.iconsOverText,id:d+"_iladd",onClickButton:function(){for(var t=e(i).jqGrid("getDataIDs"),r=0;r<t.length;r++){var a=e(i).jqGrid("getInd",t[r],!0);if(!1===a)return success;if(1==e(a).attr("editable")&&!e(i).jqGrid("saveRow",t[r]))return}void 0===i.p.beforeAction&&(i.p.beforeAction=!0),e(i).jqGrid("addRow",u.addParams),!u.addParams.useFormatter&&i.p.beforeAction&&(e(s+"_ilsave").removeClass(c),e(s+"_ilcancel").removeClass(c),e(s+"_iledit").addClass(c))}}),u.edit&&a.jqGrid("navButtonAdd",t,{caption:u.edittext,title:u.edittitle,commonIconClass:u.commonIconClass,buttonicon:u.editicon,iconsOverText:u.iconsOverText,id:d+"_iledit",onClickButton:function(){var t=e(i).jqGrid("getGridParam","selrow");t?(void 0===i.p.beforeAction&&(i.p.beforeAction=!0),e(i).jqGrid("editRow",t,u.editParams),i.p.beforeAction&&(e(s+"_ilsave").removeClass(c),e(s+"_ilcancel").removeClass(c),e(s+"_iladd").addClass(c),e(s+"_iledit").addClass(c))):(e.jgrid.viewModal("#alertmod_"+d,{gbox:"#gbox_"+d,jqm:!0}),e("#jqg_alrt").focus())}}),u.save&&(a.jqGrid("navButtonAdd",t,{caption:u.savetext,title:u.savetitle,commonIconClass:u.commonIconClass,buttonicon:u.saveicon,iconsOverText:u.iconsOverText,id:d+"_ilsave",onClickButton:function(){if(!C(this,c)){var t=l.savedRow[0].id;if(t){var r=l.prmNames,n=r.oper,s=u.editParams;e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")?(u.addParams.addRowParams.extraparam[n]=r.addoper,s=u.addParams.addRowParams):(u.editParams.extraparam||(u.editParams.extraparam={}),u.editParams.extraparam[n]=r.editoper),a.jqGrid("saveRow",t,s)}else p()}}}),e(s+"_ilsave").addClass(c)),u.cancel&&(a.jqGrid("navButtonAdd",t,{caption:u.canceltext,title:u.canceltitle,commonIconClass:u.commonIconClass,buttonicon:u.cancelicon,iconsOverText:u.iconsOverText,id:d+"_ilcancel",onClickButton:function(){if(!C(this,c)){var t=l.savedRow[0].id,r=u.editParams;t?(e("#"+o.jqID(t),i).hasClass("jqgrid-new-row")&&(r=u.addParams.addRowParams),a.jqGrid("restoreRow",t,r)):p()}}}),e(s+"_ilcancel").addClass(c)),!0===u.restoreAfterSelect&&a.on("jqGridSelectRow",function(e,t){if(l.savedRow.length>0&&!0===l._inlinenav){var r=l.savedRow[0].id;t!==r&&"number"!=typeof r&&a.jqGrid("restoreRow",r,u.editParams)}}),a.on("jqGridInlineAfterRestoreRow jqGridInlineAfterSaveRow",function(){a.jqGrid("showAddEditButtons",!1)}),a.on("jqGridInlineEditRow",function(e,t){a.jqGrid("showAddEditButtons",!0,t)})}}})},showAddEditButtons:function(t){return this.each(function(){var r=this;if(r.grid){var i=r.p,a=i.idSel,o=O.call(r,"disabled"),l=a+"_ilsave,"+a+"_ilcancel"+(i.toppager?","+a+"_top_ilsave,"+a+"_top_ilcancel":""),n=a+"_iladd,"+a+"_iledit"+(i.toppager?","+a+"_top_iladd,"+a+"_top_iledit":"");e(t?n:l).addClass(o),e(t?l:n).removeClass(o)}})}});var A=null!=e.ui?e.ui.multiselect:null,B=function(t){if(null!=this.grid&&null!=this.grid.p){var r,i,a,o,l,n=this,s=this.grid.p,d=this.gh,c=this.selectedList,u=this.inGroup,p=c.find("li"),f=p.length-1,h=function(t,r,i){var a,o,l=c.find("li");for(void 0===r&&(r=i?l.length-1:0),a=r;i?a>=0:a<l.length;i?a--:a++)if((o=e(l[a]).data("optionLink"))&&t.call(l[a],parseInt(o.val(),10),a))return a},g=function(){(i=e.inArray(s.colModel[t].name,n.newColOrder))>=0&&n.newColOrder.splice(i,1),p=c.find("li"),r=0,h(function(i,a){if(i===t){for(f=a;r>=0&&r<s.colModel.length&&(s.colModel[r].hidden||s.colModel[r].hidedlg)&&null!=u&&u[r]===u[t];)r++;return n.newColOrder.splice(r,0,s.colModel[t].name),!0}(r=e.inArray(s.colModel[i].name,n.newColOrder,r))<0&&(r=e.inArray(s.colModel[i].name,n.newColOrder)),r++})};if(g(),d&&void 0!==d[u[t]]){for(o=d[u[t]],i=0;i<o.numberOfColumns;i++)if(r=s.iColByName[o.startColumnName]+i,!s.colModel[r].hidden&&!s.colModel[r].hidedlg){h(function(r){if(u[r]===u[t])return e(this).after(p[f]),g(),!0},f-1,!0),h(function(r){if(u[r]===u[t])return e(this).before(p[f]),g(),!0},f+1),h(function(e){if(u[e]===u[t]&&void 0!==u[e])return d[u[e]].startColumnName=s.colModel[e].name,!0});break}}else if(d){if(p=c.find("li"),(i=h(function(e){if(e===t)return!0}))+1>=p.length||i<0)return;if((l=e(p[i+1]).data("optionLink"))&&void 0!==(a=u[parseInt(l.val(),10)])&&(l=e(p[i-1]).data("optionLink"))&&u[parseInt(l.val(),10)]===a){var m=h(function(e){if(u[e]!==a)return!0},i+1);e(p[void 0===m||m>=p.length?p.length-1:m-1]).after(p[f]),g()}}}};if(o.msie&&8===o.msiever()&&(e.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"===e.style.display}),o._multiselect=!1,A){if(A.prototype._setSelected){var M=A.prototype._setSelected;A.prototype._setSelected=function(t,r){var i=M.call(this,t,r),a=this.element,o=parseInt(t.data("optionLink").val(),10);return r&&this.selectedList&&(B.call(this,o),this.selectedList.find("li").each(function(){e(this).data("optionLink")&&e(this).data("optionLink").remove().appendTo(a)})),i}}A.prototype.destroy&&(A.prototype.destroy=function(){var t=this;t.element.show(),t.container.remove(),void 0===e.Widget?e.widget.prototype.destroy.apply(t,arguments):e.Widget.prototype.destroy.apply(t,arguments)}),o._multiselect=!0}o.extend({sortableColumns:function(r){return this.each(function(){function i(){o.disableClick=!0}var a=this,o=a.p,l=c(o.id);if(o&&o.sortable&&e.isFunction(e.fn.sortable)){var n={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+l+"_cb,#jqgh_"+l+"_rn,#jqgh_"+l+"_subgrid),:hidden)",placeholder:{element:function(r){return e(t.createElement(r[0].nodeName)).addClass(r[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},start:function(){a.grid.hDiv.scrollLeft=a.grid.bDiv.scrollLeft},update:function(t,r){var i=e(">th",e(r.item).parent()),l=o.id+"_",n=[];i.each(function(){var t=e(">div",this).get(0).id.replace(/^jqgh_/,"").replace(l,""),r=o.iColByName[t];void 0!==r&&n.push(r)}),e(a).jqGrid("remapColumns",n,!0,!0),e.isFunction(o.sortable.update)&&o.sortable.update(n),setTimeout(function(){o.disableClick=!1},50)}};if(o.sortable.options?e.extend(n,o.sortable.options):e.isFunction(o.sortable)&&(o.sortable={update:o.sortable}),n.start){var s=n.start;n.start=function(e,t){i(),s.call(this,e,t)}}else n.start=i;o.sortable.exclude&&(n.items+=":not("+o.sortable.exclude+")");var d=r.sortable(n),u=d.data("sortable")||d.data("uiSortable")||d.data("ui-sortable");null!=u&&(u.floating=!0)}})},columnChooser:function(t){function r(t,r){t&&("string"==typeof t?e.fn[t]&&e.fn[t].apply(r,e.makeArray(arguments).slice(2)):e.isFunction(t)&&t.apply(r,e.makeArray(arguments).slice(2)))}var i,a,l,n,s,d,u,p=this,f=p[0],h=f.p,g=h.colModel,m=g.length,v=h.colNames,b=function(e){return A&&A.prototype&&e.data(A.prototype.widgetFullName||A.prototype.widgetName)||e.data("ui-multiselect")||e.data("multiselect")};if(!e("#colchooser_"+c(h.id)).length){if(i=e('<div id="colchooser_'+h.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),a=e("select",i),t=e.extend({width:400,height:240,classname:null,done:function(e){e&&p.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(t){var r={};return r[t.bSubmit]=function(){t.apply_perm(),t.cleanup(!1)},r[t.bCancel]=function(){t.cleanup(!0)},e.extend(!0,{buttons:r,close:function(){t.cleanup(!0)},modal:t.modal||!1,resizable:t.resizable||!0,width:t.width+70,resize:function(){var e=b(a),t=e.container.closest(".ui-dialog-content");t.length>0&&"object"==typeof t[0].style?t[0].style.width="":t.css("width",""),e.selectedList.height(Math.max(e.selectedContainer.height()-e.selectedActions.outerHeight()-1,1)),e.availableList.height(Math.max(e.availableContainer.height()-e.availableActions.outerHeight()-1,1))}},t.dialog_opts||{})},apply_perm:function(){var r,i,o=new Array(h.colModel.length),l={notSkipFrozen:void 0!==t.notSkipFrozen&&t.notSkipFrozen,skipSetGridWidth:!0,skipSetGroupHeaders:!0};for(r=0;r<h.colModel.length;r++)o[r]=h.iColByName[d.newColOrder[r]];if(e("option",a).each(function(){e(this).is(":selected")?p.jqGrid("showCol",g[this.value].name,l):p.jqGrid("hideCol",g[this.value].name,l)}),t.done&&t.done.call(p,o),h.groupHeader&&("object"==typeof h.groupHeader||e.isFunction(h.groupHeader)))if(p.jqGrid("destroyGroupHeader",!1),h.groupHeader.groupHeaders=d.gh,null!=h.pivotOptions&&null!=h.pivotOptions.colHeaders&&h.pivotOptions.colHeaders.length>1)for(i=h.pivotOptions.colHeaders,r=0;r<i.length;r++)i[r]&&i[r].groupHeaders.length&&p.jqGrid("setGroupHeaders",i[r]);else p.jqGrid("setGroupHeaders",h.groupHeader);var n=h.autowidth||void 0!==h.widthOrg&&"auto"!==h.widthOrg&&"100%"!==h.widthOrg?h.width:h.tblwidth;n!==h.width&&p.jqGrid("setGridWidth",n,h.shrinkToFit)},cleanup:function(e){r(t.dlog,i,"destroy"),r(t.msel,a,"destroy"),i.remove(),e&&t.done&&t.done.call(p)},msel_opts:{}},p.jqGrid("getGridRes","col"),o.col,t||{}),e.ui&&A&&A.defaults){if(!o._multiselect)return void(null!=o.defaults&&e.isFunction(o.defaults.fatalError)?o.defaults.fatalError:alert)("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");t.msel_opts=e.extend(A.defaults,t.msel_opts)}t.caption&&i.attr("title",t.caption),t.classname&&(i.addClass(t.classname),a.addClass(t.classname)),t.width&&(e(">div",i).css({width:t.width,margin:"0 auto"}),a.css("width",t.width)),t.height&&(e(">div",i).css("height",t.height),a.css("height",t.height-10)),a.empty();var w,y,x,C,j=null!=h.groupHeader?h.groupHeader.groupHeaders:0,D={};if(j)for(w=0;w<j.length;w++)for(C=j[w],y=0;y<C.numberOfColumns;y++)x=h.iColByName[C.startColumnName]+y,D[x]=e.isFunction(t.buildItemText)?t.buildItemText.call(p[0],{iCol:x,cm:g[x],cmName:g[x].name,colName:v[x],groupTitleText:C.titleText}):e.jgrid.stripHtml(C.titleText)+": "+e.jgrid.stripHtml(""===v[x]?g[x].name:v[x]);for(x=0;x<m;x++)void 0===D[x]&&(D[x]=e.isFunction(t.buildItemText)?t.buildItemText.call(p[0],{iCol:x,cm:g[x],cmName:g[x].name,colName:v[x],groupTitleText:null}):e.jgrid.stripHtml(v[x]));if(e.each(g,function(e){this.hidedlg||a.append("<option value='"+e+"'"+(h.headertitles||this.headerTitle?" title='"+o.stripHtml("string"==typeof this.headerTitle?this.headerTitle:D[e])+"'":"")+(this.hidden?"":" selected='selected'")+">"+D[e]+"</option>")}),l=e.isFunction(t.dlog_opts)?t.dlog_opts.call(p,t):t.dlog_opts,r(t.dlog,i,l),n=e.isFunction(t.msel_opts)?t.msel_opts.call(p,t):t.msel_opts,r(t.msel,a,n),(s=e("#colchooser_"+c(h.id))).css({margin:"auto"}),s.find(">div").css({width:"100%",height:"100%",margin:"auto"}),d=b(a)){if(d.grid=f,j){d.gh=e.extend(!0,[],j),d.inGroup=new Array(h.colModel.length);var q,R;for(q=0;q<j.length;q++)for(R=j[q],x=0;x<R.numberOfColumns;x++)d.inGroup[h.iColByName[R.startColumnName]+x]=q}d.newColOrder=e.map(g,function(e){return e.name}),d.container.css({width:"100%",height:"100%",margin:"auto"}),d.selectedContainer.css({width:100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.availableContainer.css({width:100-100*d.options.dividerLocation+"%",height:"100%",margin:"auto",boxSizing:"border-box"}),d.selectedList.css("height","auto"),d.availableList.css("height","auto"),u=Math.max(d.selectedList.height(),d.availableList.height()),u=Math.min(u,e(window).height()),d.selectedList.css("height",u),d.availableList.css("height",u),null!=d.options&&d.options.sortable&&d.selectedList.on("sortupdate",function(r,i){B.call(d,parseInt(i.item.data("optionLink").val(),10)),i.item.css({width:"",height:""}),e.isFunction(t.sortUpdate)&&t.sortUpdate.call(f,r,i)}),e.isFunction(t.init)&&t.init.call(f,d)}}},sortableRows:function(t){return this.each(function(){var r=this,i=r.grid,a=r.p;i&&(a.treeGrid||e.fn.sortable&&((t=e.extend({cursor:"move",axis:"y",items:">tbody>.jqgrow"},t||{})).start&&e.isFunction(t.start)?(t._start_=t.start,delete t.start):t._start_=!1,t.update&&e.isFunction(t.update)?(t._update_=t.update,delete t.update):t._update_=!1,t.start=function(o,l){if(e(l.item).css("border-width","0"),e("td",l.item).each(function(e){void 0!=r.grid.cols[e]&&(this.style.width=i.cols[e].style.width)}),a.subGrid){var n=e(l.item).attr("id");try{e(r).jqGrid("collapseSubGridRow",n)}catch(e){}}t._start_&&t._start_.apply(this,[o,l])},t.update=function(i,o){e(o.item).css("border-width",""),!0===a.rownumbers&&e("td.jqgrid-rownum",r.rows).each(function(t){e(this).html(t+1+(parseInt(a.page,10)-1)*parseInt(a.rowNum,10))}),t._update_&&t._update_.apply(this,[i,o])},e(r).sortable(t)))})},gridDnD:function(t){return this.each(function(){function r(){var t=e.data(o,"dnd");e("tr.jqgrow:not(.ui-draggable)",o).draggable(e.isFunction(t.drag)?t.drag.call(e(o),t):t.drag)}var i,a,o=this;if(o.grid&&!o.p.treeGrid&&e.fn.draggable&&e.fn.droppable)if(void 0===e("#jqgrid_dnd")[0]&&e("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>"),"string"!=typeof t||"updateDnD"!==t||!0!==o.p.jqgdnd){if((t=e.extend({drag:function(t){return e.extend({start:function(r,i){var a,l;if(o.p.subGrid){l=e(i.helper).attr("id");try{e(o).jqGrid("collapseSubGridRow",l)}catch(e){}}for(a=0;a<e.data(o,"dnd").connectWith.length;a++)0===e(e.data(o,"dnd").connectWith[a]).jqGrid("getGridParam","reccount")&&e(e.data(o,"dnd").connectWith[a]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),e("td",i.helper).each(function(e){this.style.width=o.grid.headers[e].width+"px"}),t.onstart&&e.isFunction(t.onstart)&&t.onstart.call(e(o),r,i)},stop:function(r,i){var a,l;for(i.helper.dropped&&!t.dragcopy&&(void 0===(l=e(i.helper).attr("id"))&&(l=e(this).attr("id")),e(o).jqGrid("delRowData",l)),a=0;a<e.data(o,"dnd").connectWith.length;a++)e(e.data(o,"dnd").connectWith[a]).jqGrid("delRowData","jqg_empty_row");t.onstop&&e.isFunction(t.onstop)&&t.onstop.call(e(o),r,i)}},t.drag_opts||{})},drop:function(t){return e.extend({accept:function(t){if(!e(t).hasClass("jqgrow"))return t;var r=e(t).closest("table.ui-jqgrid-btable");if(r.length>0&&void 0!==e.data(r[0],"dnd")){var i=e.data(r[0],"dnd").connectWith;return-1!==e.inArray("#"+c(this.id),i)}return!1},drop:function(r,i){if(e(i.draggable).hasClass("jqgrow")){var a=e(i.draggable).attr("id"),l=i.draggable.parent().parent().jqGrid("getRowData",a);if(!t.dropbyname){var n,s,d=0,u={},p=e("#"+c(this.id)).jqGrid("getGridParam","colModel");try{for(s in l)l.hasOwnProperty(s)&&("cb"!==(n=p[d].name)&&"rn"!==n&&"subgrid"!==n&&l.hasOwnProperty(s)&&p[d]&&(u[n]=l[s]),d++);l=u}catch(e){}}if(i.helper.dropped=!0,t.beforedrop&&e.isFunction(t.beforedrop)){var f=t.beforedrop.call(this,r,i,l,e("#"+c(o.p.id)),e(this));void 0!==f&&null!==f&&"object"==typeof f&&(l=f)}if(i.helper.dropped){var h;t.autoid&&(e.isFunction(t.autoid)?h=t.autoid.call(this,l):(h=Math.ceil(1e3*Math.random()),h=t.autoidprefix+h)),e("#"+c(this.id)).jqGrid("addRowData",h,l,t.droppos),l[o.p.localReader.id]=h}t.ondrop&&e.isFunction(t.ondrop)&&t.ondrop.call(this,r,i,l)}}},t.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},t||{})).connectWith)for(t.connectWith=t.connectWith.split(","),t.connectWith=e.map(t.connectWith,function(t){return e.trim(t)}),e.data(o,"dnd",t),0===o.p.reccount||o.p.jqgdnd||r(),o.p.jqgdnd=!0,i=0;i<t.connectWith.length;i++)a=t.connectWith[i],e(a).droppable(e.isFunction(t.drop)?t.drop.call(e(o),t):t.drop)}else r()})},gridResize:function(t){return this.each(function(){var r,i=this,a=i.grid,o=i.p,l=o.gView+">.ui-jqgrid-bdiv",n=!1,s=o.height;if(a&&e.fn.resizable){if(t=e.extend({},t||{}),t.alsoResize?(t._alsoResize_=t.alsoResize,delete t.alsoResize):t._alsoResize_=!1,t.stop&&e.isFunction(t.stop)?(t._stop_=t.stop,delete t.stop):t._stop_=!1,t.stop=function(d,c){e(i).jqGrid("setGridWidth",c.size.width,t.shrinkToFit),e(o.gView+">.ui-jqgrid-titlebar").css("width",""),n?(e(r).each(function(){e(this).css("height","")}),"auto"!==s&&"100%"!==s||e(a.bDiv).css("height",s)):e(i).jqGrid("setGridParam",{height:e(l).height()}),i.fixScrollOffsetAndhBoxPadding&&i.fixScrollOffsetAndhBoxPadding(),t._stop_&&t._stop_.call(i,d,c)},r=l,"auto"!==s&&"100%"!==s||void 0!==t.handles||(t.handles="e,w"),t.handles){var d=e.map(String(t.handles).split(","),function(t){return e.trim(t)});2===d.length&&("e"===d[0]&&"w"===d[1]||"e"===d[1]&&"w"===d[1])&&(r=o.gView+">div:not(.frozen-div)",n=!0,o.pager&&(r+=","+o.pager))}t._alsoResize_?t.alsoResize=r+","+t._alsoResize_:t.alsoResize=r,delete t._alsoResize_,e(o.gBox).resizable(t)}})}}),r.prototype.calc=function(t,r,i,a,o){var l=this;if(void 0!==t)switch(l.result=l.result||0,t=parseFloat(t),l.aggregator){case"sum":l.result+=t;break;case"count":l.result++;break;case"avg":l.finilized?(l.count=l.count||0,l.result=(l.result*l.count+t)/(l.count+1),l.count++):(l.result+=t,l.count=l.count||0,l.count++);break;case"min":l.result=Math.min(l.result,t);break;case"max":l.result=Math.max(l.result,t);break;default:e.isFunction(l.aggregator)&&(l.result=l.aggregator.call(l.context,{previousResult:l.result,value:t,fieldName:r,item:i,iItem:a,items:o}))}},r.prototype.getResult=function(e,t,r){var i=this;(void 0!==i.result||r)&&(r&&void 0!==i.result&&(i.result=0,i.count=0),void 0===i.result||i.finilized||"avg"!==i.aggregator||(i.result=i.result/i.count,i.finilized=!0),e[t]=i.result)},i.prototype.compareVectorsEx=function(e,t){var r,i,a=this,o=a.fieldLength;for(r=0;r<o;r++)if(0!==(i=a.fieldCompare[r](e[r],t[r])))return{index:r,result:i};return{index:-1,result:0}},i.prototype.getIndexOfDifferences=function(e,t){return null===t||null===e?0:this.compareVectorsEx(e,t).index},i.prototype.compareVectors=function(e,t){var r=this.compareVectorsEx(e,t);return(r.index>=0?this.fieldSortDirection[r.index]:1)>0?r.result:-r.result},i.prototype.getItem=function(e){return this.items[e]},i.prototype.getIndexLength=function(){return this.items.length},i.prototype.getIndexesOfSourceData=function(e){return this.indexesOfSourceData[e]},i.prototype.createDataIndex=function(t){var r,i,a,o,l,n,s,d,c,u=this,p=t.length,f=u.fieldLength,h=u.fieldNames,g=u.indexesOfSourceData,m=u.items;for(r=0;r<p;r++){for(s=t[r],i=new Array(f),o=0;o<f;o++)void 0!==(a=s[h[o]])&&("string"==typeof a&&u.trimByCollect&&(a=e.trim(a)),i[o]=a);if(d=0,(c=m.length-1)<0)m.push(i),g.push([r]);else if(0!==(l=u.compareVectors(i,m[c])))if(1===l||u.skipSort)m.push(i),g.push([r]);else if(1!==(l=u.compareVectors(m[0],i)))if(0!==l)for(;;){if(c-d<2){m.splice(c,0,i),g.splice(c,0,[r]);break}if(n=Math.floor((d+c)/2),0===(l=u.compareVectors(m[n],i))){g[n].push(r);break}1===l?c=n:d=n}else g[0].push(r);else m.unshift(i),g.unshift([r]);else g[c].push(r)}},o.extend({pivotSetup:function(t,a){var l,n,s,d,c,u,p,f,h,g,m,v,b,w,y,x,C,j,D,q,R,S,_,I,F,G,k,O,N,T=this[0],E=e.isArray,A={},B={groupField:[],groupSummary:[],groupSummaryPos:[]},M={grouping:!0,groupingView:B},z=e.extend({totals:!1,useColSpanStyle:!1,trimByCollect:!0,skipSortByX:!1,skipSortByY:!1,caseSensitive:!1,footerTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1,defaultFormatting:!0,data:t},a||{}),P=t.length,L=z.xDimension,V=z.yDimension,H=z.aggregates,W=z.totalText||z.totals||z.rowTotals||z.totalHeader,U=E(L)?L.length:0,Y=E(V)?V.length:0,X=E(H)?H.length:0,Q=Y-(1===X?1:0),J=[],Z=[],$=[],K=[],ee=["pivotInfos"],te=new Array(X),re=new Array(Y),ie=function(r,a,o){var l=new i(z.trimByCollect,z.caseSensitive,a,r);return e.isFunction(o)&&(l.compareVectorsEx=o),l.createDataIndex(t),l},ae=function(t,r,i,a,l){var n,s,d;switch(t){case 1:n=V[a].totalText||"{0} {1} {2}",s="y"+l+"t"+a;break;case 2:n=z.totalText||"{0}",s="t";break;default:n=X>1?r.label||"{0}":e.isFunction(V[a].label)?V[a].label:O.getItem(l)[a],s="y"+l}return d=e.extend({},r,{name:s+(X>1?"a"+i:""),label:e.isFunction(n)?n.call(T,2===t?{aggregate:r,iAggregate:i,pivotOptions:z}:1===t?{yIndex:O.getItem(l),aggregate:r,iAggregate:i,yLevel:a,pivotOptions:z}:{yData:O.getItem(l)[a],yIndex:O.getItem(l),yLevel:a,pivotOptions:z}):o.template.apply(T,2===t?[String(n),r.aggregator,r.member,i]:[String(n),r.aggregator,r.member,O.getItem(l)[a],a])}),delete d.member,delete d.aggregator,d},oe=function(e,t,r){var i,a;for(i=0;i<X;i++)void 0===(a=H[i]).template&&void 0===a.formatter&&z.defaultFormatting&&(a.template="count"===a.aggregator?"integer":"number"),$.push(ae(e,a,i,t,r))},le=function(t,r,i){var a,l,n,s;for(a=Q-1;a>=r;a--)if(Z[a]){for(l=0;l<=a;l++)(F=J[l].groupHeaders)[F.length-1].numberOfColumns+=X;for(n=(c=V[a]).totalHeader,s=c.headerOnTop,l=a+1;l<=Q-1;l++)J[l].groupHeaders.push({titleText:s&&l===a+1||!s&&l===Q-1?e.isFunction(n)?n.call(T,i,a):o.template.call(T,String(n||""),i[a],a):"",startColumnName:"y"+(t-1)+"t"+a+(1===X?"":"a0"),numberOfColumns:X})}},ne=function(e){var t=new r("count"===H[e].aggregator?"sum":H[e].aggregator,T,a);return t.groupInfo={iRows:[],rows:[],ys:[],iYs:[]},t},se=function(e,t,r,i){var a,o,l,n=O.getIndexOfDifferences(t,r);if(null!==r)for(n=Math.max(n,0),a=Q-1;a>=n;a--)o="y"+e+"t"+a+(X>1?"a"+i:""),Z[a]&&void 0===_[o]&&((l=re[a][i]).getResult(_,o),_.pivotInfos[o]={colType:1,iA:i,a:H[i],level:a,iRows:l.groupInfo.iRows,rows:l.groupInfo.rows,ys:l.groupInfo.ys,iYs:l.groupInfo.iYs},t!==r&&(re[a][i]=ne(i)))};if(0===U||0===X)throw"xDimension or aggregates options are not set!";for(k=ie(L,z.skipSortByX,z.compareVectorsByX),O=ie(V,z.skipSortByY,z.compareVectorsByY),a.xIndex=k,a.yIndex=O,n=0;n<U;n++)u={name:"x"+n,label:null!=(d=L[n]).label?e.isFunction(d.label)?d.label.call(T,d,n,z):d.label:d.dataName,frozen:z.frozenStaticCols},n<U-1&&!d.skipGrouping&&!d.additionalProperty&&(B.groupField.push(u.name),B.groupSummary.push(z.groupSummary),B.groupSummaryPos.push(z.groupSummaryPos)),delete(u=e.extend(u,d)).dataName,delete u.footerText,d.additionalProperty?ee.push(u.name):($.push(u),M.sortname=u.name);for(U<2&&(M.grouping=!1),B.hideFirstGroupCol=!0,n=0;n<Y;n++)c=V[n],Z.push(!!(c.totals||c.rowTotals||c.totalText||c.totalHeader));for(I=O.getItem(0),oe(0,Y-1,0),N=O.getIndexLength(),j=1;j<N;j++){for(D=O.getItem(j),n=O.getIndexOfDifferences(D,I),s=Q-1;s>=n;s--)Z[s]&&oe(1,s,j-1);I=D,oe(0,Y-1,j)}for(n=Q-1;n>=0;n--)Z[n]&&oe(1,n,N-1);for(W&&oe(2),I=O.getItem(0),s=0;s<Q;s++)J.push({useColSpanStyle:z.useColSpanStyle,groupHeaders:[{titleText:e.isFunction(V[s].label)?V[s].label.call(T,{yData:I[s],yIndex:I,yLevel:s,pivotOptions:z}):I[s],startColumnName:1===X?"y0":"y0a0",numberOfColumns:X}]});for(j=1;j<N;j++){for(D=O.getItem(j),le(j,n=O.getIndexOfDifferences(D,I),I),s=Q-1;s>=n;s--)J[s].groupHeaders.push({titleText:e.isFunction(V[s].label)?V[s].label.call(T,{yData:D[s],yIndex:D,yLevel:s,pivotOptions:z}):D[s],startColumnName:"y"+j+(1===X?"":"a0"),numberOfColumns:X});for(s=0;s<n;s++)(F=J[s].groupHeaders)[F.length-1].numberOfColumns+=X;I=D}if(le(N,0,I),W)for(n=0;n<Q;n++)J[n].groupHeaders.push({titleText:n<Q-1?"":z.totalHeader||"",startColumnName:"t"+(1===X?"":"a0"),numberOfColumns:X});for(x=k.getIndexLength(),h=0;h<x;h++){for(g=k.getItem(h),_={pivotInfos:m={iX:h,x:g}},n=0;n<U;n++)_["x"+n]=g[n];if(C=k.getIndexesOfSourceData(h),W)for(s=0;s<X;s++)te[s]=ne(s);for(I=null,function(){var e,t;for(e=Q-1;e>=0;e--)if(Z[e])for(null==re[e]&&(re[e]=new Array(X)),t=0;t<X;t++)re[e][t]=ne(t)}(),j=0;j<N;j++){for(D=O.getItem(j),q=O.getIndexesOfSourceData(j),s=0;s<X;s++){for(null!==I&&se(j-1,D,I,s),R=[],n=0;n<q.length;n++)G=q[n],e.inArray(G,C)>=0&&R.push(G);if(R.length>0){for(v=new Array(R.length),b=new r((S=H[s]).aggregator,T,a),p=0;p<R.length;p++)n=R[p],l=t[n],v[p]=l,b.calc(l[S.member],S.member,l,n,t),W&&((w=te[s]).calc(l[S.member],S.member,l,n,t),y=w.groupInfo,e.inArray(n,y.iYs)<0&&(y.iYs.push(j),y.ys.push(D)),e.inArray(n,y.iRows)<0&&(y.iRows.push(n),y.rows.push(l))),function(r,i,a,o,l,n,s){var d,c,u;if(r!==i)for(d=Q-1;d>=0;d--)Z[d]&&((c=re[d][o]).calc(l[a.member],a.member,l,n,t),u=c.groupInfo,e.inArray(s,u.iYs)<0&&(u.iYs.push(s),u.ys.push(r)),e.inArray(n,u.iRows)<0&&(u.iRows.push(n),u.rows.push(l)))}(D,I,S,s,l,n,j);f="y"+j+(1===X?"":"a"+s),b.getResult(_,f),m[f]={colType:0,iY:j,y:D,iA:s,a:S,iRows:R,rows:v}}}I=D}if(null!==I)for(s=0;s<X;s++)se(N-1,I,I,s);if(W)for(s=0;s<X;s++)f="t"+(1===X?"":"a"+s),(w=te[s]).getResult(_,f),y=w.groupInfo,m[f]={colType:2,iA:s,a:H[s],iRows:y.iRows,rows:y.rows,iYs:y.iYs,ys:y.ys};K.push(_)}if(z.footerTotals||z.colTotals){for(P=K.length,n=0;n<U;n++)A["x"+n]=L[n].footerText||"";for(n=U;n<$.length;n++){for(f=$[n].name,b=new r(z.footerAggregator||"sum",T,a),p=0;p<P;p++)_=K[p],b.calc(_[f],f,_,p,K);b.getResult(A,f)}}return a.colHeaders=J,{colModel:$,additionalProperties:ee,options:a,rows:K,groupOptions:M,groupHeaders:J,summary:A}},jqPivot:function(t,r,i,a){return this.each(function(){function l(){var a,l=d.pivotSetup.call(s,t,r),c=l.groupHeaders,u=function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(l.summary)>0,p=l.groupOptions.groupingView,f=o.from.call(n,l.rows);if(!r.skipSortByX)for(a=0;a<p.groupField.length;a++)f.orderBy(p.groupField[a],null!=i&&i.groupingView&&null!=i.groupingView.groupOrder&&"desc"===i.groupingView.groupOrder[a]?"d":"a","text","");if(r.data=t,d.call(s,e.extend(!0,{datastr:e.extend(f.select(),u?{userdata:l.summary}:{}),datatype:"jsonstring",footerrow:u,userDataOnFooter:u,colModel:l.colModel,additionalProperties:l.additionalProperties,pivotOptions:l.options,viewrecords:!0,sortname:r.xDimension[0].dataName},l.groupOptions,i||{})),c.length)for(a=0;a<c.length;a++)c[a]&&c[a].groupHeaders.length&&d.setGroupHeaders.call(s,c[a]);r.frozenStaticCols&&d.setFrozenColumns.call(s)}var n=this,s=e(n),d=e.fn.jqGrid;"string"==typeof t?e.ajax(e.extend({url:t,dataType:"json",success:function(e){t=o.getAccessor(e,a&&a.reader?a.reader:"rows"),l()}},a||{})):l()})}});var z=function(){var t=e.makeArray(arguments);return t[0]="subGrid"+t[0].charAt(0).toUpperCase()+t[0].substring(1),t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)},P=function(t,r){return this.each(function(){if(this.grid&&null!=t&&!0===this.p.subGrid){var i=e(this).jqGrid("getInd",t,!0);e(i).find(">td."+r).trigger("click")}})};o.extend({setSubGrid:function(){return this.each(function(){var t,r=this.p,i=e(this),a=r.subGridModel[0],l=function(e){return i.jqGrid("getIconRes",e)};if(r.subGridOptions=e.extend({commonIconClass:l("subgrid.common"),plusicon:l("subgrid.plus"),minusicon:l("subgrid.minus"),openicon:l("rtl"===r.direction?"subgrid.openRtl":"subgrid.openLtr"),expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0},r.subGridOptions||{}),r.colNames.unshift(""),r.colModel.unshift({name:"subgrid",width:o.cell_width?r.subGridWidth+r.cellLayout:r.subGridWidth,labelClasses:"jqgh_subgrid",sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0,frozen:!0}),a)for(a.align=e.extend([],a.align||[]),t=0;t<a.name.length;t++)a.align[t]=a.align[t]||"left"})},addSubGridCell:function(t,r,i,a){var l=this[0],n=l.p.subGridOptions,s=!e.isFunction(n.hasSubgrid)||n.hasSubgrid.call(l,{rowid:i,iRow:r,iCol:t,data:a});return null==l.p?"":"<td role='gridcell' class='"+D.getGuiStyles.call(this,"subgrid.tdStart",s?"ui-sgcollapsed sgcollapsed":"")+"' "+l.formatCol(t,r)+">"+(s?"<div class='"+D.getGuiStyles.call(this,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(this,"subgrid.button","sgbutton")+"'><span class='"+o.mergeCssClasses(n.commonIconClass,n.plusicon)+"'></span></a></div>":"&nbsp;")+"</td>"},addSubGrid:function(t,r){return this.each(function(){var i,a,l,n=this,s=n.p,d=s.subGridModel[0],u=function(e,t){return D.getGuiStyles.call(n,"subgrid."+e,t||"")},p=u("thSubgrid","ui-th-subgrid ui-th-column ui-th-"+s.direction),f=u("rowSubTable","ui-subtblcell"),h=u("row","ui-subgrid ui-row-"+s.direction),g=u("tdWithIcon","subgrid-cell"),m=u("tdData","subgrid-data"),v=function(t,r,i){var a=d.align[i],o=e("<td"+(a?" style='text-align:"+a+";'":"")+"></td>").html(r);t.append(o)},b=function(t,r){var i=s.xmlReader.subgrid;e(i.root+" "+i.row,t).each(function(){var t,a,o=e("<tr class='"+f+"'></tr>");if(!0===i.repeatitems)e(i.cell,this).each(function(t){v(o,e(this).text()||"&#160;",t)});else if(t=d.mapping||d.name)for(a=0;a<t.length;a++)v(o,e(t[a],this).text()||"&#160;",a);r.append(o)})},w=function(t,r){var i,a,l,n,c,u=s.jsonReader.subgrid,p=o.getAccessor(t,u.root);if(null!=p)for(a=0;a<p.length;a++){if(c=p[a],i=e("<tr class='"+f+"'></tr>"),!0===u.repeatitems)for(u.cell&&(c=c[u.cell]),l=0;l<c.length;l++)v(i,c[l]||"&#160;",l);else if((n=d.mapping||d.name).length)for(l=0;l<n.length;l++)v(i,c[n[l]]||"&#160;",l);r.append(i)}},y=function(t,r,i){var a,o,l=u("legacyTable","ui-jqgrid-legacy-subgrid"+(!0===s.altRows&&e(n).jqGrid("isBootstrapGuiStyle")?" table-striped":"")),f=e("<table"+(l?" style='width:1px' role='presentation' class='"+l+"'":"")+"><thead></thead><tbody></tbody></table>"),h=e("<tr></tr>");for(n.grid.endReq.call(n),o=0;o<d.name.length;o++)a=e("<th class='"+p+"'></th>").html(d.name[o]).width(d.width[o]),h.append(a);return h.appendTo(f[0].tHead),i(t,e(f[0].tBodies[0])),e("#"+c(s.id+"_"+r)).append(f),!1},x=function(t){var r,i,a=e(t).attr("id"),l={nd_:(new Date).getTime()};if(l[s.prmNames.subgridid]=a,!d)return!1;if(d.params)for(i=0;i<d.params.length;i++)void 0!==(r=s.iColByName[d.params[i]])&&(l[s.colModel[r].name]=e(t.cells[r]).text().replace(/\&#160\;/gi,""));if(!n.grid.hDiv.loading)switch(n.grid.beginReq.call(n),s.subgridtype||(s.subgridtype=s.datatype),e.isFunction(s.subgridtype)?s.subgridtype.call(n,l):s.subgridtype=s.subgridtype.toLowerCase(),s.subgridtype){case"xml":case"json":e.ajax(e.extend({type:s.mtype,url:e.isFunction(s.subGridUrl)?s.subGridUrl.call(n,l):s.subGridUrl,dataType:s.subgridtype,context:a,data:o.serializeFeedback.call(n,s.serializeSubGridData,"jqGridSerializeSubGridData",l),success:function(e){y(e,this,"xml"===s.subgridtype?b:w)},error:function(t,r,i){var a=void 0===s.loadSubgridError?s.loadError:s.loadSubgridError;n.grid.endReq.call(n),e.isFunction(a)&&a.call(n,t,r,i),s.subGridOptions.noEmptySubgridOnError||y(null,this,"xml"===s.subgridtype?b:w)}},o.ajaxOptions,s.ajaxSubgridOptions||{}))}return!1},C=1;if(n.grid){for(i=n.rows.length,void 0!==r&&r>0&&(C=r,i=r+1);C<i;)a=n.rows[C],e(a).hasClass("jqgrow")&&(l=e(a.cells[t])).hasClass("ui-sgcollapsed")&&(s.scroll&&l.off("click"),l.on("click",function(){var r,i=e(this).parent("tr")[0],a=i.nextSibling,l=i.id,d=s.id+"_"+l,c=function(e){return o.mergeCssClasses(s.subGridOptions.commonIconClass,s.subGridOptions[e])},u=1;if(e.each(s.colModel,function(){!0!==this.hidden&&"rn"!==this.name&&"cb"!==this.name||u++}),e(this).hasClass("sgcollapsed")){if(!0===s.subGridOptions.reloadOnExpand||!1===s.subGridOptions.reloadOnExpand&&!e(a).hasClass("ui-subgrid")){if(r=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",!z.call(n,"beforeExpand",d,l))return;e(i).after("<tr role='row' class='"+h+"'>"+r+"<td class='"+g+"'><span class='"+c("openicon")+"'></span></td><td colspan='"+parseInt(s.colNames.length-u,10)+"' class='"+m+"'><div id='"+d+"' class='tablediv'></div></td></tr>"),e(n).triggerHandler("jqGridSubGridRowExpanded",[d,l]),e.isFunction(s.subGridRowExpanded)?s.subGridRowExpanded.call(n,d,l):x(i)}else e(a).show();e(this).html("<div class='"+D.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+c("minusicon")+"'></span></a></div>").removeClass("sgcollapsed").addClass("sgexpanded"),s.subGridOptions.selectOnExpand&&e(n).jqGrid("setSelection",l)}else if(e(this).hasClass("sgexpanded")){if(!z.call(n,"beforeCollapse",d,l))return;!0===s.subGridOptions.reloadOnExpand?e(a).remove(".ui-subgrid"):e(a).hasClass("ui-subgrid")&&e(a).hide(),e(this).html("<div class='"+D.getGuiStyles.call(n,"subgrid.buttonDiv","sgbutton-div")+"'><a role='button' class='"+D.getGuiStyles.call(n,"subgrid.button","sgbutton")+"'><span class='"+c("plusicon")+"'></span></a></div>").removeClass("sgexpanded").addClass("sgcollapsed"),s.subGridOptions.selectOnCollapse&&e(n).jqGrid("setSelection",l)}return!1})),C++;!0===s.subGridOptions.expandOnLoad&&e(n.rows).filter(".jqgrow").each(function(t,r){e(r.cells[0]).click()}),n.subGridXml=function(e,t){return y(e,t,b)},n.subGridJson=function(e,t){return y(e,t,w)}}})},expandSubGridRow:function(e){return P.call(this,e,"sgcollapsed")},collapseSubGridRow:function(e){return P.call(this,e,"sgexpanded")},toggleSubGridRow:function(e){return P.call(this,e,"ui-sgcollapsed")}}),window.tableToGrid=function(t,r){e(t).each(function(){var t,i,a,o,l,n,s,d,c=this,u=e(this),p=[],f=[],h=[],g=[],m=[];if(!c.grid){for(u.width("99%"),t=u.width(),i=e("tr td:first-child input[type=checkbox]:first",u),a=e("tr td:first-child input[type=radio]:first",u),l=!(o=i.length>0)&&a.length>0,n=o||l,e("th",u).each(function(){0===p.length&&n?(p.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),f.push("__selection__")):(p.push({name:e(this).attr("id")||e.trim(e.jgrid.stripHtml(e(this).html())).split(" ").join("_"),index:e(this).attr("id")||e.trim(e.jgrid.stripHtml(e(this).html())).split(" ").join("_"),width:e(this).width()||150}),f.push(e(this).html()))}),e("tbody > tr",u).each(function(){var t={},r=0;e("td",e(this)).each(function(){if(0===r&&n){var i=e("input",e(this)),a=i.attr("value");g.push(a||h.length),i.is(":checked")&&m.push(a),t[p[r].name]=i.attr("value")}else t[p[r].name]=e(this).html();r++}),r>0&&h.push(t)}),u.empty(),u.jqGrid(e.extend({datatype:"local",width:t,colNames:f,colModel:p,multiselect:o},r||{})),s=0;s<h.length;s++)d=null,g.length>0&&(d=g[s])&&d.replace&&(d=encodeURIComponent(d).replace(/[.\-%]/g,"_")),null===d&&(d=e.jgrid.randId()),u.jqGrid("addRowData",d,h[s]);for(s=0;s<m.length;s++)u.jqGrid("setSelection",m[s])}})};var L=function(){var t=e.makeArray(arguments);return t[0]="treeGrid"+t[0].charAt(0).toUpperCase()+t[0].substring(1),t.unshift(""),t.unshift(""),t.unshift(this.p),o.feedback.apply(this,t)},V=function(e,t){var r=t[e.treeReader.icon_field],i=e.treeIcons,a=i.plus+" tree-plus",o=i.minus+" tree-minus";return r&&"string"==typeof r&&2===(r=r.split(",")).length&&(o=r[0],a=r[1]),{expanded:o,collapsed:a,common:i.commonIconClass}};o.extend({setTreeNode:function(){return this.each(function(){var t=this,r=e(t),i=t.p;if(t.grid&&i.treeGrid){var a=i.treeReader.expanded_field,o=i.treeReader.leaf_field;r.off("jqGridBeforeSelectRow.setTreeNode"),r.on("jqGridBeforeSelectRow.setTreeNode",function(t,l,n){if(null!=n){var s=e(n.target),d=s.closest("tr.jqgrow>td"),c=d.parent(),u=function(){var e=i.data[i._index[h(i.idPrefix,l)]],t=e[a]?"collapse":"expand";e[o]||(D[t+"Row"].call(r,e,c),D[t+"Node"].call(r,e,c))};return s.is("div.treeclick")?u():i.ExpandColClick&&d.length>0&&s.closest("span.cell-wrapper",d).length>0&&u(),!0}})}})},setTreeGrid:function(){return this.each(function(){var t,r,i,a=this,o=a.p,l=[],n=["leaf_field","expanded_field","loaded"];if(o.treeGrid){o.treedatatype||e.extend(a.p,{treedatatype:o.datatype}),o.subGrid=!1,o.altRows=!1,o.pgbuttons=!1,o.pginput=!1,o.gridview=!0,null===o.rowTotal&&(o.rowNum=o.maxRowNum),o.rowList=[],o.treeIcons.plus="rtl"===o.direction?o.treeIcons.plusRtl:o.treeIcons.plusLtr,"nested"===o.treeGridModel?o.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.treeReader):"adjacency"===o.treeGridModel&&(o.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},o.treeReader));for(r in o.colModel)if(o.colModel.hasOwnProperty(r)){t=o.colModel[r].name;for(i in o.treeReader)o.treeReader.hasOwnProperty(i)&&o.treeReader[i]===t&&l.push(t)}e.each(o.treeReader,function(t){var r=String(this);r&&-1===e.inArray(r,l)&&(e.inArray(t,n)>=0?o.additionalProperties.push({name:r,search:!1,convert:function(e){return!0===e||"true"===String(e).toLowerCase()||"1"===String(e)||e}}):o.additionalProperties.push(r))})}})},expandRow:function(t){this.each(function(){var r=this,i=e(r),a=r.p;if(r.grid&&a.treeGrid){var o=a.treeReader.expanded_field,l=t[a.localReader.id];if(L.call(r,"beforeExpandRow",{rowid:l,item:t})){var n=D.getNodeChildren.call(i,t);e(n).each(function(){var t=a.idPrefix+m(this,a.localReader.id);e(D.getGridRowById.call(i,t)).css("display",""),this[o]&&D.expandRow.call(i,this)}),L.call(r,"afterExpandRow",{rowid:l,item:t})}}})},collapseRow:function(t){this.each(function(){var r=this,i=e(r),a=r.p;if(r.grid&&a.treeGrid){var o=a.treeReader.expanded_field,l=t[a.localReader.id];if(L.call(r,"beforeCollapseRow",{rowid:l,item:t})){var n=D.getNodeChildren.call(i,t);e(n).each(function(){var t=a.idPrefix+m(this,a.localReader.id);e(D.getGridRowById.call(i,t)).css("display","none"),this[o]&&D.collapseRow.call(i,this)}),L.call(r,"afterCollapseRow",{rowid:l,item:t})}}})},getRootNodes:function(){var t=[];return this.each(function(){var r=this,i=r.p;if(r.grid&&i.treeGrid)switch(i.treeGridModel){case"nested":var a=i.treeReader.level_field;e(i.data).each(function(){parseInt(this[a],10)===parseInt(i.tree_root_level,10)&&t.push(this)});break;case"adjacency":var o=i.treeReader.parent_id_field;e(i.data).each(function(){null!==this[o]&&"null"!==String(this[o]).toLowerCase()||t.push(this)})}}),t},getNodeDepth:function(t){var r=null;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid)switch(a.treeGridModel){case"nested":var o=a.treeReader.level_field;r=parseInt(t[o],10)-parseInt(a.tree_root_level,10);break;case"adjacency":r=D.getNodeAncestors.call(e(i),t).length}}),r},getNodeParent:function(t){var r=this[0];if(!r||!r.grid||null==r.p||!r.p.treeGrid||null==t)return null;var i=r.p,a=i.treeReader,o=t[a.parent_id_field];if("nested"===i.treeGridModel){var l=null,n=a.left_field,s=a.right_field,d=a.level_field,c=parseInt(t[n],10),u=parseInt(t[s],10),p=parseInt(t[d],10);return e(i.data).each(function(){if(parseInt(this[d],10)===p-1&&parseInt(this[n],10)<c&&parseInt(this[s],10)>u)return l=this,!1}),l}if(null===o||"null"===o)return null;var f=i._index[o];return void 0!==f?i.data[f]:null},getNodeChildren:function(t){var r=[];return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid)switch(a.treeGridModel){case"nested":var o=a.treeReader.left_field,l=a.treeReader.right_field,n=a.treeReader.level_field,s=parseInt(t[o],10),d=parseInt(t[l],10),c=parseInt(t[n],10);e(a.data).each(function(){parseInt(this[n],10)===c+1&&parseInt(this[o],10)>s&&parseInt(this[l],10)<d&&r.push(this)});break;case"adjacency":var u=a.treeReader.parent_id_field,p=a.localReader.id;e(a.data).each(function(){String(this[u])===String(t[p])&&r.push(this)})}}),r},getFullTreeNode:function(t){var r=[];return this.each(function(){var i,a=this,o=a.p;if(a.grid&&o.treeGrid)switch(o.treeGridModel){case"nested":var l=o.treeReader.left_field,n=o.treeReader.right_field,s=o.treeReader.level_field,d=parseInt(t[l],10),c=parseInt(t[n],10),u=parseInt(t[s],10);e(o.data).each(function(){parseInt(this[s],10)>=u&&parseInt(this[l],10)>=d&&parseInt(this[l],10)<=c&&r.push(this)});break;case"adjacency":if(t){r.push(t);var p=o.treeReader.parent_id_field,f=o.localReader.id;e(o.data).each(function(){var e;for(i=r.length,e=0;e<i;e++)if(String(r[e][f])===String(this[p])){r.push(this);break}})}}}),r},getNodeAncestors:function(t){var r=[];return this.each(function(){var i=this,a=e(i),o=D.getNodeParent;if(i.grid&&i.p.treeGrid)for(var l=o.call(a,t);l;)r.push(l),l=o.call(a,l)}),r},isVisibleNode:function(t){var r=!0;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid){var o=D.getNodeAncestors.call(e(i),t),l=a.treeReader.expanded_field;e(o).each(function(){if(!(r=r&&this[l]))return!1})}}),r},isNodeLoaded:function(t){var r;return this.each(function(){var i=this,a=i.p;if(i.grid&&a.treeGrid){var o=a.treeReader.leaf_field,l=a.treeReader.loaded;r=void 0!==t&&(void 0!==t[l]?t[l]:!!(t[o]||D.getNodeChildren.call(e(i),t).length>0))}}),r},expandNode:function(t){return this.each(function(){var r,i,a,o=this,l=o.p;if(o.grid&&l.treeGrid){var n=l.treeReader;if(!t[n.expanded_field]){if(r=m(t,l.localReader.id),!L.call(o,"beforeExpandNode",{rowid:r,item:t}))return;i=e("#"+l.idPrefix+c(r),o.grid.bDiv)[0],t[n.expanded_field]=!0,a=V(l,t),e("div.treeclick",i).removeClass(a.collapsed).addClass(a.common).addClass(a.expanded),"local"===l.treedatatype||D.isNodeLoaded.call(e(o),l.data[l._index[r]])||o.grid.hDiv.loading||(l.treeANode=i.rowIndex,l.datatype=l.treedatatype,D.setGridParam.call(e(o),{postData:"nested"===l.treeGridModel?{nodeid:r,n_level:t[n.level_field],n_left:t[n.left_field],n_right:t[n.right_field]}:{nodeid:r,n_level:t[n.level_field],parentid:t[n.parent_id_field]}}),e(o).trigger("reloadGrid"),t[n.loaded]=!0,D.setGridParam.call(e(o),{postData:"nested"===l.treeGridModel?{nodeid:"",n_level:"",n_left:"",n_right:""}:{nodeid:"",n_level:"",parentid:""}})),L.call(o,"afterExpandNode",{rowid:r,item:t})}}})},collapseNode:function(t){return this.each(function(){var r,i=this,a=i.p;if(i.grid&&a.treeGrid){var o=a.treeReader.expanded_field;if(t[o]){var l=m(t,a.localReader.id);if(!L.call(i,"beforeCollapseNode",{rowid:l,item:t}))return;t[o]=!1,r=V(a,t),e("#"+a.idPrefix+c(l),i.grid.bDiv).find("div.treeclick").removeClass(r.expanded).addClass(r.common).addClass(r.collapsed),(!0===a.unloadNodeOnCollapse||e.isFunction(a.unloadNodeOnCollapse)&&a.unloadNodeOnCollapse.call(i,t))&&(t[a.treeReader.loaded]=!1,e(i).jqGrid("delTreeNode",l,!0)),L.call(i,"afterCollapseNode",{rowid:l,item:t})}}})},SortTree:function(t,r,i,a){return this.each(function(){var l=this,n=l.p,s=e(l);if(l.grid&&n.treeGrid){var d,u,p,f=[],h=D.getRootNodes.call(s),g=o.from.call(l,h);g.orderBy(t,r,i,a);var v=g.select();for(d=0,u=v.length;d<u;d++)p=v[d],f.push(p),D.collectChildrenSortTree.call(s,f,p,t,r,i,a);e.each(f,function(t){var r=m(this,n.localReader.id);e(l.rows[t]).after(s.find(">tbody>tr#"+c(r)))})}})},collectChildrenSortTree:function(t,r,i,a,l,n){return this.each(function(){var s=this,d=e(s);if(s.grid&&s.p.treeGrid){var c,u,p,f=D.getNodeChildren.call(d,r),h=o.from.call(s,f);h.orderBy(i,a,l,n);var g=h.select();for(c=0,u=g.length;c<u;c++)p=g[c],t.push(p),D.collectChildrenSortTree.call(d,t,p,i,a,l,n)}})},setTreeRow:function(t,r){var i=!1;return this.each(function(){var a=this;a.grid&&a.p.treeGrid&&(i=D.setRowData.call(e(a),t,r))}),i},delTreeNode:function(t,r){return this.each(function(){var i,a,l,n,s,d=this,c=d.p,u=c.localReader.id,p=e(d),f=c.treeReader.left_field,h=c.treeReader.right_field;if(d.grid&&c.treeGrid){var g=c._index[t];if(void 0!==g){a=(i=parseInt(c.data[g][h],10))-parseInt(c.data[g][f],10)+1;var m=D.getFullTreeNode.call(p,c.data[g]);if(m.length>0)for(s=0;s<m.length;s++)r&&t===m[s][u]||D.delRowData.call(p,m[s][u]);if("nested"===c.treeGridModel){if((l=o.from.call(d,c.data).greater(f,i,{stype:"integer"}).select()).length)for(n in l)l.hasOwnProperty(n)&&(l[n][f]=parseInt(l[n][f],10)-a);if((l=o.from.call(d,c.data).greater(h,i,{stype:"integer"}).select()).length)for(n in l)l.hasOwnProperty(n)&&(l[n][h]=parseInt(l[n][h],10)-a)}}}})},addChildNode:function(t,r,i,a){return this.each(function(){if(i){var l,n,s,d,c,u,p,f=this,h=f.p,g=e(f),m=D.getInd,v=h.treeIcons.minus+" tree-minus",b=r,w=h.treeReader.expanded_field,y=h.treeReader.leaf_field,x=h.treeReader.level_field,C=h.treeReader.parent_id_field,j=h.treeReader.left_field,q=h.treeReader.right_field,R=h.treeReader.loaded;void 0===a&&(a=!1),null==t&&(t=o.randId());var S=m.call(g,r);if(u=!1,void 0===r||null===r||""===r)r=null,b=null,l="last",d=h.tree_root_level;else{l="after",n=h._index[r],s=h.data[n],r=s[h.localReader.id],c=m.call(g,r),d=parseInt(s[x],10)+1;var _=D.getFullTreeNode.call(g,s);if(_.length){var I,F,G;for(I=0;I<_.length;I++)G=_[I][h.localReader.id],(F=m.call(g,G))>c&&(c=F,b=G)}s[y]&&(u=!0,s[w]=!0,e(f.rows[S]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(h.treeIcons.leaf+" tree-leaf").addClass(h.treeIcons.commonIconClass).addClass(v),h.data[n][y]=!1,s[R]=!0)}if(void 0===i[w]&&(i[w]=!1),void 0===i[R]&&(i[R]=!1),i[x]=d,void 0===i[y]&&(i[y]=!0),"adjacency"===h.treeGridModel&&(i[C]=r),"nested"===h.treeGridModel){var k,O,N;if(null!==r){if(p=parseInt(s[q],10),k=o.from.call(f,h.data),k=k.greaterOrEquals(q,p,{stype:"integer"}),(O=k.select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][j]=O[N][j]>p?parseInt(O[N][j],10)+2:O[N][j],O[N][q]=O[N][q]>=p?parseInt(O[N][q],10)+2:O[N][q]);i[j]=p,i[q]=p+1}else{if(p=parseInt(D.getCol.call(g,q,!1,"max"),10),(O=o.from.call(f,h.data).greater(j,p,{stype:"integer"}).select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][j]=parseInt(O[N][j],10)+2);if((O=o.from.call(f,h.data).greater(q,p,{stype:"integer"}).select()).length)for(N in O)O.hasOwnProperty(N)&&(O[N][q]=parseInt(O[N][q],10)+2);i[j]=p+1,i[q]=p+2}}(null===r||D.isNodeLoaded.call(g,s)||u)&&D.addRowData.call(g,t,i,l,b),s&&!s[w]&&a&&e(f.rows[S]).find("div.treeclick").click()}})}});var H="mousedown",W="mousemove",U="mouseup",Y=function(e){var t=e.originalEvent.targetTouches;return t?(t=t[0],{x:t.pageX,y:t.pageY}):{x:e.pageX,y:e.pageY}},X={drag:function(e){var t=e.data,r=t.e,i=t.dnr,a=t.ar,o=t.dnrAr,l=Y(e);return"move"===i.k?r.css({left:i.X+l.x-i.pX,top:i.Y+l.y-i.pY}):(r.css({width:Math.max(l.x-i.pX+i.W,0),height:Math.max(l.y-i.pY+i.H,0)}),o&&a.css({width:Math.max(l.x-o.pX+o.W,0),height:Math.max(l.y-o.pY+o.H,0)})),!1},stop:function(){e(t).off(W,X.drag).off(U,X.stop)}},Q=function(r,i,a,o){return r.each(function(){(i=i?e(i,r):r).on(H,{e:r,k:a},function(r){var i,a,l,n,s,d,c=r.data,u={},p=function(e,t){return parseInt(e.css(t),10)||!1},f=function(e){return p(a,e)},h=function(e){return p(n,e)},g=Y(r);if(!e(r.target).hasClass("ui-jqdialog-titlebar-close")&&!e(r.target).parent().hasClass("ui-jqdialog-titlebar-close")){if(a=c.e,n=!!o&&e(o),"relative"!==a.css("position"))try{a.position(u)}catch(e){}if(l={X:u.left||f("left")||0,Y:u.top||f("top")||0,W:f("width")||a[0].scrollWidth||0,H:f("height")||a[0].scrollHeight||0,pX:g.x,pY:g.y,k:c.k},s=!(!n||"move"===c.k)&&{X:u.left||h("left")||0,Y:u.top||h("top")||0,W:n[0].offsetWidth||h("width")||0,H:n[0].offsetHeight||h("height")||0,pX:g.x,pY:g.y,k:c.k},(i=a.find("input.hasDatepicker")).length>0)try{i.datepicker("hide")}catch(e){}return d={e:a,dnr:l,ar:n,dnrAr:s},e(t).on(W,d,X.drag),e(t).on(U,d,X.stop),!1}})})};window.PointerEvent?(H+=".jqGrid pointerdown.jqGrid",W+=".jqGrid pointermove.jqGrid",U+=".jqGrid pointerup.jqGrid"):window.MSPointerEvent?(H+=".jqGrid mspointerdown.jqGrid",W+=".jqGrid mspointermove.jqGrid",U+=".jqGrid mspointerup"):(H+=".jqGrid touchstart.jqGrid",W+=".jqGrid touchmove.jqGrid",U+=".jqGrid touchend.jqGrid"),e.jqDnR=X,e.fn.jqDrag=function(e){return Q(this,e,"move")},e.fn.jqResize=function(e,t){return Q(this,e,"resize",t)};var J,Z=0,$=[],K=function(t){try{e(":input:visible",t.w).first().focus()}catch(e){}},ee=function(e){K(e)},te=function(t){var r=J[$[$.length-1]],i=!e(t.target).parents(".jqmID"+r.s)[0],a=e(t.target).offset(),o=void 0!==t.pageX?t.pageX:a.left,l=void 0!==t.pageY?t.pageY:a.top,n=function(){var t=!1;return e(".jqmID"+r.s).each(function(){var r=e(this),i=r.offset();if(i.top<=l&&l<=i.top+r.height()&&i.left<=o&&o<=i.left+r.width())return t=!0,!1}),t};return!("mousedown"===t.type||!n())||("mousedown"===t.type&&i&&(n()&&(i=!1),i&&!e(t.target).is(":input")&&K(r)),!i)},re=function(r){e(t)[r]("keypress keydown mousedown",te)},ie=function(t,r,i){return t.each(function(){var t=this._jqm;e(r).each(function(){this[i]||(this[i]=[],e(this).click(function(){var e,t,r,i=["jqmShow","jqmHide"];for(e=0;e<i.length;e++){t=i[e];for(r in this[t])this[t].hasOwnProperty(r)&&J[this[t][r]]&&J[this[t][r]].w[t](this)}return!1})),this[i].push(t)})})};e.fn.jqm=function(t){var r={overlay:50,closeoverlay:!1,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:!1,ajaxText:"",target:!1,modal:!1,toTop:!1,onShow:!1,onHide:!1,onLoad:!1};return this.each(function(){if(this._jqm)return J[this._jqm].c=e.extend({},J[this._jqm].c,t),J[this._jqm].c;Z++,this._jqm=Z,J[Z]={c:e.extend(r,e.jqm.params,t),a:!1,w:e(this).addClass("jqmID"+Z),s:Z},r.trigger&&e(this).jqmAddTrigger(r.trigger)})},e.fn.jqmAddClose=function(e){return ie(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return ie(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,r){var i,a,o,l,n,s=J[t],d=s.c,c=s.w.parent().offset(),u="."+d.closeClass,p=parseInt(s.w.css("z-index"),10);return p=p>0?p:3e3,i=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":p-1,opacity:d.overlay/100}),!s.a&&(s.t=r,s.a=!0,s.w.css("z-index",p),e(s.w[0].ownerDocument).data("ui-dialog-overlays")&&s.w.addClass("ui-dialog"),d.modal?($[0]||setTimeout(function(){re("bind")},1),$.push(t)):d.overlay>0?d.closeoverlay&&s.w.jqmAddClose(i):i=!1,s.o=!!i&&i.addClass(d.overlayClass).prependTo("body"),d.ajax?(a=d.target||s.w,o=d.ajax,a="string"==typeof a?e(a,s.w):e(a),o="@"===o.substr(0,1)?e(r).attr(o.substring(1)):o,a.html(d.ajaxText).load(o,function(){d.onLoad&&d.onLoad.call(this,s),u&&s.w.jqmAddClose(e(u,s.w)),ee(s)})):u&&s.w.jqmAddClose(e(u,s.w)),d.toTop&&s.o&&(c=s.w.parent().offset(),l=parseFloat(s.w.css("left")||0),n=parseFloat(s.w.css("top")||0),s.w.before('<span id="jqmP'+s.w[0]._jqm+'"></span>').insertAfter(s.o),s.w.css({top:c.top+n,left:c.left+l})),d.onShow?d.onShow(s):s.w.show(),ee(s),!1)},close:function(t){var r=J[t];return!!r.a&&(r.a=!1,$[0]&&($.pop(),$[0]||re("unbind")),r.c.toTop&&r.o&&e("#jqmP"+r.w[0]._jqm).after(r.w).remove(),r.c.onHide?r.c.onHide(r):(r.w.hide(),r.o&&r.o.remove()),!1)},params:{}},J=e.jqm.hash,e.fmatter=e.fmatter||{};var ae=e.fmatter,oe=function(e,t){var r=e.formatoptions||{};return r.hasOwnProperty(t)?r[t]:(e.editoptions||{})[t]},le=function(e){return String(e).replace(/\'/g,"&#39;")},ne=function(e){var t,r,i=e.colModel||e.cm,a=!1!==i.title?" title='"+le(e.colName||i.name)+"'":"",l=function(e){return oe(i,e)},n=l("checkedClass"),s=l("uncheckedClass"),d=l("value"),c="string"==typeof d?d.split(":")[0]||"Yes":"Yes",u="string"==typeof d?d.split(":")[1]||"No":"No",p=function(e){return"<i class='"+le(e)+"'"+a+"></i>"},f=l("disabled");return void 0===f&&(f=o.formatter.checkbox.disabled),!0===f&&D.isInCommonIconClass.call(this,"fa")?(t=p(n=n||"fa fa-check-square-o fa-lg"),r=p(s||"fa fa-square-o fa-lg")):!0===f&&D.isInCommonIconClass.call(this,"glyphicon")?(t=p(n=n||"glyphicon glyphicon-check"),r=p(s||"glyphicon glyphicon-unchecked")):(n="",t="<input type='checkbox' checked='checked'"+(a+=!0===f?" disabled='disabled'":"")+" />",r="<input type='checkbox'"+a+" />"),{checkedClasses:n,checked:t,unchecked:r,yes:c,no:u}},se={1:1,x:1,true:1,yes:1,y:1,on:1},de={0:1,false:1,no:1,n:1,off:1};e.extend(!0,o,{formatter:{date:{parseRe:/[#%\\\/:_;.,\t\s\-]/,masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO"},reformatAfterEdit:!0,userLocalTime:!1},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:!0,defaultValue:!1},idName:"id"},cmTemplate:{integerStr:{formatter:"integer",align:"right",sorttype:"integer",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},integer:{formatter:"integer",align:"right",sorttype:"integer",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseInt(t,10)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},numberStr:{formatter:"number",align:"right",sorttype:"number",searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},number:{formatter:"number",align:"right",sorttype:"number",convertOnSave:function(e){var t=e.newValue;return isNaN(t)?t:parseFloat(t)},searchoptions:{sopt:["eq","ne","lt","le","gt","ge"]}},booleanCheckbox:{align:"center",formatter:"checkbox",sorttype:"boolean",edittype:"checkbox",editoptions:{value:"true:false",defaultValue:"false"},convertOnSave:function(e){var t=e.newValue,r=ne.call(this,e),i=String(t).toLowerCase();return se[i]||i===r.yes.toLowerCase()?t=!0:(de[i]||i===r.no.toLowerCase())&&(t=!1),t},stype:"checkbox",searchoptions:{sopt:["eq"],value:"true:false"}},actions:function(){return{formatter:"actions",width:(null!=this.p&&(D.isInCommonIconClass.call(this,"fa")||D.isInCommonIconClass.call(this,"glyphicon"))?e(this).jqGrid("isBootstrapGuiStyle")?45:39:40)+(o.cellWidth()?5:0),align:"center",label:"",autoResizable:!1,frozen:!0,fixed:!0,hidedlg:!0,resizable:!1,sortable:!1,search:!1,editable:!1,viewable:!1}}}}),o.cmTemplate.booleanCheckboxFa=o.cmTemplate.booleanCheckbox,e.extend(ae,{isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isValue:function(e){return this.isObject(e)||"string"==typeof e||this.isNumber(e)||"boolean"==typeof e},isEmpty:function(t){return!("string"!=typeof t&&this.isValue(t)||this.isValue(t)&&""!==(t=e.trim(t).replace(/&nbsp;/gi,"").replace(/&#160;/gi,"")))},NumberFormat:function(e,t){var r=ae.isNumber;if(r(e)||(e*=1),r(e)){var i,a=e<0,o=String(e),l=t.decimalSeparator||".";if(r(t.decimalPlaces)){var n=t.decimalPlaces,s=Math.pow(10,n);if(o=String(Math.round(e*s)/s),i=o.lastIndexOf("."),n>0)for(i<0?i=(o+=l).length-1:"."!==l&&(o=o.replace(".",l));o.length-1-i<n;)o+="0"}if(t.thousandsSeparator){var d=t.thousandsSeparator;i=(i=o.lastIndexOf(l))>-1?i:o.length;var c,u=void 0===t.decimalSeparator?"":o.substring(i),p=-1;for(c=i;c>0;c--)++p%3==0&&c!==i&&(!a||c>1)&&(u=d+u),u=o.charAt(c-1)+u;o=u}return o}return e}});var ce=function(t,r,i,a,o){var l=r;i=e.extend({},S.call(e(this),"formatter"),i);try{l=e.fn.fmatter[t].call(this,r,i,a,o)}catch(e){}return l};e.fn.fmatter=ce,ce.getCellBuilder=function(t,r,i){var a=null!=e.fn.fmatter[t]?e.fn.fmatter[t].getCellBuilder:null;return e.isFunction(a)?a.call(this,e.extend({},S.call(e(this),"formatter"),r),i):null};var ue=ce.defaultFormat=function(e,t){return ae.isValue(e)&&""!==e?e:t.defaultValue||"&#160;"},pe=function(e,t,r){if(void 0===e||ae.isEmpty(e)){var i=oe(r,"defaultValue");void 0===i&&(i=t.no),e=i}return e=String(e).toLowerCase(),se[e]||e===t.yes.toLowerCase()?t.checked:t.unchecked};ce.email=function(e,t){return ae.isEmpty(e)?ue(e,t):"<a href='mailto:"+le(e)+"'>"+e+"</a>"},(ce.checkbox=function(t,r){var i,a=e.extend({},r.checkbox);void 0!==r.colModel&&void 0!==r.colModel.formatoptions&&(a=e.extend({},a,r.colModel.formatoptions)),i=!0===a.disabled?'disabled="disabled"':"",(e.fmatter.isEmpty(t)||void 0===t)&&(t=e.fn.fmatter.defaultFormat(t,a));var o=String(t);return'<input type="checkbox" '+((t=((t=String(t))+"").toLowerCase()).search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"")+' value="'+t+'" offval="no" '+i+' title="'+o+'"/>'}).getCellBuilder=function(e){var t,r=e.colModel;return e.colName=e.colName||this.p.colNames[e.pos],t=ne.call(this,e),function(e){return pe(e,t,r)}},ce.checkbox.unformat=function(t,r,i){var a=ne.call(this,r),l=e(i);return(a.checkedClasses?o.hasAllClasses(l.children("i"),a.checkedClasses):l.children("input").is(":checked"))?a.yes:a.no},(ce.checkboxFontAwesome4=ce.checkbox).getCellBuilder=ce.checkbox.getCellBuilder,ce.checkboxFontAwesome4.unformat=ce.checkbox.unformat,ce.link=function(t,r){var i=r.colModel,a="",o={target:r.target};return null!=i&&(o=e.extend({},o,i.formatoptions||{})),o.target&&(a="target="+o.target),ae.isEmpty(t)?ue(t,o):"<a "+a+" href='"+le(t)+"'>"+t+"</a>"},(ce.showlink=function(t,r,i){var a,o,l,n=this,s=r.colModel,d={baseLinkUrl:r.baseLinkUrl,showAction:r.showAction,addParam:r.addParam||"",target:r.target,idName:r.idName,hrefDefaultValue:"#"},c="",u=function(a){return e.isFunction(a)?a.call(n,{cellValue:t,rowid:r.rowId,rowData:i,options:d}):a||""};return null!=s&&(d=e.extend({},d,s.formatoptions||{})),d.target&&(c="target="+u(d.target)),a=u(d.baseLinkUrl)+u(d.showAction),o=d.idName?encodeURIComponent(u(d.idName))+"="+encodeURIComponent(u(d.rowId)||r.rowId):"","object"==typeof(l=u(d.addParam))&&null!==l&&(l=(""!==o?"&":"")+e.param(l)),""==(a+=o||l?"?"+o+l:"")&&(a=u(d.hrefDefaultValue)),"string"==typeof t||ae.isNumber(t)||e.isFunction(d.cellValue)?"<a "+c+" href='"+le(a)+"'>"+(e.isFunction(d.cellValue)?u(d.cellValue):t)+"</a>":ue(t,d)}).getCellBuilder=function(t){var r={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName,hrefDefaultValue:"#"},i=t.colModel;return null!=i&&(r=e.extend({},r,i.formatoptions||{})),function(t,i,a){var o,l,n,s=this,d=i.rowId,c="",u=function(i){return e.isFunction(i)?i.call(s,{cellValue:t,rowid:d,rowData:a,options:r}):i||""};return r.target&&(c="target="+u(r.target)),o=u(r.baseLinkUrl)+u(r.showAction),l=r.idName?encodeURIComponent(u(r.idName))+"="+encodeURIComponent(u(d)||i.rowId):"","object"==typeof(n=u(r.addParam))&&null!==n&&(n=(""!==l?"&":"")+e.param(n)),""==(o+=l||n?"?"+l+n:"")&&(o=u(r.hrefDefaultValue)),"string"==typeof t||ae.isNumber(t)||e.isFunction(r.cellValue)?"<a "+c+" href='"+le(o)+"'>"+(e.isFunction(r.cellValue)?u(r.cellValue):t)+"</a>":ue(t,r)}},ce.showlink.pageFinalization=function(t){var r,i,a,o=e(this),l=this.p,n=l.colModel[t],s=this.rows,d=s.length;if(null!=n.formatoptions&&e.isFunction(n.formatoptions.onClick))for(r=0;r<d;r++)i=s[r],e(i).hasClass("jqgrow")&&(a=i.cells[t],n.autoResizable&&null!=a&&e(a.firstChild).hasClass(l.autoResizing.wrapperClassName)&&(a=a.firstChild),null!=a&&e(a.firstChild).on("click",function(r){var i=e(this).closest(".jqgrow");if(i.length>0)return n.formatoptions.onClick.call(o[0],{iCol:t,iRow:i[0].rowIndex,rowid:i.attr("id"),cm:n,cmName:n.name,cellValue:e(this).text(),a:this,event:r})}))};var fe=function(e,t){return e=t.prefix?t.prefix+e:e,t.suffix?e+t.suffix:e},he=function(t,r,i){var a=r.colModel,o=e.extend({},r[i]);return null!=a&&(o=e.extend({},o,a.formatoptions||{})),ae.isEmpty(t)?fe(o.defaultValue,o):fe(ae.NumberFormat(t,o),o)};ce.integer=function(e,t){return he(e,t,"integer")},ce.number=function(e,t){return he(e,t,"number")},ce.currency=function(e,t){return he(e,t,"currency")};var ge=function(t,r){var i=t.colModel,a=e.extend({},t[r]);null!=i&&(a=e.extend({},a,i.formatoptions||{}));var o=ae.NumberFormat,l=a.defaultValue?fe(a.defaultValue,a):"";return function(e){return ae.isEmpty(e)?l:fe(o(e,a),a)}};ce.integer.getCellBuilder=function(e){return ge(e,"integer")},ce.number.getCellBuilder=function(e){return ge(e,"number")},ce.currency.getCellBuilder=function(e){return ge(e,"currency")},(ce.date=function(t,r,i,a){var l=r.colModel,n=e.extend({},r.date);return null!=l&&(n=e.extend({},n,l.formatoptions||{})),n.reformatAfterEdit||"edit"!==a?ae.isEmpty(t)?ue(t,n):o.parseDate.call(this,n.srcformat,t,n.newformat,n):ue(t,n)}).getCellBuilder=function(t,r){var i=e.extend({},t.date);null!=t.colModel&&(i=e.extend({},i,t.colModel.formatoptions||{}));var a=o.parseDate,l=i.srcformat,n=i.newformat;return i.reformatAfterEdit||"edit"!==r?function(e){return ae.isEmpty(e)?ue(e,i):a.call(this,l,e,n,i)}:function(e){return ue(e,i)}},(ce.select=function(t,r){var i,a=[],o=r.colModel,l=e.extend({},o.editoptions||{},o.formatoptions||{}),n=l.value,s=l.separator||":",d=l.delimiter||";";if(n){var c,u=!0===l.multiple,p=[];if(u&&(p=e.map(String(t).split(","),function(t){return e.trim(t)})),"string"==typeof n){var f,h,g=n.split(d);for(f=0;f<g.length;f++)if((c=g[f].split(s)).length>2&&(c[1]=e.map(c,function(e,t){if(t>0)return e}).join(s)),h=e.trim(c[0]),l.defaultValue===h&&(i=c[1]),u)e.inArray(h,p)>-1&&a.push(c[1]);else if(h===e.trim(t)){a=[c[1]];break}}else ae.isObject(n)&&(i=n[l.defaultValue],a=u?e.map(p,function(e){return n[e]}):[void 0===n[t]?"":n[t]])}return t=a.join(", "),""!==t?t:void 0!==l.defaultValue?i:ue(t,l)}).getCellBuilder=function(t){var r,i,a,o,l=t.colModel,n=ce.defaultFormat,s=e.extend({},l.editoptions||{},l.formatoptions||{}),d=s.value,c=s.separator||":",u=s.delimiter||";",p=void 0!==s.defaultValue,f=!0===s.multiple,h={};if("string"==typeof d)for(o=(a=d.split(u)).length-1;o>=0;o--)(i=a[o].split(c)).length>2&&(i[1]=e.map(i,function(e,t){if(t>0)return e}).join(c)),h[e.trim(i[0])]=i[1];else{if(!ae.isObject(d))return function(e){return e?String(e):n(e,s)};h=d}return p&&(r=h[s.defaultValue]),f?function(t){var i,a=[],o=e.map(String(t).split(","),function(t){return e.trim(t)});for(i=0;i<o.length;i++)t=o[i],h.hasOwnProperty(t)&&a.push(h[t]);return t=a.join(", "),""!==t?t:p?r:n(t,s)}:function(e){var t=h[String(e)];return""!==t&&void 0!==t?t:p?r:n(e,s)}},ce.rowactions=function(t,r){var i,a,l,n,s=e(this).closest("tr.jqgrow"),d=s.attr("id"),c=e(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),u=e("#"+o.jqID(c)),p=u[0],f=p.p,h=o.getRelativeRect.call(p,s).top,g=f.colModel[o.getCellIndex(this)],m=e.extend(!0,{extraparam:{}},o.actionsNav||{},f.actionsNavOptions||{},g.formatoptions||{});switch(void 0!==f.editOptions&&(m.editOptions=e.extend(!0,m.editOptions||{},f.editOptions)),void 0!==f.delOptions&&(m.delOptions=f.delOptions),s.hasClass("jqgrid-new-row")&&(m.extraparam[f.prmNames.oper]=f.prmNames.addoper),n={keys:m.keys,oneditfunc:m.onEdit,successfunc:m.onSuccess,url:m.url,extraparam:m.extraparam,aftersavefunc:m.afterSave,errorfunc:m.onError,afterrestorefunc:m.afterRestore,restoreAfterError:m.restoreAfterError,mtype:m.mtype},!f.multiselect&&d!==f.selrow||f.multiselect&&e.inArray(d,f.selarrrow)<0?u.jqGrid("setSelection",d,!0,t):o.fullBoolFeedback.call(p,"onSelectRow","jqGridSelectRow",d,!0,t),r){case"edit":u.jqGrid("editRow",d,n);break;case"save":u.jqGrid("saveRow",d,n);break;case"cancel":u.jqGrid("restoreRow",d,m.afterRestore);break;case"del":m.delOptions=m.delOptions||{},void 0===m.delOptions.top&&(m.delOptions.top=h),u.jqGrid("delGridRow",d,m.delOptions);break;case"formedit":m.editOptions=m.editOptions||{},void 0===m.editOptions.top&&(m.editOptions.top=h,m.editOptions.recreateForm=!0),u.jqGrid("editGridRow",d,m.editOptions);break;default:if(null!=m.custom&&m.custom.length>0)for(a=m.custom.length,i=0;i<a;i++)(l=m.custom[i]).action===r&&e.isFunction(l.onClick)&&l.onClick.call(p,{rowid:d,event:t,action:r,options:l})}return t.stopPropagation&&t.stopPropagation(),!1},(ce.actions=function(t,r,i,a){var l,n,s,d=r.rowId,c="",u=this,p=u.p,f=e(u),h={},g=S.call(f,"edit")||{},m=e.extend({editbutton:!0,delbutton:!0,editformbutton:!1,commonIconClass:"ui-icon",editicon:"ui-icon-pencil",delicon:"ui-icon-trash",saveicon:"ui-icon-disk",cancelicon:"ui-icon-cancel",savetitle:g.bSubmit||"",canceltitle:g.bCancel||""},S.call(f,"nav")||{},o.nav||{},p.navOptions||{},S.call(f,"actionsNav")||{},o.actionsNav||{},p.actionsNavOptions||{},r.colModel.formatoptions||{}),v=function(e){return o.mergeCssClasses(m.commonIconClass,m[e+"icon"])},b=f.jqGrid("getGuiStyles","states.hover"),w="onmouseover=\"jQuery(this).addClass('"+b+"');\" onmouseout=\"jQuery(this).removeClass('"+b+"');\"",y=[{action:"edit",actionName:"formedit",display:m.editformbutton},{action:"edit",display:!m.editformbutton&&m.editbutton},{action:"del",idPrefix:"Delete",display:m.delbutton},{action:"save",display:m.editformbutton||m.editbutton,hidden:!0},{action:"cancel",display:m.editformbutton||m.editbutton,hidden:!0}],x=null!=m.custom?m.custom.length-1:-1;if(void 0===d||ae.isEmpty(d))return"";if(e.isFunction(m.isDisplayButtons))try{h=m.isDisplayButtons.call(u,r,i,a)||{}}catch(e){}for(;x>=0;)y["first"===(n=m.custom[x--]).position?"unshift":"push"](n);for(l=0,x=y.length;l<x;l++)!1!==(s=e.extend({},y[l],h[y[l].action]||{})).display&&(c+=function(e){var t=e.action,r=e.actionName||t,i=void 0!==e.idPrefix?e.idPrefix:t.charAt(0).toUpperCase()+t.substring(1);return"<div title='"+le(m[t+"title"])+(e.hidden?"' style='display:none;":"")+"' class='"+le(f.jqGrid("getGuiStyles","actionsButton","ui-pg-div ui-inline-"+t))+"' "+(null!==i?"id='j"+le(i+"Button_"+d):"")+"' onclick=\"return jQuery.fn.fmatter.rowactions.call(this,event,'"+r+"');\" "+(e.noHovering?"":w)+"><span class='"+le(v(t))+"'></span></div>"}(s));return"<div class='"+le(f.jqGrid("getGuiStyles","actionsDiv","ui-jqgrid-actions"))+"'>"+c+"</div>"}).pageFinalization=function(t){var r=e(this),i=this.p,a=i.colModel,o=a[t],l=function(l,n){var s,d,c,u=0,p=a.length;for(c=0;c<p&&!0===a[c].frozen;c++)u=c;null!=(s=r.jqGrid("getGridRowById",n))&&null!=s.cells&&(t=i.iColByName[o.name],d=e(s.cells[t]).children(".ui-jqgrid-actions"),o.frozen&&i.frozenColumns&&t<=u&&(d=d.add(e(r[0].grid.fbRows[s.rowIndex].cells[t]).children(".ui-jqgrid-actions"))),l?(d.find(">.ui-inline-edit,>.ui-inline-del").show(),d.find(">.ui-inline-save,>.ui-inline-cancel").hide()):(d.find(">.ui-inline-edit,>.ui-inline-del").hide(),d.find(">.ui-inline-save,>.ui-inline-cancel").show()))},n=function(e,t){return l(!0,t),!1},s=function(e,t){return l(!1,t),!1};null!=o.formatoptions&&o.formatoptions.editformbutton||(r.off("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",n),r.on("jqGridInlineAfterRestoreRow.jqGridFormatter jqGridInlineAfterSaveRow.jqGridFormatter",n),r.off("jqGridInlineEditRow.jqGridFormatter",s),r.on("jqGridInlineEditRow.jqGridFormatter",s))},e.unformat=function(t,r,i,a){var l,n=r.colModel,s=n.formatter,d=this.p,c=n.formatoptions||{},u=n.unformat||ce[s]&&ce[s].unformat;if(t instanceof jQuery&&t.length>0&&(t=t[0]),d.treeGrid&&null!=t&&e(t.firstChild).hasClass("tree-wrap")&&(e(t.lastChild).hasClass("cell-wrapper")||e(t.lastChild).hasClass("cell-wrapperleaf"))&&(t=t.lastChild),n.autoResizable&&null!=t&&e(t.firstChild).hasClass(d.autoResizing.wrapperClassName)&&(t=t.firstChild),void 0!==u&&e.isFunction(u))l=u.call(this,e(t).text(),r,t);else if(void 0!==s&&"string"==typeof s){var p=e(this),f=function(e,t){return void 0!==c[t]?c[t]:S.call(p,"formatter."+e+"."+t)},h=function(e,t){var r=f(e,"thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return t.replace(new RegExp(r,"g"),"")};switch(s){case"integer":l=h("integer",e(t).text());break;case"number":l=h("number",e(t).text()).replace(f("number","decimalSeparator"),".");break;case"currency":l=e(t).text();var g=f("currency","prefix"),m=f("currency","suffix");g&&g.length&&(l=l.substr(g.length)),m&&m.length&&(l=l.substr(0,l.length-m.length)),l=h("number",l).replace(f("number","decimalSeparator"),".");break;case"checkbox":l=ce.checkbox.unformat(t,r,t);break;case"select":l=e.unformat.select(t,r,i,a);break;case"actions":return"";default:l=e(t).text()}}return l=void 0!==l?l:!0===a?e(t).text():o.htmlDecode(e(t).html())},e.unformat.select=function(t,r,i,a){var o=[],l=e(t).text(),n=r.colModel;if(!0===a)return l;var s=e.extend({},n.editoptions||{},n.formatoptions||{}),d=void 0===s.separator?":":s.separator,c=void 0===s.delimiter?";":s.delimiter;if(s.value){var u,p=s.value,f=!0===s.multiple,h=[];if(f&&(h=l.split(","),h=e.map(h,function(t){return e.trim(t)})),"string"==typeof p){var g,m=p.split(c),v=0;for(g=0;g<m.length;g++)if((u=m[g].split(d)).length>2&&(u[1]=e.map(u,function(e,t){if(t>0)return e}).join(d)),f)e.inArray(e.trim(u[1]),h)>-1&&(o[v]=u[0],v++);else if(e.trim(u[1])===e.trim(l)){o[0]=u[0];break}}else(ae.isObject(p)||e.isArray(p))&&(f||(h[0]=l),o=e.map(h,function(t){var r;if(e.each(p,function(e,i){if(i===t)return r=e,!1}),void 0!==r)return r}));return o.join(", ")}return l||""},e.unformat.date=function(t,r){var i=e.extend(!0,{},S.call(e(this),"formatter.date"),o.formatter.date||{},r.formatoptions||{});return ae.isEmpty(t)?"":o.parseDate.call(this,i.newformat,t,i.srcformat,i)}});