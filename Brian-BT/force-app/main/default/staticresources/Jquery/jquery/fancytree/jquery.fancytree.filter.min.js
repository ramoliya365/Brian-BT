!function(e,t,n,i){"use strict";function r(e){return(e+"").replace(/([.?*+\^\$\[\]\\(){}|-])/g,"\\$1")}e.ui.fancytree._FancytreeClass.prototype._applyFilterImpl=function(e,t,n){var i,s,a,l=0,o="hide"===this.options.filter.mode;return n=n||{},i=!!n.leavesOnly&&!t,"string"==typeof e&&(s=r(e),a=new RegExp(".*"+s+".*","i"),e=function(e){return!!a.exec(e.title)}),this.enableFilter=!0,this.lastFilterArgs=arguments,this.$div.addClass("fancytree-ext-filter"),o?this.$div.addClass("fancytree-ext-filter-hide"):this.$div.addClass("fancytree-ext-filter-dimm"),this.visit(function(e){delete e.match,delete e.subMatch}),this.visit(function(r){return i&&null!=r.children||!e(r)||(l++,r.match=!0,r.visitParents(function(e){e.subMatch=!0,n.autoExpand&&!e.expanded&&(e.setExpanded(!0,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),e._filterAutoExpanded=!0)}),!t)?void 0:(r.visit(function(e){e.match=!0}),"skip")}),this.render(),l},e.ui.fancytree._FancytreeClass.prototype.filterNodes=function(e,t){return"boolean"==typeof t&&(t={leavesOnly:t},this.warn("Fancytree.filterNodes() leavesOnly option is deprecated since 2015-04-20.")),this._applyFilterImpl(e,!1,t)},e.ui.fancytree._FancytreeClass.prototype.applyFilter=function(e){return this.warn("Fancytree.applyFilter() is deprecated since 2014-05-10. Use .filterNodes() instead."),this.filterNodes.apply(this,arguments)},e.ui.fancytree._FancytreeClass.prototype.filterBranches=function(e,t){return this._applyFilterImpl(e,!0,null)},e.ui.fancytree._FancytreeClass.prototype.clearFilter=function(){this.visit(function(e){delete e.match,delete e.subMatch,e._filterAutoExpanded&&e.expanded&&e.setExpanded(!1,{noAnimation:!0,noEvents:!0,scrollIntoView:!1}),delete e._filterAutoExpanded}),this.enableFilter=!1,this.lastFilterArgs=null,this.$div.removeClass("fancytree-ext-filter fancytree-ext-filter-dimm fancytree-ext-filter-hide"),this.render()},e.ui.fancytree.registerExtension({name:"filter",version:"0.4.0",options:{autoApply:!0,mode:"dimm"},nodeLoadChildren:function(e,t){return this._superApply(arguments).done(function(){e.tree.enableFilter&&e.tree.lastFilterArgs&&e.options.filter.autoApply&&e.tree._applyFilterImpl.apply(e.tree,e.tree.lastFilterArgs)})},nodeSetExpanded:function(e,t,n){return delete e.node._filterAutoExpanded,this._superApply(arguments)},nodeRenderStatus:function(t){var n,i=t.node,r=t.tree,s=e(i[r.statusClassPropName]);return n=this._superApply(arguments),s.length&&r.enableFilter?(s.toggleClass("fancytree-match",!!i.match).toggleClass("fancytree-submatch",!!i.subMatch).toggleClass("fancytree-hide",!(i.match||i.subMatch)),n):n}})}(jQuery,window,document);